var Xg=g=>{throw TypeError(g)};var cu=(g,t,e)=>t.has(g)||Xg("Cannot "+e);var $t=(g,t,e)=>(cu(g,t,"read from private field"),e?e.call(g):t.get(g)),wn=(g,t,e)=>t.has(g)?Xg("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(g):t.set(g,e),ze=(g,t,e,i)=>(cu(g,t,"write to private field"),i?i.call(g,e):t.set(g,e),e),Tn=(g,t,e)=>(cu(g,t,"access private method"),e);var $g=(g,t,e,i)=>({set _(a){ze(g,t,a,e)},get _(){return $t(g,t,i)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();var uu={exports:{}},Ya={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wg;function Rv(){if(Wg)return Ya;Wg=1;var g=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:g,type:i,key:l,ref:a!==void 0?a:null,props:o}}return Ya.Fragment=t,Ya.jsx=e,Ya.jsxs=e,Ya}var Kg;function Mv(){return Kg||(Kg=1,uu.exports=Rv()),uu.exports}var E=Mv(),hu={exports:{}},Ct={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qg;function Nv(){if(Qg)return Ct;Qg=1;var g=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;function y(k){return k===null||typeof k!="object"?null:(k=m&&k[m]||k["@@iterator"],typeof k=="function"?k:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,x={};function w(k,K,st){this.props=k,this.context=K,this.refs=x,this.updater=st||b}w.prototype.isReactComponent={},w.prototype.setState=function(k,K){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,K,"setState")},w.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function T(){}T.prototype=w.prototype;function O(k,K,st){this.props=k,this.context=K,this.refs=x,this.updater=st||b}var C=O.prototype=new T;C.constructor=O,A(C,w.prototype),C.isPureReactComponent=!0;var N=Array.isArray,R={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function j(k,K,st,et,ot,lt){return st=lt.ref,{$$typeof:g,type:k,key:K,ref:st!==void 0?st:null,props:lt}}function _(k,K){return j(k.type,K,void 0,void 0,void 0,k.props)}function F(k){return typeof k=="object"&&k!==null&&k.$$typeof===g}function $(k){var K={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(st){return K[st]})}var X=/\/+/g;function at(k,K){return typeof k=="object"&&k!==null&&k.key!=null?$(""+k.key):K.toString(36)}function V(){}function J(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(V,V):(k.status="pending",k.then(function(K){k.status==="pending"&&(k.status="fulfilled",k.value=K)},function(K){k.status==="pending"&&(k.status="rejected",k.reason=K)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function rt(k,K,st,et,ot){var lt=typeof k;(lt==="undefined"||lt==="boolean")&&(k=null);var W=!1;if(k===null)W=!0;else switch(lt){case"bigint":case"string":case"number":W=!0;break;case"object":switch(k.$$typeof){case g:case t:W=!0;break;case f:return W=k._init,rt(W(k._payload),K,st,et,ot)}}if(W)return ot=ot(k),W=et===""?"."+at(k,0):et,N(ot)?(st="",W!=null&&(st=W.replace(X,"$&/")+"/"),rt(ot,K,st,"",function(ft){return ft})):ot!=null&&(F(ot)&&(ot=_(ot,st+(ot.key==null||k&&k.key===ot.key?"":(""+ot.key).replace(X,"$&/")+"/")+W)),K.push(ot)),1;W=0;var Z=et===""?".":et+":";if(N(k))for(var it=0;it<k.length;it++)et=k[it],lt=Z+at(et,it),W+=rt(et,K,st,lt,ot);else if(it=y(k),typeof it=="function")for(k=it.call(k),it=0;!(et=k.next()).done;)et=et.value,lt=Z+at(et,it++),W+=rt(et,K,st,lt,ot);else if(lt==="object"){if(typeof k.then=="function")return rt(J(k),K,st,et,ot);throw K=String(k),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return W}function L(k,K,st){if(k==null)return k;var et=[],ot=0;return rt(k,et,"","",function(lt){return K.call(st,lt,ot++)}),et}function P(k){if(k._status===-1){var K=k._result;K=K(),K.then(function(st){(k._status===0||k._status===-1)&&(k._status=1,k._result=st)},function(st){(k._status===0||k._status===-1)&&(k._status=2,k._result=st)}),k._status===-1&&(k._status=0,k._result=K)}if(k._status===1)return k._result.default;throw k._result}var Q=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function ct(){}return Ct.Children={map:L,forEach:function(k,K,st){L(k,function(){K.apply(this,arguments)},st)},count:function(k){var K=0;return L(k,function(){K++}),K},toArray:function(k){return L(k,function(K){return K})||[]},only:function(k){if(!F(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},Ct.Component=w,Ct.Fragment=e,Ct.Profiler=a,Ct.PureComponent=O,Ct.StrictMode=i,Ct.Suspense=h,Ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ct.__COMPILER_RUNTIME={__proto__:null,c:function(k){return R.H.useMemoCache(k)}},Ct.cache=function(k){return function(){return k.apply(null,arguments)}},Ct.cloneElement=function(k,K,st){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var et=A({},k.props),ot=k.key,lt=void 0;if(K!=null)for(W in K.ref!==void 0&&(lt=void 0),K.key!==void 0&&(ot=""+K.key),K)!D.call(K,W)||W==="key"||W==="__self"||W==="__source"||W==="ref"&&K.ref===void 0||(et[W]=K[W]);var W=arguments.length-2;if(W===1)et.children=st;else if(1<W){for(var Z=Array(W),it=0;it<W;it++)Z[it]=arguments[it+2];et.children=Z}return j(k.type,ot,void 0,void 0,lt,et)},Ct.createContext=function(k){return k={$$typeof:l,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:o,_context:k},k},Ct.createElement=function(k,K,st){var et,ot={},lt=null;if(K!=null)for(et in K.key!==void 0&&(lt=""+K.key),K)D.call(K,et)&&et!=="key"&&et!=="__self"&&et!=="__source"&&(ot[et]=K[et]);var W=arguments.length-2;if(W===1)ot.children=st;else if(1<W){for(var Z=Array(W),it=0;it<W;it++)Z[it]=arguments[it+2];ot.children=Z}if(k&&k.defaultProps)for(et in W=k.defaultProps,W)ot[et]===void 0&&(ot[et]=W[et]);return j(k,lt,void 0,void 0,null,ot)},Ct.createRef=function(){return{current:null}},Ct.forwardRef=function(k){return{$$typeof:u,render:k}},Ct.isValidElement=F,Ct.lazy=function(k){return{$$typeof:f,_payload:{_status:-1,_result:k},_init:P}},Ct.memo=function(k,K){return{$$typeof:d,type:k,compare:K===void 0?null:K}},Ct.startTransition=function(k){var K=R.T,st={};R.T=st;try{var et=k(),ot=R.S;ot!==null&&ot(st,et),typeof et=="object"&&et!==null&&typeof et.then=="function"&&et.then(ct,Q)}catch(lt){Q(lt)}finally{R.T=K}},Ct.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Ct.use=function(k){return R.H.use(k)},Ct.useActionState=function(k,K,st){return R.H.useActionState(k,K,st)},Ct.useCallback=function(k,K){return R.H.useCallback(k,K)},Ct.useContext=function(k){return R.H.useContext(k)},Ct.useDebugValue=function(){},Ct.useDeferredValue=function(k,K){return R.H.useDeferredValue(k,K)},Ct.useEffect=function(k,K,st){var et=R.H;if(typeof st=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return et.useEffect(k,K)},Ct.useId=function(){return R.H.useId()},Ct.useImperativeHandle=function(k,K,st){return R.H.useImperativeHandle(k,K,st)},Ct.useInsertionEffect=function(k,K){return R.H.useInsertionEffect(k,K)},Ct.useLayoutEffect=function(k,K){return R.H.useLayoutEffect(k,K)},Ct.useMemo=function(k,K){return R.H.useMemo(k,K)},Ct.useOptimistic=function(k,K){return R.H.useOptimistic(k,K)},Ct.useReducer=function(k,K,st){return R.H.useReducer(k,K,st)},Ct.useRef=function(k){return R.H.useRef(k)},Ct.useState=function(k){return R.H.useState(k)},Ct.useSyncExternalStore=function(k,K,st){return R.H.useSyncExternalStore(k,K,st)},Ct.useTransition=function(){return R.H.useTransition()},Ct.version="19.1.0",Ct}var Zg;function Pu(){return Zg||(Zg=1,hu.exports=Nv()),hu.exports}var mt=Pu(),du={exports:{}},Xa={},fu={exports:{}},gu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jg;function Ov(){return Jg||(Jg=1,function(g){function t(L,P){var Q=L.length;L.push(P);t:for(;0<Q;){var ct=Q-1>>>1,k=L[ct];if(0<a(k,P))L[ct]=P,L[Q]=k,Q=ct;else break t}}function e(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var P=L[0],Q=L.pop();if(Q!==P){L[0]=Q;t:for(var ct=0,k=L.length,K=k>>>1;ct<K;){var st=2*(ct+1)-1,et=L[st],ot=st+1,lt=L[ot];if(0>a(et,Q))ot<k&&0>a(lt,et)?(L[ct]=lt,L[ot]=Q,ct=ot):(L[ct]=et,L[st]=Q,ct=st);else if(ot<k&&0>a(lt,Q))L[ct]=lt,L[ot]=Q,ct=ot;else break t}}return P}function a(L,P){var Q=L.sortIndex-P.sortIndex;return Q!==0?Q:L.id-P.id}if(g.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;g.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();g.unstable_now=function(){return l.now()-u}}var h=[],d=[],f=1,m=null,y=3,b=!1,A=!1,x=!1,w=!1,T=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function N(L){for(var P=e(d);P!==null;){if(P.callback===null)i(d);else if(P.startTime<=L)i(d),P.sortIndex=P.expirationTime,t(h,P);else break;P=e(d)}}function R(L){if(x=!1,N(L),!A)if(e(h)!==null)A=!0,D||(D=!0,at());else{var P=e(d);P!==null&&rt(R,P.startTime-L)}}var D=!1,j=-1,_=5,F=-1;function $(){return w?!0:!(g.unstable_now()-F<_)}function X(){if(w=!1,D){var L=g.unstable_now();F=L;var P=!0;try{t:{A=!1,x&&(x=!1,O(j),j=-1),b=!0;var Q=y;try{e:{for(N(L),m=e(h);m!==null&&!(m.expirationTime>L&&$());){var ct=m.callback;if(typeof ct=="function"){m.callback=null,y=m.priorityLevel;var k=ct(m.expirationTime<=L);if(L=g.unstable_now(),typeof k=="function"){m.callback=k,N(L),P=!0;break e}m===e(h)&&i(h),N(L)}else i(h);m=e(h)}if(m!==null)P=!0;else{var K=e(d);K!==null&&rt(R,K.startTime-L),P=!1}}break t}finally{m=null,y=Q,b=!1}P=void 0}}finally{P?at():D=!1}}}var at;if(typeof C=="function")at=function(){C(X)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,J=V.port2;V.port1.onmessage=X,at=function(){J.postMessage(null)}}else at=function(){T(X,0)};function rt(L,P){j=T(function(){L(g.unstable_now())},P)}g.unstable_IdlePriority=5,g.unstable_ImmediatePriority=1,g.unstable_LowPriority=4,g.unstable_NormalPriority=3,g.unstable_Profiling=null,g.unstable_UserBlockingPriority=2,g.unstable_cancelCallback=function(L){L.callback=null},g.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<L?Math.floor(1e3/L):5},g.unstable_getCurrentPriorityLevel=function(){return y},g.unstable_next=function(L){switch(y){case 1:case 2:case 3:var P=3;break;default:P=y}var Q=y;y=P;try{return L()}finally{y=Q}},g.unstable_requestPaint=function(){w=!0},g.unstable_runWithPriority=function(L,P){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var Q=y;y=L;try{return P()}finally{y=Q}},g.unstable_scheduleCallback=function(L,P,Q){var ct=g.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ct+Q:ct):Q=ct,L){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=Q+k,L={id:f++,callback:P,priorityLevel:L,startTime:Q,expirationTime:k,sortIndex:-1},Q>ct?(L.sortIndex=Q,t(d,L),e(h)===null&&L===e(d)&&(x?(O(j),j=-1):x=!0,rt(R,Q-ct))):(L.sortIndex=k,t(h,L),A||b||(A=!0,D||(D=!0,at()))),L},g.unstable_shouldYield=$,g.unstable_wrapCallback=function(L){var P=y;return function(){var Q=y;y=P;try{return L.apply(this,arguments)}finally{y=Q}}}}(gu)),gu}var qg;function Dv(){return qg||(qg=1,fu.exports=Ov()),fu.exports}var pu={exports:{}},Ne={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tp;function Lv(){if(tp)return Ne;tp=1;var g=Pu();function t(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(h,d,f){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:m==null?null:""+m,children:h,containerInfo:d,implementation:f}}var l=g.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,d){if(h==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Ne.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Ne.createPortal=function(h,d){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return o(h,d,null,f)},Ne.flushSync=function(h){var d=l.T,f=i.p;try{if(l.T=null,i.p=2,h)return h()}finally{l.T=d,i.p=f,i.d.f()}},Ne.preconnect=function(h,d){typeof h=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(h,d))},Ne.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},Ne.preinit=function(h,d){if(typeof h=="string"&&d&&typeof d.as=="string"){var f=d.as,m=u(f,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;f==="style"?i.d.S(h,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:b}):f==="script"&&i.d.X(h,{crossOrigin:m,integrity:y,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Ne.preinitModule=function(h,d){if(typeof h=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var f=u(d.as,d.crossOrigin);i.d.M(h,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(h)},Ne.preload=function(h,d){if(typeof h=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var f=d.as,m=u(f,d.crossOrigin);i.d.L(h,f,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Ne.preloadModule=function(h,d){if(typeof h=="string")if(d){var f=u(d.as,d.crossOrigin);i.d.m(h,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(h)},Ne.requestFormReset=function(h){i.d.r(h)},Ne.unstable_batchedUpdates=function(h,d){return h(d)},Ne.useFormState=function(h,d,f){return l.H.useFormState(h,d,f)},Ne.useFormStatus=function(){return l.H.useHostTransitionStatus()},Ne.version="19.1.0",Ne}var ep;function kv(){if(ep)return pu.exports;ep=1;function g(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g)}catch(t){console.error(t)}}return g(),pu.exports=Lv(),pu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var np;function Pv(){if(np)return Xa;np=1;var g=Dv(),t=Pu(),e=kv();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function o(n){var s=n,r=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(r=s.return),n=s.return;while(n)}return s.tag===3?r:null}function l(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function u(n){if(o(n)!==n)throw Error(i(188))}function h(n){var s=n.alternate;if(!s){if(s=o(n),s===null)throw Error(i(188));return s!==n?null:n}for(var r=n,c=s;;){var p=r.return;if(p===null)break;var v=p.alternate;if(v===null){if(c=p.return,c!==null){r=c;continue}break}if(p.child===v.child){for(v=p.child;v;){if(v===r)return u(p),n;if(v===c)return u(p),s;v=v.sibling}throw Error(i(188))}if(r.return!==c.return)r=p,c=v;else{for(var S=!1,M=p.child;M;){if(M===r){S=!0,r=p,c=v;break}if(M===c){S=!0,c=p,r=v;break}M=M.sibling}if(!S){for(M=v.child;M;){if(M===r){S=!0,r=v,c=p;break}if(M===c){S=!0,c=v,r=p;break}M=M.sibling}if(!S)throw Error(i(189))}}if(r.alternate!==c)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?n:s}function d(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=d(n),s!==null)return s;n=n.sibling}return null}var f=Object.assign,m=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),C=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function at(n){return n===null||typeof n!="object"?null:(n=X&&n[X]||n["@@iterator"],typeof n=="function"?n:null)}var V=Symbol.for("react.client.reference");function J(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===V?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case A:return"Fragment";case w:return"Profiler";case x:return"StrictMode";case R:return"Suspense";case D:return"SuspenseList";case F:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case b:return"Portal";case C:return(n.displayName||"Context")+".Provider";case O:return(n._context.displayName||"Context")+".Consumer";case N:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case j:return s=n.displayName||null,s!==null?s:J(n.type)||"Memo";case _:s=n._payload,n=n._init;try{return J(n(s))}catch{}}return null}var rt=Array.isArray,L=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},ct=[],k=-1;function K(n){return{current:n}}function st(n){0>k||(n.current=ct[k],ct[k]=null,k--)}function et(n,s){k++,ct[k]=n.current,n.current=s}var ot=K(null),lt=K(null),W=K(null),Z=K(null);function it(n,s){switch(et(W,s),et(lt,n),et(ot,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?xg(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=xg(s),n=Ag(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}st(ot),et(ot,n)}function ft(){st(ot),st(lt),st(W)}function At(n){n.memoizedState!==null&&et(Z,n);var s=ot.current,r=Ag(s,n.type);s!==r&&(et(lt,n),et(ot,r))}function ut(n){lt.current===n&&(st(ot),st(lt)),Z.current===n&&(st(Z),za._currentValue=Q)}var Rt=Object.prototype.hasOwnProperty,Pt=g.unstable_scheduleCallback,de=g.unstable_cancelCallback,xe=g.unstable_shouldYield,ae=g.unstable_requestPaint,Ae=g.unstable_now,$i=g.unstable_getCurrentPriorityLevel,ws=g.unstable_ImmediatePriority,th=g.unstable_UserBlockingPriority,pr=g.unstable_NormalPriority,lm=g.unstable_LowPriority,eh=g.unstable_IdlePriority,cm=g.log,um=g.unstable_setDisableYieldValue,Wi=null,Ge=null;function Jn(n){if(typeof cm=="function"&&um(n),Ge&&typeof Ge.setStrictMode=="function")try{Ge.setStrictMode(Wi,n)}catch{}}var Ve=Math.clz32?Math.clz32:fm,hm=Math.log,dm=Math.LN2;function fm(n){return n>>>=0,n===0?32:31-(hm(n)/dm|0)|0}var mr=256,vr=4194304;function Ts(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function yr(n,s,r){var c=n.pendingLanes;if(c===0)return 0;var p=0,v=n.suspendedLanes,S=n.pingedLanes;n=n.warmLanes;var M=c&134217727;return M!==0?(c=M&~v,c!==0?p=Ts(c):(S&=M,S!==0?p=Ts(S):r||(r=M&~n,r!==0&&(p=Ts(r))))):(M=c&~v,M!==0?p=Ts(M):S!==0?p=Ts(S):r||(r=c&~n,r!==0&&(p=Ts(r)))),p===0?0:s!==0&&s!==p&&(s&v)===0&&(v=p&-p,r=s&-s,v>=r||v===32&&(r&4194048)!==0)?s:p}function Ki(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function gm(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nh(){var n=mr;return mr<<=1,(mr&4194048)===0&&(mr=256),n}function sh(){var n=vr;return vr<<=1,(vr&62914560)===0&&(vr=4194304),n}function Jo(n){for(var s=[],r=0;31>r;r++)s.push(n);return s}function Qi(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function pm(n,s,r,c,p,v){var S=n.pendingLanes;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=r,n.entangledLanes&=r,n.errorRecoveryDisabledLanes&=r,n.shellSuspendCounter=0;var M=n.entanglements,I=n.expirationTimes,H=n.hiddenUpdates;for(r=S&~r;0<r;){var q=31-Ve(r),nt=1<<q;M[q]=0,I[q]=-1;var G=H[q];if(G!==null)for(H[q]=null,q=0;q<G.length;q++){var Y=G[q];Y!==null&&(Y.lane&=-536870913)}r&=~nt}c!==0&&ih(n,c,0),v!==0&&p===0&&n.tag!==0&&(n.suspendedLanes|=v&~(S&~s))}function ih(n,s,r){n.pendingLanes|=s,n.suspendedLanes&=~s;var c=31-Ve(s);n.entangledLanes|=s,n.entanglements[c]=n.entanglements[c]|1073741824|r&4194090}function ah(n,s){var r=n.entangledLanes|=s;for(n=n.entanglements;r;){var c=31-Ve(r),p=1<<c;p&s|n[c]&s&&(n[c]|=s),r&=~p}}function qo(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function tl(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function rh(){var n=P.p;return n!==0?n:(n=window.event,n===void 0?32:zg(n.type))}function mm(n,s){var r=P.p;try{return P.p=n,s()}finally{P.p=r}}var qn=Math.random().toString(36).slice(2),Re="__reactFiber$"+qn,Ie="__reactProps$"+qn,Js="__reactContainer$"+qn,el="__reactEvents$"+qn,vm="__reactListeners$"+qn,ym="__reactHandles$"+qn,oh="__reactResources$"+qn,Zi="__reactMarker$"+qn;function nl(n){delete n[Re],delete n[Ie],delete n[el],delete n[vm],delete n[ym]}function qs(n){var s=n[Re];if(s)return s;for(var r=n.parentNode;r;){if(s=r[Js]||r[Re]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(n=Tg(n);n!==null;){if(r=n[Re])return r;n=Tg(n)}return s}n=r,r=n.parentNode}return null}function ti(n){if(n=n[Re]||n[Js]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function Ji(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function ei(n){var s=n[oh];return s||(s=n[oh]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function fe(n){n[Zi]=!0}var lh=new Set,ch={};function Cs(n,s){ni(n,s),ni(n+"Capture",s)}function ni(n,s){for(ch[n]=s,n=0;n<s.length;n++)lh.add(s[n])}var bm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),uh={},hh={};function xm(n){return Rt.call(hh,n)?!0:Rt.call(uh,n)?!1:bm.test(n)?hh[n]=!0:(uh[n]=!0,!1)}function br(n,s,r){if(xm(s))if(r===null)n.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+r)}}function xr(n,s,r){if(r===null)n.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+r)}}function Ln(n,s,r,c){if(c===null)n.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttributeNS(s,r,""+c)}}var sl,dh;function si(n){if(sl===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);sl=s&&s[1]||"",dh=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+sl+n+dh}var il=!1;function al(n,s){if(!n||il)return"";il=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var nt=function(){throw Error()};if(Object.defineProperty(nt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(nt,[])}catch(Y){var G=Y}Reflect.construct(n,[],nt)}else{try{nt.call()}catch(Y){G=Y}n.call(nt.prototype)}}else{try{throw Error()}catch(Y){G=Y}(nt=n())&&typeof nt.catch=="function"&&nt.catch(function(){})}}catch(Y){if(Y&&G&&typeof Y.stack=="string")return[Y.stack,G.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),S=v[0],M=v[1];if(S&&M){var I=S.split(`
`),H=M.split(`
`);for(p=c=0;c<I.length&&!I[c].includes("DetermineComponentFrameRoot");)c++;for(;p<H.length&&!H[p].includes("DetermineComponentFrameRoot");)p++;if(c===I.length||p===H.length)for(c=I.length-1,p=H.length-1;1<=c&&0<=p&&I[c]!==H[p];)p--;for(;1<=c&&0<=p;c--,p--)if(I[c]!==H[p]){if(c!==1||p!==1)do if(c--,p--,0>p||I[c]!==H[p]){var q=`
`+I[c].replace(" at new "," at ");return n.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",n.displayName)),q}while(1<=c&&0<=p);break}}}finally{il=!1,Error.prepareStackTrace=r}return(r=n?n.displayName||n.name:"")?si(r):""}function Am(n){switch(n.tag){case 26:case 27:case 5:return si(n.type);case 16:return si("Lazy");case 13:return si("Suspense");case 19:return si("SuspenseList");case 0:case 15:return al(n.type,!1);case 11:return al(n.type.render,!1);case 1:return al(n.type,!0);case 31:return si("Activity");default:return""}}function fh(n){try{var s="";do s+=Am(n),n=n.return;while(n);return s}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function nn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function gh(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Sm(n){var s=gh(n)?"checked":"value",r=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var p=r.get,v=r.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return p.call(this)},set:function(S){c=""+S,v.call(this,S)}}),Object.defineProperty(n,s,{enumerable:r.enumerable}),{getValue:function(){return c},setValue:function(S){c=""+S},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Ar(n){n._valueTracker||(n._valueTracker=Sm(n))}function ph(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var r=s.getValue(),c="";return n&&(c=gh(n)?n.checked?"true":"false":n.value),n=c,n!==r?(s.setValue(n),!0):!1}function Sr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Em=/[\n"\\]/g;function sn(n){return n.replace(Em,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function rl(n,s,r,c,p,v,S,M){n.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.type=S:n.removeAttribute("type"),s!=null?S==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+nn(s)):n.value!==""+nn(s)&&(n.value=""+nn(s)):S!=="submit"&&S!=="reset"||n.removeAttribute("value"),s!=null?ol(n,S,nn(s)):r!=null?ol(n,S,nn(r)):c!=null&&n.removeAttribute("value"),p==null&&v!=null&&(n.defaultChecked=!!v),p!=null&&(n.checked=p&&typeof p!="function"&&typeof p!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?n.name=""+nn(M):n.removeAttribute("name")}function mh(n,s,r,c,p,v,S,M){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.type=v),s!=null||r!=null){if(!(v!=="submit"&&v!=="reset"||s!=null))return;r=r!=null?""+nn(r):"",s=s!=null?""+nn(s):r,M||s===n.value||(n.value=s),n.defaultValue=s}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=M?n.checked:!!c,n.defaultChecked=!!c,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(n.name=S)}function ol(n,s,r){s==="number"&&Sr(n.ownerDocument)===n||n.defaultValue===""+r||(n.defaultValue=""+r)}function ii(n,s,r,c){if(n=n.options,s){s={};for(var p=0;p<r.length;p++)s["$"+r[p]]=!0;for(r=0;r<n.length;r++)p=s.hasOwnProperty("$"+n[r].value),n[r].selected!==p&&(n[r].selected=p),p&&c&&(n[r].defaultSelected=!0)}else{for(r=""+nn(r),s=null,p=0;p<n.length;p++){if(n[p].value===r){n[p].selected=!0,c&&(n[p].defaultSelected=!0);return}s!==null||n[p].disabled||(s=n[p])}s!==null&&(s.selected=!0)}}function vh(n,s,r){if(s!=null&&(s=""+nn(s),s!==n.value&&(n.value=s),r==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=r!=null?""+nn(r):""}function yh(n,s,r,c){if(s==null){if(c!=null){if(r!=null)throw Error(i(92));if(rt(c)){if(1<c.length)throw Error(i(93));c=c[0]}r=c}r==null&&(r=""),s=r}r=nn(s),n.defaultValue=r,c=n.textContent,c===r&&c!==""&&c!==null&&(n.value=c)}function ai(n,s){if(s){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=s;return}}n.textContent=s}var wm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bh(n,s,r){var c=s.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?c?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":c?n.setProperty(s,r):typeof r!="number"||r===0||wm.has(s)?s==="float"?n.cssFloat=r:n[s]=(""+r).trim():n[s]=r+"px"}function xh(n,s,r){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,r!=null){for(var c in r)!r.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var p in s)c=s[p],s.hasOwnProperty(p)&&r[p]!==c&&bh(n,p,c)}else for(var v in s)s.hasOwnProperty(v)&&bh(n,v,s[v])}function ll(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Cm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Er(n){return Cm.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var cl=null;function ul(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ri=null,oi=null;function Ah(n){var s=ti(n);if(s&&(n=s.stateNode)){var r=n[Ie]||null;t:switch(n=s.stateNode,s.type){case"input":if(rl(n,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),s=r.name,r.type==="radio"&&s!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+sn(""+s)+'"][type="radio"]'),s=0;s<r.length;s++){var c=r[s];if(c!==n&&c.form===n.form){var p=c[Ie]||null;if(!p)throw Error(i(90));rl(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(s=0;s<r.length;s++)c=r[s],c.form===n.form&&ph(c)}break t;case"textarea":vh(n,r.value,r.defaultValue);break t;case"select":s=r.value,s!=null&&ii(n,!!r.multiple,s,!1)}}}var hl=!1;function Sh(n,s,r){if(hl)return n(s,r);hl=!0;try{var c=n(s);return c}finally{if(hl=!1,(ri!==null||oi!==null)&&(lo(),ri&&(s=ri,n=oi,oi=ri=null,Ah(s),n)))for(s=0;s<n.length;s++)Ah(n[s])}}function qi(n,s){var r=n.stateNode;if(r===null)return null;var c=r[Ie]||null;if(c===null)return null;r=c[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break t;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(i(231,s,typeof r));return r}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dl=!1;if(kn)try{var ta={};Object.defineProperty(ta,"passive",{get:function(){dl=!0}}),window.addEventListener("test",ta,ta),window.removeEventListener("test",ta,ta)}catch{dl=!1}var ts=null,fl=null,wr=null;function Eh(){if(wr)return wr;var n,s=fl,r=s.length,c,p="value"in ts?ts.value:ts.textContent,v=p.length;for(n=0;n<r&&s[n]===p[n];n++);var S=r-n;for(c=1;c<=S&&s[r-c]===p[v-c];c++);return wr=p.slice(n,1<c?1-c:void 0)}function Tr(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Cr(){return!0}function wh(){return!1}function je(n){function s(r,c,p,v,S){this._reactName=r,this._targetInst=p,this.type=c,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var M in n)n.hasOwnProperty(M)&&(r=n[M],this[M]=r?r(v):v[M]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Cr:wh,this.isPropagationStopped=wh,this}return f(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Cr)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Cr)},persist:function(){},isPersistent:Cr}),s}var Rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rr=je(Rs),ea=f({},Rs,{view:0,detail:0}),Rm=je(ea),gl,pl,na,Mr=f({},ea,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vl,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==na&&(na&&n.type==="mousemove"?(gl=n.screenX-na.screenX,pl=n.screenY-na.screenY):pl=gl=0,na=n),gl)},movementY:function(n){return"movementY"in n?n.movementY:pl}}),Th=je(Mr),Mm=f({},Mr,{dataTransfer:0}),Nm=je(Mm),Om=f({},ea,{relatedTarget:0}),ml=je(Om),Dm=f({},Rs,{animationName:0,elapsedTime:0,pseudoElement:0}),Lm=je(Dm),km=f({},Rs,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Pm=je(km),Im=f({},Rs,{data:0}),Ch=je(Im),jm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_m={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fm(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Bm[n])?!!s[n]:!1}function vl(){return Fm}var zm=f({},ea,{key:function(n){if(n.key){var s=jm[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Tr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?_m[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vl,charCode:function(n){return n.type==="keypress"?Tr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Tr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Um=je(zm),Hm=f({},Mr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rh=je(Hm),Gm=f({},ea,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vl}),Vm=je(Gm),Ym=f({},Rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xm=je(Ym),$m=f({},Mr,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Wm=je($m),Km=f({},Rs,{newState:0,oldState:0}),Qm=je(Km),Zm=[9,13,27,32],yl=kn&&"CompositionEvent"in window,sa=null;kn&&"documentMode"in document&&(sa=document.documentMode);var Jm=kn&&"TextEvent"in window&&!sa,Mh=kn&&(!yl||sa&&8<sa&&11>=sa),Nh=" ",Oh=!1;function Dh(n,s){switch(n){case"keyup":return Zm.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lh(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var li=!1;function qm(n,s){switch(n){case"compositionend":return Lh(s);case"keypress":return s.which!==32?null:(Oh=!0,Nh);case"textInput":return n=s.data,n===Nh&&Oh?null:n;default:return null}}function t0(n,s){if(li)return n==="compositionend"||!yl&&Dh(n,s)?(n=Eh(),wr=fl=ts=null,li=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Mh&&s.locale!=="ko"?null:s.data;default:return null}}var e0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!e0[n.type]:s==="textarea"}function Ph(n,s,r,c){ri?oi?oi.push(c):oi=[c]:ri=c,s=po(s,"onChange"),0<s.length&&(r=new Rr("onChange","change",null,r,c),n.push({event:r,listeners:s}))}var ia=null,aa=null;function n0(n){pg(n,0)}function Nr(n){var s=Ji(n);if(ph(s))return n}function Ih(n,s){if(n==="change")return s}var jh=!1;if(kn){var bl;if(kn){var xl="oninput"in document;if(!xl){var _h=document.createElement("div");_h.setAttribute("oninput","return;"),xl=typeof _h.oninput=="function"}bl=xl}else bl=!1;jh=bl&&(!document.documentMode||9<document.documentMode)}function Bh(){ia&&(ia.detachEvent("onpropertychange",Fh),aa=ia=null)}function Fh(n){if(n.propertyName==="value"&&Nr(aa)){var s=[];Ph(s,aa,n,ul(n)),Sh(n0,s)}}function s0(n,s,r){n==="focusin"?(Bh(),ia=s,aa=r,ia.attachEvent("onpropertychange",Fh)):n==="focusout"&&Bh()}function i0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Nr(aa)}function a0(n,s){if(n==="click")return Nr(s)}function r0(n,s){if(n==="input"||n==="change")return Nr(s)}function o0(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Ye=typeof Object.is=="function"?Object.is:o0;function ra(n,s){if(Ye(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var r=Object.keys(n),c=Object.keys(s);if(r.length!==c.length)return!1;for(c=0;c<r.length;c++){var p=r[c];if(!Rt.call(s,p)||!Ye(n[p],s[p]))return!1}return!0}function zh(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Uh(n,s){var r=zh(n);n=0;for(var c;r;){if(r.nodeType===3){if(c=n+r.textContent.length,n<=s&&c>=s)return{node:r,offset:s-n};n=c}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=zh(r)}}function Hh(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Hh(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Gh(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Sr(n.document);s instanceof n.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)n=s.contentWindow;else break;s=Sr(n.document)}return s}function Al(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var l0=kn&&"documentMode"in document&&11>=document.documentMode,ci=null,Sl=null,oa=null,El=!1;function Vh(n,s,r){var c=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;El||ci==null||ci!==Sr(c)||(c=ci,"selectionStart"in c&&Al(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),oa&&ra(oa,c)||(oa=c,c=po(Sl,"onSelect"),0<c.length&&(s=new Rr("onSelect","select",null,s,r),n.push({event:s,listeners:c}),s.target=ci)))}function Ms(n,s){var r={};return r[n.toLowerCase()]=s.toLowerCase(),r["Webkit"+n]="webkit"+s,r["Moz"+n]="moz"+s,r}var ui={animationend:Ms("Animation","AnimationEnd"),animationiteration:Ms("Animation","AnimationIteration"),animationstart:Ms("Animation","AnimationStart"),transitionrun:Ms("Transition","TransitionRun"),transitionstart:Ms("Transition","TransitionStart"),transitioncancel:Ms("Transition","TransitionCancel"),transitionend:Ms("Transition","TransitionEnd")},wl={},Yh={};kn&&(Yh=document.createElement("div").style,"AnimationEvent"in window||(delete ui.animationend.animation,delete ui.animationiteration.animation,delete ui.animationstart.animation),"TransitionEvent"in window||delete ui.transitionend.transition);function Ns(n){if(wl[n])return wl[n];if(!ui[n])return n;var s=ui[n],r;for(r in s)if(s.hasOwnProperty(r)&&r in Yh)return wl[n]=s[r];return n}var Xh=Ns("animationend"),$h=Ns("animationiteration"),Wh=Ns("animationstart"),c0=Ns("transitionrun"),u0=Ns("transitionstart"),h0=Ns("transitioncancel"),Kh=Ns("transitionend"),Qh=new Map,Tl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Tl.push("scrollEnd");function gn(n,s){Qh.set(n,s),Cs(s,[n])}var Zh=new WeakMap;function an(n,s){if(typeof n=="object"&&n!==null){var r=Zh.get(n);return r!==void 0?r:(s={value:n,source:s,stack:fh(s)},Zh.set(n,s),s)}return{value:n,source:s,stack:fh(s)}}var rn=[],hi=0,Cl=0;function Or(){for(var n=hi,s=Cl=hi=0;s<n;){var r=rn[s];rn[s++]=null;var c=rn[s];rn[s++]=null;var p=rn[s];rn[s++]=null;var v=rn[s];if(rn[s++]=null,c!==null&&p!==null){var S=c.pending;S===null?p.next=p:(p.next=S.next,S.next=p),c.pending=p}v!==0&&Jh(r,p,v)}}function Dr(n,s,r,c){rn[hi++]=n,rn[hi++]=s,rn[hi++]=r,rn[hi++]=c,Cl|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Rl(n,s,r,c){return Dr(n,s,r,c),Lr(n)}function di(n,s){return Dr(n,null,null,s),Lr(n)}function Jh(n,s,r){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r);for(var p=!1,v=n.return;v!==null;)v.childLanes|=r,c=v.alternate,c!==null&&(c.childLanes|=r),v.tag===22&&(n=v.stateNode,n===null||n._visibility&1||(p=!0)),n=v,v=v.return;return n.tag===3?(v=n.stateNode,p&&s!==null&&(p=31-Ve(r),n=v.hiddenUpdates,c=n[p],c===null?n[p]=[s]:c.push(s),s.lane=r|536870912),v):null}function Lr(n){if(50<La)throw La=0,kc=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var fi={};function d0(n,s,r,c){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xe(n,s,r,c){return new d0(n,s,r,c)}function Ml(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Pn(n,s){var r=n.alternate;return r===null?(r=Xe(n.tag,s,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=s,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&65011712,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,s=n.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r.refCleanup=n.refCleanup,r}function qh(n,s){n.flags&=65011714;var r=n.alternate;return r===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=r.childLanes,n.lanes=r.lanes,n.child=r.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=r.memoizedProps,n.memoizedState=r.memoizedState,n.updateQueue=r.updateQueue,n.type=r.type,s=r.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function kr(n,s,r,c,p,v){var S=0;if(c=n,typeof n=="function")Ml(n)&&(S=1);else if(typeof n=="string")S=gv(n,r,ot.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case F:return n=Xe(31,r,s,p),n.elementType=F,n.lanes=v,n;case A:return Os(r.children,p,v,s);case x:S=8,p|=24;break;case w:return n=Xe(12,r,s,p|2),n.elementType=w,n.lanes=v,n;case R:return n=Xe(13,r,s,p),n.elementType=R,n.lanes=v,n;case D:return n=Xe(19,r,s,p),n.elementType=D,n.lanes=v,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case T:case C:S=10;break t;case O:S=9;break t;case N:S=11;break t;case j:S=14;break t;case _:S=16,c=null;break t}S=29,r=Error(i(130,n===null?"null":typeof n,"")),c=null}return s=Xe(S,r,s,p),s.elementType=n,s.type=c,s.lanes=v,s}function Os(n,s,r,c){return n=Xe(7,n,c,s),n.lanes=r,n}function Nl(n,s,r){return n=Xe(6,n,null,s),n.lanes=r,n}function Ol(n,s,r){return s=Xe(4,n.children!==null?n.children:[],n.key,s),s.lanes=r,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var gi=[],pi=0,Pr=null,Ir=0,on=[],ln=0,Ds=null,In=1,jn="";function Ls(n,s){gi[pi++]=Ir,gi[pi++]=Pr,Pr=n,Ir=s}function td(n,s,r){on[ln++]=In,on[ln++]=jn,on[ln++]=Ds,Ds=n;var c=In;n=jn;var p=32-Ve(c)-1;c&=~(1<<p),r+=1;var v=32-Ve(s)+p;if(30<v){var S=p-p%5;v=(c&(1<<S)-1).toString(32),c>>=S,p-=S,In=1<<32-Ve(s)+p|r<<p|c,jn=v+n}else In=1<<v|r<<p|c,jn=n}function Dl(n){n.return!==null&&(Ls(n,1),td(n,1,0))}function Ll(n){for(;n===Pr;)Pr=gi[--pi],gi[pi]=null,Ir=gi[--pi],gi[pi]=null;for(;n===Ds;)Ds=on[--ln],on[ln]=null,jn=on[--ln],on[ln]=null,In=on[--ln],on[ln]=null}var Le=null,Zt=null,_t=!1,ks=null,bn=!1,kl=Error(i(519));function Ps(n){var s=Error(i(418,""));throw ua(an(s,n)),kl}function ed(n){var s=n.stateNode,r=n.type,c=n.memoizedProps;switch(s[Re]=n,s[Ie]=c,r){case"dialog":Lt("cancel",s),Lt("close",s);break;case"iframe":case"object":case"embed":Lt("load",s);break;case"video":case"audio":for(r=0;r<Pa.length;r++)Lt(Pa[r],s);break;case"source":Lt("error",s);break;case"img":case"image":case"link":Lt("error",s),Lt("load",s);break;case"details":Lt("toggle",s);break;case"input":Lt("invalid",s),mh(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Ar(s);break;case"select":Lt("invalid",s);break;case"textarea":Lt("invalid",s),yh(s,c.value,c.defaultValue,c.children),Ar(s)}r=c.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||s.textContent===""+r||c.suppressHydrationWarning===!0||bg(s.textContent,r)?(c.popover!=null&&(Lt("beforetoggle",s),Lt("toggle",s)),c.onScroll!=null&&Lt("scroll",s),c.onScrollEnd!=null&&Lt("scrollend",s),c.onClick!=null&&(s.onclick=mo),s=!0):s=!1,s||Ps(n)}function nd(n){for(Le=n.return;Le;)switch(Le.tag){case 5:case 13:bn=!1;return;case 27:case 3:bn=!0;return;default:Le=Le.return}}function la(n){if(n!==Le)return!1;if(!_t)return nd(n),_t=!0,!1;var s=n.tag,r;if((r=s!==3&&s!==27)&&((r=s===5)&&(r=n.type,r=!(r!=="form"&&r!=="button")||Kc(n.type,n.memoizedProps)),r=!r),r&&Zt&&Ps(n),nd(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));t:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(r=n.data,r==="/$"){if(s===0){Zt=mn(n.nextSibling);break t}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++;n=n.nextSibling}Zt=null}}else s===27?(s=Zt,ms(n.type)?(n=qc,qc=null,Zt=n):Zt=s):Zt=Le?mn(n.stateNode.nextSibling):null;return!0}function ca(){Zt=Le=null,_t=!1}function sd(){var n=ks;return n!==null&&(Fe===null?Fe=n:Fe.push.apply(Fe,n),ks=null),n}function ua(n){ks===null?ks=[n]:ks.push(n)}var Pl=K(null),Is=null,_n=null;function es(n,s,r){et(Pl,s._currentValue),s._currentValue=r}function Bn(n){n._currentValue=Pl.current,st(Pl)}function Il(n,s,r){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===r)break;n=n.return}}function jl(n,s,r,c){var p=n.child;for(p!==null&&(p.return=n);p!==null;){var v=p.dependencies;if(v!==null){var S=p.child;v=v.firstContext;t:for(;v!==null;){var M=v;v=p;for(var I=0;I<s.length;I++)if(M.context===s[I]){v.lanes|=r,M=v.alternate,M!==null&&(M.lanes|=r),Il(v.return,r,n),c||(S=null);break t}v=M.next}}else if(p.tag===18){if(S=p.return,S===null)throw Error(i(341));S.lanes|=r,v=S.alternate,v!==null&&(v.lanes|=r),Il(S,r,n),S=null}else S=p.child;if(S!==null)S.return=p;else for(S=p;S!==null;){if(S===n){S=null;break}if(p=S.sibling,p!==null){p.return=S.return,S=p;break}S=S.return}p=S}}function ha(n,s,r,c){n=null;for(var p=s,v=!1;p!==null;){if(!v){if((p.flags&524288)!==0)v=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var S=p.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var M=p.type;Ye(p.pendingProps.value,S.value)||(n!==null?n.push(M):n=[M])}}else if(p===Z.current){if(S=p.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(n!==null?n.push(za):n=[za])}p=p.return}n!==null&&jl(s,n,r,c),s.flags|=262144}function jr(n){for(n=n.firstContext;n!==null;){if(!Ye(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function js(n){Is=n,_n=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Me(n){return id(Is,n)}function _r(n,s){return Is===null&&js(n),id(n,s)}function id(n,s){var r=s._currentValue;if(s={context:s,memoizedValue:r,next:null},_n===null){if(n===null)throw Error(i(308));_n=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else _n=_n.next=s;return r}var f0=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(r,c){n.push(c)}};this.abort=function(){s.aborted=!0,n.forEach(function(r){return r()})}},g0=g.unstable_scheduleCallback,p0=g.unstable_NormalPriority,ue={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _l(){return{controller:new f0,data:new Map,refCount:0}}function da(n){n.refCount--,n.refCount===0&&g0(p0,function(){n.controller.abort()})}var fa=null,Bl=0,mi=0,vi=null;function m0(n,s){if(fa===null){var r=fa=[];Bl=0,mi=zc(),vi={status:"pending",value:void 0,then:function(c){r.push(c)}}}return Bl++,s.then(ad,ad),s}function ad(){if(--Bl===0&&fa!==null){vi!==null&&(vi.status="fulfilled");var n=fa;fa=null,mi=0,vi=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function v0(n,s){var r=[],c={status:"pending",value:null,reason:null,then:function(p){r.push(p)}};return n.then(function(){c.status="fulfilled",c.value=s;for(var p=0;p<r.length;p++)(0,r[p])(s)},function(p){for(c.status="rejected",c.reason=p,p=0;p<r.length;p++)(0,r[p])(void 0)}),c}var rd=L.S;L.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&m0(n,s),rd!==null&&rd(n,s)};var _s=K(null);function Fl(){var n=_s.current;return n!==null?n:Yt.pooledCache}function Br(n,s){s===null?et(_s,_s.current):et(_s,s.pool)}function od(){var n=Fl();return n===null?null:{parent:ue._currentValue,pool:n}}var ga=Error(i(460)),ld=Error(i(474)),Fr=Error(i(542)),zl={then:function(){}};function cd(n){return n=n.status,n==="fulfilled"||n==="rejected"}function zr(){}function ud(n,s,r){switch(r=n[r],r===void 0?n.push(s):r!==s&&(s.then(zr,zr),s=r),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,dd(n),n;default:if(typeof s.status=="string")s.then(zr,zr);else{if(n=Yt,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(c){if(s.status==="pending"){var p=s;p.status="fulfilled",p.value=c}},function(c){if(s.status==="pending"){var p=s;p.status="rejected",p.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,dd(n),n}throw pa=s,ga}}var pa=null;function hd(){if(pa===null)throw Error(i(459));var n=pa;return pa=null,n}function dd(n){if(n===ga||n===Fr)throw Error(i(483))}var ns=!1;function Ul(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hl(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ss(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function is(n,s,r){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Bt&2)!==0){var p=c.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),c.pending=s,s=Lr(n),Jh(n,null,r),s}return Dr(n,c,s,r),Lr(n)}function ma(n,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194048)!==0)){var c=s.lanes;c&=n.pendingLanes,r|=c,s.lanes=r,ah(n,r)}}function Gl(n,s){var r=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,r===c)){var p=null,v=null;if(r=r.firstBaseUpdate,r!==null){do{var S={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};v===null?p=v=S:v=v.next=S,r=r.next}while(r!==null);v===null?p=v=s:v=v.next=s}else p=v=s;r={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=s:n.next=s,r.lastBaseUpdate=s}var Vl=!1;function va(){if(Vl){var n=vi;if(n!==null)throw n}}function ya(n,s,r,c){Vl=!1;var p=n.updateQueue;ns=!1;var v=p.firstBaseUpdate,S=p.lastBaseUpdate,M=p.shared.pending;if(M!==null){p.shared.pending=null;var I=M,H=I.next;I.next=null,S===null?v=H:S.next=H,S=I;var q=n.alternate;q!==null&&(q=q.updateQueue,M=q.lastBaseUpdate,M!==S&&(M===null?q.firstBaseUpdate=H:M.next=H,q.lastBaseUpdate=I))}if(v!==null){var nt=p.baseState;S=0,q=H=I=null,M=v;do{var G=M.lane&-536870913,Y=G!==M.lane;if(Y?(It&G)===G:(c&G)===G){G!==0&&G===mi&&(Vl=!0),q!==null&&(q=q.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});t:{var St=n,yt=M;G=s;var Ht=r;switch(yt.tag){case 1:if(St=yt.payload,typeof St=="function"){nt=St.call(Ht,nt,G);break t}nt=St;break t;case 3:St.flags=St.flags&-65537|128;case 0:if(St=yt.payload,G=typeof St=="function"?St.call(Ht,nt,G):St,G==null)break t;nt=f({},nt,G);break t;case 2:ns=!0}}G=M.callback,G!==null&&(n.flags|=64,Y&&(n.flags|=8192),Y=p.callbacks,Y===null?p.callbacks=[G]:Y.push(G))}else Y={lane:G,tag:M.tag,payload:M.payload,callback:M.callback,next:null},q===null?(H=q=Y,I=nt):q=q.next=Y,S|=G;if(M=M.next,M===null){if(M=p.shared.pending,M===null)break;Y=M,M=Y.next,Y.next=null,p.lastBaseUpdate=Y,p.shared.pending=null}}while(!0);q===null&&(I=nt),p.baseState=I,p.firstBaseUpdate=H,p.lastBaseUpdate=q,v===null&&(p.shared.lanes=0),ds|=S,n.lanes=S,n.memoizedState=nt}}function fd(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function gd(n,s){var r=n.callbacks;if(r!==null)for(n.callbacks=null,n=0;n<r.length;n++)fd(r[n],s)}var yi=K(null),Ur=K(0);function pd(n,s){n=Yn,et(Ur,n),et(yi,s),Yn=n|s.baseLanes}function Yl(){et(Ur,Yn),et(yi,yi.current)}function Xl(){Yn=Ur.current,st(yi),st(Ur)}var as=0,Mt=null,zt=null,re=null,Hr=!1,bi=!1,Bs=!1,Gr=0,ba=0,xi=null,y0=0;function qt(){throw Error(i(321))}function $l(n,s){if(s===null)return!1;for(var r=0;r<s.length&&r<n.length;r++)if(!Ye(n[r],s[r]))return!1;return!0}function Wl(n,s,r,c,p,v){return as=v,Mt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,L.H=n===null||n.memoizedState===null?Jd:qd,Bs=!1,v=r(c,p),Bs=!1,bi&&(v=vd(s,r,c,p)),md(n),v}function md(n){L.H=Kr;var s=zt!==null&&zt.next!==null;if(as=0,re=zt=Mt=null,Hr=!1,ba=0,xi=null,s)throw Error(i(300));n===null||ge||(n=n.dependencies,n!==null&&jr(n)&&(ge=!0))}function vd(n,s,r,c){Mt=n;var p=0;do{if(bi&&(xi=null),ba=0,bi=!1,25<=p)throw Error(i(301));if(p+=1,re=zt=null,n.updateQueue!=null){var v=n.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}L.H=T0,v=s(r,c)}while(bi);return v}function b0(){var n=L.H,s=n.useState()[0];return s=typeof s.then=="function"?xa(s):s,n=n.useState()[0],(zt!==null?zt.memoizedState:null)!==n&&(Mt.flags|=1024),s}function Kl(){var n=Gr!==0;return Gr=0,n}function Ql(n,s,r){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~r}function Zl(n){if(Hr){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Hr=!1}as=0,re=zt=Mt=null,bi=!1,ba=Gr=0,xi=null}function _e(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return re===null?Mt.memoizedState=re=n:re=re.next=n,re}function oe(){if(zt===null){var n=Mt.alternate;n=n!==null?n.memoizedState:null}else n=zt.next;var s=re===null?Mt.memoizedState:re.next;if(s!==null)re=s,zt=n;else{if(n===null)throw Mt.alternate===null?Error(i(467)):Error(i(310));zt=n,n={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},re===null?Mt.memoizedState=re=n:re=re.next=n}return re}function Jl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xa(n){var s=ba;return ba+=1,xi===null&&(xi=[]),n=ud(xi,n,s),s=Mt,(re===null?s.memoizedState:re.next)===null&&(s=s.alternate,L.H=s===null||s.memoizedState===null?Jd:qd),n}function Vr(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return xa(n);if(n.$$typeof===C)return Me(n)}throw Error(i(438,String(n)))}function ql(n){var s=null,r=Mt.updateQueue;if(r!==null&&(s=r.memoCache),s==null){var c=Mt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(p){return p.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),r===null&&(r=Jl(),Mt.updateQueue=r),r.memoCache=s,r=s.data[s.index],r===void 0)for(r=s.data[s.index]=Array(n),c=0;c<n;c++)r[c]=$;return s.index++,r}function Fn(n,s){return typeof s=="function"?s(n):s}function Yr(n){var s=oe();return tc(s,zt,n)}function tc(n,s,r){var c=n.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var p=n.baseQueue,v=c.pending;if(v!==null){if(p!==null){var S=p.next;p.next=v.next,v.next=S}s.baseQueue=p=v,c.pending=null}if(v=n.baseState,p===null)n.memoizedState=v;else{s=p.next;var M=S=null,I=null,H=s,q=!1;do{var nt=H.lane&-536870913;if(nt!==H.lane?(It&nt)===nt:(as&nt)===nt){var G=H.revertLane;if(G===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),nt===mi&&(q=!0);else if((as&G)===G){H=H.next,G===mi&&(q=!0);continue}else nt={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},I===null?(M=I=nt,S=v):I=I.next=nt,Mt.lanes|=G,ds|=G;nt=H.action,Bs&&r(v,nt),v=H.hasEagerState?H.eagerState:r(v,nt)}else G={lane:nt,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},I===null?(M=I=G,S=v):I=I.next=G,Mt.lanes|=nt,ds|=nt;H=H.next}while(H!==null&&H!==s);if(I===null?S=v:I.next=M,!Ye(v,n.memoizedState)&&(ge=!0,q&&(r=vi,r!==null)))throw r;n.memoizedState=v,n.baseState=S,n.baseQueue=I,c.lastRenderedState=v}return p===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function ec(n){var s=oe(),r=s.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=n;var c=r.dispatch,p=r.pending,v=s.memoizedState;if(p!==null){r.pending=null;var S=p=p.next;do v=n(v,S.action),S=S.next;while(S!==p);Ye(v,s.memoizedState)||(ge=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),r.lastRenderedState=v}return[v,c]}function yd(n,s,r){var c=Mt,p=oe(),v=_t;if(v){if(r===void 0)throw Error(i(407));r=r()}else r=s();var S=!Ye((zt||p).memoizedState,r);S&&(p.memoizedState=r,ge=!0),p=p.queue;var M=Ad.bind(null,c,p,n);if(Aa(2048,8,M,[n]),p.getSnapshot!==s||S||re!==null&&re.memoizedState.tag&1){if(c.flags|=2048,Ai(9,Xr(),xd.bind(null,c,p,r,s),null),Yt===null)throw Error(i(349));v||(as&124)!==0||bd(c,s,r)}return r}function bd(n,s,r){n.flags|=16384,n={getSnapshot:s,value:r},s=Mt.updateQueue,s===null?(s=Jl(),Mt.updateQueue=s,s.stores=[n]):(r=s.stores,r===null?s.stores=[n]:r.push(n))}function xd(n,s,r,c){s.value=r,s.getSnapshot=c,Sd(s)&&Ed(n)}function Ad(n,s,r){return r(function(){Sd(s)&&Ed(n)})}function Sd(n){var s=n.getSnapshot;n=n.value;try{var r=s();return!Ye(n,r)}catch{return!0}}function Ed(n){var s=di(n,2);s!==null&&Ze(s,n,2)}function nc(n){var s=_e();if(typeof n=="function"){var r=n;if(n=r(),Bs){Jn(!0);try{r()}finally{Jn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fn,lastRenderedState:n},s}function wd(n,s,r,c){return n.baseState=r,tc(n,zt,typeof c=="function"?c:Fn)}function x0(n,s,r,c,p){if(Wr(n))throw Error(i(485));if(n=s.action,n!==null){var v={payload:p,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){v.listeners.push(S)}};L.T!==null?r(!0):v.isTransition=!1,c(v),r=s.pending,r===null?(v.next=s.pending=v,Td(s,v)):(v.next=r.next,s.pending=r.next=v)}}function Td(n,s){var r=s.action,c=s.payload,p=n.state;if(s.isTransition){var v=L.T,S={};L.T=S;try{var M=r(p,c),I=L.S;I!==null&&I(S,M),Cd(n,s,M)}catch(H){sc(n,s,H)}finally{L.T=v}}else try{v=r(p,c),Cd(n,s,v)}catch(H){sc(n,s,H)}}function Cd(n,s,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(c){Rd(n,s,c)},function(c){return sc(n,s,c)}):Rd(n,s,r)}function Rd(n,s,r){s.status="fulfilled",s.value=r,Md(s),n.state=r,s=n.pending,s!==null&&(r=s.next,r===s?n.pending=null:(r=r.next,s.next=r,Td(n,r)))}function sc(n,s,r){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=r,Md(s),s=s.next;while(s!==c)}n.action=null}function Md(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Nd(n,s){return s}function Od(n,s){if(_t){var r=Yt.formState;if(r!==null){t:{var c=Mt;if(_t){if(Zt){e:{for(var p=Zt,v=bn;p.nodeType!==8;){if(!v){p=null;break e}if(p=mn(p.nextSibling),p===null){p=null;break e}}v=p.data,p=v==="F!"||v==="F"?p:null}if(p){Zt=mn(p.nextSibling),c=p.data==="F!";break t}}Ps(c)}c=!1}c&&(s=r[0])}}return r=_e(),r.memoizedState=r.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nd,lastRenderedState:s},r.queue=c,r=Kd.bind(null,Mt,c),c.dispatch=r,c=nc(!1),v=lc.bind(null,Mt,!1,c.queue),c=_e(),p={state:s,dispatch:null,action:n,pending:null},c.queue=p,r=x0.bind(null,Mt,p,v,r),p.dispatch=r,c.memoizedState=n,[s,r,!1]}function Dd(n){var s=oe();return Ld(s,zt,n)}function Ld(n,s,r){if(s=tc(n,s,Nd)[0],n=Yr(Fn)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=xa(s)}catch(S){throw S===ga?Fr:S}else c=s;s=oe();var p=s.queue,v=p.dispatch;return r!==s.memoizedState&&(Mt.flags|=2048,Ai(9,Xr(),A0.bind(null,p,r),null)),[c,v,n]}function A0(n,s){n.action=s}function kd(n){var s=oe(),r=zt;if(r!==null)return Ld(s,r,n);oe(),s=s.memoizedState,r=oe();var c=r.queue.dispatch;return r.memoizedState=n,[s,c,!1]}function Ai(n,s,r,c){return n={tag:n,create:r,deps:c,inst:s,next:null},s=Mt.updateQueue,s===null&&(s=Jl(),Mt.updateQueue=s),r=s.lastEffect,r===null?s.lastEffect=n.next=n:(c=r.next,r.next=n,n.next=c,s.lastEffect=n),n}function Xr(){return{destroy:void 0,resource:void 0}}function Pd(){return oe().memoizedState}function $r(n,s,r,c){var p=_e();c=c===void 0?null:c,Mt.flags|=n,p.memoizedState=Ai(1|s,Xr(),r,c)}function Aa(n,s,r,c){var p=oe();c=c===void 0?null:c;var v=p.memoizedState.inst;zt!==null&&c!==null&&$l(c,zt.memoizedState.deps)?p.memoizedState=Ai(s,v,r,c):(Mt.flags|=n,p.memoizedState=Ai(1|s,v,r,c))}function Id(n,s){$r(8390656,8,n,s)}function jd(n,s){Aa(2048,8,n,s)}function _d(n,s){return Aa(4,2,n,s)}function Bd(n,s){return Aa(4,4,n,s)}function Fd(n,s){if(typeof s=="function"){n=n();var r=s(n);return function(){typeof r=="function"?r():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function zd(n,s,r){r=r!=null?r.concat([n]):null,Aa(4,4,Fd.bind(null,s,n),r)}function ic(){}function Ud(n,s){var r=oe();s=s===void 0?null:s;var c=r.memoizedState;return s!==null&&$l(s,c[1])?c[0]:(r.memoizedState=[n,s],n)}function Hd(n,s){var r=oe();s=s===void 0?null:s;var c=r.memoizedState;if(s!==null&&$l(s,c[1]))return c[0];if(c=n(),Bs){Jn(!0);try{n()}finally{Jn(!1)}}return r.memoizedState=[c,s],c}function ac(n,s,r){return r===void 0||(as&1073741824)!==0?n.memoizedState=s:(n.memoizedState=r,n=Xf(),Mt.lanes|=n,ds|=n,r)}function Gd(n,s,r,c){return Ye(r,s)?r:yi.current!==null?(n=ac(n,r,c),Ye(n,s)||(ge=!0),n):(as&42)===0?(ge=!0,n.memoizedState=r):(n=Xf(),Mt.lanes|=n,ds|=n,s)}function Vd(n,s,r,c,p){var v=P.p;P.p=v!==0&&8>v?v:8;var S=L.T,M={};L.T=M,lc(n,!1,s,r);try{var I=p(),H=L.S;if(H!==null&&H(M,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var q=v0(I,c);Sa(n,s,q,Qe(n))}else Sa(n,s,c,Qe(n))}catch(nt){Sa(n,s,{then:function(){},status:"rejected",reason:nt},Qe())}finally{P.p=v,L.T=S}}function S0(){}function rc(n,s,r,c){if(n.tag!==5)throw Error(i(476));var p=Yd(n).queue;Vd(n,p,s,Q,r===null?S0:function(){return Xd(n),r(c)})}function Yd(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fn,lastRenderedState:Q},next:null};var r={};return s.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fn,lastRenderedState:r},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Xd(n){var s=Yd(n).next.queue;Sa(n,s,{},Qe())}function oc(){return Me(za)}function $d(){return oe().memoizedState}function Wd(){return oe().memoizedState}function E0(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var r=Qe();n=ss(r);var c=is(s,n,r);c!==null&&(Ze(c,s,r),ma(c,s,r)),s={cache:_l()},n.payload=s;return}s=s.return}}function w0(n,s,r){var c=Qe();r={lane:c,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},Wr(n)?Qd(s,r):(r=Rl(n,s,r,c),r!==null&&(Ze(r,n,c),Zd(r,s,c)))}function Kd(n,s,r){var c=Qe();Sa(n,s,r,c)}function Sa(n,s,r,c){var p={lane:c,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(Wr(n))Qd(s,p);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var S=s.lastRenderedState,M=v(S,r);if(p.hasEagerState=!0,p.eagerState=M,Ye(M,S))return Dr(n,s,p,0),Yt===null&&Or(),!1}catch{}finally{}if(r=Rl(n,s,p,c),r!==null)return Ze(r,n,c),Zd(r,s,c),!0}return!1}function lc(n,s,r,c){if(c={lane:2,revertLane:zc(),action:c,hasEagerState:!1,eagerState:null,next:null},Wr(n)){if(s)throw Error(i(479))}else s=Rl(n,r,c,2),s!==null&&Ze(s,n,2)}function Wr(n){var s=n.alternate;return n===Mt||s!==null&&s===Mt}function Qd(n,s){bi=Hr=!0;var r=n.pending;r===null?s.next=s:(s.next=r.next,r.next=s),n.pending=s}function Zd(n,s,r){if((r&4194048)!==0){var c=s.lanes;c&=n.pendingLanes,r|=c,s.lanes=r,ah(n,r)}}var Kr={readContext:Me,use:Vr,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useLayoutEffect:qt,useInsertionEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useSyncExternalStore:qt,useId:qt,useHostTransitionStatus:qt,useFormState:qt,useActionState:qt,useOptimistic:qt,useMemoCache:qt,useCacheRefresh:qt},Jd={readContext:Me,use:Vr,useCallback:function(n,s){return _e().memoizedState=[n,s===void 0?null:s],n},useContext:Me,useEffect:Id,useImperativeHandle:function(n,s,r){r=r!=null?r.concat([n]):null,$r(4194308,4,Fd.bind(null,s,n),r)},useLayoutEffect:function(n,s){return $r(4194308,4,n,s)},useInsertionEffect:function(n,s){$r(4,2,n,s)},useMemo:function(n,s){var r=_e();s=s===void 0?null:s;var c=n();if(Bs){Jn(!0);try{n()}finally{Jn(!1)}}return r.memoizedState=[c,s],c},useReducer:function(n,s,r){var c=_e();if(r!==void 0){var p=r(s);if(Bs){Jn(!0);try{r(s)}finally{Jn(!1)}}}else p=s;return c.memoizedState=c.baseState=p,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:p},c.queue=n,n=n.dispatch=w0.bind(null,Mt,n),[c.memoizedState,n]},useRef:function(n){var s=_e();return n={current:n},s.memoizedState=n},useState:function(n){n=nc(n);var s=n.queue,r=Kd.bind(null,Mt,s);return s.dispatch=r,[n.memoizedState,r]},useDebugValue:ic,useDeferredValue:function(n,s){var r=_e();return ac(r,n,s)},useTransition:function(){var n=nc(!1);return n=Vd.bind(null,Mt,n.queue,!0,!1),_e().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,r){var c=Mt,p=_e();if(_t){if(r===void 0)throw Error(i(407));r=r()}else{if(r=s(),Yt===null)throw Error(i(349));(It&124)!==0||bd(c,s,r)}p.memoizedState=r;var v={value:r,getSnapshot:s};return p.queue=v,Id(Ad.bind(null,c,v,n),[n]),c.flags|=2048,Ai(9,Xr(),xd.bind(null,c,v,r,s),null),r},useId:function(){var n=_e(),s=Yt.identifierPrefix;if(_t){var r=jn,c=In;r=(c&~(1<<32-Ve(c)-1)).toString(32)+r,s=""+s+"R"+r,r=Gr++,0<r&&(s+="H"+r.toString(32)),s+=""}else r=y0++,s=""+s+"r"+r.toString(32)+"";return n.memoizedState=s},useHostTransitionStatus:oc,useFormState:Od,useActionState:Od,useOptimistic:function(n){var s=_e();s.memoizedState=s.baseState=n;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=r,s=lc.bind(null,Mt,!0,r),r.dispatch=s,[n,s]},useMemoCache:ql,useCacheRefresh:function(){return _e().memoizedState=E0.bind(null,Mt)}},qd={readContext:Me,use:Vr,useCallback:Ud,useContext:Me,useEffect:jd,useImperativeHandle:zd,useInsertionEffect:_d,useLayoutEffect:Bd,useMemo:Hd,useReducer:Yr,useRef:Pd,useState:function(){return Yr(Fn)},useDebugValue:ic,useDeferredValue:function(n,s){var r=oe();return Gd(r,zt.memoizedState,n,s)},useTransition:function(){var n=Yr(Fn)[0],s=oe().memoizedState;return[typeof n=="boolean"?n:xa(n),s]},useSyncExternalStore:yd,useId:$d,useHostTransitionStatus:oc,useFormState:Dd,useActionState:Dd,useOptimistic:function(n,s){var r=oe();return wd(r,zt,n,s)},useMemoCache:ql,useCacheRefresh:Wd},T0={readContext:Me,use:Vr,useCallback:Ud,useContext:Me,useEffect:jd,useImperativeHandle:zd,useInsertionEffect:_d,useLayoutEffect:Bd,useMemo:Hd,useReducer:ec,useRef:Pd,useState:function(){return ec(Fn)},useDebugValue:ic,useDeferredValue:function(n,s){var r=oe();return zt===null?ac(r,n,s):Gd(r,zt.memoizedState,n,s)},useTransition:function(){var n=ec(Fn)[0],s=oe().memoizedState;return[typeof n=="boolean"?n:xa(n),s]},useSyncExternalStore:yd,useId:$d,useHostTransitionStatus:oc,useFormState:kd,useActionState:kd,useOptimistic:function(n,s){var r=oe();return zt!==null?wd(r,zt,n,s):(r.baseState=n,[n,r.queue.dispatch])},useMemoCache:ql,useCacheRefresh:Wd},Si=null,Ea=0;function Qr(n){var s=Ea;return Ea+=1,Si===null&&(Si=[]),ud(Si,n,s)}function wa(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Zr(n,s){throw s.$$typeof===m?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function tf(n){var s=n._init;return s(n._payload)}function ef(n){function s(z,B){if(n){var U=z.deletions;U===null?(z.deletions=[B],z.flags|=16):U.push(B)}}function r(z,B){if(!n)return null;for(;B!==null;)s(z,B),B=B.sibling;return null}function c(z){for(var B=new Map;z!==null;)z.key!==null?B.set(z.key,z):B.set(z.index,z),z=z.sibling;return B}function p(z,B){return z=Pn(z,B),z.index=0,z.sibling=null,z}function v(z,B,U){return z.index=U,n?(U=z.alternate,U!==null?(U=U.index,U<B?(z.flags|=67108866,B):U):(z.flags|=67108866,B)):(z.flags|=1048576,B)}function S(z){return n&&z.alternate===null&&(z.flags|=67108866),z}function M(z,B,U,tt){return B===null||B.tag!==6?(B=Nl(U,z.mode,tt),B.return=z,B):(B=p(B,U),B.return=z,B)}function I(z,B,U,tt){var gt=U.type;return gt===A?q(z,B,U.props.children,tt,U.key):B!==null&&(B.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===_&&tf(gt)===B.type)?(B=p(B,U.props),wa(B,U),B.return=z,B):(B=kr(U.type,U.key,U.props,null,z.mode,tt),wa(B,U),B.return=z,B)}function H(z,B,U,tt){return B===null||B.tag!==4||B.stateNode.containerInfo!==U.containerInfo||B.stateNode.implementation!==U.implementation?(B=Ol(U,z.mode,tt),B.return=z,B):(B=p(B,U.children||[]),B.return=z,B)}function q(z,B,U,tt,gt){return B===null||B.tag!==7?(B=Os(U,z.mode,tt,gt),B.return=z,B):(B=p(B,U),B.return=z,B)}function nt(z,B,U){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Nl(""+B,z.mode,U),B.return=z,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case y:return U=kr(B.type,B.key,B.props,null,z.mode,U),wa(U,B),U.return=z,U;case b:return B=Ol(B,z.mode,U),B.return=z,B;case _:var tt=B._init;return B=tt(B._payload),nt(z,B,U)}if(rt(B)||at(B))return B=Os(B,z.mode,U,null),B.return=z,B;if(typeof B.then=="function")return nt(z,Qr(B),U);if(B.$$typeof===C)return nt(z,_r(z,B),U);Zr(z,B)}return null}function G(z,B,U,tt){var gt=B!==null?B.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return gt!==null?null:M(z,B,""+U,tt);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case y:return U.key===gt?I(z,B,U,tt):null;case b:return U.key===gt?H(z,B,U,tt):null;case _:return gt=U._init,U=gt(U._payload),G(z,B,U,tt)}if(rt(U)||at(U))return gt!==null?null:q(z,B,U,tt,null);if(typeof U.then=="function")return G(z,B,Qr(U),tt);if(U.$$typeof===C)return G(z,B,_r(z,U),tt);Zr(z,U)}return null}function Y(z,B,U,tt,gt){if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return z=z.get(U)||null,M(B,z,""+tt,gt);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case y:return z=z.get(tt.key===null?U:tt.key)||null,I(B,z,tt,gt);case b:return z=z.get(tt.key===null?U:tt.key)||null,H(B,z,tt,gt);case _:var Ot=tt._init;return tt=Ot(tt._payload),Y(z,B,U,tt,gt)}if(rt(tt)||at(tt))return z=z.get(U)||null,q(B,z,tt,gt,null);if(typeof tt.then=="function")return Y(z,B,U,Qr(tt),gt);if(tt.$$typeof===C)return Y(z,B,U,_r(B,tt),gt);Zr(B,tt)}return null}function St(z,B,U,tt){for(var gt=null,Ot=null,pt=B,bt=B=0,me=null;pt!==null&&bt<U.length;bt++){pt.index>bt?(me=pt,pt=null):me=pt.sibling;var jt=G(z,pt,U[bt],tt);if(jt===null){pt===null&&(pt=me);break}n&&pt&&jt.alternate===null&&s(z,pt),B=v(jt,B,bt),Ot===null?gt=jt:Ot.sibling=jt,Ot=jt,pt=me}if(bt===U.length)return r(z,pt),_t&&Ls(z,bt),gt;if(pt===null){for(;bt<U.length;bt++)pt=nt(z,U[bt],tt),pt!==null&&(B=v(pt,B,bt),Ot===null?gt=pt:Ot.sibling=pt,Ot=pt);return _t&&Ls(z,bt),gt}for(pt=c(pt);bt<U.length;bt++)me=Y(pt,z,bt,U[bt],tt),me!==null&&(n&&me.alternate!==null&&pt.delete(me.key===null?bt:me.key),B=v(me,B,bt),Ot===null?gt=me:Ot.sibling=me,Ot=me);return n&&pt.forEach(function(As){return s(z,As)}),_t&&Ls(z,bt),gt}function yt(z,B,U,tt){if(U==null)throw Error(i(151));for(var gt=null,Ot=null,pt=B,bt=B=0,me=null,jt=U.next();pt!==null&&!jt.done;bt++,jt=U.next()){pt.index>bt?(me=pt,pt=null):me=pt.sibling;var As=G(z,pt,jt.value,tt);if(As===null){pt===null&&(pt=me);break}n&&pt&&As.alternate===null&&s(z,pt),B=v(As,B,bt),Ot===null?gt=As:Ot.sibling=As,Ot=As,pt=me}if(jt.done)return r(z,pt),_t&&Ls(z,bt),gt;if(pt===null){for(;!jt.done;bt++,jt=U.next())jt=nt(z,jt.value,tt),jt!==null&&(B=v(jt,B,bt),Ot===null?gt=jt:Ot.sibling=jt,Ot=jt);return _t&&Ls(z,bt),gt}for(pt=c(pt);!jt.done;bt++,jt=U.next())jt=Y(pt,z,bt,jt.value,tt),jt!==null&&(n&&jt.alternate!==null&&pt.delete(jt.key===null?bt:jt.key),B=v(jt,B,bt),Ot===null?gt=jt:Ot.sibling=jt,Ot=jt);return n&&pt.forEach(function(Cv){return s(z,Cv)}),_t&&Ls(z,bt),gt}function Ht(z,B,U,tt){if(typeof U=="object"&&U!==null&&U.type===A&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case y:t:{for(var gt=U.key;B!==null;){if(B.key===gt){if(gt=U.type,gt===A){if(B.tag===7){r(z,B.sibling),tt=p(B,U.props.children),tt.return=z,z=tt;break t}}else if(B.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===_&&tf(gt)===B.type){r(z,B.sibling),tt=p(B,U.props),wa(tt,U),tt.return=z,z=tt;break t}r(z,B);break}else s(z,B);B=B.sibling}U.type===A?(tt=Os(U.props.children,z.mode,tt,U.key),tt.return=z,z=tt):(tt=kr(U.type,U.key,U.props,null,z.mode,tt),wa(tt,U),tt.return=z,z=tt)}return S(z);case b:t:{for(gt=U.key;B!==null;){if(B.key===gt)if(B.tag===4&&B.stateNode.containerInfo===U.containerInfo&&B.stateNode.implementation===U.implementation){r(z,B.sibling),tt=p(B,U.children||[]),tt.return=z,z=tt;break t}else{r(z,B);break}else s(z,B);B=B.sibling}tt=Ol(U,z.mode,tt),tt.return=z,z=tt}return S(z);case _:return gt=U._init,U=gt(U._payload),Ht(z,B,U,tt)}if(rt(U))return St(z,B,U,tt);if(at(U)){if(gt=at(U),typeof gt!="function")throw Error(i(150));return U=gt.call(U),yt(z,B,U,tt)}if(typeof U.then=="function")return Ht(z,B,Qr(U),tt);if(U.$$typeof===C)return Ht(z,B,_r(z,U),tt);Zr(z,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,B!==null&&B.tag===6?(r(z,B.sibling),tt=p(B,U),tt.return=z,z=tt):(r(z,B),tt=Nl(U,z.mode,tt),tt.return=z,z=tt),S(z)):r(z,B)}return function(z,B,U,tt){try{Ea=0;var gt=Ht(z,B,U,tt);return Si=null,gt}catch(pt){if(pt===ga||pt===Fr)throw pt;var Ot=Xe(29,pt,null,z.mode);return Ot.lanes=tt,Ot.return=z,Ot}finally{}}}var Ei=ef(!0),nf=ef(!1),cn=K(null),xn=null;function rs(n){var s=n.alternate;et(he,he.current&1),et(cn,n),xn===null&&(s===null||yi.current!==null||s.memoizedState!==null)&&(xn=n)}function sf(n){if(n.tag===22){if(et(he,he.current),et(cn,n),xn===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(xn=n)}}else os()}function os(){et(he,he.current),et(cn,cn.current)}function zn(n){st(cn),xn===n&&(xn=null),st(he)}var he=K(0);function Jr(n){for(var s=n;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||Jc(r)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function cc(n,s,r,c){s=n.memoizedState,r=r(c,s),r=r==null?s:f({},s,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var uc={enqueueSetState:function(n,s,r){n=n._reactInternals;var c=Qe(),p=ss(c);p.payload=s,r!=null&&(p.callback=r),s=is(n,p,c),s!==null&&(Ze(s,n,c),ma(s,n,c))},enqueueReplaceState:function(n,s,r){n=n._reactInternals;var c=Qe(),p=ss(c);p.tag=1,p.payload=s,r!=null&&(p.callback=r),s=is(n,p,c),s!==null&&(Ze(s,n,c),ma(s,n,c))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var r=Qe(),c=ss(r);c.tag=2,s!=null&&(c.callback=s),s=is(n,c,r),s!==null&&(Ze(s,n,r),ma(s,n,r))}};function af(n,s,r,c,p,v,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,v,S):s.prototype&&s.prototype.isPureReactComponent?!ra(r,c)||!ra(p,v):!0}function rf(n,s,r,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,c),s.state!==n&&uc.enqueueReplaceState(s,s.state,null)}function Fs(n,s){var r=s;if("ref"in s){r={};for(var c in s)c!=="ref"&&(r[c]=s[c])}if(n=n.defaultProps){r===s&&(r=f({},r));for(var p in n)r[p]===void 0&&(r[p]=n[p])}return r}var qr=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function of(n){qr(n)}function lf(n){console.error(n)}function cf(n){qr(n)}function to(n,s){try{var r=n.onUncaughtError;r(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function uf(n,s,r){try{var c=n.onCaughtError;c(r.value,{componentStack:r.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function hc(n,s,r){return r=ss(r),r.tag=3,r.payload={element:null},r.callback=function(){to(n,s)},r}function hf(n){return n=ss(n),n.tag=3,n}function df(n,s,r,c){var p=r.type.getDerivedStateFromError;if(typeof p=="function"){var v=c.value;n.payload=function(){return p(v)},n.callback=function(){uf(s,r,c)}}var S=r.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(n.callback=function(){uf(s,r,c),typeof p!="function"&&(fs===null?fs=new Set([this]):fs.add(this));var M=c.stack;this.componentDidCatch(c.value,{componentStack:M!==null?M:""})})}function C0(n,s,r,c,p){if(r.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=r.alternate,s!==null&&ha(s,r,p,!0),r=cn.current,r!==null){switch(r.tag){case 13:return xn===null?Ic():r.alternate===null&&Jt===0&&(Jt=3),r.flags&=-257,r.flags|=65536,r.lanes=p,c===zl?r.flags|=16384:(s=r.updateQueue,s===null?r.updateQueue=new Set([c]):s.add(c),_c(n,c,p)),!1;case 22:return r.flags|=65536,c===zl?r.flags|=16384:(s=r.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},r.updateQueue=s):(r=s.retryQueue,r===null?s.retryQueue=new Set([c]):r.add(c)),_c(n,c,p)),!1}throw Error(i(435,r.tag))}return _c(n,c,p),Ic(),!1}if(_t)return s=cn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=p,c!==kl&&(n=Error(i(422),{cause:c}),ua(an(n,r)))):(c!==kl&&(s=Error(i(423),{cause:c}),ua(an(s,r))),n=n.current.alternate,n.flags|=65536,p&=-p,n.lanes|=p,c=an(c,r),p=hc(n.stateNode,c,p),Gl(n,p),Jt!==4&&(Jt=2)),!1;var v=Error(i(520),{cause:c});if(v=an(v,r),Da===null?Da=[v]:Da.push(v),Jt!==4&&(Jt=2),s===null)return!0;c=an(c,r),r=s;do{switch(r.tag){case 3:return r.flags|=65536,n=p&-p,r.lanes|=n,n=hc(r.stateNode,c,n),Gl(r,n),!1;case 1:if(s=r.type,v=r.stateNode,(r.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(fs===null||!fs.has(v))))return r.flags|=65536,p&=-p,r.lanes|=p,p=hf(p),df(p,n,r,c),Gl(r,p),!1}r=r.return}while(r!==null);return!1}var ff=Error(i(461)),ge=!1;function Se(n,s,r,c){s.child=n===null?nf(s,null,r,c):Ei(s,n.child,r,c)}function gf(n,s,r,c,p){r=r.render;var v=s.ref;if("ref"in c){var S={};for(var M in c)M!=="ref"&&(S[M]=c[M])}else S=c;return js(s),c=Wl(n,s,r,S,v,p),M=Kl(),n!==null&&!ge?(Ql(n,s,p),Un(n,s,p)):(_t&&M&&Dl(s),s.flags|=1,Se(n,s,c,p),s.child)}function pf(n,s,r,c,p){if(n===null){var v=r.type;return typeof v=="function"&&!Ml(v)&&v.defaultProps===void 0&&r.compare===null?(s.tag=15,s.type=v,mf(n,s,v,c,p)):(n=kr(r.type,null,c,s,s.mode,p),n.ref=s.ref,n.return=s,s.child=n)}if(v=n.child,!bc(n,p)){var S=v.memoizedProps;if(r=r.compare,r=r!==null?r:ra,r(S,c)&&n.ref===s.ref)return Un(n,s,p)}return s.flags|=1,n=Pn(v,c),n.ref=s.ref,n.return=s,s.child=n}function mf(n,s,r,c,p){if(n!==null){var v=n.memoizedProps;if(ra(v,c)&&n.ref===s.ref)if(ge=!1,s.pendingProps=c=v,bc(n,p))(n.flags&131072)!==0&&(ge=!0);else return s.lanes=n.lanes,Un(n,s,p)}return dc(n,s,r,c,p)}function vf(n,s,r){var c=s.pendingProps,p=c.children,v=n!==null?n.memoizedState:null;if(c.mode==="hidden"){if((s.flags&128)!==0){if(c=v!==null?v.baseLanes|r:r,n!==null){for(p=s.child=n.child,v=0;p!==null;)v=v|p.lanes|p.childLanes,p=p.sibling;s.childLanes=v&~c}else s.childLanes=0,s.child=null;return yf(n,s,c,r)}if((r&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Br(s,v!==null?v.cachePool:null),v!==null?pd(s,v):Yl(),sf(s);else return s.lanes=s.childLanes=536870912,yf(n,s,v!==null?v.baseLanes|r:r,r)}else v!==null?(Br(s,v.cachePool),pd(s,v),os(),s.memoizedState=null):(n!==null&&Br(s,null),Yl(),os());return Se(n,s,p,r),s.child}function yf(n,s,r,c){var p=Fl();return p=p===null?null:{parent:ue._currentValue,pool:p},s.memoizedState={baseLanes:r,cachePool:p},n!==null&&Br(s,null),Yl(),sf(s),n!==null&&ha(n,s,c,!0),null}function eo(n,s){var r=s.ref;if(r===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(n===null||n.ref!==r)&&(s.flags|=4194816)}}function dc(n,s,r,c,p){return js(s),r=Wl(n,s,r,c,void 0,p),c=Kl(),n!==null&&!ge?(Ql(n,s,p),Un(n,s,p)):(_t&&c&&Dl(s),s.flags|=1,Se(n,s,r,p),s.child)}function bf(n,s,r,c,p,v){return js(s),s.updateQueue=null,r=vd(s,c,r,p),md(n),c=Kl(),n!==null&&!ge?(Ql(n,s,v),Un(n,s,v)):(_t&&c&&Dl(s),s.flags|=1,Se(n,s,r,v),s.child)}function xf(n,s,r,c,p){if(js(s),s.stateNode===null){var v=fi,S=r.contextType;typeof S=="object"&&S!==null&&(v=Me(S)),v=new r(c,v),s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=uc,s.stateNode=v,v._reactInternals=s,v=s.stateNode,v.props=c,v.state=s.memoizedState,v.refs={},Ul(s),S=r.contextType,v.context=typeof S=="object"&&S!==null?Me(S):fi,v.state=s.memoizedState,S=r.getDerivedStateFromProps,typeof S=="function"&&(cc(s,r,S,c),v.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(S=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),S!==v.state&&uc.enqueueReplaceState(v,v.state,null),ya(s,c,v,p),va(),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(n===null){v=s.stateNode;var M=s.memoizedProps,I=Fs(r,M);v.props=I;var H=v.context,q=r.contextType;S=fi,typeof q=="object"&&q!==null&&(S=Me(q));var nt=r.getDerivedStateFromProps;q=typeof nt=="function"||typeof v.getSnapshotBeforeUpdate=="function",M=s.pendingProps!==M,q||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(M||H!==S)&&rf(s,v,c,S),ns=!1;var G=s.memoizedState;v.state=G,ya(s,c,v,p),va(),H=s.memoizedState,M||G!==H||ns?(typeof nt=="function"&&(cc(s,r,nt,c),H=s.memoizedState),(I=ns||af(s,r,I,c,G,H,S))?(q||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=H),v.props=c,v.state=H,v.context=S,c=I):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{v=s.stateNode,Hl(n,s),S=s.memoizedProps,q=Fs(r,S),v.props=q,nt=s.pendingProps,G=v.context,H=r.contextType,I=fi,typeof H=="object"&&H!==null&&(I=Me(H)),M=r.getDerivedStateFromProps,(H=typeof M=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==nt||G!==I)&&rf(s,v,c,I),ns=!1,G=s.memoizedState,v.state=G,ya(s,c,v,p),va();var Y=s.memoizedState;S!==nt||G!==Y||ns||n!==null&&n.dependencies!==null&&jr(n.dependencies)?(typeof M=="function"&&(cc(s,r,M,c),Y=s.memoizedState),(q=ns||af(s,r,q,c,G,Y,I)||n!==null&&n.dependencies!==null&&jr(n.dependencies))?(H||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,Y,I),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,Y,I)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=Y),v.props=c,v.state=Y,v.context=I,c=q):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),c=!1)}return v=c,eo(n,s),c=(s.flags&128)!==0,v||c?(v=s.stateNode,r=c&&typeof r.getDerivedStateFromError!="function"?null:v.render(),s.flags|=1,n!==null&&c?(s.child=Ei(s,n.child,null,p),s.child=Ei(s,null,r,p)):Se(n,s,r,p),s.memoizedState=v.state,n=s.child):n=Un(n,s,p),n}function Af(n,s,r,c){return ca(),s.flags|=256,Se(n,s,r,c),s.child}var fc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gc(n){return{baseLanes:n,cachePool:od()}}function pc(n,s,r){return n=n!==null?n.childLanes&~r:0,s&&(n|=un),n}function Sf(n,s,r){var c=s.pendingProps,p=!1,v=(s.flags&128)!==0,S;if((S=v)||(S=n!==null&&n.memoizedState===null?!1:(he.current&2)!==0),S&&(p=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,n===null){if(_t){if(p?rs(s):os(),_t){var M=Zt,I;if(I=M){t:{for(I=M,M=bn;I.nodeType!==8;){if(!M){M=null;break t}if(I=mn(I.nextSibling),I===null){M=null;break t}}M=I}M!==null?(s.memoizedState={dehydrated:M,treeContext:Ds!==null?{id:In,overflow:jn}:null,retryLane:536870912,hydrationErrors:null},I=Xe(18,null,null,0),I.stateNode=M,I.return=s,s.child=I,Le=s,Zt=null,I=!0):I=!1}I||Ps(s)}if(M=s.memoizedState,M!==null&&(M=M.dehydrated,M!==null))return Jc(M)?s.lanes=32:s.lanes=536870912,null;zn(s)}return M=c.children,c=c.fallback,p?(os(),p=s.mode,M=no({mode:"hidden",children:M},p),c=Os(c,p,r,null),M.return=s,c.return=s,M.sibling=c,s.child=M,p=s.child,p.memoizedState=gc(r),p.childLanes=pc(n,S,r),s.memoizedState=fc,c):(rs(s),mc(s,M))}if(I=n.memoizedState,I!==null&&(M=I.dehydrated,M!==null)){if(v)s.flags&256?(rs(s),s.flags&=-257,s=vc(n,s,r)):s.memoizedState!==null?(os(),s.child=n.child,s.flags|=128,s=null):(os(),p=c.fallback,M=s.mode,c=no({mode:"visible",children:c.children},M),p=Os(p,M,r,null),p.flags|=2,c.return=s,p.return=s,c.sibling=p,s.child=c,Ei(s,n.child,null,r),c=s.child,c.memoizedState=gc(r),c.childLanes=pc(n,S,r),s.memoizedState=fc,s=p);else if(rs(s),Jc(M)){if(S=M.nextSibling&&M.nextSibling.dataset,S)var H=S.dgst;S=H,c=Error(i(419)),c.stack="",c.digest=S,ua({value:c,source:null,stack:null}),s=vc(n,s,r)}else if(ge||ha(n,s,r,!1),S=(r&n.childLanes)!==0,ge||S){if(S=Yt,S!==null&&(c=r&-r,c=(c&42)!==0?1:qo(c),c=(c&(S.suspendedLanes|r))!==0?0:c,c!==0&&c!==I.retryLane))throw I.retryLane=c,di(n,c),Ze(S,n,c),ff;M.data==="$?"||Ic(),s=vc(n,s,r)}else M.data==="$?"?(s.flags|=192,s.child=n.child,s=null):(n=I.treeContext,Zt=mn(M.nextSibling),Le=s,_t=!0,ks=null,bn=!1,n!==null&&(on[ln++]=In,on[ln++]=jn,on[ln++]=Ds,In=n.id,jn=n.overflow,Ds=s),s=mc(s,c.children),s.flags|=4096);return s}return p?(os(),p=c.fallback,M=s.mode,I=n.child,H=I.sibling,c=Pn(I,{mode:"hidden",children:c.children}),c.subtreeFlags=I.subtreeFlags&65011712,H!==null?p=Pn(H,p):(p=Os(p,M,r,null),p.flags|=2),p.return=s,c.return=s,c.sibling=p,s.child=c,c=p,p=s.child,M=n.child.memoizedState,M===null?M=gc(r):(I=M.cachePool,I!==null?(H=ue._currentValue,I=I.parent!==H?{parent:H,pool:H}:I):I=od(),M={baseLanes:M.baseLanes|r,cachePool:I}),p.memoizedState=M,p.childLanes=pc(n,S,r),s.memoizedState=fc,c):(rs(s),r=n.child,n=r.sibling,r=Pn(r,{mode:"visible",children:c.children}),r.return=s,r.sibling=null,n!==null&&(S=s.deletions,S===null?(s.deletions=[n],s.flags|=16):S.push(n)),s.child=r,s.memoizedState=null,r)}function mc(n,s){return s=no({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function no(n,s){return n=Xe(22,n,null,s),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function vc(n,s,r){return Ei(s,n.child,null,r),n=mc(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Ef(n,s,r){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Il(n.return,s,r)}function yc(n,s,r,c,p){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:r,tailMode:p}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=r,v.tailMode=p)}function wf(n,s,r){var c=s.pendingProps,p=c.revealOrder,v=c.tail;if(Se(n,s,c.children,r),c=he.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)t:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Ef(n,r,s);else if(n.tag===19)Ef(n,r,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}switch(et(he,c),p){case"forwards":for(r=s.child,p=null;r!==null;)n=r.alternate,n!==null&&Jr(n)===null&&(p=r),r=r.sibling;r=p,r===null?(p=s.child,s.child=null):(p=r.sibling,r.sibling=null),yc(s,!1,p,r,v);break;case"backwards":for(r=null,p=s.child,s.child=null;p!==null;){if(n=p.alternate,n!==null&&Jr(n)===null){s.child=p;break}n=p.sibling,p.sibling=r,r=p,p=n}yc(s,!0,r,null,v);break;case"together":yc(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Un(n,s,r){if(n!==null&&(s.dependencies=n.dependencies),ds|=s.lanes,(r&s.childLanes)===0)if(n!==null){if(ha(n,s,r,!1),(r&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,r=Pn(n,n.pendingProps),s.child=r,r.return=s;n.sibling!==null;)n=n.sibling,r=r.sibling=Pn(n,n.pendingProps),r.return=s;r.sibling=null}return s.child}function bc(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&jr(n)))}function R0(n,s,r){switch(s.tag){case 3:it(s,s.stateNode.containerInfo),es(s,ue,n.memoizedState.cache),ca();break;case 27:case 5:At(s);break;case 4:it(s,s.stateNode.containerInfo);break;case 10:es(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(rs(s),s.flags|=128,null):(r&s.child.childLanes)!==0?Sf(n,s,r):(rs(s),n=Un(n,s,r),n!==null?n.sibling:null);rs(s);break;case 19:var p=(n.flags&128)!==0;if(c=(r&s.childLanes)!==0,c||(ha(n,s,r,!1),c=(r&s.childLanes)!==0),p){if(c)return wf(n,s,r);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),et(he,he.current),c)break;return null;case 22:case 23:return s.lanes=0,vf(n,s,r);case 24:es(s,ue,n.memoizedState.cache)}return Un(n,s,r)}function Tf(n,s,r){if(n!==null)if(n.memoizedProps!==s.pendingProps)ge=!0;else{if(!bc(n,r)&&(s.flags&128)===0)return ge=!1,R0(n,s,r);ge=(n.flags&131072)!==0}else ge=!1,_t&&(s.flags&1048576)!==0&&td(s,Ir,s.index);switch(s.lanes=0,s.tag){case 16:t:{n=s.pendingProps;var c=s.elementType,p=c._init;if(c=p(c._payload),s.type=c,typeof c=="function")Ml(c)?(n=Fs(c,n),s.tag=1,s=xf(null,s,c,n,r)):(s.tag=0,s=dc(null,s,c,n,r));else{if(c!=null){if(p=c.$$typeof,p===N){s.tag=11,s=gf(null,s,c,n,r);break t}else if(p===j){s.tag=14,s=pf(null,s,c,n,r);break t}}throw s=J(c)||c,Error(i(306,s,""))}}return s;case 0:return dc(n,s,s.type,s.pendingProps,r);case 1:return c=s.type,p=Fs(c,s.pendingProps),xf(n,s,c,p,r);case 3:t:{if(it(s,s.stateNode.containerInfo),n===null)throw Error(i(387));c=s.pendingProps;var v=s.memoizedState;p=v.element,Hl(n,s),ya(s,c,null,r);var S=s.memoizedState;if(c=S.cache,es(s,ue,c),c!==v.cache&&jl(s,[ue],r,!0),va(),c=S.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){s=Af(n,s,c,r);break t}else if(c!==p){p=an(Error(i(424)),s),ua(p),s=Af(n,s,c,r);break t}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Zt=mn(n.firstChild),Le=s,_t=!0,ks=null,bn=!0,r=nf(s,null,c,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(ca(),c===p){s=Un(n,s,r);break t}Se(n,s,c,r)}s=s.child}return s;case 26:return eo(n,s),n===null?(r=Ng(s.type,null,s.pendingProps,null))?s.memoizedState=r:_t||(r=s.type,n=s.pendingProps,c=vo(W.current).createElement(r),c[Re]=s,c[Ie]=n,we(c,r,n),fe(c),s.stateNode=c):s.memoizedState=Ng(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return At(s),n===null&&_t&&(c=s.stateNode=Cg(s.type,s.pendingProps,W.current),Le=s,bn=!0,p=Zt,ms(s.type)?(qc=p,Zt=mn(c.firstChild)):Zt=p),Se(n,s,s.pendingProps.children,r),eo(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&_t&&((p=c=Zt)&&(c=ev(c,s.type,s.pendingProps,bn),c!==null?(s.stateNode=c,Le=s,Zt=mn(c.firstChild),bn=!1,p=!0):p=!1),p||Ps(s)),At(s),p=s.type,v=s.pendingProps,S=n!==null?n.memoizedProps:null,c=v.children,Kc(p,v)?c=null:S!==null&&Kc(p,S)&&(s.flags|=32),s.memoizedState!==null&&(p=Wl(n,s,b0,null,null,r),za._currentValue=p),eo(n,s),Se(n,s,c,r),s.child;case 6:return n===null&&_t&&((n=r=Zt)&&(r=nv(r,s.pendingProps,bn),r!==null?(s.stateNode=r,Le=s,Zt=null,n=!0):n=!1),n||Ps(s)),null;case 13:return Sf(n,s,r);case 4:return it(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=Ei(s,null,c,r):Se(n,s,c,r),s.child;case 11:return gf(n,s,s.type,s.pendingProps,r);case 7:return Se(n,s,s.pendingProps,r),s.child;case 8:return Se(n,s,s.pendingProps.children,r),s.child;case 12:return Se(n,s,s.pendingProps.children,r),s.child;case 10:return c=s.pendingProps,es(s,s.type,c.value),Se(n,s,c.children,r),s.child;case 9:return p=s.type._context,c=s.pendingProps.children,js(s),p=Me(p),c=c(p),s.flags|=1,Se(n,s,c,r),s.child;case 14:return pf(n,s,s.type,s.pendingProps,r);case 15:return mf(n,s,s.type,s.pendingProps,r);case 19:return wf(n,s,r);case 31:return c=s.pendingProps,r=s.mode,c={mode:c.mode,children:c.children},n===null?(r=no(c,r),r.ref=s.ref,s.child=r,r.return=s,s=r):(r=Pn(n.child,c),r.ref=s.ref,s.child=r,r.return=s,s=r),s;case 22:return vf(n,s,r);case 24:return js(s),c=Me(ue),n===null?(p=Fl(),p===null&&(p=Yt,v=_l(),p.pooledCache=v,v.refCount++,v!==null&&(p.pooledCacheLanes|=r),p=v),s.memoizedState={parent:c,cache:p},Ul(s),es(s,ue,p)):((n.lanes&r)!==0&&(Hl(n,s),ya(s,null,null,r),va()),p=n.memoizedState,v=s.memoizedState,p.parent!==c?(p={parent:c,cache:c},s.memoizedState=p,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=p),es(s,ue,c)):(c=v.cache,es(s,ue,c),c!==p.cache&&jl(s,[ue],r,!0))),Se(n,s,s.pendingProps.children,r),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Hn(n){n.flags|=4}function Cf(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Pg(s)){if(s=cn.current,s!==null&&((It&4194048)===It?xn!==null:(It&62914560)!==It&&(It&536870912)===0||s!==xn))throw pa=zl,ld;n.flags|=8192}}function so(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?sh():536870912,n.lanes|=s,Ri|=s)}function Ta(n,s){if(!_t)switch(n.tailMode){case"hidden":s=n.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Kt(n){var s=n.alternate!==null&&n.alternate.child===n.child,r=0,c=0;if(s)for(var p=n.child;p!==null;)r|=p.lanes|p.childLanes,c|=p.subtreeFlags&65011712,c|=p.flags&65011712,p.return=n,p=p.sibling;else for(p=n.child;p!==null;)r|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=n,p=p.sibling;return n.subtreeFlags|=c,n.childLanes=r,s}function M0(n,s,r){var c=s.pendingProps;switch(Ll(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(s),null;case 1:return Kt(s),null;case 3:return r=s.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Bn(ue),ft(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(la(s)?Hn(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,sd())),Kt(s),null;case 26:return r=s.memoizedState,n===null?(Hn(s),r!==null?(Kt(s),Cf(s,r)):(Kt(s),s.flags&=-16777217)):r?r!==n.memoizedState?(Hn(s),Kt(s),Cf(s,r)):(Kt(s),s.flags&=-16777217):(n.memoizedProps!==c&&Hn(s),Kt(s),s.flags&=-16777217),null;case 27:ut(s),r=W.current;var p=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==c&&Hn(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Kt(s),null}n=ot.current,la(s)?ed(s):(n=Cg(p,c,r),s.stateNode=n,Hn(s))}return Kt(s),null;case 5:if(ut(s),r=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&Hn(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Kt(s),null}if(n=ot.current,la(s))ed(s);else{switch(p=vo(W.current),n){case 1:n=p.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:n=p.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":n=p.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":n=p.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":n=p.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof c.is=="string"?p.createElement("select",{is:c.is}):p.createElement("select"),c.multiple?n.multiple=!0:c.size&&(n.size=c.size);break;default:n=typeof c.is=="string"?p.createElement(r,{is:c.is}):p.createElement(r)}}n[Re]=s,n[Ie]=c;t:for(p=s.child;p!==null;){if(p.tag===5||p.tag===6)n.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===s)break t;for(;p.sibling===null;){if(p.return===null||p.return===s)break t;p=p.return}p.sibling.return=p.return,p=p.sibling}s.stateNode=n;t:switch(we(n,r,c),r){case"button":case"input":case"select":case"textarea":n=!!c.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&Hn(s)}}return Kt(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==c&&Hn(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(n=W.current,la(s)){if(n=s.stateNode,r=s.memoizedProps,c=null,p=Le,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}n[Re]=s,n=!!(n.nodeValue===r||c!==null&&c.suppressHydrationWarning===!0||bg(n.nodeValue,r)),n||Ps(s)}else n=vo(n).createTextNode(c),n[Re]=s,s.stateNode=n}return Kt(s),null;case 13:if(c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(p=la(s),c!==null&&c.dehydrated!==null){if(n===null){if(!p)throw Error(i(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[Re]=s}else ca(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Kt(s),p=!1}else p=sd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=p),p=!0;if(!p)return s.flags&256?(zn(s),s):(zn(s),null)}if(zn(s),(s.flags&128)!==0)return s.lanes=r,s;if(r=c!==null,n=n!==null&&n.memoizedState!==null,r){c=s.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool);var v=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==p&&(c.flags|=2048)}return r!==n&&r&&(s.child.flags|=8192),so(s,s.updateQueue),Kt(s),null;case 4:return ft(),n===null&&Vc(s.stateNode.containerInfo),Kt(s),null;case 10:return Bn(s.type),Kt(s),null;case 19:if(st(he),p=s.memoizedState,p===null)return Kt(s),null;if(c=(s.flags&128)!==0,v=p.rendering,v===null)if(c)Ta(p,!1);else{if(Jt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(v=Jr(n),v!==null){for(s.flags|=128,Ta(p,!1),n=v.updateQueue,s.updateQueue=n,so(s,n),s.subtreeFlags=0,n=r,r=s.child;r!==null;)qh(r,n),r=r.sibling;return et(he,he.current&1|2),s.child}n=n.sibling}p.tail!==null&&Ae()>ro&&(s.flags|=128,c=!0,Ta(p,!1),s.lanes=4194304)}else{if(!c)if(n=Jr(v),n!==null){if(s.flags|=128,c=!0,n=n.updateQueue,s.updateQueue=n,so(s,n),Ta(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!_t)return Kt(s),null}else 2*Ae()-p.renderingStartTime>ro&&r!==536870912&&(s.flags|=128,c=!0,Ta(p,!1),s.lanes=4194304);p.isBackwards?(v.sibling=s.child,s.child=v):(n=p.last,n!==null?n.sibling=v:s.child=v,p.last=v)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=Ae(),s.sibling=null,n=he.current,et(he,c?n&1|2:n&1),s):(Kt(s),null);case 22:case 23:return zn(s),Xl(),c=s.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(r&536870912)!==0&&(s.flags&128)===0&&(Kt(s),s.subtreeFlags&6&&(s.flags|=8192)):Kt(s),r=s.updateQueue,r!==null&&so(s,r.retryQueue),r=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==r&&(s.flags|=2048),n!==null&&st(_s),null;case 24:return r=null,n!==null&&(r=n.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),Bn(ue),Kt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function N0(n,s){switch(Ll(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Bn(ue),ft(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return ut(s),null;case 13:if(zn(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));ca()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return st(he),null;case 4:return ft(),null;case 10:return Bn(s.type),null;case 22:case 23:return zn(s),Xl(),n!==null&&st(_s),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Bn(ue),null;case 25:return null;default:return null}}function Rf(n,s){switch(Ll(s),s.tag){case 3:Bn(ue),ft();break;case 26:case 27:case 5:ut(s);break;case 4:ft();break;case 13:zn(s);break;case 19:st(he);break;case 10:Bn(s.type);break;case 22:case 23:zn(s),Xl(),n!==null&&st(_s);break;case 24:Bn(ue)}}function Ca(n,s){try{var r=s.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var p=c.next;r=p;do{if((r.tag&n)===n){c=void 0;var v=r.create,S=r.inst;c=v(),S.destroy=c}r=r.next}while(r!==p)}}catch(M){Vt(s,s.return,M)}}function ls(n,s,r){try{var c=s.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var v=p.next;c=v;do{if((c.tag&n)===n){var S=c.inst,M=S.destroy;if(M!==void 0){S.destroy=void 0,p=s;var I=r,H=M;try{H()}catch(q){Vt(p,I,q)}}}c=c.next}while(c!==v)}}catch(q){Vt(s,s.return,q)}}function Mf(n){var s=n.updateQueue;if(s!==null){var r=n.stateNode;try{gd(s,r)}catch(c){Vt(n,n.return,c)}}}function Nf(n,s,r){r.props=Fs(n.type,n.memoizedProps),r.state=n.memoizedState;try{r.componentWillUnmount()}catch(c){Vt(n,s,c)}}function Ra(n,s){try{var r=n.ref;if(r!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof r=="function"?n.refCleanup=r(c):r.current=c}}catch(p){Vt(n,s,p)}}function An(n,s){var r=n.ref,c=n.refCleanup;if(r!==null)if(typeof c=="function")try{c()}catch(p){Vt(n,s,p)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(p){Vt(n,s,p)}else r.current=null}function Of(n){var s=n.type,r=n.memoizedProps,c=n.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":r.autoFocus&&c.focus();break t;case"img":r.src?c.src=r.src:r.srcSet&&(c.srcset=r.srcSet)}}catch(p){Vt(n,n.return,p)}}function xc(n,s,r){try{var c=n.stateNode;Q0(c,n.type,r,s),c[Ie]=s}catch(p){Vt(n,n.return,p)}}function Df(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ms(n.type)||n.tag===4}function Ac(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||Df(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ms(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Sc(n,s,r){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(n,s):(s=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,s.appendChild(n),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=mo));else if(c!==4&&(c===27&&ms(n.type)&&(r=n.stateNode,s=null),n=n.child,n!==null))for(Sc(n,s,r),n=n.sibling;n!==null;)Sc(n,s,r),n=n.sibling}function io(n,s,r){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?r.insertBefore(n,s):r.appendChild(n);else if(c!==4&&(c===27&&ms(n.type)&&(r=n.stateNode),n=n.child,n!==null))for(io(n,s,r),n=n.sibling;n!==null;)io(n,s,r),n=n.sibling}function Lf(n){var s=n.stateNode,r=n.memoizedProps;try{for(var c=n.type,p=s.attributes;p.length;)s.removeAttributeNode(p[0]);we(s,c,r),s[Re]=n,s[Ie]=r}catch(v){Vt(n,n.return,v)}}var Gn=!1,te=!1,Ec=!1,kf=typeof WeakSet=="function"?WeakSet:Set,pe=null;function O0(n,s){if(n=n.containerInfo,$c=Eo,n=Gh(n),Al(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else t:{r=(r=n.ownerDocument)&&r.defaultView||window;var c=r.getSelection&&r.getSelection();if(c&&c.rangeCount!==0){r=c.anchorNode;var p=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{r.nodeType,v.nodeType}catch{r=null;break t}var S=0,M=-1,I=-1,H=0,q=0,nt=n,G=null;e:for(;;){for(var Y;nt!==r||p!==0&&nt.nodeType!==3||(M=S+p),nt!==v||c!==0&&nt.nodeType!==3||(I=S+c),nt.nodeType===3&&(S+=nt.nodeValue.length),(Y=nt.firstChild)!==null;)G=nt,nt=Y;for(;;){if(nt===n)break e;if(G===r&&++H===p&&(M=S),G===v&&++q===c&&(I=S),(Y=nt.nextSibling)!==null)break;nt=G,G=nt.parentNode}nt=Y}r=M===-1||I===-1?null:{start:M,end:I}}else r=null}r=r||{start:0,end:0}}else r=null;for(Wc={focusedElem:n,selectionRange:r},Eo=!1,pe=s;pe!==null;)if(s=pe,n=s.child,(s.subtreeFlags&1024)!==0&&n!==null)n.return=s,pe=n;else for(;pe!==null;){switch(s=pe,v=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&v!==null){n=void 0,r=s,p=v.memoizedProps,v=v.memoizedState,c=r.stateNode;try{var St=Fs(r.type,p,r.elementType===r.type);n=c.getSnapshotBeforeUpdate(St,v),c.__reactInternalSnapshotBeforeUpdate=n}catch(yt){Vt(r,r.return,yt)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,r=n.nodeType,r===9)Zc(n);else if(r===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Zc(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,pe=n;break}pe=s.return}}function Pf(n,s,r){var c=r.flags;switch(r.tag){case 0:case 11:case 15:cs(n,r),c&4&&Ca(5,r);break;case 1:if(cs(n,r),c&4)if(n=r.stateNode,s===null)try{n.componentDidMount()}catch(S){Vt(r,r.return,S)}else{var p=Fs(r.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(p,s,n.__reactInternalSnapshotBeforeUpdate)}catch(S){Vt(r,r.return,S)}}c&64&&Mf(r),c&512&&Ra(r,r.return);break;case 3:if(cs(n,r),c&64&&(n=r.updateQueue,n!==null)){if(s=null,r.child!==null)switch(r.child.tag){case 27:case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}try{gd(n,s)}catch(S){Vt(r,r.return,S)}}break;case 27:s===null&&c&4&&Lf(r);case 26:case 5:cs(n,r),s===null&&c&4&&Of(r),c&512&&Ra(r,r.return);break;case 12:cs(n,r);break;case 13:cs(n,r),c&4&&_f(n,r),c&64&&(n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(r=F0.bind(null,r),sv(n,r))));break;case 22:if(c=r.memoizedState!==null||Gn,!c){s=s!==null&&s.memoizedState!==null||te,p=Gn;var v=te;Gn=c,(te=s)&&!v?us(n,r,(r.subtreeFlags&8772)!==0):cs(n,r),Gn=p,te=v}break;case 30:break;default:cs(n,r)}}function If(n){var s=n.alternate;s!==null&&(n.alternate=null,If(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&nl(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Xt=null,Be=!1;function Vn(n,s,r){for(r=r.child;r!==null;)jf(n,s,r),r=r.sibling}function jf(n,s,r){if(Ge&&typeof Ge.onCommitFiberUnmount=="function")try{Ge.onCommitFiberUnmount(Wi,r)}catch{}switch(r.tag){case 26:te||An(r,s),Vn(n,s,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:te||An(r,s);var c=Xt,p=Be;ms(r.type)&&(Xt=r.stateNode,Be=!1),Vn(n,s,r),ja(r.stateNode),Xt=c,Be=p;break;case 5:te||An(r,s);case 6:if(c=Xt,p=Be,Xt=null,Vn(n,s,r),Xt=c,Be=p,Xt!==null)if(Be)try{(Xt.nodeType===9?Xt.body:Xt.nodeName==="HTML"?Xt.ownerDocument.body:Xt).removeChild(r.stateNode)}catch(v){Vt(r,s,v)}else try{Xt.removeChild(r.stateNode)}catch(v){Vt(r,s,v)}break;case 18:Xt!==null&&(Be?(n=Xt,wg(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,r.stateNode),Va(n)):wg(Xt,r.stateNode));break;case 4:c=Xt,p=Be,Xt=r.stateNode.containerInfo,Be=!0,Vn(n,s,r),Xt=c,Be=p;break;case 0:case 11:case 14:case 15:te||ls(2,r,s),te||ls(4,r,s),Vn(n,s,r);break;case 1:te||(An(r,s),c=r.stateNode,typeof c.componentWillUnmount=="function"&&Nf(r,s,c)),Vn(n,s,r);break;case 21:Vn(n,s,r);break;case 22:te=(c=te)||r.memoizedState!==null,Vn(n,s,r),te=c;break;default:Vn(n,s,r)}}function _f(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Va(n)}catch(r){Vt(s,s.return,r)}}function D0(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new kf),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new kf),s;default:throw Error(i(435,n.tag))}}function wc(n,s){var r=D0(n);s.forEach(function(c){var p=z0.bind(null,n,c);r.has(c)||(r.add(c),c.then(p,p))})}function $e(n,s){var r=s.deletions;if(r!==null)for(var c=0;c<r.length;c++){var p=r[c],v=n,S=s,M=S;t:for(;M!==null;){switch(M.tag){case 27:if(ms(M.type)){Xt=M.stateNode,Be=!1;break t}break;case 5:Xt=M.stateNode,Be=!1;break t;case 3:case 4:Xt=M.stateNode.containerInfo,Be=!0;break t}M=M.return}if(Xt===null)throw Error(i(160));jf(v,S,p),Xt=null,Be=!1,v=p.alternate,v!==null&&(v.return=null),p.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Bf(s,n),s=s.sibling}var pn=null;function Bf(n,s){var r=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:$e(s,n),We(n),c&4&&(ls(3,n,n.return),Ca(3,n),ls(5,n,n.return));break;case 1:$e(s,n),We(n),c&512&&(te||r===null||An(r,r.return)),c&64&&Gn&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(r=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=r===null?c:r.concat(c))));break;case 26:var p=pn;if($e(s,n),We(n),c&512&&(te||r===null||An(r,r.return)),c&4){var v=r!==null?r.memoizedState:null;if(c=n.memoizedState,r===null)if(c===null)if(n.stateNode===null){t:{c=n.type,r=n.memoizedProps,p=p.ownerDocument||p;e:switch(c){case"title":v=p.getElementsByTagName("title")[0],(!v||v[Zi]||v[Re]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=p.createElement(c),p.head.insertBefore(v,p.querySelector("head > title"))),we(v,c,r),v[Re]=n,fe(v),c=v;break t;case"link":var S=Lg("link","href",p).get(c+(r.href||""));if(S){for(var M=0;M<S.length;M++)if(v=S[M],v.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&v.getAttribute("rel")===(r.rel==null?null:r.rel)&&v.getAttribute("title")===(r.title==null?null:r.title)&&v.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){S.splice(M,1);break e}}v=p.createElement(c),we(v,c,r),p.head.appendChild(v);break;case"meta":if(S=Lg("meta","content",p).get(c+(r.content||""))){for(M=0;M<S.length;M++)if(v=S[M],v.getAttribute("content")===(r.content==null?null:""+r.content)&&v.getAttribute("name")===(r.name==null?null:r.name)&&v.getAttribute("property")===(r.property==null?null:r.property)&&v.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&v.getAttribute("charset")===(r.charSet==null?null:r.charSet)){S.splice(M,1);break e}}v=p.createElement(c),we(v,c,r),p.head.appendChild(v);break;default:throw Error(i(468,c))}v[Re]=n,fe(v),c=v}n.stateNode=c}else kg(p,n.type,n.stateNode);else n.stateNode=Dg(p,c,n.memoizedProps);else v!==c?(v===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):v.count--,c===null?kg(p,n.type,n.stateNode):Dg(p,c,n.memoizedProps)):c===null&&n.stateNode!==null&&xc(n,n.memoizedProps,r.memoizedProps)}break;case 27:$e(s,n),We(n),c&512&&(te||r===null||An(r,r.return)),r!==null&&c&4&&xc(n,n.memoizedProps,r.memoizedProps);break;case 5:if($e(s,n),We(n),c&512&&(te||r===null||An(r,r.return)),n.flags&32){p=n.stateNode;try{ai(p,"")}catch(Y){Vt(n,n.return,Y)}}c&4&&n.stateNode!=null&&(p=n.memoizedProps,xc(n,p,r!==null?r.memoizedProps:p)),c&1024&&(Ec=!0);break;case 6:if($e(s,n),We(n),c&4){if(n.stateNode===null)throw Error(i(162));c=n.memoizedProps,r=n.stateNode;try{r.nodeValue=c}catch(Y){Vt(n,n.return,Y)}}break;case 3:if(xo=null,p=pn,pn=yo(s.containerInfo),$e(s,n),pn=p,We(n),c&4&&r!==null&&r.memoizedState.isDehydrated)try{Va(s.containerInfo)}catch(Y){Vt(n,n.return,Y)}Ec&&(Ec=!1,Ff(n));break;case 4:c=pn,pn=yo(n.stateNode.containerInfo),$e(s,n),We(n),pn=c;break;case 12:$e(s,n),We(n);break;case 13:$e(s,n),We(n),n.child.flags&8192&&n.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Oc=Ae()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,wc(n,c)));break;case 22:p=n.memoizedState!==null;var I=r!==null&&r.memoizedState!==null,H=Gn,q=te;if(Gn=H||p,te=q||I,$e(s,n),te=q,Gn=H,We(n),c&8192)t:for(s=n.stateNode,s._visibility=p?s._visibility&-2:s._visibility|1,p&&(r===null||I||Gn||te||zs(n)),r=null,s=n;;){if(s.tag===5||s.tag===26){if(r===null){I=r=s;try{if(v=I.stateNode,p)S=v.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{M=I.stateNode;var nt=I.memoizedProps.style,G=nt!=null&&nt.hasOwnProperty("display")?nt.display:null;M.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(Y){Vt(I,I.return,Y)}}}else if(s.tag===6){if(r===null){I=s;try{I.stateNode.nodeValue=p?"":I.memoizedProps}catch(Y){Vt(I,I.return,Y)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break t;for(;s.sibling===null;){if(s.return===null||s.return===n)break t;r===s&&(r=null),s=s.return}r===s&&(r=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=n.updateQueue,c!==null&&(r=c.retryQueue,r!==null&&(c.retryQueue=null,wc(n,r))));break;case 19:$e(s,n),We(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,wc(n,c)));break;case 30:break;case 21:break;default:$e(s,n),We(n)}}function We(n){var s=n.flags;if(s&2){try{for(var r,c=n.return;c!==null;){if(Df(c)){r=c;break}c=c.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var p=r.stateNode,v=Ac(n);io(n,v,p);break;case 5:var S=r.stateNode;r.flags&32&&(ai(S,""),r.flags&=-33);var M=Ac(n);io(n,M,S);break;case 3:case 4:var I=r.stateNode.containerInfo,H=Ac(n);Sc(n,H,I);break;default:throw Error(i(161))}}catch(q){Vt(n,n.return,q)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Ff(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Ff(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function cs(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Pf(n,s.alternate,s),s=s.sibling}function zs(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:ls(4,s,s.return),zs(s);break;case 1:An(s,s.return);var r=s.stateNode;typeof r.componentWillUnmount=="function"&&Nf(s,s.return,r),zs(s);break;case 27:ja(s.stateNode);case 26:case 5:An(s,s.return),zs(s);break;case 22:s.memoizedState===null&&zs(s);break;case 30:zs(s);break;default:zs(s)}n=n.sibling}}function us(n,s,r){for(r=r&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,p=n,v=s,S=v.flags;switch(v.tag){case 0:case 11:case 15:us(p,v,r),Ca(4,v);break;case 1:if(us(p,v,r),c=v,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(H){Vt(c,c.return,H)}if(c=v,p=c.updateQueue,p!==null){var M=c.stateNode;try{var I=p.shared.hiddenCallbacks;if(I!==null)for(p.shared.hiddenCallbacks=null,p=0;p<I.length;p++)fd(I[p],M)}catch(H){Vt(c,c.return,H)}}r&&S&64&&Mf(v),Ra(v,v.return);break;case 27:Lf(v);case 26:case 5:us(p,v,r),r&&c===null&&S&4&&Of(v),Ra(v,v.return);break;case 12:us(p,v,r);break;case 13:us(p,v,r),r&&S&4&&_f(p,v);break;case 22:v.memoizedState===null&&us(p,v,r),Ra(v,v.return);break;case 30:break;default:us(p,v,r)}s=s.sibling}}function Tc(n,s){var r=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==r&&(n!=null&&n.refCount++,r!=null&&da(r))}function Cc(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&da(n))}function Sn(n,s,r,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)zf(n,s,r,c),s=s.sibling}function zf(n,s,r,c){var p=s.flags;switch(s.tag){case 0:case 11:case 15:Sn(n,s,r,c),p&2048&&Ca(9,s);break;case 1:Sn(n,s,r,c);break;case 3:Sn(n,s,r,c),p&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&da(n)));break;case 12:if(p&2048){Sn(n,s,r,c),n=s.stateNode;try{var v=s.memoizedProps,S=v.id,M=v.onPostCommit;typeof M=="function"&&M(S,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(I){Vt(s,s.return,I)}}else Sn(n,s,r,c);break;case 13:Sn(n,s,r,c);break;case 23:break;case 22:v=s.stateNode,S=s.alternate,s.memoizedState!==null?v._visibility&2?Sn(n,s,r,c):Ma(n,s):v._visibility&2?Sn(n,s,r,c):(v._visibility|=2,wi(n,s,r,c,(s.subtreeFlags&10256)!==0)),p&2048&&Tc(S,s);break;case 24:Sn(n,s,r,c),p&2048&&Cc(s.alternate,s);break;default:Sn(n,s,r,c)}}function wi(n,s,r,c,p){for(p=p&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var v=n,S=s,M=r,I=c,H=S.flags;switch(S.tag){case 0:case 11:case 15:wi(v,S,M,I,p),Ca(8,S);break;case 23:break;case 22:var q=S.stateNode;S.memoizedState!==null?q._visibility&2?wi(v,S,M,I,p):Ma(v,S):(q._visibility|=2,wi(v,S,M,I,p)),p&&H&2048&&Tc(S.alternate,S);break;case 24:wi(v,S,M,I,p),p&&H&2048&&Cc(S.alternate,S);break;default:wi(v,S,M,I,p)}s=s.sibling}}function Ma(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var r=n,c=s,p=c.flags;switch(c.tag){case 22:Ma(r,c),p&2048&&Tc(c.alternate,c);break;case 24:Ma(r,c),p&2048&&Cc(c.alternate,c);break;default:Ma(r,c)}s=s.sibling}}var Na=8192;function Ti(n){if(n.subtreeFlags&Na)for(n=n.child;n!==null;)Uf(n),n=n.sibling}function Uf(n){switch(n.tag){case 26:Ti(n),n.flags&Na&&n.memoizedState!==null&&mv(pn,n.memoizedState,n.memoizedProps);break;case 5:Ti(n);break;case 3:case 4:var s=pn;pn=yo(n.stateNode.containerInfo),Ti(n),pn=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=Na,Na=16777216,Ti(n),Na=s):Ti(n));break;default:Ti(n)}}function Hf(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Oa(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var c=s[r];pe=c,Vf(c,n)}Hf(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Gf(n),n=n.sibling}function Gf(n){switch(n.tag){case 0:case 11:case 15:Oa(n),n.flags&2048&&ls(9,n,n.return);break;case 3:Oa(n);break;case 12:Oa(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,ao(n)):Oa(n);break;default:Oa(n)}}function ao(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var c=s[r];pe=c,Vf(c,n)}Hf(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:ls(8,s,s.return),ao(s);break;case 22:r=s.stateNode,r._visibility&2&&(r._visibility&=-3,ao(s));break;default:ao(s)}n=n.sibling}}function Vf(n,s){for(;pe!==null;){var r=pe;switch(r.tag){case 0:case 11:case 15:ls(8,r,s);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var c=r.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:da(r.memoizedState.cache)}if(c=r.child,c!==null)c.return=r,pe=c;else t:for(r=n;pe!==null;){c=pe;var p=c.sibling,v=c.return;if(If(c),c===r){pe=null;break t}if(p!==null){p.return=v,pe=p;break t}pe=v}}}var L0={getCacheForType:function(n){var s=Me(ue),r=s.data.get(n);return r===void 0&&(r=n(),s.data.set(n,r)),r}},k0=typeof WeakMap=="function"?WeakMap:Map,Bt=0,Yt=null,Dt=null,It=0,Ft=0,Ke=null,hs=!1,Ci=!1,Rc=!1,Yn=0,Jt=0,ds=0,Us=0,Mc=0,un=0,Ri=0,Da=null,Fe=null,Nc=!1,Oc=0,ro=1/0,oo=null,fs=null,Ee=0,gs=null,Mi=null,Ni=0,Dc=0,Lc=null,Yf=null,La=0,kc=null;function Qe(){if((Bt&2)!==0&&It!==0)return It&-It;if(L.T!==null){var n=mi;return n!==0?n:zc()}return rh()}function Xf(){un===0&&(un=(It&536870912)===0||_t?nh():536870912);var n=cn.current;return n!==null&&(n.flags|=32),un}function Ze(n,s,r){(n===Yt&&(Ft===2||Ft===9)||n.cancelPendingCommit!==null)&&(Oi(n,0),ps(n,It,un,!1)),Qi(n,r),((Bt&2)===0||n!==Yt)&&(n===Yt&&((Bt&2)===0&&(Us|=r),Jt===4&&ps(n,It,un,!1)),En(n))}function $f(n,s,r){if((Bt&6)!==0)throw Error(i(327));var c=!r&&(s&124)===0&&(s&n.expiredLanes)===0||Ki(n,s),p=c?j0(n,s):jc(n,s,!0),v=c;do{if(p===0){Ci&&!c&&ps(n,s,0,!1);break}else{if(r=n.current.alternate,v&&!P0(r)){p=jc(n,s,!1),v=!1;continue}if(p===2){if(v=s,n.errorRecoveryDisabledLanes&v)var S=0;else S=n.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;t:{var M=n;p=Da;var I=M.current.memoizedState.isDehydrated;if(I&&(Oi(M,S).flags|=256),S=jc(M,S,!1),S!==2){if(Rc&&!I){M.errorRecoveryDisabledLanes|=v,Us|=v,p=4;break t}v=Fe,Fe=p,v!==null&&(Fe===null?Fe=v:Fe.push.apply(Fe,v))}p=S}if(v=!1,p!==2)continue}}if(p===1){Oi(n,0),ps(n,s,0,!0);break}t:{switch(c=n,v=p,v){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:ps(c,s,un,!hs);break t;case 2:Fe=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(p=Oc+300-Ae(),10<p)){if(ps(c,s,un,!hs),yr(c,0,!0)!==0)break t;c.timeoutHandle=Sg(Wf.bind(null,c,r,Fe,oo,Nc,s,un,Us,Ri,hs,v,2,-0,0),p);break t}Wf(c,r,Fe,oo,Nc,s,un,Us,Ri,hs,v,0,-0,0)}}break}while(!0);En(n)}function Wf(n,s,r,c,p,v,S,M,I,H,q,nt,G,Y){if(n.timeoutHandle=-1,nt=s.subtreeFlags,(nt&8192||(nt&16785408)===16785408)&&(Fa={stylesheets:null,count:0,unsuspend:pv},Uf(s),nt=vv(),nt!==null)){n.cancelPendingCommit=nt(eg.bind(null,n,s,v,r,c,p,S,M,I,q,1,G,Y)),ps(n,v,S,!H);return}eg(n,s,v,r,c,p,S,M,I)}function P0(n){for(var s=n;;){var r=s.tag;if((r===0||r===11||r===15)&&s.flags&16384&&(r=s.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var c=0;c<r.length;c++){var p=r[c],v=p.getSnapshot;p=p.value;try{if(!Ye(v(),p))return!1}catch{return!1}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ps(n,s,r,c){s&=~Mc,s&=~Us,n.suspendedLanes|=s,n.pingedLanes&=~s,c&&(n.warmLanes|=s),c=n.expirationTimes;for(var p=s;0<p;){var v=31-Ve(p),S=1<<v;c[v]=-1,p&=~S}r!==0&&ih(n,r,s)}function lo(){return(Bt&6)===0?(ka(0),!1):!0}function Pc(){if(Dt!==null){if(Ft===0)var n=Dt.return;else n=Dt,_n=Is=null,Zl(n),Si=null,Ea=0,n=Dt;for(;n!==null;)Rf(n.alternate,n),n=n.return;Dt=null}}function Oi(n,s){var r=n.timeoutHandle;r!==-1&&(n.timeoutHandle=-1,J0(r)),r=n.cancelPendingCommit,r!==null&&(n.cancelPendingCommit=null,r()),Pc(),Yt=n,Dt=r=Pn(n.current,null),It=s,Ft=0,Ke=null,hs=!1,Ci=Ki(n,s),Rc=!1,Ri=un=Mc=Us=ds=Jt=0,Fe=Da=null,Nc=!1,(s&8)!==0&&(s|=s&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=s;0<c;){var p=31-Ve(c),v=1<<p;s|=n[p],c&=~v}return Yn=s,Or(),r}function Kf(n,s){Mt=null,L.H=Kr,s===ga||s===Fr?(s=hd(),Ft=3):s===ld?(s=hd(),Ft=4):Ft=s===ff?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Ke=s,Dt===null&&(Jt=1,to(n,an(s,n.current)))}function Qf(){var n=L.H;return L.H=Kr,n===null?Kr:n}function Zf(){var n=L.A;return L.A=L0,n}function Ic(){Jt=4,hs||(It&4194048)!==It&&cn.current!==null||(Ci=!0),(ds&134217727)===0&&(Us&134217727)===0||Yt===null||ps(Yt,It,un,!1)}function jc(n,s,r){var c=Bt;Bt|=2;var p=Qf(),v=Zf();(Yt!==n||It!==s)&&(oo=null,Oi(n,s)),s=!1;var S=Jt;t:do try{if(Ft!==0&&Dt!==null){var M=Dt,I=Ke;switch(Ft){case 8:Pc(),S=6;break t;case 3:case 2:case 9:case 6:cn.current===null&&(s=!0);var H=Ft;if(Ft=0,Ke=null,Di(n,M,I,H),r&&Ci){S=0;break t}break;default:H=Ft,Ft=0,Ke=null,Di(n,M,I,H)}}I0(),S=Jt;break}catch(q){Kf(n,q)}while(!0);return s&&n.shellSuspendCounter++,_n=Is=null,Bt=c,L.H=p,L.A=v,Dt===null&&(Yt=null,It=0,Or()),S}function I0(){for(;Dt!==null;)Jf(Dt)}function j0(n,s){var r=Bt;Bt|=2;var c=Qf(),p=Zf();Yt!==n||It!==s?(oo=null,ro=Ae()+500,Oi(n,s)):Ci=Ki(n,s);t:do try{if(Ft!==0&&Dt!==null){s=Dt;var v=Ke;e:switch(Ft){case 1:Ft=0,Ke=null,Di(n,s,v,1);break;case 2:case 9:if(cd(v)){Ft=0,Ke=null,qf(s);break}s=function(){Ft!==2&&Ft!==9||Yt!==n||(Ft=7),En(n)},v.then(s,s);break t;case 3:Ft=7;break t;case 4:Ft=5;break t;case 7:cd(v)?(Ft=0,Ke=null,qf(s)):(Ft=0,Ke=null,Di(n,s,v,7));break;case 5:var S=null;switch(Dt.tag){case 26:S=Dt.memoizedState;case 5:case 27:var M=Dt;if(!S||Pg(S)){Ft=0,Ke=null;var I=M.sibling;if(I!==null)Dt=I;else{var H=M.return;H!==null?(Dt=H,co(H)):Dt=null}break e}}Ft=0,Ke=null,Di(n,s,v,5);break;case 6:Ft=0,Ke=null,Di(n,s,v,6);break;case 8:Pc(),Jt=6;break t;default:throw Error(i(462))}}_0();break}catch(q){Kf(n,q)}while(!0);return _n=Is=null,L.H=c,L.A=p,Bt=r,Dt!==null?0:(Yt=null,It=0,Or(),Jt)}function _0(){for(;Dt!==null&&!xe();)Jf(Dt)}function Jf(n){var s=Tf(n.alternate,n,Yn);n.memoizedProps=n.pendingProps,s===null?co(n):Dt=s}function qf(n){var s=n,r=s.alternate;switch(s.tag){case 15:case 0:s=bf(r,s,s.pendingProps,s.type,void 0,It);break;case 11:s=bf(r,s,s.pendingProps,s.type.render,s.ref,It);break;case 5:Zl(s);default:Rf(r,s),s=Dt=qh(s,Yn),s=Tf(r,s,Yn)}n.memoizedProps=n.pendingProps,s===null?co(n):Dt=s}function Di(n,s,r,c){_n=Is=null,Zl(s),Si=null,Ea=0;var p=s.return;try{if(C0(n,p,s,r,It)){Jt=1,to(n,an(r,n.current)),Dt=null;return}}catch(v){if(p!==null)throw Dt=p,v;Jt=1,to(n,an(r,n.current)),Dt=null;return}s.flags&32768?(_t||c===1?n=!0:Ci||(It&536870912)!==0?n=!1:(hs=n=!0,(c===2||c===9||c===3||c===6)&&(c=cn.current,c!==null&&c.tag===13&&(c.flags|=16384))),tg(s,n)):co(s)}function co(n){var s=n;do{if((s.flags&32768)!==0){tg(s,hs);return}n=s.return;var r=M0(s.alternate,s,Yn);if(r!==null){Dt=r;return}if(s=s.sibling,s!==null){Dt=s;return}Dt=s=n}while(s!==null);Jt===0&&(Jt=5)}function tg(n,s){do{var r=N0(n.alternate,n);if(r!==null){r.flags&=32767,Dt=r;return}if(r=n.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!s&&(n=n.sibling,n!==null)){Dt=n;return}Dt=n=r}while(n!==null);Jt=6,Dt=null}function eg(n,s,r,c,p,v,S,M,I){n.cancelPendingCommit=null;do uo();while(Ee!==0);if((Bt&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(v=s.lanes|s.childLanes,v|=Cl,pm(n,r,v,S,M,I),n===Yt&&(Dt=Yt=null,It=0),Mi=s,gs=n,Ni=r,Dc=v,Lc=p,Yf=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,U0(pr,function(){return rg(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=L.T,L.T=null,p=P.p,P.p=2,S=Bt,Bt|=4;try{O0(n,s,r)}finally{Bt=S,P.p=p,L.T=c}}Ee=1,ng(),sg(),ig()}}function ng(){if(Ee===1){Ee=0;var n=gs,s=Mi,r=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||r){r=L.T,L.T=null;var c=P.p;P.p=2;var p=Bt;Bt|=4;try{Bf(s,n);var v=Wc,S=Gh(n.containerInfo),M=v.focusedElem,I=v.selectionRange;if(S!==M&&M&&M.ownerDocument&&Hh(M.ownerDocument.documentElement,M)){if(I!==null&&Al(M)){var H=I.start,q=I.end;if(q===void 0&&(q=H),"selectionStart"in M)M.selectionStart=H,M.selectionEnd=Math.min(q,M.value.length);else{var nt=M.ownerDocument||document,G=nt&&nt.defaultView||window;if(G.getSelection){var Y=G.getSelection(),St=M.textContent.length,yt=Math.min(I.start,St),Ht=I.end===void 0?yt:Math.min(I.end,St);!Y.extend&&yt>Ht&&(S=Ht,Ht=yt,yt=S);var z=Uh(M,yt),B=Uh(M,Ht);if(z&&B&&(Y.rangeCount!==1||Y.anchorNode!==z.node||Y.anchorOffset!==z.offset||Y.focusNode!==B.node||Y.focusOffset!==B.offset)){var U=nt.createRange();U.setStart(z.node,z.offset),Y.removeAllRanges(),yt>Ht?(Y.addRange(U),Y.extend(B.node,B.offset)):(U.setEnd(B.node,B.offset),Y.addRange(U))}}}}for(nt=[],Y=M;Y=Y.parentNode;)Y.nodeType===1&&nt.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<nt.length;M++){var tt=nt[M];tt.element.scrollLeft=tt.left,tt.element.scrollTop=tt.top}}Eo=!!$c,Wc=$c=null}finally{Bt=p,P.p=c,L.T=r}}n.current=s,Ee=2}}function sg(){if(Ee===2){Ee=0;var n=gs,s=Mi,r=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||r){r=L.T,L.T=null;var c=P.p;P.p=2;var p=Bt;Bt|=4;try{Pf(n,s.alternate,s)}finally{Bt=p,P.p=c,L.T=r}}Ee=3}}function ig(){if(Ee===4||Ee===3){Ee=0,ae();var n=gs,s=Mi,r=Ni,c=Yf;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ee=5:(Ee=0,Mi=gs=null,ag(n,n.pendingLanes));var p=n.pendingLanes;if(p===0&&(fs=null),tl(r),s=s.stateNode,Ge&&typeof Ge.onCommitFiberRoot=="function")try{Ge.onCommitFiberRoot(Wi,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=L.T,p=P.p,P.p=2,L.T=null;try{for(var v=n.onRecoverableError,S=0;S<c.length;S++){var M=c[S];v(M.value,{componentStack:M.stack})}}finally{L.T=s,P.p=p}}(Ni&3)!==0&&uo(),En(n),p=n.pendingLanes,(r&4194090)!==0&&(p&42)!==0?n===kc?La++:(La=0,kc=n):La=0,ka(0)}}function ag(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,da(s)))}function uo(n){return ng(),sg(),ig(),rg()}function rg(){if(Ee!==5)return!1;var n=gs,s=Dc;Dc=0;var r=tl(Ni),c=L.T,p=P.p;try{P.p=32>r?32:r,L.T=null,r=Lc,Lc=null;var v=gs,S=Ni;if(Ee=0,Mi=gs=null,Ni=0,(Bt&6)!==0)throw Error(i(331));var M=Bt;if(Bt|=4,Gf(v.current),zf(v,v.current,S,r),Bt=M,ka(0,!1),Ge&&typeof Ge.onPostCommitFiberRoot=="function")try{Ge.onPostCommitFiberRoot(Wi,v)}catch{}return!0}finally{P.p=p,L.T=c,ag(n,s)}}function og(n,s,r){s=an(r,s),s=hc(n.stateNode,s,2),n=is(n,s,2),n!==null&&(Qi(n,2),En(n))}function Vt(n,s,r){if(n.tag===3)og(n,n,r);else for(;s!==null;){if(s.tag===3){og(s,n,r);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(fs===null||!fs.has(c))){n=an(r,n),r=hf(2),c=is(s,r,2),c!==null&&(df(r,c,s,n),Qi(c,2),En(c));break}}s=s.return}}function _c(n,s,r){var c=n.pingCache;if(c===null){c=n.pingCache=new k0;var p=new Set;c.set(s,p)}else p=c.get(s),p===void 0&&(p=new Set,c.set(s,p));p.has(r)||(Rc=!0,p.add(r),n=B0.bind(null,n,s,r),s.then(n,n))}function B0(n,s,r){var c=n.pingCache;c!==null&&c.delete(s),n.pingedLanes|=n.suspendedLanes&r,n.warmLanes&=~r,Yt===n&&(It&r)===r&&(Jt===4||Jt===3&&(It&62914560)===It&&300>Ae()-Oc?(Bt&2)===0&&Oi(n,0):Mc|=r,Ri===It&&(Ri=0)),En(n)}function lg(n,s){s===0&&(s=sh()),n=di(n,s),n!==null&&(Qi(n,s),En(n))}function F0(n){var s=n.memoizedState,r=0;s!==null&&(r=s.retryLane),lg(n,r)}function z0(n,s){var r=0;switch(n.tag){case 13:var c=n.stateNode,p=n.memoizedState;p!==null&&(r=p.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),lg(n,r)}function U0(n,s){return Pt(n,s)}var ho=null,Li=null,Bc=!1,fo=!1,Fc=!1,Hs=0;function En(n){n!==Li&&n.next===null&&(Li===null?ho=Li=n:Li=Li.next=n),fo=!0,Bc||(Bc=!0,G0())}function ka(n,s){if(!Fc&&fo){Fc=!0;do for(var r=!1,c=ho;c!==null;){if(n!==0){var p=c.pendingLanes;if(p===0)var v=0;else{var S=c.suspendedLanes,M=c.pingedLanes;v=(1<<31-Ve(42|n)+1)-1,v&=p&~(S&~M),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(r=!0,dg(c,v))}else v=It,v=yr(c,c===Yt?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||Ki(c,v)||(r=!0,dg(c,v));c=c.next}while(r);Fc=!1}}function H0(){cg()}function cg(){fo=Bc=!1;var n=0;Hs!==0&&(Z0()&&(n=Hs),Hs=0);for(var s=Ae(),r=null,c=ho;c!==null;){var p=c.next,v=ug(c,s);v===0?(c.next=null,r===null?ho=p:r.next=p,p===null&&(Li=r)):(r=c,(n!==0||(v&3)!==0)&&(fo=!0)),c=p}ka(n)}function ug(n,s){for(var r=n.suspendedLanes,c=n.pingedLanes,p=n.expirationTimes,v=n.pendingLanes&-62914561;0<v;){var S=31-Ve(v),M=1<<S,I=p[S];I===-1?((M&r)===0||(M&c)!==0)&&(p[S]=gm(M,s)):I<=s&&(n.expiredLanes|=M),v&=~M}if(s=Yt,r=It,r=yr(n,n===s?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,r===0||n===s&&(Ft===2||Ft===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&de(c),n.callbackNode=null,n.callbackPriority=0;if((r&3)===0||Ki(n,r)){if(s=r&-r,s===n.callbackPriority)return s;switch(c!==null&&de(c),tl(r)){case 2:case 8:r=th;break;case 32:r=pr;break;case 268435456:r=eh;break;default:r=pr}return c=hg.bind(null,n),r=Pt(r,c),n.callbackPriority=s,n.callbackNode=r,s}return c!==null&&c!==null&&de(c),n.callbackPriority=2,n.callbackNode=null,2}function hg(n,s){if(Ee!==0&&Ee!==5)return n.callbackNode=null,n.callbackPriority=0,null;var r=n.callbackNode;if(uo()&&n.callbackNode!==r)return null;var c=It;return c=yr(n,n===Yt?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:($f(n,c,s),ug(n,Ae()),n.callbackNode!=null&&n.callbackNode===r?hg.bind(null,n):null)}function dg(n,s){if(uo())return null;$f(n,s,!0)}function G0(){q0(function(){(Bt&6)!==0?Pt(ws,H0):cg()})}function zc(){return Hs===0&&(Hs=nh()),Hs}function fg(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Er(""+n)}function gg(n,s){var r=s.ownerDocument.createElement("input");return r.name=s.name,r.value=s.value,n.id&&r.setAttribute("form",n.id),s.parentNode.insertBefore(r,s),n=new FormData(n),r.parentNode.removeChild(r),n}function V0(n,s,r,c,p){if(s==="submit"&&r&&r.stateNode===p){var v=fg((p[Ie]||null).action),S=c.submitter;S&&(s=(s=S[Ie]||null)?fg(s.formAction):S.getAttribute("formAction"),s!==null&&(v=s,S=null));var M=new Rr("action","action",null,c,p);n.push({event:M,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Hs!==0){var I=S?gg(p,S):new FormData(p);rc(r,{pending:!0,data:I,method:p.method,action:v},null,I)}}else typeof v=="function"&&(M.preventDefault(),I=S?gg(p,S):new FormData(p),rc(r,{pending:!0,data:I,method:p.method,action:v},v,I))},currentTarget:p}]})}}for(var Uc=0;Uc<Tl.length;Uc++){var Hc=Tl[Uc],Y0=Hc.toLowerCase(),X0=Hc[0].toUpperCase()+Hc.slice(1);gn(Y0,"on"+X0)}gn(Xh,"onAnimationEnd"),gn($h,"onAnimationIteration"),gn(Wh,"onAnimationStart"),gn("dblclick","onDoubleClick"),gn("focusin","onFocus"),gn("focusout","onBlur"),gn(c0,"onTransitionRun"),gn(u0,"onTransitionStart"),gn(h0,"onTransitionCancel"),gn(Kh,"onTransitionEnd"),ni("onMouseEnter",["mouseout","mouseover"]),ni("onMouseLeave",["mouseout","mouseover"]),ni("onPointerEnter",["pointerout","pointerover"]),ni("onPointerLeave",["pointerout","pointerover"]),Cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Cs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pa));function pg(n,s){s=(s&4)!==0;for(var r=0;r<n.length;r++){var c=n[r],p=c.event;c=c.listeners;t:{var v=void 0;if(s)for(var S=c.length-1;0<=S;S--){var M=c[S],I=M.instance,H=M.currentTarget;if(M=M.listener,I!==v&&p.isPropagationStopped())break t;v=M,p.currentTarget=H;try{v(p)}catch(q){qr(q)}p.currentTarget=null,v=I}else for(S=0;S<c.length;S++){if(M=c[S],I=M.instance,H=M.currentTarget,M=M.listener,I!==v&&p.isPropagationStopped())break t;v=M,p.currentTarget=H;try{v(p)}catch(q){qr(q)}p.currentTarget=null,v=I}}}}function Lt(n,s){var r=s[el];r===void 0&&(r=s[el]=new Set);var c=n+"__bubble";r.has(c)||(mg(s,n,2,!1),r.add(c))}function Gc(n,s,r){var c=0;s&&(c|=4),mg(r,n,c,s)}var go="_reactListening"+Math.random().toString(36).slice(2);function Vc(n){if(!n[go]){n[go]=!0,lh.forEach(function(r){r!=="selectionchange"&&($0.has(r)||Gc(r,!1,n),Gc(r,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[go]||(s[go]=!0,Gc("selectionchange",!1,s))}}function mg(n,s,r,c){switch(zg(s)){case 2:var p=xv;break;case 8:p=Av;break;default:p=iu}r=p.bind(null,s,r,n),p=void 0,!dl||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),c?p!==void 0?n.addEventListener(s,r,{capture:!0,passive:p}):n.addEventListener(s,r,!0):p!==void 0?n.addEventListener(s,r,{passive:p}):n.addEventListener(s,r,!1)}function Yc(n,s,r,c,p){var v=c;if((s&1)===0&&(s&2)===0&&c!==null)t:for(;;){if(c===null)return;var S=c.tag;if(S===3||S===4){var M=c.stateNode.containerInfo;if(M===p)break;if(S===4)for(S=c.return;S!==null;){var I=S.tag;if((I===3||I===4)&&S.stateNode.containerInfo===p)return;S=S.return}for(;M!==null;){if(S=qs(M),S===null)return;if(I=S.tag,I===5||I===6||I===26||I===27){c=v=S;continue t}M=M.parentNode}}c=c.return}Sh(function(){var H=v,q=ul(r),nt=[];t:{var G=Qh.get(n);if(G!==void 0){var Y=Rr,St=n;switch(n){case"keypress":if(Tr(r)===0)break t;case"keydown":case"keyup":Y=Um;break;case"focusin":St="focus",Y=ml;break;case"focusout":St="blur",Y=ml;break;case"beforeblur":case"afterblur":Y=ml;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Th;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Nm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=Vm;break;case Xh:case $h:case Wh:Y=Lm;break;case Kh:Y=Xm;break;case"scroll":case"scrollend":Y=Rm;break;case"wheel":Y=Wm;break;case"copy":case"cut":case"paste":Y=Pm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Rh;break;case"toggle":case"beforetoggle":Y=Qm}var yt=(s&4)!==0,Ht=!yt&&(n==="scroll"||n==="scrollend"),z=yt?G!==null?G+"Capture":null:G;yt=[];for(var B=H,U;B!==null;){var tt=B;if(U=tt.stateNode,tt=tt.tag,tt!==5&&tt!==26&&tt!==27||U===null||z===null||(tt=qi(B,z),tt!=null&&yt.push(Ia(B,tt,U))),Ht)break;B=B.return}0<yt.length&&(G=new Y(G,St,null,r,q),nt.push({event:G,listeners:yt}))}}if((s&7)===0){t:{if(G=n==="mouseover"||n==="pointerover",Y=n==="mouseout"||n==="pointerout",G&&r!==cl&&(St=r.relatedTarget||r.fromElement)&&(qs(St)||St[Js]))break t;if((Y||G)&&(G=q.window===q?q:(G=q.ownerDocument)?G.defaultView||G.parentWindow:window,Y?(St=r.relatedTarget||r.toElement,Y=H,St=St?qs(St):null,St!==null&&(Ht=o(St),yt=St.tag,St!==Ht||yt!==5&&yt!==27&&yt!==6)&&(St=null)):(Y=null,St=H),Y!==St)){if(yt=Th,tt="onMouseLeave",z="onMouseEnter",B="mouse",(n==="pointerout"||n==="pointerover")&&(yt=Rh,tt="onPointerLeave",z="onPointerEnter",B="pointer"),Ht=Y==null?G:Ji(Y),U=St==null?G:Ji(St),G=new yt(tt,B+"leave",Y,r,q),G.target=Ht,G.relatedTarget=U,tt=null,qs(q)===H&&(yt=new yt(z,B+"enter",St,r,q),yt.target=U,yt.relatedTarget=Ht,tt=yt),Ht=tt,Y&&St)e:{for(yt=Y,z=St,B=0,U=yt;U;U=ki(U))B++;for(U=0,tt=z;tt;tt=ki(tt))U++;for(;0<B-U;)yt=ki(yt),B--;for(;0<U-B;)z=ki(z),U--;for(;B--;){if(yt===z||z!==null&&yt===z.alternate)break e;yt=ki(yt),z=ki(z)}yt=null}else yt=null;Y!==null&&vg(nt,G,Y,yt,!1),St!==null&&Ht!==null&&vg(nt,Ht,St,yt,!0)}}t:{if(G=H?Ji(H):window,Y=G.nodeName&&G.nodeName.toLowerCase(),Y==="select"||Y==="input"&&G.type==="file")var gt=Ih;else if(kh(G))if(jh)gt=r0;else{gt=i0;var Ot=s0}else Y=G.nodeName,!Y||Y.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?H&&ll(H.elementType)&&(gt=Ih):gt=a0;if(gt&&(gt=gt(n,H))){Ph(nt,gt,r,q);break t}Ot&&Ot(n,G,H),n==="focusout"&&H&&G.type==="number"&&H.memoizedProps.value!=null&&ol(G,"number",G.value)}switch(Ot=H?Ji(H):window,n){case"focusin":(kh(Ot)||Ot.contentEditable==="true")&&(ci=Ot,Sl=H,oa=null);break;case"focusout":oa=Sl=ci=null;break;case"mousedown":El=!0;break;case"contextmenu":case"mouseup":case"dragend":El=!1,Vh(nt,r,q);break;case"selectionchange":if(l0)break;case"keydown":case"keyup":Vh(nt,r,q)}var pt;if(yl)t:{switch(n){case"compositionstart":var bt="onCompositionStart";break t;case"compositionend":bt="onCompositionEnd";break t;case"compositionupdate":bt="onCompositionUpdate";break t}bt=void 0}else li?Dh(n,r)&&(bt="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(bt="onCompositionStart");bt&&(Mh&&r.locale!=="ko"&&(li||bt!=="onCompositionStart"?bt==="onCompositionEnd"&&li&&(pt=Eh()):(ts=q,fl="value"in ts?ts.value:ts.textContent,li=!0)),Ot=po(H,bt),0<Ot.length&&(bt=new Ch(bt,n,null,r,q),nt.push({event:bt,listeners:Ot}),pt?bt.data=pt:(pt=Lh(r),pt!==null&&(bt.data=pt)))),(pt=Jm?qm(n,r):t0(n,r))&&(bt=po(H,"onBeforeInput"),0<bt.length&&(Ot=new Ch("onBeforeInput","beforeinput",null,r,q),nt.push({event:Ot,listeners:bt}),Ot.data=pt)),V0(nt,n,H,r,q)}pg(nt,s)})}function Ia(n,s,r){return{instance:n,listener:s,currentTarget:r}}function po(n,s){for(var r=s+"Capture",c=[];n!==null;){var p=n,v=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||v===null||(p=qi(n,r),p!=null&&c.unshift(Ia(n,p,v)),p=qi(n,s),p!=null&&c.push(Ia(n,p,v))),n.tag===3)return c;n=n.return}return[]}function ki(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function vg(n,s,r,c,p){for(var v=s._reactName,S=[];r!==null&&r!==c;){var M=r,I=M.alternate,H=M.stateNode;if(M=M.tag,I!==null&&I===c)break;M!==5&&M!==26&&M!==27||H===null||(I=H,p?(H=qi(r,v),H!=null&&S.unshift(Ia(r,H,I))):p||(H=qi(r,v),H!=null&&S.push(Ia(r,H,I)))),r=r.return}S.length!==0&&n.push({event:s,listeners:S})}var W0=/\r\n?/g,K0=/\u0000|\uFFFD/g;function yg(n){return(typeof n=="string"?n:""+n).replace(W0,`
`).replace(K0,"")}function bg(n,s){return s=yg(s),yg(n)===s}function mo(){}function Ut(n,s,r,c,p,v){switch(r){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||ai(n,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&ai(n,""+c);break;case"className":xr(n,"class",c);break;case"tabIndex":xr(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":xr(n,r,c);break;case"style":xh(n,c,v);break;case"data":if(s!=="object"){xr(n,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||r!=="href")){n.removeAttribute(r);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(r);break}c=Er(""+c),n.setAttribute(r,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(r==="formAction"?(s!=="input"&&Ut(n,s,"name",p.name,p,null),Ut(n,s,"formEncType",p.formEncType,p,null),Ut(n,s,"formMethod",p.formMethod,p,null),Ut(n,s,"formTarget",p.formTarget,p,null)):(Ut(n,s,"encType",p.encType,p,null),Ut(n,s,"method",p.method,p,null),Ut(n,s,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(r);break}c=Er(""+c),n.setAttribute(r,c);break;case"onClick":c!=null&&(n.onclick=mo);break;case"onScroll":c!=null&&Lt("scroll",n);break;case"onScrollEnd":c!=null&&Lt("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(r=c.__html,r!=null){if(p.children!=null)throw Error(i(60));n.innerHTML=r}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}r=Er(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(r,""+c):n.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(r,""):n.removeAttribute(r);break;case"capture":case"download":c===!0?n.setAttribute(r,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(r,c):n.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(r,c):n.removeAttribute(r);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(r):n.setAttribute(r,c);break;case"popover":Lt("beforetoggle",n),Lt("toggle",n),br(n,"popover",c);break;case"xlinkActuate":Ln(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Ln(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Ln(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Ln(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Ln(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Ln(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Ln(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Ln(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Ln(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":br(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Tm.get(r)||r,br(n,r,c))}}function Xc(n,s,r,c,p,v){switch(r){case"style":xh(n,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(r=c.__html,r!=null){if(p.children!=null)throw Error(i(60));n.innerHTML=r}}break;case"children":typeof c=="string"?ai(n,c):(typeof c=="number"||typeof c=="bigint")&&ai(n,""+c);break;case"onScroll":c!=null&&Lt("scroll",n);break;case"onScrollEnd":c!=null&&Lt("scrollend",n);break;case"onClick":c!=null&&(n.onclick=mo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ch.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(p=r.endsWith("Capture"),s=r.slice(2,p?r.length-7:void 0),v=n[Ie]||null,v=v!=null?v[r]:null,typeof v=="function"&&n.removeEventListener(s,v,p),typeof c=="function")){typeof v!="function"&&v!==null&&(r in n?n[r]=null:n.hasAttribute(r)&&n.removeAttribute(r)),n.addEventListener(s,c,p);break t}r in n?n[r]=c:c===!0?n.setAttribute(r,""):br(n,r,c)}}}function we(n,s,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Lt("error",n),Lt("load",n);var c=!1,p=!1,v;for(v in r)if(r.hasOwnProperty(v)){var S=r[v];if(S!=null)switch(v){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ut(n,s,v,S,r,null)}}p&&Ut(n,s,"srcSet",r.srcSet,r,null),c&&Ut(n,s,"src",r.src,r,null);return;case"input":Lt("invalid",n);var M=v=S=p=null,I=null,H=null;for(c in r)if(r.hasOwnProperty(c)){var q=r[c];if(q!=null)switch(c){case"name":p=q;break;case"type":S=q;break;case"checked":I=q;break;case"defaultChecked":H=q;break;case"value":v=q;break;case"defaultValue":M=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(i(137,s));break;default:Ut(n,s,c,q,r,null)}}mh(n,v,M,I,H,S,p,!1),Ar(n);return;case"select":Lt("invalid",n),c=S=v=null;for(p in r)if(r.hasOwnProperty(p)&&(M=r[p],M!=null))switch(p){case"value":v=M;break;case"defaultValue":S=M;break;case"multiple":c=M;default:Ut(n,s,p,M,r,null)}s=v,r=S,n.multiple=!!c,s!=null?ii(n,!!c,s,!1):r!=null&&ii(n,!!c,r,!0);return;case"textarea":Lt("invalid",n),v=p=c=null;for(S in r)if(r.hasOwnProperty(S)&&(M=r[S],M!=null))switch(S){case"value":c=M;break;case"defaultValue":p=M;break;case"children":v=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(i(91));break;default:Ut(n,s,S,M,r,null)}yh(n,c,p,v),Ar(n);return;case"option":for(I in r)if(r.hasOwnProperty(I)&&(c=r[I],c!=null))switch(I){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Ut(n,s,I,c,r,null)}return;case"dialog":Lt("beforetoggle",n),Lt("toggle",n),Lt("cancel",n),Lt("close",n);break;case"iframe":case"object":Lt("load",n);break;case"video":case"audio":for(c=0;c<Pa.length;c++)Lt(Pa[c],n);break;case"image":Lt("error",n),Lt("load",n);break;case"details":Lt("toggle",n);break;case"embed":case"source":case"link":Lt("error",n),Lt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in r)if(r.hasOwnProperty(H)&&(c=r[H],c!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ut(n,s,H,c,r,null)}return;default:if(ll(s)){for(q in r)r.hasOwnProperty(q)&&(c=r[q],c!==void 0&&Xc(n,s,q,c,r,void 0));return}}for(M in r)r.hasOwnProperty(M)&&(c=r[M],c!=null&&Ut(n,s,M,c,r,null))}function Q0(n,s,r,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,v=null,S=null,M=null,I=null,H=null,q=null;for(Y in r){var nt=r[Y];if(r.hasOwnProperty(Y)&&nt!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":I=nt;default:c.hasOwnProperty(Y)||Ut(n,s,Y,null,c,nt)}}for(var G in c){var Y=c[G];if(nt=r[G],c.hasOwnProperty(G)&&(Y!=null||nt!=null))switch(G){case"type":v=Y;break;case"name":p=Y;break;case"checked":H=Y;break;case"defaultChecked":q=Y;break;case"value":S=Y;break;case"defaultValue":M=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,s));break;default:Y!==nt&&Ut(n,s,G,Y,c,nt)}}rl(n,S,M,I,H,q,v,p);return;case"select":Y=S=M=G=null;for(v in r)if(I=r[v],r.hasOwnProperty(v)&&I!=null)switch(v){case"value":break;case"multiple":Y=I;default:c.hasOwnProperty(v)||Ut(n,s,v,null,c,I)}for(p in c)if(v=c[p],I=r[p],c.hasOwnProperty(p)&&(v!=null||I!=null))switch(p){case"value":G=v;break;case"defaultValue":M=v;break;case"multiple":S=v;default:v!==I&&Ut(n,s,p,v,c,I)}s=M,r=S,c=Y,G!=null?ii(n,!!r,G,!1):!!c!=!!r&&(s!=null?ii(n,!!r,s,!0):ii(n,!!r,r?[]:"",!1));return;case"textarea":Y=G=null;for(M in r)if(p=r[M],r.hasOwnProperty(M)&&p!=null&&!c.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:Ut(n,s,M,null,c,p)}for(S in c)if(p=c[S],v=r[S],c.hasOwnProperty(S)&&(p!=null||v!=null))switch(S){case"value":G=p;break;case"defaultValue":Y=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==v&&Ut(n,s,S,p,c,v)}vh(n,G,Y);return;case"option":for(var St in r)if(G=r[St],r.hasOwnProperty(St)&&G!=null&&!c.hasOwnProperty(St))switch(St){case"selected":n.selected=!1;break;default:Ut(n,s,St,null,c,G)}for(I in c)if(G=c[I],Y=r[I],c.hasOwnProperty(I)&&G!==Y&&(G!=null||Y!=null))switch(I){case"selected":n.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:Ut(n,s,I,G,c,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yt in r)G=r[yt],r.hasOwnProperty(yt)&&G!=null&&!c.hasOwnProperty(yt)&&Ut(n,s,yt,null,c,G);for(H in c)if(G=c[H],Y=r[H],c.hasOwnProperty(H)&&G!==Y&&(G!=null||Y!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,s));break;default:Ut(n,s,H,G,c,Y)}return;default:if(ll(s)){for(var Ht in r)G=r[Ht],r.hasOwnProperty(Ht)&&G!==void 0&&!c.hasOwnProperty(Ht)&&Xc(n,s,Ht,void 0,c,G);for(q in c)G=c[q],Y=r[q],!c.hasOwnProperty(q)||G===Y||G===void 0&&Y===void 0||Xc(n,s,q,G,c,Y);return}}for(var z in r)G=r[z],r.hasOwnProperty(z)&&G!=null&&!c.hasOwnProperty(z)&&Ut(n,s,z,null,c,G);for(nt in c)G=c[nt],Y=r[nt],!c.hasOwnProperty(nt)||G===Y||G==null&&Y==null||Ut(n,s,nt,G,c,Y)}var $c=null,Wc=null;function vo(n){return n.nodeType===9?n:n.ownerDocument}function xg(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ag(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Kc(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Qc=null;function Z0(){var n=window.event;return n&&n.type==="popstate"?n===Qc?!1:(Qc=n,!0):(Qc=null,!1)}var Sg=typeof setTimeout=="function"?setTimeout:void 0,J0=typeof clearTimeout=="function"?clearTimeout:void 0,Eg=typeof Promise=="function"?Promise:void 0,q0=typeof queueMicrotask=="function"?queueMicrotask:typeof Eg<"u"?function(n){return Eg.resolve(null).then(n).catch(tv)}:Sg;function tv(n){setTimeout(function(){throw n})}function ms(n){return n==="head"}function wg(n,s){var r=s,c=0,p=0;do{var v=r.nextSibling;if(n.removeChild(r),v&&v.nodeType===8)if(r=v.data,r==="/$"){if(0<c&&8>c){r=c;var S=n.ownerDocument;if(r&1&&ja(S.documentElement),r&2&&ja(S.body),r&4)for(r=S.head,ja(r),S=r.firstChild;S;){var M=S.nextSibling,I=S.nodeName;S[Zi]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&S.rel.toLowerCase()==="stylesheet"||r.removeChild(S),S=M}}if(p===0){n.removeChild(v),Va(s);return}p--}else r==="$"||r==="$?"||r==="$!"?p++:c=r.charCodeAt(0)-48;else c=0;r=v}while(r);Va(s)}function Zc(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var r=s;switch(s=s.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Zc(r),nl(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}n.removeChild(r)}}function ev(n,s,r,c){for(;n.nodeType===1;){var p=r;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Zi])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(v=n.getAttribute("rel"),v==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(v!==p.rel||n.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||n.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||n.getAttribute("title")!==(p.title==null?null:p.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(v=n.getAttribute("src"),(v!==(p.src==null?null:p.src)||n.getAttribute("type")!==(p.type==null?null:p.type)||n.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&v&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var v=p.name==null?null:""+p.name;if(p.type==="hidden"&&n.getAttribute("name")===v)return n}else return n;if(n=mn(n.nextSibling),n===null)break}return null}function nv(n,s,r){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=mn(n.nextSibling),n===null))return null;return n}function Jc(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function sv(n,s){var r=n.ownerDocument;if(n.data!=="$?"||r.readyState==="complete")s();else{var c=function(){s(),r.removeEventListener("DOMContentLoaded",c)};r.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function mn(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}var qc=null;function Tg(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return n;s--}else r==="/$"&&s++}n=n.previousSibling}return null}function Cg(n,s,r){switch(s=vo(r),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function ja(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);nl(n)}var hn=new Map,Rg=new Set;function yo(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Xn=P.d;P.d={f:iv,r:av,D:rv,C:ov,L:lv,m:cv,X:hv,S:uv,M:dv};function iv(){var n=Xn.f(),s=lo();return n||s}function av(n){var s=ti(n);s!==null&&s.tag===5&&s.type==="form"?Xd(s):Xn.r(n)}var Pi=typeof document>"u"?null:document;function Mg(n,s,r){var c=Pi;if(c&&typeof s=="string"&&s){var p=sn(s);p='link[rel="'+n+'"][href="'+p+'"]',typeof r=="string"&&(p+='[crossorigin="'+r+'"]'),Rg.has(p)||(Rg.add(p),n={rel:n,crossOrigin:r,href:s},c.querySelector(p)===null&&(s=c.createElement("link"),we(s,"link",n),fe(s),c.head.appendChild(s)))}}function rv(n){Xn.D(n),Mg("dns-prefetch",n,null)}function ov(n,s){Xn.C(n,s),Mg("preconnect",n,s)}function lv(n,s,r){Xn.L(n,s,r);var c=Pi;if(c&&n&&s){var p='link[rel="preload"][as="'+sn(s)+'"]';s==="image"&&r&&r.imageSrcSet?(p+='[imagesrcset="'+sn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(p+='[imagesizes="'+sn(r.imageSizes)+'"]')):p+='[href="'+sn(n)+'"]';var v=p;switch(s){case"style":v=Ii(n);break;case"script":v=ji(n)}hn.has(v)||(n=f({rel:"preload",href:s==="image"&&r&&r.imageSrcSet?void 0:n,as:s},r),hn.set(v,n),c.querySelector(p)!==null||s==="style"&&c.querySelector(_a(v))||s==="script"&&c.querySelector(Ba(v))||(s=c.createElement("link"),we(s,"link",n),fe(s),c.head.appendChild(s)))}}function cv(n,s){Xn.m(n,s);var r=Pi;if(r&&n){var c=s&&typeof s.as=="string"?s.as:"script",p='link[rel="modulepreload"][as="'+sn(c)+'"][href="'+sn(n)+'"]',v=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=ji(n)}if(!hn.has(v)&&(n=f({rel:"modulepreload",href:n},s),hn.set(v,n),r.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Ba(v)))return}c=r.createElement("link"),we(c,"link",n),fe(c),r.head.appendChild(c)}}}function uv(n,s,r){Xn.S(n,s,r);var c=Pi;if(c&&n){var p=ei(c).hoistableStyles,v=Ii(n);s=s||"default";var S=p.get(v);if(!S){var M={loading:0,preload:null};if(S=c.querySelector(_a(v)))M.loading=5;else{n=f({rel:"stylesheet",href:n,"data-precedence":s},r),(r=hn.get(v))&&tu(n,r);var I=S=c.createElement("link");fe(I),we(I,"link",n),I._p=new Promise(function(H,q){I.onload=H,I.onerror=q}),I.addEventListener("load",function(){M.loading|=1}),I.addEventListener("error",function(){M.loading|=2}),M.loading|=4,bo(S,s,c)}S={type:"stylesheet",instance:S,count:1,state:M},p.set(v,S)}}}function hv(n,s){Xn.X(n,s);var r=Pi;if(r&&n){var c=ei(r).hoistableScripts,p=ji(n),v=c.get(p);v||(v=r.querySelector(Ba(p)),v||(n=f({src:n,async:!0},s),(s=hn.get(p))&&eu(n,s),v=r.createElement("script"),fe(v),we(v,"link",n),r.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(p,v))}}function dv(n,s){Xn.M(n,s);var r=Pi;if(r&&n){var c=ei(r).hoistableScripts,p=ji(n),v=c.get(p);v||(v=r.querySelector(Ba(p)),v||(n=f({src:n,async:!0,type:"module"},s),(s=hn.get(p))&&eu(n,s),v=r.createElement("script"),fe(v),we(v,"link",n),r.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(p,v))}}function Ng(n,s,r,c){var p=(p=W.current)?yo(p):null;if(!p)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(s=Ii(r.href),r=ei(p).hoistableStyles,c=r.get(s),c||(c={type:"style",instance:null,count:0,state:null},r.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){n=Ii(r.href);var v=ei(p).hoistableStyles,S=v.get(n);if(S||(p=p.ownerDocument||p,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(n,S),(v=p.querySelector(_a(n)))&&!v._p&&(S.instance=v,S.state.loading=5),hn.has(n)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},hn.set(n,r),v||fv(p,n,r,S.state))),s&&c===null)throw Error(i(528,""));return S}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=r.async,r=r.src,typeof r=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ji(r),r=ei(p).hoistableScripts,c=r.get(s),c||(c={type:"script",instance:null,count:0,state:null},r.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Ii(n){return'href="'+sn(n)+'"'}function _a(n){return'link[rel="stylesheet"]['+n+"]"}function Og(n){return f({},n,{"data-precedence":n.precedence,precedence:null})}function fv(n,s,r,c){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=n.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),we(s,"link",r),fe(s),n.head.appendChild(s))}function ji(n){return'[src="'+sn(n)+'"]'}function Ba(n){return"script[async]"+n}function Dg(n,s,r){if(s.count++,s.instance===null)switch(s.type){case"style":var c=n.querySelector('style[data-href~="'+sn(r.href)+'"]');if(c)return s.instance=c,fe(c),c;var p=f({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),fe(c),we(c,"style",p),bo(c,r.precedence,n),s.instance=c;case"stylesheet":p=Ii(r.href);var v=n.querySelector(_a(p));if(v)return s.state.loading|=4,s.instance=v,fe(v),v;c=Og(r),(p=hn.get(p))&&tu(c,p),v=(n.ownerDocument||n).createElement("link"),fe(v);var S=v;return S._p=new Promise(function(M,I){S.onload=M,S.onerror=I}),we(v,"link",c),s.state.loading|=4,bo(v,r.precedence,n),s.instance=v;case"script":return v=ji(r.src),(p=n.querySelector(Ba(v)))?(s.instance=p,fe(p),p):(c=r,(p=hn.get(v))&&(c=f({},r),eu(c,p)),n=n.ownerDocument||n,p=n.createElement("script"),fe(p),we(p,"link",c),n.head.appendChild(p),s.instance=p);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,bo(c,r.precedence,n));return s.instance}function bo(n,s,r){for(var c=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,v=p,S=0;S<c.length;S++){var M=c[S];if(M.dataset.precedence===s)v=M;else if(v!==p)break}v?v.parentNode.insertBefore(n,v.nextSibling):(s=r.nodeType===9?r.head:r,s.insertBefore(n,s.firstChild))}function tu(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function eu(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var xo=null;function Lg(n,s,r){if(xo===null){var c=new Map,p=xo=new Map;p.set(r,c)}else p=xo,c=p.get(r),c||(c=new Map,p.set(r,c));if(c.has(n))return c;for(c.set(n,null),r=r.getElementsByTagName(n),p=0;p<r.length;p++){var v=r[p];if(!(v[Zi]||v[Re]||n==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var S=v.getAttribute(s)||"";S=n+S;var M=c.get(S);M?M.push(v):c.set(S,[v])}}return c}function kg(n,s,r){n=n.ownerDocument||n,n.head.insertBefore(r,s==="title"?n.querySelector("head > title"):null)}function gv(n,s,r){if(r===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Pg(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Fa=null;function pv(){}function mv(n,s,r){if(Fa===null)throw Error(i(475));var c=Fa;if(s.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var p=Ii(r.href),v=n.querySelector(_a(p));if(v){n=v._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(c.count++,c=Ao.bind(c),n.then(c,c)),s.state.loading|=4,s.instance=v,fe(v);return}v=n.ownerDocument||n,r=Og(r),(p=hn.get(p))&&tu(r,p),v=v.createElement("link"),fe(v);var S=v;S._p=new Promise(function(M,I){S.onload=M,S.onerror=I}),we(v,"link",r),s.instance=v}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=Ao.bind(c),n.addEventListener("load",s),n.addEventListener("error",s))}}function vv(){if(Fa===null)throw Error(i(475));var n=Fa;return n.stylesheets&&n.count===0&&nu(n,n.stylesheets),0<n.count?function(s){var r=setTimeout(function(){if(n.stylesheets&&nu(n,n.stylesheets),n.unsuspend){var c=n.unsuspend;n.unsuspend=null,c()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(r)}}:null}function Ao(){if(this.count--,this.count===0){if(this.stylesheets)nu(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var So=null;function nu(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,So=new Map,s.forEach(yv,n),So=null,Ao.call(n))}function yv(n,s){if(!(s.state.loading&4)){var r=So.get(n);if(r)var c=r.get(null);else{r=new Map,So.set(n,r);for(var p=n.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<p.length;v++){var S=p[v];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(r.set(S.dataset.precedence,S),c=S)}c&&r.set(null,c)}p=s.instance,S=p.getAttribute("data-precedence"),v=r.get(S)||c,v===c&&r.set(null,p),r.set(S,p),this.count++,c=Ao.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),v?v.parentNode.insertBefore(p,v.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(p,n.firstChild)),s.state.loading|=4}}var za={$$typeof:C,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function bv(n,s,r,c,p,v,S,M){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jo(0),this.hiddenUpdates=Jo(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=v,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function Ig(n,s,r,c,p,v,S,M,I,H,q,nt){return n=new bv(n,s,r,S,M,I,H,nt),s=1,v===!0&&(s|=24),v=Xe(3,null,null,s),n.current=v,v.stateNode=n,s=_l(),s.refCount++,n.pooledCache=s,s.refCount++,v.memoizedState={element:c,isDehydrated:r,cache:s},Ul(v),n}function jg(n){return n?(n=fi,n):fi}function _g(n,s,r,c,p,v){p=jg(p),c.context===null?c.context=p:c.pendingContext=p,c=ss(s),c.payload={element:r},v=v===void 0?null:v,v!==null&&(c.callback=v),r=is(n,c,s),r!==null&&(Ze(r,n,s),ma(r,n,s))}function Bg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<s?r:s}}function su(n,s){Bg(n,s),(n=n.alternate)&&Bg(n,s)}function Fg(n){if(n.tag===13){var s=di(n,67108864);s!==null&&Ze(s,n,67108864),su(n,67108864)}}var Eo=!0;function xv(n,s,r,c){var p=L.T;L.T=null;var v=P.p;try{P.p=2,iu(n,s,r,c)}finally{P.p=v,L.T=p}}function Av(n,s,r,c){var p=L.T;L.T=null;var v=P.p;try{P.p=8,iu(n,s,r,c)}finally{P.p=v,L.T=p}}function iu(n,s,r,c){if(Eo){var p=au(c);if(p===null)Yc(n,s,c,wo,r),Ug(n,c);else if(Ev(p,n,s,r,c))c.stopPropagation();else if(Ug(n,c),s&4&&-1<Sv.indexOf(n)){for(;p!==null;){var v=ti(p);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var S=Ts(v.pendingLanes);if(S!==0){var M=v;for(M.pendingLanes|=2,M.entangledLanes|=2;S;){var I=1<<31-Ve(S);M.entanglements[1]|=I,S&=~I}En(v),(Bt&6)===0&&(ro=Ae()+500,ka(0))}}break;case 13:M=di(v,2),M!==null&&Ze(M,v,2),lo(),su(v,2)}if(v=au(c),v===null&&Yc(n,s,c,wo,r),v===p)break;p=v}p!==null&&c.stopPropagation()}else Yc(n,s,c,null,r)}}function au(n){return n=ul(n),ru(n)}var wo=null;function ru(n){if(wo=null,n=qs(n),n!==null){var s=o(n);if(s===null)n=null;else{var r=s.tag;if(r===13){if(n=l(s),n!==null)return n;n=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return wo=n,null}function zg(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($i()){case ws:return 2;case th:return 8;case pr:case lm:return 32;case eh:return 268435456;default:return 32}default:return 32}}var ou=!1,vs=null,ys=null,bs=null,Ua=new Map,Ha=new Map,xs=[],Sv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ug(n,s){switch(n){case"focusin":case"focusout":vs=null;break;case"dragenter":case"dragleave":ys=null;break;case"mouseover":case"mouseout":bs=null;break;case"pointerover":case"pointerout":Ua.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ha.delete(s.pointerId)}}function Ga(n,s,r,c,p,v){return n===null||n.nativeEvent!==v?(n={blockedOn:s,domEventName:r,eventSystemFlags:c,nativeEvent:v,targetContainers:[p]},s!==null&&(s=ti(s),s!==null&&Fg(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),n)}function Ev(n,s,r,c,p){switch(s){case"focusin":return vs=Ga(vs,n,s,r,c,p),!0;case"dragenter":return ys=Ga(ys,n,s,r,c,p),!0;case"mouseover":return bs=Ga(bs,n,s,r,c,p),!0;case"pointerover":var v=p.pointerId;return Ua.set(v,Ga(Ua.get(v)||null,n,s,r,c,p)),!0;case"gotpointercapture":return v=p.pointerId,Ha.set(v,Ga(Ha.get(v)||null,n,s,r,c,p)),!0}return!1}function Hg(n){var s=qs(n.target);if(s!==null){var r=o(s);if(r!==null){if(s=r.tag,s===13){if(s=l(r),s!==null){n.blockedOn=s,mm(n.priority,function(){if(r.tag===13){var c=Qe();c=qo(c);var p=di(r,c);p!==null&&Ze(p,r,c),su(r,c)}});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function To(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var r=au(n.nativeEvent);if(r===null){r=n.nativeEvent;var c=new r.constructor(r.type,r);cl=c,r.target.dispatchEvent(c),cl=null}else return s=ti(r),s!==null&&Fg(s),n.blockedOn=r,!1;s.shift()}return!0}function Gg(n,s,r){To(n)&&r.delete(s)}function wv(){ou=!1,vs!==null&&To(vs)&&(vs=null),ys!==null&&To(ys)&&(ys=null),bs!==null&&To(bs)&&(bs=null),Ua.forEach(Gg),Ha.forEach(Gg)}function Co(n,s){n.blockedOn===s&&(n.blockedOn=null,ou||(ou=!0,g.unstable_scheduleCallback(g.unstable_NormalPriority,wv)))}var Ro=null;function Vg(n){Ro!==n&&(Ro=n,g.unstable_scheduleCallback(g.unstable_NormalPriority,function(){Ro===n&&(Ro=null);for(var s=0;s<n.length;s+=3){var r=n[s],c=n[s+1],p=n[s+2];if(typeof c!="function"){if(ru(c||r)===null)continue;break}var v=ti(r);v!==null&&(n.splice(s,3),s-=3,rc(v,{pending:!0,data:p,method:r.method,action:c},c,p))}}))}function Va(n){function s(I){return Co(I,n)}vs!==null&&Co(vs,n),ys!==null&&Co(ys,n),bs!==null&&Co(bs,n),Ua.forEach(s),Ha.forEach(s);for(var r=0;r<xs.length;r++){var c=xs[r];c.blockedOn===n&&(c.blockedOn=null)}for(;0<xs.length&&(r=xs[0],r.blockedOn===null);)Hg(r),r.blockedOn===null&&xs.shift();if(r=(n.ownerDocument||n).$$reactFormReplay,r!=null)for(c=0;c<r.length;c+=3){var p=r[c],v=r[c+1],S=p[Ie]||null;if(typeof v=="function")S||Vg(r);else if(S){var M=null;if(v&&v.hasAttribute("formAction")){if(p=v,S=v[Ie]||null)M=S.formAction;else if(ru(p)!==null)continue}else M=S.action;typeof M=="function"?r[c+1]=M:(r.splice(c,3),c-=3),Vg(r)}}}function lu(n){this._internalRoot=n}Mo.prototype.render=lu.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var r=s.current,c=Qe();_g(r,c,n,s,null,null)},Mo.prototype.unmount=lu.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;_g(n.current,2,null,n,null,null),lo(),s[Js]=null}};function Mo(n){this._internalRoot=n}Mo.prototype.unstable_scheduleHydration=function(n){if(n){var s=rh();n={blockedOn:null,target:n,priority:s};for(var r=0;r<xs.length&&s!==0&&s<xs[r].priority;r++);xs.splice(r,0,n),r===0&&Hg(n)}};var Yg=t.version;if(Yg!=="19.1.0")throw Error(i(527,Yg,"19.1.0"));P.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=h(s),n=n!==null?d(n):null,n=n===null?null:n.stateNode,n};var Tv={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var No=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!No.isDisabled&&No.supportsFiber)try{Wi=No.inject(Tv),Ge=No}catch{}}return Xa.createRoot=function(n,s){if(!a(n))throw Error(i(299));var r=!1,c="",p=of,v=lf,S=cf,M=null;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(M=s.unstable_transitionCallbacks)),s=Ig(n,1,!1,null,null,r,c,p,v,S,M,null),n[Js]=s.current,Vc(n),new lu(s)},Xa.hydrateRoot=function(n,s,r){if(!a(n))throw Error(i(299));var c=!1,p="",v=of,S=lf,M=cf,I=null,H=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onUncaughtError!==void 0&&(v=r.onUncaughtError),r.onCaughtError!==void 0&&(S=r.onCaughtError),r.onRecoverableError!==void 0&&(M=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(I=r.unstable_transitionCallbacks),r.formState!==void 0&&(H=r.formState)),s=Ig(n,1,!0,s,r??null,c,p,v,S,M,I,H),s.context=jg(null),r=s.current,c=Qe(),c=qo(c),p=ss(c),p.callback=null,is(r,p,c),r=c,s.current.lanes=r,Qi(s,r),En(s),n[Js]=s.current,Vc(n),new Mo(s)},Xa.version="19.1.0",Xa}var sp;function Iv(){if(sp)return du.exports;sp=1;function g(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g)}catch(t){console.error(t)}}return g(),du.exports=Pv(),du.exports}var jv=Iv();function _v({onGetStarted:g,darkMode:t,toggleDarkMode:e}){const[i,a]=mt.useState(!0),o=[{icon:"",title:"PDF File Support",description:"Upload your course schedule PDF files with ease"},{icon:"",title:"Dark Mode Toggle",description:"Switch between light and dark themes"},{icon:"",title:"Mobile Responsive",description:"Works perfectly on all devices"},{icon:"",title:"AI-Powered",description:"Smart routine generation with AI assistance"},{icon:"",title:"Smart Search",description:"Find courses and faculty quickly"},{icon:"",title:"Fast Processing",description:"Generate routines in seconds"}],l=[{icon:"",text:"Back to Top",action:()=>window.scrollTo({top:0,behavior:"smooth"})},{icon:"",text:"Source Code",link:"https://github.com/your-username/course-routine-planner"},{icon:"",text:"Help & Support",action:()=>alert("Help section coming soon!")},{icon:"",text:"About",action:()=>alert("About section coming soon!")}],u=[{name:"React",color:"bg-blue-500"},{name:"Tailwind CSS",color:"bg-cyan-500"},{name:"JavaScript",color:"bg-yellow-500"},{name:"PDF.js",color:"bg-red-500"},{name:"Vite",color:"bg-purple-500"}];return E.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 transition-all duration-500",children:[E.jsx("div",{className:"fixed top-4 right-4 z-50",children:E.jsx("button",{onClick:e,className:"p-2 rounded-full bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:t?E.jsx("svg",{className:"w-5 h-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:E.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}):E.jsx("svg",{className:"w-5 h-5 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:E.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})})}),E.jsxs("header",{className:"relative overflow-hidden",children:[E.jsx("div",{className:"max-w-4xl mx-auto px-4 py-12",children:E.jsx("div",{className:"text-center",children:E.jsxs("div",{className:"animate-fadeInUp",children:[E.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 dark:from-blue-400 dark:via-purple-400 dark:to-indigo-400 bg-clip-text text-transparent mb-4 leading-tight",children:" Course Routine Planner"}),E.jsx("p",{className:"text-lg md:text-xl text-gray-600 dark:text-gray-300 mb-6 max-w-2xl mx-auto leading-relaxed",children:"Create personalized course schedules from PDF files with ease."}),E.jsxs("button",{onClick:g,className:"group relative inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-medium rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300",children:[E.jsx("span",{className:"mr-2 text-lg",children:""}),"Get Started",E.jsx("svg",{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})})}),E.jsxs("div",{className:"absolute inset-0 -z-10 overflow-hidden",children:[E.jsx("div",{className:"absolute -top-32 -right-32 w-64 h-64 bg-purple-300 dark:bg-purple-700 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-xl opacity-70 animate-blob"}),E.jsx("div",{className:"absolute -bottom-32 -left-32 w-64 h-64 bg-yellow-300 dark:bg-yellow-700 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-xl opacity-70 animate-blob animation-delay-2000"}),E.jsx("div",{className:"absolute -top-32 left-32 w-64 h-64 bg-pink-300 dark:bg-pink-700 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-xl opacity-70 animate-blob animation-delay-4000"})]})]}),E.jsx("section",{className:"py-12 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm",children:E.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[E.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-center text-gray-900 dark:text-white mb-8",children:" Features"}),E.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 mt-8",children:o.map((h,d)=>E.jsxs("div",{className:"group p-4 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 border border-gray-200 dark:border-gray-700",children:[E.jsx("div",{className:"text-2xl mb-3 transform group-hover:scale-110 transition-transform duration-300",children:h.icon}),E.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:h.title}),E.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:h.description})]},d))})]})}),E.jsx("section",{className:"py-12",children:E.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[E.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-center text-gray-900 dark:text-white mb-8",children:" Quick Links"}),E.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:l.map((h,d)=>E.jsxs("button",{onClick:h.action,className:"group p-4 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 border border-gray-200 dark:border-gray-700",children:[E.jsx("div",{className:"text-2xl mb-2 transform group-hover:scale-110 transition-transform duration-300",children:h.icon}),E.jsx("p",{className:"text-sm text-gray-900 dark:text-white font-medium",children:h.text})]},d))})]})}),E.jsx("section",{className:"py-12 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm",children:E.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[E.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-center text-gray-900 dark:text-white mb-8",children:" Tech Stack"}),E.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:u.map((h,d)=>E.jsx("div",{className:"group px-4 py-2 bg-white dark:bg-gray-800 rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 border border-gray-200 dark:border-gray-700",children:E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx("div",{className:`w-2 h-2 rounded-full ${h.color} group-hover:animate-pulse`}),E.jsx("span",{className:"text-sm text-gray-900 dark:text-white font-medium",children:h.name})]})},d))})]})}),E.jsx("footer",{className:"py-8 bg-gray-900 dark:bg-gray-950",children:E.jsxs("div",{className:"max-w-4xl mx-auto px-4 text-center",children:[i&&E.jsx("div",{className:"flex justify-center mb-4",children:E.jsx("img",{src:"https://api.visitorbadge.io/api/visitors?path=Course-Routine-Planner&label=Site%20Visits&countColor=%23263759",alt:"Site Visits",className:"animate-pulse h-5"})}),E.jsxs("p",{className:"text-gray-400 mb-3 text-sm",children:[" 2025 Course Routine Planner. Made by ",E.jsx("a",{href:"https://www.github.com/No-man1234",className:"text-blue-400 hover:underline",children:"Abdullah Al Noman"})]}),E.jsxs("div",{className:"flex justify-center space-x-4 text-xs text-gray-500",children:[E.jsx("span",{children:"Last updated: July 2025"}),E.jsx("span",{children:"|"}),E.jsx("span",{children:" Powered by Vite + React"})]})]})})]})}var Bv={34:(g,t,e)=>{var i=e(4901);g.exports=function(a){return typeof a=="object"?a!==null:i(a)}},81:(g,t,e)=>{var i=e(9565),a=e(9306),o=e(8551),l=e(6823),u=e(851),h=TypeError;g.exports=function(d,f){var m=arguments.length<2?u(d):f;if(a(m))return o(i(m,d));throw new h(l(d)+" is not iterable")}},116:(g,t,e)=>{var i=e(6518),a=e(9565),o=e(2652),l=e(9306),u=e(8551),h=e(1767),d=e(9539),f=e(4549),m=f("find",TypeError);i({target:"Iterator",proto:!0,real:!0,forced:m},{find:function(b){u(this);try{l(b)}catch(w){d(this,"throw",w)}if(m)return a(m,this,b);var A=h(this),x=0;return o(A,function(w,T){if(b(w,x++))return T(w)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})},283:(g,t,e)=>{var i=e(9504),a=e(9039),o=e(4901),l=e(9297),u=e(3724),h=e(350).CONFIGURABLE,d=e(3706),f=e(1181),m=f.enforce,y=f.get,b=String,A=Object.defineProperty,x=i("".slice),w=i("".replace),T=i([].join),O=u&&!a(function(){return A(function(){},"length",{value:8}).length!==8}),C=String(String).split("String"),N=g.exports=function(R,D,j){x(b(D),0,7)==="Symbol("&&(D="["+w(b(D),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),j&&j.getter&&(D="get "+D),j&&j.setter&&(D="set "+D),(!l(R,"name")||h&&R.name!==D)&&(u?A(R,"name",{value:D,configurable:!0}):R.name=D),O&&j&&l(j,"arity")&&R.length!==j.arity&&A(R,"length",{value:j.arity});try{j&&l(j,"constructor")&&j.constructor?u&&A(R,"prototype",{writable:!1}):R.prototype&&(R.prototype=void 0)}catch{}var _=m(R);return l(_,"source")||(_.source=T(C,typeof D=="string"?D:"")),R};Function.prototype.toString=N(function(){return o(this)&&y(this).source||d(this)},"toString")},350:(g,t,e)=>{var i=e(3724),a=e(9297),o=Function.prototype,l=i&&Object.getOwnPropertyDescriptor,u=a(o,"name"),h=u&&(function(){}).name==="something",d=u&&(!i||i&&l(o,"name").configurable);g.exports={EXISTS:u,PROPER:h,CONFIGURABLE:d}},397:(g,t,e)=>{var i=e(7751);g.exports=i("document","documentElement")},421:g=>{g.exports={}},456:(g,t,e)=>{var i=e(6518),a=e(4576),o=e(9504),l=e(4154),u=e(5169),h=o(1.1.toString),d=a.Uint8Array,f=!d||!d.prototype.toHex||!function(){try{var m=new d([255,255,255,255,255,255,255,255]);return m.toHex()==="ffffffffffffffff"}catch{return!1}}();d&&i({target:"Uint8Array",proto:!0,forced:f},{toHex:function(){l(this),u(this.buffer);for(var y="",b=0,A=this.length;b<A;b++){var x=h(this[b],16);y+=x.length===1?"0"+x:x}return y}})},507:(g,t,e)=>{var i=e(9565);g.exports=function(a,o,l){for(var u=l?a:a.iterator,h=a.next,d,f;!(d=i(h,u)).done;)if(f=o(d.value),f!==void 0)return f}},531:(g,t,e)=>{var i=e(6518),a=e(9565),o=e(9306),l=e(8551),u=e(1767),h=e(8646),d=e(9462),f=e(9539),m=e(6395),y=e(684),b=e(4549),A=!m&&!y("flatMap",function(){}),x=!m&&!A&&b("flatMap",TypeError),w=m||A||x,T=d(function(){for(var O=this.iterator,C=this.mapper,N,R;;){if(R=this.inner)try{if(N=l(a(R.next,R.iterator)),!N.done)return N.value;this.inner=null}catch(D){f(O,"throw",D)}if(N=l(a(this.next,O)),this.done=!!N.done)return;try{this.inner=h(C(N.value,this.counter++),!1)}catch(D){f(O,"throw",D)}}});i({target:"Iterator",proto:!0,real:!0,forced:w},{flatMap:function(C){l(this);try{o(C)}catch(N){f(this,"throw",N)}return x?a(x,this,C):new T(u(this),{mapper:C,inner:null})}})},616:(g,t,e)=>{var i=e(9039);g.exports=!i(function(){var a=(function(){}).bind();return typeof a!="function"||a.hasOwnProperty("prototype")})},655:(g,t,e)=>{var i=e(6955),a=String;g.exports=function(o){if(i(o)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return a(o)}},679:(g,t,e)=>{var i=e(1625),a=TypeError;g.exports=function(o,l){if(i(l,o))return o;throw new a("Incorrect invocation")}},684:g=>{g.exports=function(t,e){var i=typeof Iterator=="function"&&Iterator.prototype[t];if(i)try{i.call({next:null},e).next()}catch{return!0}}},741:g=>{var t=Math.ceil,e=Math.floor;g.exports=Math.trunc||function(a){var o=+a;return(o>0?e:t)(o)}},757:(g,t,e)=>{var i=e(7751),a=e(4901),o=e(1625),l=e(7040),u=Object;g.exports=l?function(h){return typeof h=="symbol"}:function(h){var d=i("Symbol");return a(d)&&o(d.prototype,u(h))}},851:(g,t,e)=>{var i=e(6955),a=e(5966),o=e(4117),l=e(6269),u=e(8227),h=u("iterator");g.exports=function(d){if(!o(d))return a(d,h)||a(d,"@@iterator")||l[i(d)]}},944:g=>{var t=TypeError;g.exports=function(e){var i=e&&e.alphabet;if(i===void 0||i==="base64"||i==="base64url")return i||"base64";throw new t("Incorrect `alphabet` option")}},1072:(g,t,e)=>{var i=e(1828),a=e(8727);g.exports=Object.keys||function(l){return i(l,a)}},1103:g=>{g.exports=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}}},1108:(g,t,e)=>{var i=e(6955);g.exports=function(a){var o=i(a);return o==="BigInt64Array"||o==="BigUint64Array"}},1148:(g,t,e)=>{var i=e(6518),a=e(9565),o=e(2652),l=e(9306),u=e(8551),h=e(1767),d=e(9539),f=e(4549),m=f("every",TypeError);i({target:"Iterator",proto:!0,real:!0,forced:m},{every:function(b){u(this);try{l(b)}catch(w){d(this,"throw",w)}if(m)return a(m,this,b);var A=h(this),x=0;return!o(A,function(w,T){if(!b(w,x++))return T()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},1181:(g,t,e)=>{var i=e(8622),a=e(4576),o=e(34),l=e(6699),u=e(9297),h=e(7629),d=e(6119),f=e(421),m="Object already initialized",y=a.TypeError,b=a.WeakMap,A,x,w,T=function(R){return w(R)?x(R):A(R,{})},O=function(R){return function(D){var j;if(!o(D)||(j=x(D)).type!==R)throw new y("Incompatible receiver, "+R+" required");return j}};if(i||h.state){var C=h.state||(h.state=new b);C.get=C.get,C.has=C.has,C.set=C.set,A=function(R,D){if(C.has(R))throw new y(m);return D.facade=R,C.set(R,D),D},x=function(R){return C.get(R)||{}},w=function(R){return C.has(R)}}else{var N=d("state");f[N]=!0,A=function(R,D){if(u(R,N))throw new y(m);return D.facade=R,l(R,N,D),D},x=function(R){return u(R,N)?R[N]:{}},w=function(R){return u(R,N)}}g.exports={set:A,get:x,has:w,enforce:T,getterFor:O}},1291:(g,t,e)=>{var i=e(741);g.exports=function(a){var o=+a;return o!==o||o===0?0:i(o)}},1385:(g,t,e)=>{var i=e(9539);g.exports=function(a,o,l){for(var u=a.length-1;u>=0;u--)if(a[u]!==void 0)try{l=i(a[u].iterator,o,l)}catch(h){o="throw",l=h}if(o==="throw")throw l;return l}},1548:(g,t,e)=>{var i=e(4576),a=e(9039),o=e(9519),l=e(4215),u=i.structuredClone;g.exports=!!u&&!a(function(){if(l==="DENO"&&o>92||l==="NODE"&&o>94||l==="BROWSER"&&o>97)return!1;var h=new ArrayBuffer(8),d=u(h,{transfer:[h]});return h.byteLength!==0||d.byteLength!==8})},1549:(g,t,e)=>{e(6632)},1625:(g,t,e)=>{var i=e(9504);g.exports=i({}.isPrototypeOf)},1689:(g,t,e)=>{var i=e(6518),a=e(4576),o=e(8745),l=e(7680),u=e(6043),h=e(9306),d=e(1103),f=a.Promise,m=!1,y=!f||!f.try||d(function(){f.try(function(b){m=b===8},8)}).error||!m;i({target:"Promise",stat:!0,forced:y},{try:function(b){var A=arguments.length>1?l(arguments,1):[],x=u.f(this),w=d(function(){return o(h(b),void 0,A)});return(w.error?x.reject:x.resolve)(w.value),x.promise}})},1698:(g,t,e)=>{var i=e(6518),a=e(4204),o=e(9835),l=e(4916),u=!l("union")||!o("union");i({target:"Set",proto:!0,real:!0,forced:u},{union:a})},1701:(g,t,e)=>{var i=e(6518),a=e(9565),o=e(9306),l=e(8551),u=e(1767),h=e(9462),d=e(6319),f=e(9539),m=e(684),y=e(4549),b=e(6395),A=!b&&!m("map",function(){}),x=!b&&!A&&y("map",TypeError),w=b||A||x,T=h(function(){var O=this.iterator,C=l(a(this.next,O)),N=this.done=!!C.done;if(!N)return d(O,this.mapper,[C.value,this.counter++],!0)});i({target:"Iterator",proto:!0,real:!0,forced:w},{map:function(C){l(this);try{o(C)}catch(N){f(this,"throw",N)}return x?a(x,this,C):new T(u(this),{mapper:C})}})},1767:g=>{g.exports=function(t){return{iterator:t,next:t.next,done:!1}}},1828:(g,t,e)=>{var i=e(9504),a=e(9297),o=e(5397),l=e(9617).indexOf,u=e(421),h=i([].push);g.exports=function(d,f){var m=o(d),y=0,b=[],A;for(A in m)!a(u,A)&&a(m,A)&&h(b,A);for(;f.length>y;)a(m,A=f[y++])&&(~l(b,A)||h(b,A));return b}},2106:(g,t,e)=>{var i=e(283),a=e(4913);g.exports=function(o,l,u){return u.get&&i(u.get,l,{getter:!0}),u.set&&i(u.set,l,{setter:!0}),a.f(o,l,u)}},2140:(g,t,e)=>{var i=e(8227),a=i("toStringTag"),o={};o[a]="z",g.exports=String(o)==="[object z]"},2195:(g,t,e)=>{var i=e(9504),a=i({}.toString),o=i("".slice);g.exports=function(l){return o(a(l),8,-1)}},2211:(g,t,e)=>{var i=e(9039);g.exports=!i(function(){function a(){}return a.prototype.constructor=null,Object.getPrototypeOf(new a)!==a.prototype})},2303:(g,t,e)=>{var i=e(4576),a=e(9504),o=i.Uint8Array,l=i.SyntaxError,u=i.parseInt,h=Math.min,d=/[^\da-f]/i,f=a(d.exec),m=a("".slice);g.exports=function(y,b){var A=y.length;if(A%2!==0)throw new l("String should be an even number of characters");for(var x=b?h(b.length,A/2):A/2,w=b||new o(x),T=0,O=0;O<x;){var C=m(y,T,T+=2);if(f(d,C))throw new l("String should only contain hex characters");w[O++]=u(C,16)}return{bytes:w,read:T}}},2360:(g,t,e)=>{var i=e(8551),a=e(6801),o=e(8727),l=e(421),u=e(397),h=e(4055),d=e(6119),f=">",m="<",y="prototype",b="script",A=d("IE_PROTO"),x=function(){},w=function(R){return m+b+f+R+m+"/"+b+f},T=function(R){R.write(w("")),R.close();var D=R.parentWindow.Object;return R=null,D},O=function(){var R=h("iframe"),D="java"+b+":",j;return R.style.display="none",u.appendChild(R),R.src=String(D),j=R.contentWindow.document,j.open(),j.write(w("document.F=Object")),j.close(),j.F},C,N=function(){try{C=new ActiveXObject("htmlfile")}catch{}N=typeof document<"u"?document.domain&&C?T(C):O():T(C);for(var R=o.length;R--;)delete N[y][o[R]];return N()};l[A]=!0,g.exports=Object.create||function(D,j){var _;return D!==null?(x[y]=i(D),_=new x,x[y]=null,_[A]=D):_=N(),j===void 0?_:a.f(_,j)}},2475:(g,t,e)=>{var i=e(6518),a=e(8527),o=e(4916),l=!o("isSupersetOf",function(u){return!u});i({target:"Set",proto:!0,real:!0,forced:l},{isSupersetOf:a})},2489:(g,t,e)=>{var i=e(6518),a=e(9565),o=e(9306),l=e(8551),u=e(1767),h=e(9462),d=e(6319),f=e(6395),m=e(9539),y=e(684),b=e(4549),A=!f&&!y("filter",function(){}),x=!f&&!A&&b("filter",TypeError),w=f||A||x,T=h(function(){for(var O=this.iterator,C=this.predicate,N=this.next,R,D,j;;){if(R=l(a(N,O)),D=this.done=!!R.done,D)return;if(j=R.value,d(O,C,[j,this.counter++],!0))return j}});i({target:"Iterator",proto:!0,real:!0,forced:w},{filter:function(C){l(this);try{o(C)}catch(N){m(this,"throw",N)}return x?a(x,this,C):new T(u(this),{predicate:C})}})},2529:g=>{g.exports=function(t,e){return{value:t,done:e}}},2603:(g,t,e)=>{var i=e(655);g.exports=function(a,o){return a===void 0?arguments.length<2?"":o:i(a)}},2652:(g,t,e)=>{var i=e(6080),a=e(9565),o=e(8551),l=e(6823),u=e(4209),h=e(6198),d=e(1625),f=e(81),m=e(851),y=e(9539),b=TypeError,A=function(w,T){this.stopped=w,this.result=T},x=A.prototype;g.exports=function(w,T,O){var C=O&&O.that,N=!!(O&&O.AS_ENTRIES),R=!!(O&&O.IS_RECORD),D=!!(O&&O.IS_ITERATOR),j=!!(O&&O.INTERRUPTED),_=i(T,C),F,$,X,at,V,J,rt,L=function(Q){return F&&y(F,"normal"),new A(!0,Q)},P=function(Q){return N?(o(Q),j?_(Q[0],Q[1],L):_(Q[0],Q[1])):j?_(Q,L):_(Q)};if(R)F=w.iterator;else if(D)F=w;else{if($=m(w),!$)throw new b(l(w)+" is not iterable");if(u($)){for(X=0,at=h(w);at>X;X++)if(V=P(w[X]),V&&d(x,V))return V;return new A(!1)}F=f(w,$)}for(J=R?w.next:F.next;!(rt=a(J,F)).done;){try{V=P(rt.value)}catch(Q){y(F,"throw",Q)}if(typeof V=="object"&&V&&d(x,V))return V}return new A(!1)}},2777:(g,t,e)=>{var i=e(9565),a=e(34),o=e(757),l=e(5966),u=e(4270),h=e(8227),d=TypeError,f=h("toPrimitive");g.exports=function(m,y){if(!a(m)||o(m))return m;var b=l(m,f),A;if(b){if(y===void 0&&(y="default"),A=i(b,m,y),!a(A)||o(A))return A;throw new d("Can't convert object to primitive value")}return y===void 0&&(y="number"),u(m,y)}},2787:(g,t,e)=>{var i=e(9297),a=e(4901),o=e(8981),l=e(6119),u=e(2211),h=l("IE_PROTO"),d=Object,f=d.prototype;g.exports=u?d.getPrototypeOf:function(m){var y=o(m);if(i(y,h))return y[h];var b=y.constructor;return a(b)&&y instanceof b?b.prototype:y instanceof d?f:null}},2796:(g,t,e)=>{var i=e(9039),a=e(4901),o=/#|\.prototype\./,l=function(m,y){var b=h[u(m)];return b===f?!0:b===d?!1:a(y)?i(y):!!y},u=l.normalize=function(m){return String(m).replace(o,".").toLowerCase()},h=l.data={},d=l.NATIVE="N",f=l.POLYFILL="P";g.exports=l},2804:g=>{var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=t+"+/",i=t+"-_",a=function(o){for(var l={},u=0;u<64;u++)l[o.charAt(u)]=u;return l};g.exports={i2c:e,c2i:a(e),i2cUrl:i,c2iUrl:a(i)}},2812:g=>{var t=TypeError;g.exports=function(e,i){if(e<i)throw new t("Not enough arguments");return e}},2839:(g,t,e)=>{var i=e(4576),a=i.navigator,o=a&&a.userAgent;g.exports=o?String(o):""},2967:(g,t,e)=>{var i=e(6706),a=e(34),o=e(7750),l=e(3506);g.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var u=!1,h={},d;try{d=i(Object.prototype,"__proto__","set"),d(h,[]),u=h instanceof Array}catch{}return function(m,y){return o(m),l(y),a(m)&&(u?d(m,y):m.__proto__=y),m}}():void 0)},3068:(g,t,e)=>{var i=e(6518),a=e(9504),o=e(2652),l=RangeError,u=TypeError,h=1/0,d=NaN,f=Math.abs,m=Math.pow,y=a([].push),b=m(2,1023),A=m(2,53)-1,x=Number.MAX_VALUE,w=m(2,971),T={},O={},C={},N={},R={},D=function(j,_){var F=j+_,$=_-(F-j);return{hi:F,lo:$}};i({target:"Math",stat:!0},{sumPrecise:function(_){var F=[],$=0,X=N;switch(o(_,function(W){if(++$>=A)throw new l("Maximum allowed index exceeded");if(typeof W!="number")throw new u("Value is not a number");X!==T&&(W!==W?X=T:W===h?X=X===O?T:C:W===-h?X=X===C?T:O:(W!==0||1/W===h)&&(X===N||X===R)&&(X=R,y(F,W)))}),X){case T:return d;case O:return-h;case C:return h;case N:return-0}for(var at=[],V=0,J,rt,L,P,Q,ct,k=0;k<F.length;k++){J=F[k];for(var K=0,st=0;st<at.length;st++){if(rt=at[st],f(J)<f(rt)&&(ct=J,J=rt,rt=ct),L=D(J,rt),P=L.hi,Q=L.lo,f(P)===h){var et=P===h?1:-1;V+=et,J=J-et*b-et*b,f(J)<f(rt)&&(ct=J,J=rt,rt=ct),L=D(J,rt),P=L.hi,Q=L.lo}Q!==0&&(at[K++]=Q),J=P}at.length=K,J!==0&&y(at,J)}var ot=at.length-1;if(P=0,Q=0,V!==0){var lt=ot>=0?at[ot]:0;if(ot--,f(V)>1||V>0&&lt>0||V<0&&lt<0)return V>0?h:-h;if(L=D(V*b,lt/2),P=L.hi,Q=L.lo,Q*=2,f(2*P)===h)return P>0?P===b&&Q===-(w/2)&&ot>=0&&at[ot]<0?x:h:P===-b&&Q===w/2&&ot>=0&&at[ot]>0?-x:-h;Q!==0&&(at[++ot]=Q,Q=0),P*=2}for(;ot>=0&&(L=D(P,at[ot--]),P=L.hi,Q=L.lo,Q===0););return ot>=0&&(Q<0&&at[ot]<0||Q>0&&at[ot]>0)&&(rt=Q*2,J=P+rt,rt===J-P&&(P=J)),P}})},3167:(g,t,e)=>{var i=e(4901),a=e(34),o=e(2967);g.exports=function(l,u,h){var d,f;return o&&i(d=u.constructor)&&d!==h&&a(f=d.prototype)&&f!==h.prototype&&o(l,f),l}},3238:(g,t,e)=>{var i=e(4576),a=e(7811),o=e(7394),l=i.DataView;g.exports=function(u){if(!a||o(u)!==0)return!1;try{return new l(u),!1}catch{return!0}}},3392:(g,t,e)=>{var i=e(9504),a=0,o=Math.random(),l=i(1.1.toString);g.exports=function(u){return"Symbol("+(u===void 0?"":u)+")_"+l(++a+o,36)}},3440:(g,t,e)=>{var i=e(7080),a=e(4402),o=e(9286),l=e(5170),u=e(3789),h=e(8469),d=e(507),f=a.has,m=a.remove;g.exports=function(b){var A=i(this),x=u(b),w=o(A);return l(A)<=x.size?h(A,function(T){x.includes(T)&&m(w,T)}):d(x.getIterator(),function(T){f(w,T)&&m(w,T)}),w}},3463:g=>{var t=TypeError;g.exports=function(e){if(typeof e=="string")return e;throw new t("Argument is not a string")}},3506:(g,t,e)=>{var i=e(3925),a=String,o=TypeError;g.exports=function(l){if(i(l))return l;throw new o("Can't set "+a(l)+" as a prototype")}},3579:(g,t,e)=>{var i=e(6518),a=e(9565),o=e(2652),l=e(9306),u=e(8551),h=e(1767),d=e(9539),f=e(4549),m=f("some",TypeError);i({target:"Iterator",proto:!0,real:!0,forced:m},{some:function(b){u(this);try{l(b)}catch(w){d(this,"throw",w)}if(m)return a(m,this,b);var A=h(this),x=0;return o(A,function(w,T){if(b(w,x++))return T()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},3650:(g,t,e)=>{var i=e(7080),a=e(4402),o=e(9286),l=e(3789),u=e(507),h=a.add,d=a.has,f=a.remove;g.exports=function(y){var b=i(this),A=l(y).getIterator(),x=o(b);return u(A,function(w){d(b,w)?f(x,w):h(x,w)}),x}},3706:(g,t,e)=>{var i=e(9504),a=e(4901),o=e(7629),l=i(Function.toString);a(o.inspectSource)||(o.inspectSource=function(u){return l(u)}),g.exports=o.inspectSource},3717:(g,t)=>{t.f=Object.getOwnPropertySymbols},3724:(g,t,e)=>{var i=e(9039);g.exports=!i(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},3789:(g,t,e)=>{var i=e(9306),a=e(8551),o=e(9565),l=e(1291),u=e(1767),h="Invalid size",d=RangeError,f=TypeError,m=Math.max,y=function(b,A){this.set=b,this.size=m(A,0),this.has=i(b.has),this.keys=i(b.keys)};y.prototype={getIterator:function(){return u(a(o(this.keys,this.set)))},includes:function(b){return o(this.has,this.set,b)}},g.exports=function(b){a(b);var A=+b.size;if(A!==A)throw new f(h);var x=l(A);if(x<0)throw new d(h);return new y(b,x)}},3838:(g,t,e)=>{var i=e(7080),a=e(5170),o=e(8469),l=e(3789);g.exports=function(h){var d=i(this),f=l(h);return a(d)>f.size?!1:o(d,function(m){if(!f.includes(m))return!1},!0)!==!1}},3853:(g,t,e)=>{var i=e(6518),a=e(4449),o=e(4916),l=!o("isDisjointFrom",function(u){return!u});i({target:"Set",proto:!0,real:!0,forced:l},{isDisjointFrom:a})},3925:(g,t,e)=>{var i=e(34);g.exports=function(a){return i(a)||a===null}},3972:(g,t,e)=>{var i=e(34),a=String,o=TypeError;g.exports=function(l){if(l===void 0||i(l))return l;throw new o(a(l)+" is not an object or undefined")}},4055:(g,t,e)=>{var i=e(4576),a=e(34),o=i.document,l=a(o)&&a(o.createElement);g.exports=function(u){return l?o.createElement(u):{}}},4114:(g,t,e)=>{var i=e(6518),a=e(8981),o=e(6198),l=e(4527),u=e(6837),h=e(9039),d=h(function(){return[].push.call({length:4294967296},1)!==4294967297}),f=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(y){return y instanceof TypeError}},m=d||!f();i({target:"Array",proto:!0,arity:1,forced:m},{push:function(b){var A=a(this),x=o(A),w=arguments.length;u(x+w);for(var T=0;T<w;T++)A[x]=arguments[T],x++;return l(A,x),x}})},4117:g=>{g.exports=function(t){return t==null}},4149:g=>{var t=RangeError;g.exports=function(e){if(e===e)return e;throw new t("NaN is not allowed")}},4154:(g,t,e)=>{var i=e(6955),a=TypeError;g.exports=function(o){if(i(o)==="Uint8Array")return o;throw new a("Argument is not an Uint8Array")}},4204:(g,t,e)=>{var i=e(7080),a=e(4402).add,o=e(9286),l=e(3789),u=e(507);g.exports=function(d){var f=i(this),m=l(d).getIterator(),y=o(f);return u(m,function(b){a(y,b)}),y}},4209:(g,t,e)=>{var i=e(8227),a=e(6269),o=i("iterator"),l=Array.prototype;g.exports=function(u){return u!==void 0&&(a.Array===u||l[o]===u)}},4215:(g,t,e)=>{var i=e(4576),a=e(2839),o=e(2195),l=function(u){return a.slice(0,u.length)===u};g.exports=function(){return l("Bun/")?"BUN":l("Cloudflare-Workers")?"CLOUDFLARE":l("Deno/")?"DENO":l("Node.js/")?"NODE":i.Bun&&typeof Bun.version=="string"?"BUN":i.Deno&&typeof Deno.version=="object"?"DENO":o(i.process)==="process"?"NODE":i.window&&i.document?"BROWSER":"REST"}()},4226:(g,t,e)=>{var i=e(6518),a=e(4576),o=e(3463),l=e(4154),u=e(5169),h=e(2303);a.Uint8Array&&i({target:"Uint8Array",proto:!0},{setFromHex:function(f){l(this),o(f),u(this.buffer);var m=h(f,this).read;return{read:m,written:m/2}}})},4235:(g,t,e)=>{e(3068)},4270:(g,t,e)=>{var i=e(9565),a=e(4901),o=e(34),l=TypeError;g.exports=function(u,h){var d,f;if(h==="string"&&a(d=u.toString)&&!o(f=i(d,u))||a(d=u.valueOf)&&!o(f=i(d,u))||h!=="string"&&a(d=u.toString)&&!o(f=i(d,u)))return f;throw new l("Can't convert object to primitive value")}},4376:(g,t,e)=>{var i=e(2195);g.exports=Array.isArray||function(o){return i(o)==="Array"}},4402:(g,t,e)=>{var i=e(9504),a=Set.prototype;g.exports={Set,add:i(a.add),has:i(a.has),remove:i(a.delete),proto:a}},4449:(g,t,e)=>{var i=e(7080),a=e(4402).has,o=e(5170),l=e(3789),u=e(8469),h=e(507),d=e(9539);g.exports=function(m){var y=i(this),b=l(m);if(o(y)<=b.size)return u(y,function(x){if(b.includes(x))return!1},!0)!==!1;var A=b.getIterator();return h(A,function(x){if(a(y,x))return d(A,"normal",!1)})!==!1}},4483:(g,t,e)=>{var i=e(4576),a=e(9429),o=e(1548),l=i.structuredClone,u=i.ArrayBuffer,h=i.MessageChannel,d=!1,f,m,y,b;if(o)d=function(A){l(A,{transfer:[A]})};else if(u)try{h||(f=a("worker_threads"),f&&(h=f.MessageChannel)),h&&(m=new h,y=new u(2),b=function(A){m.port1.postMessage(null,[A])},y.byteLength===2&&(b(y),y.byteLength===0&&(d=b)))}catch{}g.exports=d},4495:(g,t,e)=>{var i=e(9519),a=e(9039),o=e(4576),l=o.String;g.exports=!!Object.getOwnPropertySymbols&&!a(function(){var u=Symbol("symbol detection");return!l(u)||!(Object(u)instanceof Symbol)||!Symbol.sham&&i&&i<41})},4527:(g,t,e)=>{var i=e(3724),a=e(4376),o=TypeError,l=Object.getOwnPropertyDescriptor,u=i&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(h){return h instanceof TypeError}}();g.exports=u?function(h,d){if(a(h)&&!l(h,"length").writable)throw new o("Cannot set read only .length");return h.length=d}:function(h,d){return h.length=d}},4549:(g,t,e)=>{var i=e(4576);g.exports=function(a,o){var l=i.Iterator,u=l&&l.prototype,h=u&&u[a],d=!1;if(h)try{h.call({next:function(){return{done:!0}},return:function(){d=!0}},-1)}catch(f){f instanceof o||(d=!1)}if(!d)return h}},4576:function(g){var t=function(e){return e&&e.Math===Math&&e};g.exports=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof global=="object"&&global)||t(typeof this=="object"&&this)||function(){return this}()||Function("return this")()},4603:(g,t,e)=>{var i=e(6840),a=e(9504),o=e(655),l=e(2812),u=URLSearchParams,h=u.prototype,d=a(h.append),f=a(h.delete),m=a(h.forEach),y=a([].push),b=new u("a=1&a=2&b=3");b.delete("a",1),b.delete("b",void 0),b+""!="a=2"&&i(h,"delete",function(A){var x=arguments.length,w=x<2?void 0:arguments[1];if(x&&w===void 0)return f(this,A);var T=[];m(this,function(F,$){y(T,{key:$,value:F})}),l(x,1);for(var O=o(A),C=o(w),N=0,R=0,D=!1,j=T.length,_;N<j;)_=T[N++],D||_.key===O?(D=!0,f(this,_.key)):R++;for(;R<j;)_=T[R++],_.key===O&&_.value===C||d(this,_.key,_.value)},{enumerable:!0,unsafe:!0})},4628:(g,t,e)=>{var i=e(6518),a=e(6043);i({target:"Promise",stat:!0},{withResolvers:function(){var l=a.f(this);return{promise:l.promise,resolve:l.resolve,reject:l.reject}}})},4644:(g,t,e)=>{var i=e(7811),a=e(3724),o=e(4576),l=e(4901),u=e(34),h=e(9297),d=e(6955),f=e(6823),m=e(6699),y=e(6840),b=e(2106),A=e(1625),x=e(2787),w=e(2967),T=e(8227),O=e(3392),C=e(1181),N=C.enforce,R=C.get,D=o.Int8Array,j=D&&D.prototype,_=o.Uint8ClampedArray,F=_&&_.prototype,$=D&&x(D),X=j&&x(j),at=Object.prototype,V=o.TypeError,J=T("toStringTag"),rt=O("TYPED_ARRAY_TAG"),L="TypedArrayConstructor",P=i&&!!w&&d(o.opera)!=="Opera",Q=!1,ct,k,K,st={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},et={BigInt64Array:8,BigUint64Array:8},ot=function(Rt){if(!u(Rt))return!1;var Pt=d(Rt);return Pt==="DataView"||h(st,Pt)||h(et,Pt)},lt=function(ut){var Rt=x(ut);if(u(Rt)){var Pt=R(Rt);return Pt&&h(Pt,L)?Pt[L]:lt(Rt)}},W=function(ut){if(!u(ut))return!1;var Rt=d(ut);return h(st,Rt)||h(et,Rt)},Z=function(ut){if(W(ut))return ut;throw new V("Target is not a typed array")},it=function(ut){if(l(ut)&&(!w||A($,ut)))return ut;throw new V(f(ut)+" is not a typed array constructor")},ft=function(ut,Rt,Pt,de){if(a){if(Pt)for(var xe in st){var ae=o[xe];if(ae&&h(ae.prototype,ut))try{delete ae.prototype[ut]}catch{try{ae.prototype[ut]=Rt}catch{}}}(!X[ut]||Pt)&&y(X,ut,Pt?Rt:P&&j[ut]||Rt,de)}},At=function(ut,Rt,Pt){var de,xe;if(a){if(w){if(Pt){for(de in st)if(xe=o[de],xe&&h(xe,ut))try{delete xe[ut]}catch{}}if(!$[ut]||Pt)try{return y($,ut,Pt?Rt:P&&$[ut]||Rt)}catch{}else return}for(de in st)xe=o[de],xe&&(!xe[ut]||Pt)&&y(xe,ut,Rt)}};for(ct in st)k=o[ct],K=k&&k.prototype,K?N(K)[L]=k:P=!1;for(ct in et)k=o[ct],K=k&&k.prototype,K&&(N(K)[L]=k);if((!P||!l($)||$===Function.prototype)&&($=function(){throw new V("Incorrect invocation")},P))for(ct in st)o[ct]&&w(o[ct],$);if((!P||!X||X===at)&&(X=$.prototype,P))for(ct in st)o[ct]&&w(o[ct].prototype,X);if(P&&x(F)!==X&&w(F,X),a&&!h(X,J)){Q=!0,b(X,J,{configurable:!0,get:function(){return u(this)?this[rt]:void 0}});for(ct in st)o[ct]&&m(o[ct],rt,ct)}g.exports={NATIVE_ARRAY_BUFFER_VIEWS:P,TYPED_ARRAY_TAG:Q&&rt,aTypedArray:Z,aTypedArrayConstructor:it,exportTypedArrayMethod:ft,exportTypedArrayStaticMethod:At,getTypedArrayConstructor:lt,isView:ot,isTypedArray:W,TypedArray:$,TypedArrayPrototype:X}},4659:(g,t,e)=>{var i=e(3724),a=e(4913),o=e(6980);g.exports=function(l,u,h){i?a.f(l,u,o(0,h)):l[u]=h}},4901:g=>{var t=typeof document=="object"&&document.all;g.exports=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"}},4913:(g,t,e)=>{var i=e(3724),a=e(5917),o=e(8686),l=e(8551),u=e(6969),h=TypeError,d=Object.defineProperty,f=Object.getOwnPropertyDescriptor,m="enumerable",y="configurable",b="writable";t.f=i?o?function(x,w,T){if(l(x),w=u(w),l(T),typeof x=="function"&&w==="prototype"&&"value"in T&&b in T&&!T[b]){var O=f(x,w);O&&O[b]&&(x[w]=T.value,T={configurable:y in T?T[y]:O[y],enumerable:m in T?T[m]:O[m],writable:!1})}return d(x,w,T)}:d:function(x,w,T){if(l(x),w=u(w),l(T),a)try{return d(x,w,T)}catch{}if("get"in T||"set"in T)throw new h("Accessors not supported");return"value"in T&&(x[w]=T.value),x}},4916:(g,t,e)=>{var i=e(7751),a=function(l){return{size:l,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},o=function(l){return{size:l,has:function(){return!0},keys:function(){throw new Error("e")}}};g.exports=function(l,u){var h=i("Set");try{new h()[l](a(0));try{return new h()[l](a(-1)),!1}catch{if(!u)return!0;try{return new h()[l](o(-1/0)),!1}catch{var d=new h;return d.add(1),d.add(2),u(d[l](o(1/0)))}}}catch{return!1}}},4972:(g,t,e)=>{var i=e(6518),a=e(9565),o=e(8551),l=e(1767),u=e(4149),h=e(9590),d=e(9462),f=e(9539),m=e(4549),y=e(6395),b=!y&&m("take",RangeError),A=d(function(){var x=this.iterator;if(!this.remaining--)return this.done=!0,f(x,"normal",void 0);var w=o(a(this.next,x)),T=this.done=!!w.done;if(!T)return w.value});i({target:"Iterator",proto:!0,real:!0,forced:y||b},{take:function(w){o(this);var T;try{T=h(u(+w))}catch(O){f(this,"throw",O)}return b?a(b,this,T):new A(l(this),{remaining:T})}})},4979:(g,t,e)=>{var i=e(6518),a=e(4576),o=e(7751),l=e(6980),u=e(4913).f,h=e(9297),d=e(679),f=e(3167),m=e(2603),y=e(5002),b=e(8574),A=e(3724),x=e(6395),w="DOMException",T=o("Error"),O=o(w),C=function(){d(this,N);var L=arguments.length,P=m(L<1?void 0:arguments[0]),Q=m(L<2?void 0:arguments[1],"Error"),ct=new O(P,Q),k=new T(P);return k.name=w,u(ct,"stack",l(1,b(k.stack,1))),f(ct,this,C),ct},N=C.prototype=O.prototype,R="stack"in new T(w),D="stack"in new O(1,2),j=O&&A&&Object.getOwnPropertyDescriptor(a,w),_=!!j&&!(j.writable&&j.configurable),F=R&&!_&&!D;i({global:!0,constructor:!0,forced:x||F},{DOMException:F?C:O});var $=o(w),X=$.prototype;if(X.constructor!==$){x||u(X,"constructor",l(1,$));for(var at in y)if(h(y,at)){var V=y[at],J=V.s;h($,J)||u($,J,l(6,V.c))}}},5002:g=>{g.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},5024:(g,t,e)=>{var i=e(6518),a=e(3650),o=e(9835),l=e(4916),u=!l("symmetricDifference")||!o("symmetricDifference");i({target:"Set",proto:!0,real:!0,forced:u},{symmetricDifference:a})},5031:(g,t,e)=>{var i=e(7751),a=e(9504),o=e(8480),l=e(3717),u=e(8551),h=a([].concat);g.exports=i("Reflect","ownKeys")||function(f){var m=o.f(u(f)),y=l.f;return y?h(m,y(f)):m}},5169:(g,t,e)=>{var i=e(3238),a=TypeError;g.exports=function(o){if(i(o))throw new a("ArrayBuffer is detached");return o}},5170:(g,t,e)=>{var i=e(6706),a=e(4402);g.exports=i(a.proto,"size","get")||function(o){return o.size}},5213:(g,t,e)=>{var i=e(6518),a=e(4576),o=e(5370),l=e(9143),u=a.Uint8Array,h=!u||!u.fromBase64||!function(){try{u.fromBase64("a");return}catch{}try{u.fromBase64("",null)}catch{return!0}}();u&&i({target:"Uint8Array",stat:!0,forced:h},{fromBase64:function(f){var m=l(f,arguments.length>1?arguments[1]:void 0,null,9007199254740991);return o(u,m.bytes)}})},5370:(g,t,e)=>{var i=e(6198);g.exports=function(a,o,l){for(var u=0,h=arguments.length>2?l:i(o),d=new a(h);h>u;)d[u]=o[u++];return d}},5397:(g,t,e)=>{var i=e(7055),a=e(7750);g.exports=function(o){return i(a(o))}},5610:(g,t,e)=>{var i=e(1291),a=Math.max,o=Math.min;g.exports=function(l,u){var h=i(l);return h<0?a(h+u,0):o(h,u)}},5623:(g,t,e)=>{e(456)},5636:(g,t,e)=>{var i=e(4576),a=e(9504),o=e(6706),l=e(7696),u=e(5169),h=e(7394),d=e(4483),f=e(1548),m=i.structuredClone,y=i.ArrayBuffer,b=i.DataView,A=Math.min,x=y.prototype,w=b.prototype,T=a(x.slice),O=o(x,"resizable","get"),C=o(x,"maxByteLength","get"),N=a(w.getInt8),R=a(w.setInt8);g.exports=(f||d)&&function(D,j,_){var F=h(D),$=j===void 0?F:l(j),X=!O||!O(D),at;if(u(D),f&&(D=m(D,{transfer:[D]}),F===$&&(_||X)))return D;if(F>=$&&(!_||X))at=T(D,0,$);else{var V=_&&!X&&C?{maxByteLength:C(D)}:void 0;at=new y($,V);for(var J=new b(D),rt=new b(at),L=A($,F),P=0;P<L;P++)R(rt,P,N(J,P))}return f||d(D),at}},5745:(g,t,e)=>{var i=e(7629);g.exports=function(a,o){return i[a]||(i[a]=o||{})}},5781:(g,t,e)=>{var i=e(6518),a=e(7751),o=e(2812),l=e(655),u=e(7416),h=a("URL");i({target:"URL",stat:!0,forced:!u},{parse:function(f){var m=o(arguments.length,1),y=l(f),b=m<2||arguments[1]===void 0?void 0:l(arguments[1]);try{return new h(y,b)}catch{return null}}})},5854:(g,t,e)=>{var i=e(2777),a=TypeError;g.exports=function(o){var l=i(o,"number");if(typeof l=="number")throw new a("Can't convert number to bigint");return BigInt(l)}},5876:(g,t,e)=>{var i=e(6518),a=e(3838),o=e(4916),l=!o("isSubsetOf",function(u){return u});i({target:"Set",proto:!0,real:!0,forced:l},{isSubsetOf:a})},5917:(g,t,e)=>{var i=e(3724),a=e(9039),o=e(4055);g.exports=!i&&!a(function(){return Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a!==7})},5966:(g,t,e)=>{var i=e(9306),a=e(4117);g.exports=function(o,l){var u=o[l];return a(u)?void 0:i(u)}},6043:(g,t,e)=>{var i=e(9306),a=TypeError,o=function(l){var u,h;this.promise=new l(function(d,f){if(u!==void 0||h!==void 0)throw new a("Bad Promise constructor");u=d,h=f}),this.resolve=i(u),this.reject=i(h)};g.exports.f=function(l){return new o(l)}},6080:(g,t,e)=>{var i=e(7476),a=e(9306),o=e(616),l=i(i.bind);g.exports=function(u,h){return a(u),h===void 0?u:o?l(u,h):function(){return u.apply(h,arguments)}}},6119:(g,t,e)=>{var i=e(5745),a=e(3392),o=i("keys");g.exports=function(l){return o[l]||(o[l]=a(l))}},6193:(g,t,e)=>{var i=e(4215);g.exports=i==="NODE"},6198:(g,t,e)=>{var i=e(8014);g.exports=function(a){return i(a.length)}},6269:g=>{g.exports={}},6279:(g,t,e)=>{var i=e(6840);g.exports=function(a,o,l){for(var u in o)i(a,u,o[u],l);return a}},6319:(g,t,e)=>{var i=e(8551),a=e(9539);g.exports=function(o,l,u,h){try{return h?l(i(u)[0],u[1]):l(u)}catch(d){a(o,"throw",d)}}},6395:g=>{g.exports=!1},6518:(g,t,e)=>{var i=e(4576),a=e(7347).f,o=e(6699),l=e(6840),u=e(9433),h=e(7740),d=e(2796);g.exports=function(f,m){var y=f.target,b=f.global,A=f.stat,x,w,T,O,C,N;if(b?w=i:A?w=i[y]||u(y,{}):w=i[y]&&i[y].prototype,w)for(T in m){if(C=m[T],f.dontCallGetSet?(N=a(w,T),O=N&&N.value):O=w[T],x=d(b?T:y+(A?".":"#")+T,f.forced),!x&&O!==void 0){if(typeof C==typeof O)continue;h(C,O)}(f.sham||O&&O.sham)&&o(C,"sham",!0),l(w,T,C,f)}}},6573:(g,t,e)=>{var i=e(3724),a=e(2106),o=e(3238),l=ArrayBuffer.prototype;i&&!("detached"in l)&&a(l,"detached",{configurable:!0,get:function(){return o(this)}})},6632:(g,t,e)=>{var i=e(6518),a=e(4576),o=e(9143),l=e(4154),u=a.Uint8Array,h=!u||!u.prototype.setFromBase64||!function(){var d=new u([255,255,255,255,255]);try{d.setFromBase64("",null);return}catch{}try{d.setFromBase64("a");return}catch{}try{d.setFromBase64("MjYyZg===")}catch{return d[0]===50&&d[1]===54&&d[2]===50&&d[3]===255&&d[4]===255}}();u&&i({target:"Uint8Array",proto:!0,forced:h},{setFromBase64:function(f){l(this);var m=o(f,arguments.length>1?arguments[1]:void 0,this,this.length);return{read:m.read,written:m.written}}})},6699:(g,t,e)=>{var i=e(3724),a=e(4913),o=e(6980);g.exports=i?function(l,u,h){return a.f(l,u,o(1,h))}:function(l,u,h){return l[u]=h,l}},6706:(g,t,e)=>{var i=e(9504),a=e(9306);g.exports=function(o,l,u){try{return i(a(Object.getOwnPropertyDescriptor(o,l)[u]))}catch{}}},6801:(g,t,e)=>{var i=e(3724),a=e(8686),o=e(4913),l=e(8551),u=e(5397),h=e(1072);t.f=i&&!a?Object.defineProperties:function(f,m){l(f);for(var y=u(m),b=h(m),A=b.length,x=0,w;A>x;)o.f(f,w=b[x++],y[w]);return f}},6823:g=>{var t=String;g.exports=function(e){try{return t(e)}catch{return"Object"}}},6837:g=>{var t=TypeError,e=9007199254740991;g.exports=function(i){if(i>e)throw t("Maximum allowed index exceeded");return i}},6840:(g,t,e)=>{var i=e(4901),a=e(4913),o=e(283),l=e(9433);g.exports=function(u,h,d,f){f||(f={});var m=f.enumerable,y=f.name!==void 0?f.name:h;if(i(d)&&o(d,y,f),f.global)m?u[h]=d:l(h,d);else{try{f.unsafe?u[h]&&(m=!0):delete u[h]}catch{}m?u[h]=d:a.f(u,h,{value:d,enumerable:!1,configurable:!f.nonConfigurable,writable:!f.nonWritable})}return u}},6955:(g,t,e)=>{var i=e(2140),a=e(4901),o=e(2195),l=e(8227),u=l("toStringTag"),h=Object,d=o(function(){return arguments}())==="Arguments",f=function(m,y){try{return m[y]}catch{}};g.exports=i?o:function(m){var y,b,A;return m===void 0?"Undefined":m===null?"Null":typeof(b=f(y=h(m),u))=="string"?b:d?o(y):(A=o(y))==="Object"&&a(y.callee)?"Arguments":A}},6969:(g,t,e)=>{var i=e(2777),a=e(757);g.exports=function(o){var l=i(o,"string");return a(l)?l:l+""}},6980:g=>{g.exports=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}},7040:(g,t,e)=>{var i=e(4495);g.exports=i&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},7055:(g,t,e)=>{var i=e(9504),a=e(9039),o=e(2195),l=Object,u=i("".split);g.exports=a(function(){return!l("z").propertyIsEnumerable(0)})?function(h){return o(h)==="String"?u(h,""):l(h)}:l},7080:(g,t,e)=>{var i=e(4402).has;g.exports=function(a){return i(a),a}},7347:(g,t,e)=>{var i=e(3724),a=e(9565),o=e(8773),l=e(6980),u=e(5397),h=e(6969),d=e(9297),f=e(5917),m=Object.getOwnPropertyDescriptor;t.f=i?m:function(b,A){if(b=u(b),A=h(A),f)try{return m(b,A)}catch{}if(d(b,A))return l(!a(o.f,b,A),b[A])}},7394:(g,t,e)=>{var i=e(4576),a=e(6706),o=e(2195),l=i.ArrayBuffer,u=i.TypeError;g.exports=l&&a(l.prototype,"byteLength","get")||function(h){if(o(h)!=="ArrayBuffer")throw new u("ArrayBuffer expected");return h.byteLength}},7416:(g,t,e)=>{var i=e(9039),a=e(8227),o=e(3724),l=e(6395),u=a("iterator");g.exports=!i(function(){var h=new URL("b?a=1&b=2&c=3","https://a"),d=h.searchParams,f=new URLSearchParams("a=1&a=2&b=3"),m="";return h.pathname="c%20d",d.forEach(function(y,b){d.delete("b"),m+=b+y}),f.delete("a",2),f.delete("b",void 0),l&&(!h.toJSON||!f.has("a",1)||f.has("a",2)||!f.has("a",void 0)||f.has("b"))||!d.size&&(l||!o)||!d.sort||h.href!=="https://a/c%20d?a=1&c=3"||d.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!d[u]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://").host!=="xn--e1aybc"||new URL("https://a#").hash!=="#%D0%B1"||m!=="a1c3"||new URL("https://x",void 0).host!=="x"})},7476:(g,t,e)=>{var i=e(2195),a=e(9504);g.exports=function(o){if(i(o)==="Function")return a(o)}},7566:(g,t,e)=>{var i=e(6840),a=e(9504),o=e(655),l=e(2812),u=URLSearchParams,h=u.prototype,d=a(h.getAll),f=a(h.has),m=new u("a=1");(m.has("a",2)||!m.has("a",void 0))&&i(h,"has",function(b){var A=arguments.length,x=A<2?void 0:arguments[1];if(A&&x===void 0)return f(this,b);var w=d(this,b);l(A,1);for(var T=o(x),O=0;O<w.length;)if(w[O++]===T)return!0;return!1},{enumerable:!0,unsafe:!0})},7588:(g,t,e)=>{var i=e(6518),a=e(9565),o=e(2652),l=e(9306),u=e(8551),h=e(1767),d=e(9539),f=e(4549),m=f("forEach",TypeError);i({target:"Iterator",proto:!0,real:!0,forced:m},{forEach:function(b){u(this);try{l(b)}catch(w){d(this,"throw",w)}if(m)return a(m,this,b);var A=h(this),x=0;o(A,function(w){b(w,x++)},{IS_RECORD:!0})}})},7629:(g,t,e)=>{var i=e(6395),a=e(4576),o=e(9433),l="__core-js_shared__",u=g.exports=a[l]||o(l,{});(u.versions||(u.versions=[])).push({version:"3.45.0",mode:i?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.45.0/LICENSE",source:"https://github.com/zloirock/core-js"})},7642:(g,t,e)=>{var i=e(6518),a=e(3440),o=e(9039),l=e(4916),u=!l("difference",function(d){return d.size===0}),h=u||o(function(){var d={size:1,has:function(){return!0},keys:function(){var m=0;return{next:function(){var y=m++>1;return f.has(1)&&f.clear(),{done:y,value:2}}}}},f=new Set([1,2,3,4]);return f.difference(d).size!==3});i({target:"Set",proto:!0,real:!0,forced:h},{difference:a})},7657:(g,t,e)=>{var i=e(9039),a=e(4901),o=e(34),l=e(2360),u=e(2787),h=e(6840),d=e(8227),f=e(6395),m=d("iterator"),y=!1,b,A,x;[].keys&&(x=[].keys(),"next"in x?(A=u(u(x)),A!==Object.prototype&&(b=A)):y=!0);var w=!o(b)||i(function(){var T={};return b[m].call(T)!==T});w?b={}:f&&(b=l(b)),a(b[m])||h(b,m,function(){return this}),g.exports={IteratorPrototype:b,BUGGY_SAFARI_ITERATORS:y}},7680:(g,t,e)=>{var i=e(9504);g.exports=i([].slice)},7696:(g,t,e)=>{var i=e(1291),a=e(8014),o=RangeError;g.exports=function(l){if(l===void 0)return 0;var u=i(l),h=a(u);if(u!==h)throw new o("Wrong length or index");return h}},7740:(g,t,e)=>{var i=e(9297),a=e(5031),o=e(7347),l=e(4913);g.exports=function(u,h,d){for(var f=a(h),m=l.f,y=o.f,b=0;b<f.length;b++){var A=f[b];!i(u,A)&&!(d&&i(d,A))&&m(u,A,y(h,A))}}},7750:(g,t,e)=>{var i=e(4117),a=TypeError;g.exports=function(o){if(i(o))throw new a("Can't call method on "+o);return o}},7751:(g,t,e)=>{var i=e(4576),a=e(4901),o=function(l){return a(l)?l:void 0};g.exports=function(l,u){return arguments.length<2?o(i[l]):i[l]&&i[l][u]}},7811:g=>{g.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},7936:(g,t,e)=>{var i=e(6518),a=e(5636);a&&i({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return a(this,arguments.length?arguments[0]:void 0,!1)}})},8004:(g,t,e)=>{var i=e(6518),a=e(9039),o=e(8750),l=e(4916),u=!l("intersection",function(h){return h.size===2&&h.has(1)&&h.has(2)})||a(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});i({target:"Set",proto:!0,real:!0,forced:u},{intersection:o})},8014:(g,t,e)=>{var i=e(1291),a=Math.min;g.exports=function(o){var l=i(o);return l>0?a(l,9007199254740991):0}},8100:(g,t,e)=>{var i=e(6518),a=e(5636);a&&i({target:"ArrayBuffer",proto:!0},{transfer:function(){return a(this,arguments.length?arguments[0]:void 0,!0)}})},8111:(g,t,e)=>{var i=e(6518),a=e(4576),o=e(679),l=e(8551),u=e(4901),h=e(2787),d=e(2106),f=e(4659),m=e(9039),y=e(9297),b=e(8227),A=e(7657).IteratorPrototype,x=e(3724),w=e(6395),T="constructor",O="Iterator",C=b("toStringTag"),N=TypeError,R=a[O],D=w||!u(R)||R.prototype!==A||!m(function(){R({})}),j=function(){if(o(this,A),h(this)===A)throw new N("Abstract class Iterator not directly constructable")},_=function(F,$){x?d(A,F,{configurable:!0,get:function(){return $},set:function(X){if(l(this),this===A)throw new N("You can't redefine this property");y(this,F)?this[F]=X:f(this,F,X)}}):A[F]=$};y(A,C)||_(C,O),(D||!y(A,T)||A[T]===Object)&&_(T,j),j.prototype=A,i({global:!0,constructor:!0,forced:D},{Iterator:j})},8227:(g,t,e)=>{var i=e(4576),a=e(5745),o=e(9297),l=e(3392),u=e(4495),h=e(7040),d=i.Symbol,f=a("wks"),m=h?d.for||d:d&&d.withoutSetter||l;g.exports=function(y){return o(f,y)||(f[y]=u&&o(d,y)?d[y]:m("Symbol."+y)),f[y]}},8235:(g,t,e)=>{var i=e(9504),a=e(9297),o=SyntaxError,l=parseInt,u=String.fromCharCode,h=i("".charAt),d=i("".slice),f=i(/./.exec),m={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	"},y=/^[\da-f]{4}$/i,b=/^[\u0000-\u001F]$/;g.exports=function(A,x){for(var w=!0,T="";x<A.length;){var O=h(A,x);if(O==="\\"){var C=d(A,x,x+2);if(a(m,C))T+=m[C],x+=2;else if(C==="\\u"){x+=2;var N=d(A,x,x+4);if(!f(y,N))throw new o("Bad Unicode escape at: "+x);T+=u(l(N,16)),x+=4}else throw new o('Unknown escape sequence: "'+C+'"')}else if(O==='"'){w=!1,x++;break}else{if(f(b,O))throw new o("Bad control character in string literal at: "+x);T+=O,x++}}if(w)throw new o("Unterminated string at: "+x);return{value:T,end:x}}},8237:(g,t,e)=>{var i=e(6518),a=e(2652),o=e(9306),l=e(8551),u=e(1767),h=e(9539),d=e(4549),f=e(8745),m=e(9039),y=TypeError,b=m(function(){[].keys().reduce(function(){},void 0)}),A=!b&&d("reduce",y);i({target:"Iterator",proto:!0,real:!0,forced:b||A},{reduce:function(w){l(this);try{o(w)}catch(R){h(this,"throw",R)}var T=arguments.length<2,O=T?void 0:arguments[1];if(A)return f(A,this,T?[w]:[w,O]);var C=u(this),N=0;if(a(C,function(R){T?(T=!1,O=R):O=w(O,R,N),N++},{IS_RECORD:!0}),T)throw new y("Reduce of empty iterator with no initial value");return O}})},8335:(g,t,e)=>{var i=e(6518),a=e(3724),o=e(4576),l=e(7751),u=e(9504),h=e(9565),d=e(4901),f=e(34),m=e(4376),y=e(9297),b=e(655),A=e(6198),x=e(4659),w=e(9039),T=e(8235),O=e(4495),C=o.JSON,N=o.Number,R=o.SyntaxError,D=C&&C.parse,j=l("Object","keys"),_=Object.getOwnPropertyDescriptor,F=u("".charAt),$=u("".slice),X=u(/./.exec),at=u([].push),V=/^\d$/,J=/^[1-9]$/,rt=/^[\d-]$/,L=/^[\t\n\r ]$/,P=0,Q=1,ct=function(W,Z){W=b(W);var it=new et(W,0),ft=it.parse(),At=ft.value,ut=it.skip(L,ft.end);if(ut<W.length)throw new R('Unexpected extra character: "'+F(W,ut)+'" after the parsed data at: '+ut);return d(Z)?k({"":At},"",Z,ft):At},k=function(W,Z,it,ft){var At=W[Z],ut=ft&&At===ft.value,Rt=ut&&typeof ft.source=="string"?{source:ft.source}:{},Pt,de,xe,ae,Ae;if(f(At)){var $i=m(At),ws=ut?ft.nodes:$i?[]:{};if($i)for(Pt=ws.length,xe=A(At),ae=0;ae<xe;ae++)K(At,ae,k(At,""+ae,it,ae<Pt?ws[ae]:void 0));else for(de=j(At),xe=A(de),ae=0;ae<xe;ae++)Ae=de[ae],K(At,Ae,k(At,Ae,it,y(ws,Ae)?ws[Ae]:void 0))}return h(it,W,Z,At,Rt)},K=function(W,Z,it){if(a){var ft=_(W,Z);if(ft&&!ft.configurable)return}it===void 0?delete W[Z]:x(W,Z,it)},st=function(W,Z,it,ft){this.value=W,this.end=Z,this.source=it,this.nodes=ft},et=function(W,Z){this.source=W,this.index=Z};et.prototype={fork:function(W){return new et(this.source,W)},parse:function(){var W=this.source,Z=this.skip(L,this.index),it=this.fork(Z),ft=F(W,Z);if(X(rt,ft))return it.number();switch(ft){case"{":return it.object();case"[":return it.array();case'"':return it.string();case"t":return it.keyword(!0);case"f":return it.keyword(!1);case"n":return it.keyword(null)}throw new R('Unexpected character: "'+ft+'" at: '+Z)},node:function(W,Z,it,ft,At){return new st(Z,ft,W?null:$(this.source,it,ft),At)},object:function(){for(var W=this.source,Z=this.index+1,it=!1,ft={},At={};Z<W.length;){if(Z=this.until(['"',"}"],Z),F(W,Z)==="}"&&!it){Z++;break}var ut=this.fork(Z).string(),Rt=ut.value;Z=ut.end,Z=this.until([":"],Z)+1,Z=this.skip(L,Z),ut=this.fork(Z).parse(),x(At,Rt,ut),x(ft,Rt,ut.value),Z=this.until([",","}"],ut.end);var Pt=F(W,Z);if(Pt===",")it=!0,Z++;else if(Pt==="}"){Z++;break}}return this.node(Q,ft,this.index,Z,At)},array:function(){for(var W=this.source,Z=this.index+1,it=!1,ft=[],At=[];Z<W.length;){if(Z=this.skip(L,Z),F(W,Z)==="]"&&!it){Z++;break}var ut=this.fork(Z).parse();if(at(At,ut),at(ft,ut.value),Z=this.until([",","]"],ut.end),F(W,Z)===",")it=!0,Z++;else if(F(W,Z)==="]"){Z++;break}}return this.node(Q,ft,this.index,Z,At)},string:function(){var W=this.index,Z=T(this.source,this.index+1);return this.node(P,Z.value,W,Z.end)},number:function(){var W=this.source,Z=this.index,it=Z;if(F(W,it)==="-"&&it++,F(W,it)==="0")it++;else if(X(J,F(W,it)))it=this.skip(V,it+1);else throw new R("Failed to parse number at: "+it);if(F(W,it)==="."&&(it=this.skip(V,it+1)),F(W,it)==="e"||F(W,it)==="E"){it++,(F(W,it)==="+"||F(W,it)==="-")&&it++;var ft=it;if(it=this.skip(V,it),ft===it)throw new R("Failed to parse number's exponent value at: "+it)}return this.node(P,N($(W,Z,it)),Z,it)},keyword:function(W){var Z=""+W,it=this.index,ft=it+Z.length;if($(this.source,it,ft)!==Z)throw new R("Failed to parse value at: "+it);return this.node(P,W,it,ft)},skip:function(W,Z){for(var it=this.source;Z<it.length&&X(W,F(it,Z));Z++);return Z},until:function(W,Z){Z=this.skip(L,Z);for(var it=F(this.source,Z),ft=0;ft<W.length;ft++)if(W[ft]===it)return Z;throw new R('Unexpected character: "'+it+'" at: '+Z)}};var ot=w(function(){var W="9007199254740993",Z;return D(W,function(it,ft,At){Z=At.source}),Z!==W}),lt=O&&!w(function(){return 1/D("-0 	")!==-1/0});i({target:"JSON",stat:!0,forced:ot},{parse:function(Z,it){return lt&&!d(it)?D(Z):ct(Z,it)}})},8469:(g,t,e)=>{var i=e(9504),a=e(507),o=e(4402),l=o.Set,u=o.proto,h=i(u.forEach),d=i(u.keys),f=d(new l).next;g.exports=function(m,y,b){return b?a({iterator:d(m),next:f},y):h(m,y)}},8480:(g,t,e)=>{var i=e(1828),a=e(8727),o=a.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(u){return i(u,o)}},8527:(g,t,e)=>{var i=e(7080),a=e(4402).has,o=e(5170),l=e(3789),u=e(507),h=e(9539);g.exports=function(f){var m=i(this),y=l(f);if(o(m)<y.size)return!1;var b=y.getIterator();return u(b,function(A){if(!a(m,A))return h(b,"normal",!1)})!==!1}},8551:(g,t,e)=>{var i=e(34),a=String,o=TypeError;g.exports=function(l){if(i(l))return l;throw new o(a(l)+" is not an object")}},8574:(g,t,e)=>{var i=e(9504),a=Error,o=i("".replace),l=function(d){return String(new a(d).stack)}("zxcasd"),u=/\n\s*at [^:]*:[^\n]*/,h=u.test(l);g.exports=function(d,f){if(h&&typeof d=="string"&&!a.prepareStackTrace)for(;f--;)d=o(d,u,"");return d}},8622:(g,t,e)=>{var i=e(4576),a=e(4901),o=i.WeakMap;g.exports=a(o)&&/native code/.test(String(o))},8646:(g,t,e)=>{var i=e(9565),a=e(8551),o=e(1767),l=e(851);g.exports=function(u,h){(!h||typeof u!="string")&&a(u);var d=l(u);return o(a(d!==void 0?i(d,u):u))}},8686:(g,t,e)=>{var i=e(3724),a=e(9039);g.exports=i&&a(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},8721:(g,t,e)=>{var i=e(3724),a=e(9504),o=e(2106),l=URLSearchParams.prototype,u=a(l.forEach);i&&!("size"in l)&&o(l,"size",{get:function(){var d=0;return u(this,function(){d++}),d},configurable:!0,enumerable:!0})},8727:g=>{g.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8745:(g,t,e)=>{var i=e(616),a=Function.prototype,o=a.apply,l=a.call;g.exports=typeof Reflect=="object"&&Reflect.apply||(i?l.bind(o):function(){return l.apply(o,arguments)})},8750:(g,t,e)=>{var i=e(7080),a=e(4402),o=e(5170),l=e(3789),u=e(8469),h=e(507),d=a.Set,f=a.add,m=a.has;g.exports=function(b){var A=i(this),x=l(b),w=new d;return o(A)>x.size?h(x.getIterator(),function(T){m(A,T)&&f(w,T)}):u(A,function(T){x.includes(T)&&f(w,T)}),w}},8773:(g,t)=>{var e={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,a=i&&!e.call({1:2},1);t.f=a?function(l){var u=i(this,l);return!!u&&u.enumerable}:e},8981:(g,t,e)=>{var i=e(7750),a=Object;g.exports=function(o){return a(i(o))}},9039:g=>{g.exports=function(t){try{return!!t()}catch{return!0}}},9143:(g,t,e)=>{var i=e(4576),a=e(9504),o=e(3972),l=e(3463),u=e(9297),h=e(2804),d=e(944),f=e(5169),m=h.c2i,y=h.c2iUrl,b=i.SyntaxError,A=i.TypeError,x=a("".charAt),w=function(C,N){for(var R=C.length;N<R;N++){var D=x(C,N);if(D!==" "&&D!=="	"&&D!==`
`&&D!=="\f"&&D!=="\r")break}return N},T=function(C,N,R){var D=C.length;D<4&&(C+=D===2?"AA":"A");var j=(N[x(C,0)]<<18)+(N[x(C,1)]<<12)+(N[x(C,2)]<<6)+N[x(C,3)],_=[j>>16&255,j>>8&255,j&255];if(D===2){if(R&&_[1]!==0)throw new b("Extra bits");return[_[0]]}if(D===3){if(R&&_[2]!==0)throw new b("Extra bits");return[_[0],_[1]]}return _},O=function(C,N,R){for(var D=N.length,j=0;j<D;j++)C[R+j]=N[j];return R+D};g.exports=function(C,N,R,D){l(C),o(N);var j=d(N)==="base64"?m:y,_=N?N.lastChunkHandling:void 0;if(_===void 0&&(_="loose"),_!=="loose"&&_!=="strict"&&_!=="stop-before-partial")throw new A("Incorrect `lastChunkHandling` option");R&&f(R.buffer);var F=C.length,$=R||[],X=0,at=0,V="",J=0;if(D)for(;;){if(J=w(C,J),J===F){if(V.length>0){if(_==="stop-before-partial")break;if(_==="loose"){if(V.length===1)throw new b("Malformed padding: exactly one additional character");X=O($,T(V,j,!1),X)}else throw new b("Missing padding")}at=F;break}var rt=x(C,J);if(++J,rt==="="){if(V.length<2)throw new b("Padding is too early");if(J=w(C,J),V.length===2){if(J===F){if(_==="stop-before-partial")break;throw new b("Malformed padding: only one =")}x(C,J)==="="&&(++J,J=w(C,J))}if(J<F)throw new b("Unexpected character after padding");X=O($,T(V,j,_==="strict"),X),at=F;break}if(!u(j,rt))throw new b("Unexpected character");var L=D-X;if(L===1&&V.length===2||L===2&&V.length===3||(V+=rt,V.length===4&&(X=O($,T(V,j,!1),X),V="",at=J,X===D)))break}return{bytes:$,read:at,written:X}}},9286:(g,t,e)=>{var i=e(4402),a=e(8469),o=i.Set,l=i.add;g.exports=function(u){var h=new o;return a(u,function(d){l(h,d)}),h}},9297:(g,t,e)=>{var i=e(9504),a=e(8981),o=i({}.hasOwnProperty);g.exports=Object.hasOwn||function(u,h){return o(a(u),h)}},9306:(g,t,e)=>{var i=e(4901),a=e(6823),o=TypeError;g.exports=function(l){if(i(l))return l;throw new o(a(l)+" is not a function")}},9314:(g,t,e)=>{var i=e(6518),a=e(9565),o=e(8551),l=e(1767),u=e(4149),h=e(9590),d=e(9539),f=e(9462),m=e(684),y=e(4549),b=e(6395),A=!b&&!m("drop",0),x=!b&&!A&&y("drop",RangeError),w=b||A||x,T=f(function(){for(var O=this.iterator,C=this.next,N,R;this.remaining;)if(this.remaining--,N=o(a(C,O)),R=this.done=!!N.done,R)return;if(N=o(a(C,O)),R=this.done=!!N.done,!R)return N.value});i({target:"Iterator",proto:!0,real:!0,forced:w},{drop:function(C){o(this);var N;try{N=h(u(+C))}catch(R){d(this,"throw",R)}return x?a(x,this,N):new T(l(this),{remaining:N})}})},9429:(g,t,e)=>{var i=e(4576),a=e(6193);g.exports=function(o){if(a){try{return i.process.getBuiltinModule(o)}catch{}try{return Function('return require("'+o+'")')()}catch{}}}},9432:(g,t,e)=>{e(5213)},9433:(g,t,e)=>{var i=e(4576),a=Object.defineProperty;g.exports=function(o,l){try{a(i,o,{value:l,configurable:!0,writable:!0})}catch{i[o]=l}return l}},9462:(g,t,e)=>{var i=e(9565),a=e(2360),o=e(6699),l=e(6279),u=e(8227),h=e(1181),d=e(5966),f=e(7657).IteratorPrototype,m=e(2529),y=e(9539),b=e(1385),A=u("toStringTag"),x="IteratorHelper",w="WrapForValidIterator",T="normal",O="throw",C=h.set,N=function(j){var _=h.getterFor(j?w:x);return l(a(f),{next:function(){var $=_(this);if(j)return $.nextHandler();if($.done)return m(void 0,!0);try{var X=$.nextHandler();return $.returnHandlerResult?X:m(X,$.done)}catch(at){throw $.done=!0,at}},return:function(){var F=_(this),$=F.iterator;if(F.done=!0,j){var X=d($,"return");return X?i(X,$):m(void 0,!0)}if(F.inner)try{y(F.inner.iterator,T)}catch(at){return y($,O,at)}if(F.openIters)try{b(F.openIters,T)}catch(at){return y($,O,at)}return $&&y($,T),m(void 0,!0)}})},R=N(!0),D=N(!1);o(D,A,"Iterator Helper"),g.exports=function(j,_,F){var $=function(at,V){V?(V.iterator=at.iterator,V.next=at.next):V=at,V.type=_?w:x,V.returnHandlerResult=!!F,V.nextHandler=j,V.counter=0,V.done=!1,C(this,V)};return $.prototype=_?R:D,$}},9486:(g,t,e)=>{var i=e(6518),a=e(4576),o=e(9504),l=e(3972),u=e(4154),h=e(5169),d=e(2804),f=e(944),m=d.i2c,y=d.i2cUrl,b=o("".charAt),A=a.Uint8Array,x=!A||!A.prototype.toBase64||!function(){try{var w=new A;w.toBase64(null)}catch{return!0}}();A&&i({target:"Uint8Array",proto:!0,forced:x},{toBase64:function(){var T=u(this),O=arguments.length?l(arguments[0]):void 0,C=f(O)==="base64"?m:y,N=!!O&&!!O.omitPadding;h(this.buffer);for(var R="",D=0,j=T.length,_,F=function($){return b(C,_>>6*$&63)};D+2<j;D+=3)_=(T[D]<<16)+(T[D+1]<<8)+T[D+2],R+=F(3)+F(2)+F(1)+F(0);return D+2===j?(_=(T[D]<<16)+(T[D+1]<<8),R+=F(3)+F(2)+F(1)+(N?"":"=")):D+1===j&&(_=T[D]<<16,R+=F(3)+F(2)+(N?"":"==")),R}})},9504:(g,t,e)=>{var i=e(616),a=Function.prototype,o=a.call,l=i&&a.bind.bind(o,o);g.exports=i?l:function(u){return function(){return o.apply(u,arguments)}}},9519:(g,t,e)=>{var i=e(4576),a=e(2839),o=i.process,l=i.Deno,u=o&&o.versions||l&&l.version,h=u&&u.v8,d,f;h&&(d=h.split("."),f=d[0]>0&&d[0]<4?1:+(d[0]+d[1])),!f&&a&&(d=a.match(/Edge\/(\d+)/),(!d||d[1]>=74)&&(d=a.match(/Chrome\/(\d+)/),d&&(f=+d[1]))),g.exports=f},9539:(g,t,e)=>{var i=e(9565),a=e(8551),o=e(5966);g.exports=function(l,u,h){var d,f;a(l);try{if(d=o(l,"return"),!d){if(u==="throw")throw h;return h}d=i(d,l)}catch(m){f=!0,d=m}if(u==="throw")throw h;if(f)throw d;return a(d),h}},9565:(g,t,e)=>{var i=e(616),a=Function.prototype.call;g.exports=i?a.bind(a):function(){return a.apply(a,arguments)}},9577:(g,t,e)=>{var i=e(9928),a=e(4644),o=e(1108),l=e(1291),u=e(5854),h=a.aTypedArray,d=a.getTypedArrayConstructor,f=a.exportTypedArrayMethod,m=function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(b){return b===8}}(),y=m&&function(){try{new Int8Array(1).with(-.5,1)}catch{return!0}}();f("with",function(b,A){var x=h(this),w=l(b),T=o(x)?u(A):+A;return i(x,d(x),w,T)},!m||y)},9590:(g,t,e)=>{var i=e(1291),a=RangeError;g.exports=function(o){var l=i(o);if(l<0)throw new a("The argument can't be less than 0");return l}},9617:(g,t,e)=>{var i=e(5397),a=e(5610),o=e(6198),l=function(u){return function(h,d,f){var m=i(h),y=o(m);if(y===0)return!u&&-1;var b=a(f,y),A;if(u&&d!==d){for(;y>b;)if(A=m[b++],A!==A)return!0}else for(;y>b;b++)if((u||b in m)&&m[b]===d)return u||b||0;return!u&&-1}};g.exports={includes:l(!0),indexOf:l(!1)}},9631:(g,t,e)=>{e(9486)},9797:(g,t,e)=>{e(4226)},9835:g=>{g.exports=function(t){try{var e=new Set,i={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},a=e[t](i);return a.size===1&&a.values().next().value===4}catch{return!1}}},9928:(g,t,e)=>{var i=e(6198),a=e(1291),o=RangeError;g.exports=function(l,u,h,d){var f=i(l),m=a(h),y=m<0?f+m:m;if(y>=f||y<0)throw new o("Incorrect index");for(var b=new u(f),A=0;A<f;A++)b[A]=A===y?d:l[A];return b}}},ip={};function Tt(g){var t=ip[g];if(t!==void 0)return t.exports;var e=ip[g]={exports:{}};return Bv[g].call(e.exports,e,e.exports,Tt),e.exports}Tt.d=(g,t)=>{for(var e in t)Tt.o(t,e)&&!Tt.o(g,e)&&Object.defineProperty(g,e,{enumerable:!0,get:t[e]})};Tt.o=(g,t)=>Object.prototype.hasOwnProperty.call(g,t);Tt(4114);Tt(6573);Tt(8100);Tt(7936);Tt(8111);Tt(8237);Tt(1689);Tt(9577);Tt(4235);Tt(9432);Tt(1549);Tt(9797);Tt(9631);Tt(5623);Tt(4979);Tt(5781);const ke=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Tu=[.001,0,0,.001,0,0],mu=1.35,Je={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Kn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Cp="pdfjs_internal_editor_",wt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},kt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Rp={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Te={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},tr={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ee={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Bi={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},rr={ERRORS:0,WARNINGS:1,INFOS:5},Vi={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Oo={moveTo:0,lineTo:1,curveTo:2,closePath:3},Mp={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Yo=rr.WARNINGS;function Fv(g){Number.isInteger(g)&&(Yo=g)}function zv(){return Yo}function Xo(g){Yo>=rr.INFOS&&console.log(`Info: ${g}`)}function Et(g){Yo>=rr.WARNINGS&&console.log(`Warning: ${g}`)}function Gt(g){throw new Error(g)}function ce(g,t){g||Gt(t)}function Uv(g){switch(g?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Iu(g,t=null,e=null){if(!g)return null;if(e&&typeof g=="string"&&(e.addDefaultProtocol&&g.startsWith("www.")&&g.match(/\./g)?.length>=2&&(g=`http://${g}`),e.tryConvertEncoding))try{g=Xv(g)}catch{}const i=t?URL.parse(g,t):URL.parse(g);return Uv(i)?i:null}function ju(g,t,e=!1){const i=URL.parse(g);return i?(i.hash=t,i.href):e&&Iu(g,"http://example.com")?g.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Nt(g,t,e,i=!1){return Object.defineProperty(g,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const Qs=function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();class ap extends Qs{constructor(t,e){super(t,"PasswordException"),this.code=e}}class vu extends Qs{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class zo extends Qs{constructor(t){super(t,"InvalidPDFException")}}class nr extends Qs{constructor(t,e,i){super(t,"ResponseException"),this.status=e,this.missing=i}}class Hv extends Qs{constructor(t){super(t,"FormatError")}}class Qn extends Qs{constructor(t){super(t,"AbortException")}}function Np(g){(typeof g!="object"||g?.length===void 0)&&Gt("Invalid argument for bytesToString");const t=g.length,e=8192;if(t<e)return String.fromCharCode.apply(null,g);const i=[];for(let a=0;a<t;a+=e){const o=Math.min(a+e,t),l=g.subarray(a,o);i.push(String.fromCharCode.apply(null,l))}return i.join("")}function or(g){typeof g!="string"&&Gt("Invalid argument for stringToBytes");const t=g.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=g.charCodeAt(i)&255;return e}function Gv(g){return String.fromCharCode(g>>24&255,g>>16&255,g>>8&255,g&255)}function Vv(){const g=new Uint8Array(4);return g[0]=1,new Uint32Array(g.buffer,0,1)[0]===1}function Yv(){try{return new Function(""),!0}catch{return!1}}class be{static get isLittleEndian(){return Nt(this,"isLittleEndian",Vv())}static get isEvalSupported(){return Nt(this,"isEvalSupported",Yv())}static get isOffscreenCanvasSupported(){return Nt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Nt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Nt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return Nt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const yu=Array.from(Array(256).keys(),g=>g.toString(16).padStart(2,"0"));class dt{static makeHexColor(t,e,i){return`#${yu[t]}${yu[e]}${yu[i]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,i=0){const a=t[i],o=t[i+1];t[i]=a*e[0]+o*e[2]+e[4],t[i+1]=a*e[1]+o*e[3]+e[5]}static applyTransformToBezier(t,e,i=0){const a=e[0],o=e[1],l=e[2],u=e[3],h=e[4],d=e[5];for(let f=0;f<6;f+=2){const m=t[i+f],y=t[i+f+1];t[i+f]=m*a+y*l+h,t[i+f+1]=m*o+y*u+d}}static applyInverseTransform(t,e){const i=t[0],a=t[1],o=e[0]*e[3]-e[1]*e[2];t[0]=(i*e[3]-a*e[2]+e[2]*e[5]-e[4]*e[3])/o,t[1]=(-i*e[1]+a*e[0]+e[4]*e[1]-e[5]*e[0])/o}static axialAlignedBoundingBox(t,e,i){const a=e[0],o=e[1],l=e[2],u=e[3],h=e[4],d=e[5],f=t[0],m=t[1],y=t[2],b=t[3];let A=a*f+h,x=A,w=a*y+h,T=w,O=u*m+d,C=O,N=u*b+d,R=N;if(o!==0||l!==0){const D=o*f,j=o*y,_=l*m,F=l*b;A+=_,T+=_,w+=F,x+=F,O+=D,R+=D,N+=j,C+=j}i[0]=Math.min(i[0],A,w,x,T),i[1]=Math.min(i[1],O,N,C,R),i[2]=Math.max(i[2],A,w,x,T),i[3]=Math.max(i[3],O,N,C,R)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const i=t[0],a=t[1],o=t[2],l=t[3],u=i**2+a**2,h=i*o+a*l,d=o**2+l**2,f=(u+d)/2,m=Math.sqrt(f**2-(u*d-h**2));e[0]=Math.sqrt(f+m||1),e[1]=Math.sqrt(f-m||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>a)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>l?null:[i,o,a,l]}static pointBoundingBox(t,e,i){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}static rectBoundingBox(t,e,i,a,o){o[0]=Math.min(o[0],t,i),o[1]=Math.min(o[1],e,a),o[2]=Math.max(o[2],t,i),o[3]=Math.max(o[3],e,a)}static#t(t,e,i,a,o,l,u,h,d,f){if(d<=0||d>=1)return;const m=1-d,y=d*d,b=y*d,A=m*(m*(m*t+3*d*e)+3*y*i)+b*a,x=m*(m*(m*o+3*d*l)+3*y*u)+b*h;f[0]=Math.min(f[0],A),f[1]=Math.min(f[1],x),f[2]=Math.max(f[2],A),f[3]=Math.max(f[3],x)}static#e(t,e,i,a,o,l,u,h,d,f,m,y){if(Math.abs(d)<1e-12){Math.abs(f)>=1e-12&&this.#t(t,e,i,a,o,l,u,h,-m/f,y);return}const b=f**2-4*m*d;if(b<0)return;const A=Math.sqrt(b),x=2*d;this.#t(t,e,i,a,o,l,u,h,(-f+A)/x,y),this.#t(t,e,i,a,o,l,u,h,(-f-A)/x,y)}static bezierBoundingBox(t,e,i,a,o,l,u,h,d){d[0]=Math.min(d[0],t,u),d[1]=Math.min(d[1],e,h),d[2]=Math.max(d[2],t,u),d[3]=Math.max(d[3],e,h),this.#e(t,i,o,u,e,a,l,h,3*(-t+3*(i-o)+u),6*(t-2*i+o),3*(i-t),d),this.#e(t,i,o,u,e,a,l,h,3*(-e+3*(a-l)+h),6*(e-2*a+l),3*(a-e),d)}}function Xv(g){return decodeURIComponent(escape(g))}let bu=null,rp=null;function Op(g){return bu||(bu=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,rp=new Map([["","t"]])),g.replaceAll(bu,(t,e,i)=>e?e.normalize("NFKC"):rp.get(i))}function _u(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const g=new Uint8Array(32);return crypto.getRandomValues(g),Np(g)}const Bu="pdfjs_internal_id_";function $v(g,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[i,a,...o]=e;if(!g(i)&&!Number.isInteger(i)||!t(a))return!1;const l=o.length;let u=!0;switch(a.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;u=!1;break;default:return!1}for(const h of o)if(!(typeof h=="number"||u&&h===null))return!1;return!0}function De(g,t,e){return Math.min(Math.max(g,t),e)}function Dp(g){return Uint8Array.prototype.toBase64?g.toBase64():btoa(Np(g))}function Wv(g){return Uint8Array.fromBase64?Uint8Array.fromBase64(g):or(atob(g))}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(g){return g.reduce((t,e)=>t+e,0)});typeof AbortSignal.any!="function"&&(AbortSignal.any=function(g){const t=new AbortController,{signal:e}=t;for(const i of g)if(i.aborted)return t.abort(i.reason),e;for(const i of g)i.addEventListener("abort",()=>{t.abort(i.reason)},{signal:e});return e});Tt(1701);Tt(4972);Tt(4628);Tt(7642);Tt(8004);Tt(3853);Tt(5876);Tt(2475);Tt(5024);Tt(1698);Tt(4603);Tt(7566);Tt(8721);Tt(9314);Tt(1148);Tt(3579);Tt(8335);const $n="http://www.w3.org/2000/svg";class Ws{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Xi(g,t="text"){if(Za(g,document.baseURI)){const e=await fetch(g);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const a=new XMLHttpRequest;a.open("GET",g,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(a.response);return}e(a.responseText);return}i(new Error(a.statusText))}},a.send(null)})}class lr{constructor({viewBox:t,userUnit:e,scale:i,rotation:a,offsetX:o=0,offsetY:l=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=a,this.offsetX=o,this.offsetY=l,i*=e;const h=(t[2]+t[0])/2,d=(t[3]+t[1])/2;let f,m,y,b;switch(a%=360,a<0&&(a+=360),a){case 180:f=-1,m=0,y=0,b=1;break;case 90:f=0,m=1,y=1,b=0;break;case 270:f=0,m=-1,y=-1,b=0;break;case 0:f=1,m=0,y=0,b=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(y=-y,b=-b);let A,x,w,T;f===0?(A=Math.abs(d-t[1])*i+o,x=Math.abs(h-t[0])*i+l,w=(t[3]-t[1])*i,T=(t[2]-t[0])*i):(A=Math.abs(h-t[0])*i+o,x=Math.abs(d-t[1])*i+l,w=(t[2]-t[0])*i,T=(t[3]-t[1])*i),this.transform=[f*i,m*i,y*i,b*i,A-f*i*h-y*i*d,x-m*i*h-b*i*d],this.width=w,this.height=T}get rawDims(){const t=this.viewBox;return Nt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:a=this.offsetY,dontFlip:o=!1}={}){return new lr({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:a,dontFlip:o})}convertToViewportPoint(t,e){const i=[t,e];return dt.applyTransform(i,this.transform),i}convertToViewportRectangle(t){const e=[t[0],t[1]];dt.applyTransform(e,this.transform);const i=[t[2],t[3]];return dt.applyTransform(i,this.transform),[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){const i=[t,e];return dt.applyInverseTransform(i,this.transform),i}}class $o extends Qs{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function cr(g){const t=g.length;let e=0;for(;e<t&&g[e].trim()==="";)e++;return g.substring(e,e+5).toLowerCase()==="data:"}function Wo(g){return typeof g=="string"&&/\.pdf$/i.test(g)}function Lp(g){return[g]=g.split(/[#?]/,1),g.substring(g.lastIndexOf("/")+1)}function kp(g,t="document.pdf"){if(typeof g!="string")return t;if(cr(g))return Et('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const i=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(g);if(!i)return t;const a=u=>{try{let h=decodeURIComponent(u);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:u):h}catch{return u}},o=/\.pdf$/i,l=i.pathname.split("/").at(-1);if(o.test(l))return a(l);if(i.searchParams.size>0){const u=Array.from(i.searchParams.values()).reverse();for(const d of u)if(o.test(d))return a(d);const h=Array.from(i.searchParams.keys()).reverse();for(const d of h)if(o.test(d))return a(d)}if(i.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(h)return a(h[0])}return t}class op{started=Object.create(null);times=[];time(t){t in this.started&&Et(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Et(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:a,end:o}of this.times)t.push(`${i.padEnd(e)} ${o-a}ms
`);return t.join("")}}function Za(g,t){const e=t?URL.parse(g,t):URL.parse(g);return e?.protocol==="http:"||e?.protocol==="https:"}function en(g){g.preventDefault()}function se(g){g.preventDefault(),g.stopPropagation()}function Kv(g){console.log("Deprecated API usage: "+g)}class Uo{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const i=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(e[4],10);l=l>=0&&l<=23?l:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(e[6],10);h=h>=0&&h<=59?h:0;const d=e[7]||"Z";let f=parseInt(e[8],10);f=f>=0&&f<=23?f:0;let m=parseInt(e[9],10)||0;return m=m>=0&&m<=59?m:0,d==="-"?(l+=f,u+=m):d==="+"&&(l-=f,u-=m),new Date(Date.UTC(i,a,o,l,u,h))}}function Pp(g,{scale:t=1,rotation:e=0}){const{width:i,height:a}=g.attributes.style,o=[0,0,parseInt(i),parseInt(a)];return new lr({viewBox:o,userUnit:1,scale:t,rotation:e})}function ur(g){if(g.startsWith("#")){const t=parseInt(g.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return g.startsWith("rgb(")?g.slice(4,-1).split(",").map(t=>parseInt(t)):g.startsWith("rgba(")?g.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Et(`Not a valid color format: "${g}"`),[0,0,0])}function Qv(g){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of g.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;g.set(e,ur(i))}t.remove()}function Qt(g){const{a:t,b:e,c:i,d:a,e:o,f:l}=g.getTransform();return[t,e,i,a,o,l]}function Cn(g){const{a:t,b:e,c:i,d:a,e:o,f:l}=g.getTransform().invertSelf();return[t,e,i,a,o,l]}function Es(g,t,e=!1,i=!0){if(t instanceof lr){const{pageWidth:a,pageHeight:o}=t.rawDims,{style:l}=g,u=be.isCSSRoundSupported,h=`var(--total-scale-factor) * ${a}px`,d=`var(--total-scale-factor) * ${o}px`,f=u?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,m=u?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!e||t.rotation%180===0?(l.width=f,l.height=m):(l.width=m,l.height=f)}i&&g.setAttribute("data-main-rotation",t.rotation)}class yn{constructor(){const{pixelRatio:t}=yn;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,i,a,o=-1){let l=1/0,u=1/0,h=1/0;i=yn.capPixels(i,o),i>0&&(l=Math.sqrt(i/(t*e))),a!==-1&&(u=a/t,h=a/e);const d=Math.min(l,u,h);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,i):i}return t}}const Ho=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class er{#t=null;#e=null;#n;#s=null;#a=null;#i=null;#r=null;static#o=null;constructor(t){this.#n=t,er.#o||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#n._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",en,{signal:e}),t.addEventListener("pointerdown",er.#l,{signal:e}));const i=this.#s=document.createElement("div");i.className="buttons",t.append(i);const a=this.#n.toolbarPosition;if(a){const{style:o}=t,l=this.#n._uiManager.direction==="ltr"?1-a[0]:a[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#c(t){this.#n._focusEventsAllowed=!1,se(t)}#d(t){this.#n._focusEventsAllowed=!0,se(t)}#u(t){const e=this.#n._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#c.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",en,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#a?.shown(),this.#i?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#n,i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",er.#o[t]),this.#u(i)&&i.addEventListener("click",a=>{e.delete()},{signal:e._signal}),this.#s.append(i)}get#f(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#u(e),this.#s.append(e,this.#f),this.#a=t}addComment(t){if(this.#i)return;const e=t.render();e&&(this.#u(e),this.#s.append(e,this.#f),this.#i=t,t.toolbar=this)}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#u(e),this.#s.append(e,this.#f)}async addEditSignatureButton(t){const e=this.#r=await t.renderEditButton(this.#n);this.#u(e),this.#s.append(e,this.#f)}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}updateEditSignatureButton(t){this.#r&&(this.#r.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class Zv{#t=null;#e=null;#n;constructor(t){this.#n=t}#s(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#n._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",en,{signal:e});const i=this.#t=document.createElement("div");return i.className="buttons",t.append(i),this.#n.hasCommentManager()&&this.#i("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#n.commentSelection("floating_button")}),this.#i("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#n.highlightSelection("floating_button")}),t}#a(t,e){let i=0,a=0;for(const o of t){const l=o.y+o.height;if(l<i)continue;const u=o.x+(e?o.width:0);if(l>i){a=u,i=l;continue}e?u>a&&(a=u):u<a&&(a=u)}return[e?1-a:a,i]}show(t,e,i){const[a,o]=this.#a(e,i),{style:l}=this.#e||=this.#s();t.append(this.#e),l.insetInlineEnd=`${100*a}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#i(t,e,i,a){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",e);const l=document.createElement("span");o.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",i);const u=this.#n._signal;u instanceof AbortSignal&&!u.aborted&&(o.addEventListener("contextmenu",en,{signal:u}),o.addEventListener("click",a,{signal:u})),this.#t.append(o)}}function Ip(g,t,e){for(const i of e)t.addEventListener(i,g[i].bind(g))}class Jv{#t=0;get id(){return`${Cp}${this.#t++}`}}class Fu{#t=_u();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const o=a.decode().then(()=>(i.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return Nt(this,"_isSVGFittingCanvas",o)}async#s(t,e){this.#n||=new Map;let i=this.#n.get(t);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let a;if(typeof e=="string"?(i.url=e,a=await Xi(e,"blob")):e instanceof File?a=i.file=e:e instanceof Blob&&(a=e),a.type==="image/svg+xml"){const o=Fu._isSVGFittingCanvas,l=new FileReader,u=new Image,h=new Promise((d,f)=>{u.onload=()=>{i.bitmap=u,i.isSvg=!0,d()},l.onload=async()=>{const m=i.svgUrl=l.result;u.src=await o?`${m}#svgView(preserveAspectRatio(none))`:m},u.onerror=l.onerror=f});l.readAsDataURL(a),await h}else i.bitmap=await createImageBitmap(a);i.refCounter=1}catch(a){Et(a),i=null}return this.#n.set(t,i),i&&this.#n.set(i.id,i),i}async getFromFile(t){const{lastModified:e,name:i,size:a,type:o}=t;return this.#s(`${e}_${i}_${a}_${o}`,t)}async getFromUrl(t){return this.#s(t,t)}async getFromBlob(t,e){const i=await e;return this.#s(t,i)}async getFromId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#n||=new Map;let i=this.#n.get(t);if(i?.bitmap)return i.refCounter+=1,i;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),i={bitmap:a.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,i),this.#n.set(i.id,i),i}getSvgUrl(t){const e=this.#n.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const a=new OffscreenCanvas(i.width,i.height);a.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=a.convertToBlob()}i.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class qv{#t=[];#e=!1;#n;#s=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:e,post:i,mustExec:a,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:u=!1}){if(a&&t(),this.#e)return;const h={cmd:t,undo:e,post:i,type:o};if(this.#s===-1){this.#t.length>0&&(this.#t.length=0),this.#s=0,this.#t.push(h);return}if(l&&this.#t[this.#s].type===o){u&&(h.undo=this.#t[this.#s].undo),this.#t[this.#s]=h;return}const d=this.#s+1;d===this.#n?this.#t.splice(0,1):(this.#s=d,d<this.#t.length&&this.#t.splice(d)),this.#t.push(h)}undo(){if(this.#s===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#s];t(),e?.(),this.#e=!1,this.#s-=1}redo(){if(this.#s<this.#t.length-1){this.#s+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#s];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#s!==-1}hasSomethingToRedo(){return this.#s<this.#t.length-1}cleanType(t){if(this.#s!==-1){for(let e=this.#s;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#s-e),this.#s=e;return}this.#t.length=0,this.#s=-1}}destroy(){this.#t=null}}class hr{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=be.platform;for(const[i,a,o={}]of t)for(const l of i){const u=l.startsWith("mac+");e&&u?(this.callbacks.set(l.slice(4),{callback:a,options:o}),this.allKeys.add(l.split("+").at(-1))):!e&&!u&&(this.callbacks.set(l,{callback:a,options:o}),this.allKeys.add(l.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(this.#t(e));if(!i)return;const{callback:a,options:{bubbles:o=!1,args:l=[],checker:u=null}}=i;u&&!u(t,e)||(a.bind(t,...l,e)(),o||se(e))}}class zu{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return Qv(t),Nt(this,"_colors",t)}convert(t){const e=ur(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,a]of this._colors)if(a.every((o,l)=>o===e[l]))return zu._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?dt.makeHexColor(...e):t}}class Zn{#t=new AbortController;#e=null;#n=null;#s=new Map;#a=new Map;#i=null;#r=null;#o=null;#l=new qv;#c=null;#d=null;#u=null;#f=0;#p=new Set;#g=null;#h=null;#m=new Set;_editorUndoBar=null;#b=!1;#v=!1;#A=!1;#S=null;#y=null;#E=null;#M=null;#C=!1;#w=null;#L=new Jv;#R=!1;#N=!1;#I=!1;#k=null;#P=null;#j=null;#D=null;#F=null;#T=wt.NONE;#x=new Set;#z=null;#U=null;#G=null;#W=null;#X=null;#$={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#_=[0,0];#V=null;#Y=null;#J=null;#q=null;#B=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Zn.prototype,e=l=>l.#Y.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),i=(l,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},a=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Nt(this,"_keyboardManager",new hr([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#Y.contains(u)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#Y.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}constructor(t,e,i,a,o,l,u,h,d,f,m,y,b,A,x,w){const T=this._signal=this.#t.signal;this.#Y=t,this.#J=e,this.#q=i,this.#i=a,this.#c=o,this.#U=l,this.#X=h,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:T}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:T}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:T}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:T}),u._on("setpreference",this.onSetPreference.bind(this),{signal:T}),u._on("switchannotationeditorparams",O=>this.updateParams(O.type,O.value),{signal:T}),window.addEventListener("pointerdown",()=>{this.#N=!0},{capture:!0,signal:T}),window.addEventListener("pointerup",()=>{this.#N=!1},{capture:!0,signal:T}),this.#lt(),this.#dt(),this.#et(),this.#r=h.annotationStorage,this.#S=h.filterFactory,this.#G=d,this.#M=f||null,this.#b=m,this.#v=y,this.#A=b,this.#F=A||null,this.viewParameters={realScale:Ws.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=x||null,this._supportsPinchToZoom=w!==!1}destroy(){this.#B?.resolve(),this.#B=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#a.values())t.destroy();this.#a.clear(),this.#s.clear(),this.#m.clear(),this.#D?.clear(),this.#e=null,this.#x.clear(),this.#l.destroy(),this.#i?.destroy(),this.#c?.destroy(),this.#U?.destroy(),this.#w?.hide(),this.#w=null,this.#j?.destroy(),this.#j=null,this.#n=null,this.#y&&(clearTimeout(this.#y),this.#y=null),this.#V&&(clearTimeout(this.#V),this.#V=null),this._editorUndoBar?.destroy(),this.#X=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#F}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#A}get hcmFilter(){return Nt(this,"hcmFilter",this.#G?this.#S.addHCMFilter(this.#G.foreground,this.#G.background):"none")}get direction(){return Nt(this,"direction",getComputedStyle(this.#Y).direction)}get _highlightColors(){return Nt(this,"_highlightColors",this.#M?new Map(this.#M.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Nt(this,"highlightColors",null);const e=new Map,i=!!this.#G;for(const[a,o]of t){const l=a.endsWith("_HCM");if(i&&l){e.set(a.replace("_HCM",""),o);continue}!i&&!l&&e.set(a,o)}return Nt(this,"highlightColors",e)}get highlightColorNames(){return Nt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#u=t}setMainHighlightColorPicker(t){this.#j=t}editAltText(t,e=!1){this.#i?.editAltText(this,t,e)}hasCommentManager(){return!!this.#c}editComment(t,e){this.#c?.open(this,t,e)}getSignature(t){this.#U?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#U}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":this.#A=e;break}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#Y.focus()}findParent(t,e){for(const i of this.#a.values()){const{x:a,y:o,width:l,height:u}=i.div.getBoundingClientRect();if(t>=a&&t<=a+l&&e>=o&&e<=o+u)return i}return null}disableUserSelect(t=!1){this.#J.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#m.add(t)}removeShouldRescale(t){this.#m.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Ws.PDF_TO_CSS_UNITS;for(const e of this.#m)e.onScaleChanging();this.#u?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Z({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of this.#a.values())if(i.hasTextLayer(t))return i;return null}highlightSelection(t="",e=!1){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:a,anchorOffset:o,focusNode:l,focusOffset:u}=i,h=i.toString(),f=this.#Z(i).closest(".textLayer"),m=this.getSelectionBoxes(f);if(!m)return;i.empty();const y=this.#tt(f),b=this.#T===wt.NONE,A=()=>{const x=y?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:m,anchorNode:a,anchorOffset:o,focusNode:l,focusOffset:u,text:h});b&&this.showAllEditors("highlight",!0,!0),e&&x?.editComment()};if(b){this.switchToMode(wt.HIGHLIGHT,A);return}A()}commentSelection(t=""){this.highlightSelection(t,!0)}#rt(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=this.#Z(t).closest(".textLayer"),a=this.getSelectionBoxes(i);a&&(this.#w||=new Zv(this),this.#w.show(i,a,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#r&&!this.#r.has(t.id)&&this.#r.setValue(t.id,t)}a11yAlert(t,e=null){const i=this.#q;i&&(i.setAttribute("data-l10n-id",t),e?i.setAttribute("data-l10n-args",JSON.stringify(e)):i.removeAttribute("data-l10n-args"))}#ot(){const t=document.getSelection();if(!t||t.isCollapsed){this.#z&&(this.#w?.hide(),this.#z=null,this.#O({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#z)return;const a=this.#Z(t).closest(".textLayer");if(!a){this.#z&&(this.#w?.hide(),this.#z=null,this.#O({hasSelectedText:!1}));return}if(this.#w?.hide(),this.#z=e,this.#O({hasSelectedText:!0}),!(this.#T!==wt.HIGHLIGHT&&this.#T!==wt.NONE)&&(this.#T===wt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#C=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#T===wt.HIGHLIGHT?this.#tt(a):null;if(o?.toggleDrawing(),this.#N){const l=new AbortController,u=this.combinedSignal(l),h=d=>{d.type==="pointerup"&&d.button!==0||(l.abort(),o?.toggleDrawing(!0),d.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("blur",h,{signal:u})}else o?.toggleDrawing(!0),this.#K("main_toolbar")}}#K(t=""){this.#T===wt.HIGHLIGHT?this.highlightSelection(t):this.#b&&this.#rt()}#lt(){document.addEventListener("selectionchange",this.#ot.bind(this),{signal:this._signal})}#ct(){if(this.#E)return;this.#E=new AbortController;const t=this.combinedSignal(this.#E);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ut(){this.#E?.abort(),this.#E=null}blur(){if(this.isShiftKeyDown=!1,this.#C&&(this.#C=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#x)if(e.div.contains(t)){this.#P=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#P)return;const[t,e]=this.#P;this.#P=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#k)return;this.#k=new AbortController;const t=this.combinedSignal(this.#k);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ht(){this.#k?.abort(),this.#k=null}#nt(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#st(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.#nt()}removeEditListeners(){this.#ht(),this.#st()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of this.#h)if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of this.#h)if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of this.#x){const a=i.serialize(!0);a&&e.push(a)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const l of this.#h)if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(o){Et(`paste: "${o.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const a=this.currentLayer;try{const o=[];for(const h of i){const d=await a.deserialize(h);if(!d)return;o.push(d)}const l=()=>{for(const h of o)this.#it(h);this.#at(o)},u=()=>{for(const h of o)h.remove()};this.addCommands({cmd:l,undo:u,mustExec:!0})}catch(o){Et(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==wt.NONE&&!this.isEditorHandlingKeyboard&&Zn._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#C&&(this.#C=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#O(t){Object.entries(t).some(([i,a])=>this.#$[i]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#$,t)}),this.#T===wt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#H([[kt.HIGHLIGHT_FREE,!0]]))}#H(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ct(),this.#nt(),this.#O({isEditing:this.#T!==wt.NONE,isEmpty:this.#Q(),hasSomethingToUndo:this.#l.hasSomethingToUndo(),hasSomethingToRedo:this.#l.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ut(),this.#st(),this.#O({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#h){this.#h=t;for(const e of this.#h)this.#H(e.defaultPropertiesToUpdate)}}getId(){return this.#L.id}get currentLayer(){return this.#a.get(this.#f)}getLayer(t){return this.#a.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#a.set(t.pageIndex,t),this.#R?t.enable():t.disable()}removeLayer(t){this.#a.delete(t.pageIndex)}async updateMode(t,e=null,i=!1,a=!1,o=!1){if(this.#T!==t&&!(this.#B&&(await this.#B.promise,!this.#B))){if(this.#B=Promise.withResolvers(),this.#u?.commitOrRemove(),this.#T===wt.POPUP&&this.#c?.hideSidebar(),this.#T=t,t===wt.NONE){this.setEditingState(!1),this.#gt(),this._editorUndoBar?.hide(),this.#B.resolve();return}t===wt.SIGNATURE&&await this.#U?.loadSignatures(),t===wt.POPUP&&(this.#n||=await this.#X.getAnnotationsByType(new Set(this.#h.map(l=>l._editorType))),this.#c?.showSidebar(this.#n)),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const l of this.#a.values())l.updateMode(t);if(!e){i&&this.addNewEditorFromKeyboard(),this.#B.resolve();return}for(const l of this.#s.values())l.annotationElementId===e||l.id===e?(this.setSelected(l),o?l.editComment():a&&l.enterInEditMode()):l.unselect();this.#B.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#h){switch(t){case kt.CREATE:this.currentLayer.addNewEditor(e);return;case kt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#W||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const i of this.#x)i.updateParams(t,e);else for(const i of this.#h)i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){for(const o of this.#s.values())o.editorType===t&&o.show(e);(this.#W?.get(kt.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#H([[kt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#I!==t){this.#I=t;for(const e of this.#a.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#R){this.#R=!0;const t=[];for(const e of this.#a.values())t.push(e.enable());await Promise.all(t);for(const e of this.#s.values())e.enable()}}#gt(){if(this.unselectAll(),this.#R){this.#R=!1;for(const t of this.#a.values())t.disable();for(const t of this.#s.values())t.disable()}}getEditors(t){const e=[];for(const i of this.#s.values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return this.#s.get(t)}addEditor(t){this.#s.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.focusMainContainer(),this.#y=null},0)),this.#s.delete(t.id),t.annotationElementId&&this.#D?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#p.has(t.annotationElementId))&&this.#r?.remove(t.id)}addDeletedAnnotationElement(t){this.#p.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#p.has(t)}removeDeletedAnnotationElement(t){this.#p.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#it(t){const e=this.#a.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#H(t.propertiesToUpdate))}get#pt(){let t=null;for(t of this.#x);return t}updateUI(t){this.#pt===t&&this.#H(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#H(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#x.has(t)){this.#x.delete(t),t.unselect(),this.#O({hasSelectedEditor:this.hasSelection});return}this.#x.add(t),t.select(),this.#H(t.propertiesToUpdate),this.#O({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#u?.commitOrRemove();for(const e of this.#x)e!==t&&e.unselect();this.#x.clear(),this.#x.add(t),t.select(),this.#H(t.propertiesToUpdate),this.#O({hasSelectedEditor:!0})}isSelected(t){return this.#x.has(t)}get firstSelectedEditor(){return this.#x.values().next().value}unselect(t){t.unselect(),this.#x.delete(t),this.#O({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#x.size!==0}get isEnterHandled(){return this.#x.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#l.undo(),this.#O({hasSomethingToUndo:this.#l.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#Q()}),this._editorUndoBar?.hide()}redo(){this.#l.redo(),this.#O({hasSomethingToUndo:!0,hasSomethingToRedo:this.#l.hasSomethingToRedo(),isEmpty:this.#Q()})}addCommands(t){this.#l.add(t),this.#O({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#Q()})}cleanUndoStack(t){this.#l.cleanType(t)}#Q(){if(this.#s.size===0)return!0;if(this.#s.size===1)for(const t of this.#s.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#x],i=()=>{this._editorUndoBar?.show(a,e.length===1?e[0].editorType:e.length);for(const o of e)o.remove()},a=()=>{for(const o of e)this.#it(o)};this.addCommands({cmd:i,undo:a,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#at(t){for(const e of this.#x)e.unselect();this.#x.clear();for(const e of t)e.isEmpty()||(this.#x.add(e),e.select());this.#O({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#x)t.commit();this.#at(this.#s.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#T!==wt.NONE))&&!this.#u?.commitOrRemove()&&this.hasSelection){for(const t of this.#x)t.unselect();this.#x.clear(),this.#O({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#_[0]+=t,this.#_[1]+=e;const[a,o]=this.#_,l=[...this.#x],u=1e3;this.#V&&clearTimeout(this.#V),this.#V=setTimeout(()=>{this.#V=null,this.#_[0]=this.#_[1]=0,this.addCommands({cmd:()=>{for(const h of l)this.#s.has(h.id)&&(h.translateInPage(a,o),h.translationDone())},undo:()=>{for(const h of l)this.#s.has(h.id)&&(h.translateInPage(-a,-o),h.translationDone())},mustExec:!1})},u);for(const h of l)h.translateInPage(t,e),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#g=new Map;for(const t of this.#x)this.#g.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#g)return!1;this.disableUserSelect(!1);const t=this.#g;this.#g=null;let e=!1;for(const[{x:a,y:o,pageIndex:l},u]of t)u.newX=a,u.newY=o,u.newPageIndex=l,e||=a!==u.savedX||o!==u.savedY||l!==u.savedPageIndex;if(!e)return!1;const i=(a,o,l,u)=>{if(this.#s.has(a.id)){const h=this.#a.get(u);h?a._setParentAndPosition(h,o,l):(a.pageIndex=u,a.x=o,a.y=l)}};return this.addCommands({cmd:()=>{for(const[a,{newX:o,newY:l,newPageIndex:u}]of t)i(a,o,l,u)},undo:()=>{for(const[a,{savedX:o,savedY:l,savedPageIndex:u}]of t)i(a,o,l,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#g)for(const i of this.#g.keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#x.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#T}get imageManager(){return Nt(this,"imageManager",new Fu)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let d=0,f=e.rangeCount;d<f;d++)if(!t.contains(e.getRangeAt(d).commonAncestorContainer))return null;const{x:i,y:a,width:o,height:l}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(d,f,m,y)=>({x:(f-a)/l,y:1-(d+m-i)/o,width:y/l,height:m/o});break;case"180":u=(d,f,m,y)=>({x:1-(d+m-i)/o,y:1-(f+y-a)/l,width:m/o,height:y/l});break;case"270":u=(d,f,m,y)=>({x:1-(f+y-a)/l,y:(d-i)/o,width:y/l,height:m/o});break;default:u=(d,f,m,y)=>({x:(d-i)/o,y:(f-a)/l,width:m/o,height:y/l});break}const h=[];for(let d=0,f=e.rangeCount;d<f;d++){const m=e.getRangeAt(d);if(!m.collapsed)for(const{x:y,y:b,width:A,height:x}of m.getClientRects())A===0||x===0||h.push(u(y,b,A,x))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const i=this.#r.getRawValue(e);i&&(this.#T===wt.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}setMissingCanvas(t,e,i){const a=this.#D?.get(t);a&&(a.setCanvas(e,i),this.#D.delete(t))}addMissingCanvas(t,e){(this.#D||=new Map).set(t,e)}}class Nn{#t=null;#e=!1;#n=null;#s=null;#a=null;#i=null;#r=!1;#o=null;#l=null;#c=null;#d=null;#u=!1;static#f=null;static _l10n=null;constructor(t){this.#l=t,this.#u=t._uiManager.useNewAltTextFlow,Nn.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Nn._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#s=document.createElement("span");t.append(e),this.#u?(t.classList.add("new"),t.setAttribute("data-l10n-id",Nn.#f.missing),e.setAttribute("data-l10n-id",Nn.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=this.#l._uiManager._signal;t.addEventListener("contextmenu",en,{signal:i}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:i});const a=o=>{o.preventDefault(),this.#l._uiManager.editAltText(this.#l),this.#u&&this.#l._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#p}})};return t.addEventListener("click",a,{capture:!0,signal:i}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#r=!0,a(o))},{signal:i}),await this.#g(),t}get#p(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#r}),this.#r=!1)}isEmpty(){return this.#u?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#u?this.#t!==null||!!this.#c:this.isEmpty()}get guessedText(){return this.#c}async setGuessedText(t){this.#t===null&&(this.#c=t,this.#d=await Nn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#g())}toggleAltTextBadge(t=!1){if(!this.#u||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#l.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#c===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#c,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:a,cancel:o=!1}){i&&(this.#c=i,this.#d=a),!(this.#t===t&&this.#e===e)&&(o||(this.#t=t,this.#e=e),this.#g())}toggle(t=!1){this.#n&&(!t&&this.#i&&(clearTimeout(this.#i),this.#i=null),this.#n.disabled=!t)}shown(){this.#l._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#p}})}destroy(){this.#n?.remove(),this.#n=null,this.#s=null,this.#a=null,this.#o?.remove(),this.#o=null}async#g(){const t=this.#n;if(!t)return;if(this.#u){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Nn.#f[this.#p]),this.#s?.setAttribute("data-l10n-id",Nn.#f[`${this.#p}-label`]),!this.#t){this.#a?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#a?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#a;if(!e){this.#a=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#l.id}`;const a=100,o=this.#l._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#i),this.#i=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#i=setTimeout(()=>{this.#i=null,this.#a.classList.add("show"),this.#l._reportTelemetry({action:"alt_text_tooltip"})},a)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#i&&(clearTimeout(this.#i),this.#i=null),this.#a?.classList.remove("show")},{signal:o})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#l.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class Do{#t=null;#e=!1;#n=null;#s=null;#a=null;#i=null;#r=!1;constructor(t){this.#n=t,this.toolbar=null}render(){if(!this.#n._uiManager.hasCommentManager())return null;const t=this.#t=document.createElement("button");t.className="comment",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button");const e=this.#n._uiManager._signal;if(!(e instanceof AbortSignal)||e.aborted)return t;t.addEventListener("contextmenu",en,{signal:e}),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:e});const i=a=>{a.preventDefault(),this.edit()};return t.addEventListener("click",i,{capture:!0,signal:e}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(this.#e=!0,i(a))},{signal:e}),t}edit(){const{bottom:t,left:e,right:i}=this.#n.getClientDimensions(),a={top:t};this.#n._uiManager.direction==="ltr"?a.right=i:a.left=e,this.#n._uiManager.editComment(this.#n,a)}finish(){this.#t&&(this.#t.focus({focusVisible:this.#e}),this.#e=!1)}isDeleted(){return this.#r||this.#a===""}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#s}serialize(){return this.data}get data(){return{text:this.#a,date:this.#i,deleted:this.#r}}set data(t){if(t===null){this.#a="",this.#r=!0;return}this.#a=t,this.#i=new Date,this.#r=!1}setInitialText(t){this.#s=t,this.data=t}toggle(t=!1){this.#t&&(this.#t.disabled=!t)}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#a="",this.#i=null,this.#n=null,this.#e=!1,this.#r=!1}}class dr{#t;#e=!1;#n=null;#s;#a;#i;#r;#o=null;#l;#c=null;#d;#u=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:a=null,onPinching:o=null,onPinchEnd:l=null,signal:u}){this.#t=t,this.#n=i,this.#s=e,this.#a=a,this.#i=o,this.#r=l,this.#d=new AbortController,this.#l=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#l})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/yn.pixelRatio}#f(t){if(this.#s?.())return;if(t.touches.length===1){if(this.#o)return;const a=this.#o=new AbortController,o=AbortSignal.any([this.#l,a.signal]),l=this.#t,u={capture:!0,signal:o,passive:!1},h=d=>{d.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};l.addEventListener("pointerdown",d=>{d.pointerType==="touch"&&(se(d),h(d))},u),l.addEventListener("pointerup",h,u),l.addEventListener("pointercancel",h,u);return}if(!this.#u){this.#u=new AbortController;const a=AbortSignal.any([this.#l,this.#u.signal]),o=this.#t,l={signal:a,capture:!1,passive:!1};o.addEventListener("touchmove",this.#p.bind(this),l);const u=this.#g.bind(this);o.addEventListener("touchend",u,l),o.addEventListener("touchcancel",u,l),l.capture=!0,o.addEventListener("pointerdown",se,l),o.addEventListener("pointermove",se,l),o.addEventListener("pointercancel",se,l),o.addEventListener("pointerup",se,l),this.#a?.()}if(se(t),t.touches.length!==2||this.#n?.()){this.#c=null;return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),this.#c={touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY}}#p(t){if(!this.#c||t.touches.length!==2)return;se(t);let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:a,screenY:o}=e,{screenX:l,screenY:u}=i,h=this.#c,{touch0X:d,touch0Y:f,touch1X:m,touch1Y:y}=h,b=m-d,A=y-f,x=l-a,w=u-o,T=Math.hypot(x,w)||1,O=Math.hypot(b,A)||1;if(!this.#e&&Math.abs(O-T)<=dr.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=a,h.touch0Y=o,h.touch1X=l,h.touch1Y=u,!this.#e){this.#e=!0;return}const C=[(a+l)/2,(o+u)/2];this.#i?.(C,O,T)}#g(t){t.touches.length>=2||(this.#u&&(this.#u.abort(),this.#u=null,this.#r?.()),this.#c&&(se(t),this.#c=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class vt{#t=null;#e=null;#n=null;#s=null;#a=!1;#i=null;#r="";#o=!1;#l=null;#c=null;#d=null;#u=null;#f="";#p=!1;#g=null;#h=!1;#m=!1;#b=!1;#v=null;#A=0;#S=0;#y=null;#E=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#M=!1;#C=vt._zIndex++;static _borderLineWidth=-1;static _colorManager=new zu;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=vt.prototype._resizeWithKeyboard,e=Zn.TRANSLATE_SMALL,i=Zn.TRANSLATE_BIG;return Nt(this,"_resizerKeyboardManager",new hr([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],vt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,a],this.pageTranslation=[o,l];const[u,h]=this.parentDimensions;this.x=t.x/u,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Nt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new ty({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(vt._l10n??=t,vt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),vt._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);vt._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Gt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#M}set _isDraggable(t){this.#M=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#C}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#_(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#p?this.#p=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,a){const[o,l]=this.parentDimensions;[i,a]=this.screenToPageTranslation(i,a),this.x=(t+i)/o,this.y=(e+a)/l,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[i,a]=this.parentDimensions;this.setAt(t*i,e*a,this.width*i,this.height*a),this._onTranslated()}#w([t,e],i,a){[i,a]=this.screenToPageTranslation(i,a),this.x+=i/t,this.y+=a/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#w(this.parentDimensions,t,e)}translateInPage(t,e){this.#g||=[this.x,this.y,this.width,this.height],this.#w(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#g||=[this.x,this.y,this.width,this.height];const{div:i,parentDimensions:[a,o]}=this;if(this.x+=t/a,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:m,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,m,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:u}=this;const[h,d]=this.getBaseTranslation();l+=h,u+=d;const{style:f}=i;f.left=`${(100*l).toFixed(2)}%`,f.top=`${(100*u).toFixed(2)}%`,this._onTranslating(l,u),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#g&&(this.#g[0]!==this.x||this.#g[1]!==this.y)}get _hasBeenResized(){return!!this.#g&&(this.#g[2]!==this.width||this.#g[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=vt,a=i/t,o=i/e;switch(this.rotation){case 90:return[-a,o];case 180:return[a,o];case 270:return[a,-o];default:return[-a,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,a]}=this;let{x:o,y:l,width:u,height:h}=this;if(u*=i,h*=a,o*=i,l*=a,this._mustFixPosition)switch(t){case 0:o=De(o,0,i-u),l=De(l,0,a-h);break;case 90:o=De(o,0,i-h),l=De(l,u,a);break;case 180:o=De(o,u,i),l=De(l,h,a);break;case 270:o=De(o,h,i),l=De(l,0,a-u);break}this.x=o/=i,this.y=l/=a;const[d,f]=this.getBaseTranslation();o+=d,l+=f,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#L(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return vt.#L(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return vt.#L(t,e,360-this.parentRotation)}#R(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(t,e){const[i,a]=this.parentDimensions,{style:o}=this.div;o.width=`${(100*t/i).toFixed(2)}%`,this.#o||(o.height=`${(100*e/a).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:i}=t,a=i.endsWith("%"),o=!this.#o&&e.endsWith("%");if(a&&o)return;const[l,u]=this.parentDimensions;a||(t.width=`${(100*parseFloat(i)/l).toFixed(2)}%`),!this.#o&&!o&&(t.height=`${(100*parseFloat(e)/u).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#N(){if(this.#l)return;this.#l=document.createElement("div"),this.#l.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const a=document.createElement("div");this.#l.append(a),a.classList.add("resizer",i),a.setAttribute("data-resizer-name",i),a.addEventListener("pointerdown",this.#I.bind(this,i),{signal:e}),a.addEventListener("contextmenu",en,{signal:e}),a.tabIndex=-1}this.div.prepend(this.#l)}#I(t,e){e.preventDefault();const{isMac:i}=be.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#n?.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,this.#c=[e.screenX,e.screenY];const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#j.bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",se,{passive:!1,signal:l}),window.addEventListener("contextmenu",en,{signal:l}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const d=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=u,this.div.style.cursor=h,this.#P()};window.addEventListener("pointerup",d,{signal:l}),window.addEventListener("blur",d,{signal:l})}#k(t,e,i,a){this.width=i,this.height=a,this.x=t,this.y=e;const[o,l]=this.parentDimensions;this.setDims(o*i,l*a),this.fixAndSetPosition(),this._onResized()}_onResized(){}#P(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:a}=this.#d;this.#d=null;const o=this.x,l=this.y,u=this.width,h=this.height;o===t&&l===e&&u===i&&h===a||this.addCommands({cmd:this.#k.bind(this,o,l,u,h),undo:this.#k.bind(this,t,e,i,a),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#j(t,e){const[i,a]=this.parentDimensions,o=this.x,l=this.y,u=this.width,h=this.height,d=vt.MIN_SIZE/i,f=vt.MIN_SIZE/a,m=this.#R(this.rotation),y=(L,P)=>[m[0]*L+m[2]*P,m[1]*L+m[3]*P],b=this.#R(360-this.rotation),A=(L,P)=>[b[0]*L+b[2]*P,b[1]*L+b[3]*P];let x,w,T=!1,O=!1;switch(t){case"topLeft":T=!0,x=(L,P)=>[0,0],w=(L,P)=>[L,P];break;case"topMiddle":x=(L,P)=>[L/2,0],w=(L,P)=>[L/2,P];break;case"topRight":T=!0,x=(L,P)=>[L,0],w=(L,P)=>[0,P];break;case"middleRight":O=!0,x=(L,P)=>[L,P/2],w=(L,P)=>[0,P/2];break;case"bottomRight":T=!0,x=(L,P)=>[L,P],w=(L,P)=>[0,0];break;case"bottomMiddle":x=(L,P)=>[L/2,P],w=(L,P)=>[L/2,0];break;case"bottomLeft":T=!0,x=(L,P)=>[0,P],w=(L,P)=>[L,0];break;case"middleLeft":O=!0,x=(L,P)=>[0,P/2],w=(L,P)=>[L,P/2];break}const C=x(u,h),N=w(u,h);let R=y(...N);const D=vt._round(o+R[0]),j=vt._round(l+R[1]);let _=1,F=1,$,X;if(e.fromKeyboard)({deltaX:$,deltaY:X}=e);else{const{screenX:L,screenY:P}=e,[Q,ct]=this.#c;[$,X]=this.screenToPageTranslation(L-Q,P-ct),this.#c[0]=L,this.#c[1]=P}if([$,X]=A($/i,X/a),T){const L=Math.hypot(u,h);_=F=Math.max(Math.min(Math.hypot(N[0]-C[0]-$,N[1]-C[1]-X)/L,1/u,1/h),d/u,f/h)}else O?_=De(Math.abs(N[0]-C[0]-$),d,1)/u:F=De(Math.abs(N[1]-C[1]-X),f,1)/h;const at=vt._round(u*_),V=vt._round(h*F);R=y(...w(at,V));const J=D-R[0],rt=j-R[1];this.#g||=[this.x,this.y,this.width,this.height],this.width=at,this.height=V,this.x=J,this.y=rt,this.setDims(i*at,a*V),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#m)return this._editToolbar;this._editToolbar=new er(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,i]of t)await this._editToolbar.addButton(e,i);return this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(Nn.initialize(vt._l10n),this.#n=new Nn(this),this.#t&&(this.#n.data=this.#t,this.#t=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}addCommentButton(){return this.#s?this.#s:this.#s=new Do(this)}get commentColor(){return null}get comment(){const t=this.#s;return{text:t.data.text,date:t.data.date,deleted:t.isDeleted(),color:this.commentColor}}set comment(t){this.#s||(this.#s=new Do(this)),this.#s.data=t}setCommentData(t){this.#s||(this.#s=new Do(this)),this.#s.setInitialText(t)}get hasEditedComment(){return this.#s?.hasBeenEdited()}async editComment(){this.#s||(this.#s=new Do(this)),this.#s.edit()}addComment(t){if(this.hasEditedComment){const[,,,a]=t.rect,[o]=this.pageDimensions,[l]=this.pageTranslation,u=l+o+1,h=a-100,d=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,h,d,a]}}}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#a?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#U();const[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*i/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/i).toFixed(2)}%`);const[a,o]=this.getInitialTranslation();return this.translate(a,o),Ip(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#E||=new dr({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#D.bind(this),onPinching:this.#F.bind(this),onPinchEnd:this.#T.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),t}#D(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#F(t,e,i){let o=.7*(i/e)+1-.7;if(o===1)return;const l=this.#R(this.rotation),u=(D,j)=>[l[0]*D+l[2]*j,l[1]*D+l[3]*j],[h,d]=this.parentDimensions,f=this.x,m=this.y,y=this.width,b=this.height,A=vt.MIN_SIZE/h,x=vt.MIN_SIZE/d;o=Math.max(Math.min(o,1/y,1/b),A/y,x/b);const w=vt._round(y*o),T=vt._round(b*o);if(w===y&&T===b)return;this.#g||=[f,m,y,b];const O=u(y/2,b/2),C=vt._round(f+O[0]),N=vt._round(m+O[1]),R=u(w/2,T/2);this.x=C-R[0],this.y=N-R[1],this.width=w,this.height=T,this.setDims(h*w,d*T),this.fixAndSetPosition(),this._onResizing()}#T(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#P()}pointerdown(t){const{isMac:e}=be.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#p=!0,this._isDraggable){this.#z(t);return}this.#x(t)}#x(t){const{isMac:e}=be.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#z(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const a=new AbortController,o=this._uiManager.combinedSignal(a),l={capture:!0,passive:!1,signal:o},u=d=>{a.abort(),this.#i=null,this.#p=!1,this._uiManager.endDragSession()||this.#x(d),i&&this._onStopDragging()};e&&(this.#A=t.clientX,this.#S=t.clientY,this.#i=t.pointerId,this.#r=t.pointerType,window.addEventListener("pointermove",d=>{i||(i=!0,this._onStartDragging());const{clientX:f,clientY:m,pointerId:y}=d;if(y!==this.#i){se(d);return}const[b,A]=this.screenToPageTranslation(f-this.#A,m-this.#S);this.#A=f,this.#S=m,this._uiManager.dragSelectedEditors(b,A)},l),window.addEventListener("touchmove",se,l),window.addEventListener("pointerdown",d=>{d.pointerType===this.#r&&(this.#E||d.isPrimary)&&u(d),se(d)},l));const h=d=>{if(!this.#i||this.#i===d.pointerId){u(d);return}se(d)};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const a=this.parentScale,[o,l]=this.pageDimensions,[u,h]=this.pageTranslation,d=t/a,f=e/a,m=this.x*o,y=this.y*l,b=this.width*o,A=this.height*l;switch(i){case 0:return[m+d+u,l-y-f-A+h,m+d+b+u,l-y-f+h];case 90:return[m+f+u,l-y+d+h,m+f+A+u,l-y+d+b+h];case 180:return[m-d-b+u,l-y+f+h,m-d+u,l-y+f+A+h];case 270:return[m-f-A+u,l-y-d-b+h,m-f+u,l-y-d+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,a,o,l]=t,u=o-i,h=l-a;switch(this.rotation){case 0:return[i,e-l,u,h];case 90:return[i,e-a,h,u];case 180:return[o,e-a,u,h];case 270:return[o,e-l,h,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#m=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#m=!1,!0):!1}isInEditMode(){return this.#m}shouldGetKeyboardEvents(){return this.#b}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:a}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return e<l&&a>0&&t<o&&i>0}#U(){if(this.#u||!this.div)return;this.#u=new AbortController;const t=this._uiManager.combinedSignal(this.#u);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#U()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){Gt("An editor must be serializable")}static async deserialize(t,e,i){const a=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i,annotationElementId:t.annotationElementId});a.rotation=t.rotation,a.#t=t.accessibilityData,a._isCopy=t.isCopy||!1;const[o,l]=a.pageDimensions,[u,h,d,f]=a.getRectInCurrentCoords(t.rect,l);return a.x=u/o,a.y=h/l,a.width=d/o,a.height=f/l,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#u?.abort(),this.#u=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#_(),this.removeEditToolbar(),this.#y){for(const t of this.#y.values())clearTimeout(t);this.#y=null}this.parent=null,this.#E?.destroy(),this.#E=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#N(),this.#l.classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#l.children;if(!this.#e){this.#e=Array.from(e);const l=this.#G.bind(this),u=this.#W.bind(this),h=this._uiManager._signal;for(const d of this.#e){const f=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",l,{signal:h}),d.addEventListener("blur",u,{signal:h}),d.addEventListener("focus",this.#X.bind(this,f),{signal:h}),d.setAttribute("data-l10n-id",vt._l10nResizer[f])}}const i=this.#e[0];let a=0;for(const l of e){if(l===i)break;a++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==a){if(o<a)for(let u=0;u<a-o;u++)this.#l.append(this.#l.firstChild);else if(o>a)for(let u=0;u<o-a;u++)this.#l.firstChild.before(this.#l.lastChild);let l=0;for(const u of e){const d=this.#e[l++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",vt._l10nResizer[d])}}this.#$(0),this.#b=!0,this.#l.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#G(t){vt._resizerKeyboardManager.exec(this,t)}#W(t){this.#b&&t.relatedTarget?.parentNode!==this.#l&&this.#_()}#X(t){this.#f=this.#b?t:""}#$(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#b&&this.#j(this.#f,{deltaX:t,deltaY:e,fromKeyboard:!0})}#_(){this.#b=!1,this.#$(-1),this.#P()}_stopResizingWithKeyboard(){this.#_(),this.div.focus()}select(){if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}}unselect(){this.isSelected&&(this.isSelected=!1,this.#l?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#h}set isEditing(t){this.#h=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#o=!0;const i=t/e,{style:a}=this.div;a.aspectRatio=i,a.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#y||=new Map;const{action:i}=t;let a=this.#y.get(i);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),this.#y.delete(i),this.#y.size===0&&(this.#y=null)},vt._telemetryTimeout),this.#y.set(i,a);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#a=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#a=!0}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class ty extends vt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const lp=3285377520,dn=4294901760,Rn=65535;class jp{constructor(t){this.h1=t?t&4294967295:lp,this.h2=t?t&4294967295:lp}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let x=0,w=t.length;x<w;x++){const T=t.charCodeAt(x);T<=255?e[i++]=T:(e[i++]=T>>>8,e[i++]=T&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=i>>2,o=i-a*4,l=new Uint32Array(e.buffer,0,a);let u=0,h=0,d=this.h1,f=this.h2;const m=3432918353,y=461845907,b=m&Rn,A=y&Rn;for(let x=0;x<a;x++)x&1?(u=l[x],u=u*m&dn|u*b&Rn,u=u<<15|u>>>17,u=u*y&dn|u*A&Rn,d^=u,d=d<<13|d>>>19,d=d*5+3864292196):(h=l[x],h=h*m&dn|h*b&Rn,h=h<<15|h>>>17,h=h*y&dn|h*A&Rn,f^=h,f=f<<13|f>>>19,f=f*5+3864292196);switch(u=0,o){case 3:u^=e[a*4+2]<<16;case 2:u^=e[a*4+1]<<8;case 1:u^=e[a*4],u=u*m&dn|u*b&Rn,u=u<<15|u>>>17,u=u*y&dn|u*A&Rn,a&1?d^=u:f^=u}this.h1=d,this.h2=f}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&dn|t*36045&Rn,e=e*4283543511&dn|((e<<16|t>>>16)*2950163797&dn)>>>16,t^=e>>>1,t=t*444984403&dn|t*60499&Rn,e=e*3301882366&dn|((e<<16|t>>>16)*3120437893&dn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Cu=Object.freeze({map:null,hash:"",transfer:void 0});class Uu{#t=!1;#e=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=this.#n.get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return this.#n.get(t)}remove(t){if(this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of this.#n.values())if(e instanceof vt)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=this.#n.get(t);let a=!1;if(i!==void 0)for(const[o,l]of Object.entries(e))i[o]!==l&&(a=!0,i[o]=l);else a=!0,this.#n.set(t,e);a&&this.#s(),e instanceof vt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#n.has(t)}get size(){return this.#n.size}#s(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new _p(this)}get serializable(){if(this.#n.size===0)return Cu;const t=new Map,e=new jp,i=[],a=Object.create(null);let o=!1;for(const[l,u]of this.#n){const h=u instanceof vt?u.serialize(!1,a):u;h&&(t.set(l,h),e.update(`${l}:${JSON.stringify(h)}`),o||=!!h.bitmap)}if(o)for(const l of t.values())l.bitmap&&i.push(l.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:Cu}get editorStats(){let t=null;const e=new Map;for(const i of this.#n.values()){if(!(i instanceof vt))continue;const a=i.telemetryFinalData;if(!a)continue;const{type:o}=a;e.has(o)||e.set(o,Object.getPrototypeOf(i).constructor),t||=Object.create(null);const l=t[o]||=new Map;for(const[u,h]of Object.entries(a)){if(u==="type")continue;let d=l.get(u);d||(d=new Map,l.set(u,d));const f=d.get(h)??0;d.set(h,f+1)}}for(const[i,a]of e)t[i]=a.computeTelemetryFinalData(t[i]);return t}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;const t=[];for(const e of this.#n.values())!(e instanceof vt)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class _p extends Uu{#t;constructor(t){super();const{map:e,hash:i,transfer:a}=t.serializable,o=structuredClone(e,a?{transfer:a}:null);this.#t={map:o,hash:i,transfer:a}}get print(){Gt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return Nt(this,"modifiedIds",{ids:new Set,hash:""})}}class ey{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:i}){if(!(!t||this.#t.has(t.loadedName))){if(ce(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:o,style:l}=t,u=new FontFace(a,o,l);this.addNativeFontFace(u);try{await u.load(),this.#t.add(a),i?.(t)}catch{Et(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Gt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(a){throw Et(`Failed to load font '${i.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const a=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return Nt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Nt(this,"isSyncFontLoadingSupported",ke||be.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(ce(!a.done,"completeRequest() cannot be called twice."),a.done=!0;i.length>0&&i[0].done;){const o=i.shift();setTimeout(o.callback,0)}}const{loadingRequests:i}=this,a={done:!1,complete:e,callback:t};return i.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Nt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(N,R){return N.charCodeAt(R)<<24|N.charCodeAt(R+1)<<16|N.charCodeAt(R+2)<<8|N.charCodeAt(R+3)&255}function a(N,R,D,j){const _=N.substring(0,R),F=N.substring(R+D);return _+j+F}let o,l;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let d=0;function f(N,R){if(++d>30){Et("Load test font never loaded."),R();return}if(h.font="30px "+N,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){R();return}setTimeout(f.bind(null,N,R))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=a(y,976,m.length,m);const A=16,x=1482184792;let w=i(y,A);for(o=0,l=m.length-3;o<l;o+=4)w=w-x+i(m,o)|0;o<m.length&&(w=w-x+i(m+"XXX",o)|0),y=a(y,A,4,Gv(w));const T=`url(data:font/opentype;base64,${btoa(y)});`,O=`@font-face {font-family:"${m}";src:${T}}`;this.insertRule(O);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const N of[t.loadedName,m]){const R=this._document.createElement("span");R.textContent="Hi",R.style.fontFamily=N,C.append(R)}this._document.body.append(C),f(m,()=>{C.remove(),e.complete()})}}class ny{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const i in t)this[i]=t[i];this._inspectFont=e}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${Dp(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let a;try{a=t.get(i)}catch(l){Et(`getPathGenerator - ignoring character: "${l}".`)}const o=new Path2D(a||"");return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=o}}function sy(g){if(g instanceof URL)return g.href;if(typeof g=="string"){if(ke)return g;const t=URL.parse(g,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function iy(g){if(ke&&typeof Buffer<"u"&&g instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(g instanceof Uint8Array&&g.byteLength===g.buffer.byteLength)return g;if(typeof g=="string")return or(g);if(g instanceof ArrayBuffer||ArrayBuffer.isView(g)||typeof g=="object"&&!isNaN(g?.length))return new Uint8Array(g);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Lo(g){if(typeof g!="string")return null;if(g.endsWith("/"))return g;throw new Error(`Invalid factory url: "${g}" must include trailing slash.`)}const Ru=g=>typeof g=="object"&&Number.isInteger(g?.num)&&g.num>=0&&Number.isInteger(g?.gen)&&g.gen>=0,ay=g=>typeof g=="object"&&typeof g?.name=="string",Bp=$v.bind(null,Ru,ay);class ry{#t=new Map;#e=Promise.resolve();postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[a]of this.#t)a.call(this,i)})}addEventListener(t,e,i=null){let a=null;if(i?.signal instanceof AbortSignal){const{signal:o}=i;if(o.aborted){Et("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,e);a=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}this.#t.set(e,a)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const ko={DATA:1,ERROR:2},le={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function cp(){}function Ue(g){if(g instanceof Qn||g instanceof zo||g instanceof ap||g instanceof nr||g instanceof vu)return g;switch(g instanceof Error||typeof g=="object"&&g!==null||Gt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),g.name){case"AbortException":return new Qn(g.message);case"InvalidPDFException":return new zo(g.message);case"PasswordException":return new ap(g.message,g.code);case"ResponseException":return new nr(g.message,g.status,g.missing);case"UnknownErrorException":return new vu(g.message,g.details)}return new vu(g.message,g.toString())}class Ja{#t=new AbortController;constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#s(t);return}if(t.callback){const i=t.callbackId,a=this.callbackCapabilities[i];if(!a)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===ko.DATA)a.resolve(t.data);else if(t.callback===ko.ERROR)a.reject(Ue(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,a=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(l){o.postMessage({sourceName:i,targetName:a,callback:ko.DATA,callbackId:t.callbackId,data:l})},function(l){o.postMessage({sourceName:i,targetName:a,callback:ko.ERROR,callbackId:t.callbackId,reason:Ue(l)})});return}if(t.streamId){this.#n(t);return}e(t.data)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const a=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[a]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},i)}catch(l){o.reject(l)}return o.promise}sendWithStream(t,e,i,a){const o=this.streamId++,l=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:d=>{const f=Promise.withResolvers();return this.streamControllers[o]={controller:d,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:l,targetName:u,action:t,streamId:o,data:e,desiredSize:d.desiredSize},a),f.promise},pull:d=>{const f=Promise.withResolvers();return this.streamControllers[o].pullCall=f,h.postMessage({sourceName:l,targetName:u,stream:le.PULL,streamId:o,desiredSize:d.desiredSize}),f.promise},cancel:d=>{ce(d instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[o].cancelCall=f,this.streamControllers[o].isClosed=!0,h.postMessage({sourceName:l,targetName:u,stream:le.CANCEL,streamId:o,reason:Ue(d)}),f.promise}},i)}#n(t){const e=t.streamId,i=this.sourceName,a=t.sourceName,o=this.comObj,l=this,u=this.actionHandler[t.action],h={enqueue(d,f=1,m){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=f,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:i,targetName:a,stream:le.ENQUEUE,streamId:e,chunk:d},m)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:a,stream:le.CLOSE,streamId:e}),delete l.streamSinks[e])},error(d){ce(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:a,stream:le.ERROR,streamId:e,reason:Ue(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[e]=h,Promise.try(u,t.data,h).then(function(){o.postMessage({sourceName:i,targetName:a,stream:le.START_COMPLETE,streamId:e,success:!0})},function(d){o.postMessage({sourceName:i,targetName:a,stream:le.START_COMPLETE,streamId:e,reason:Ue(d)})})}#s(t){const e=t.streamId,i=this.sourceName,a=t.sourceName,o=this.comObj,l=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case le.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(Ue(t.reason));break;case le.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(Ue(t.reason));break;case le.PULL:if(!u){o.postMessage({sourceName:i,targetName:a,stream:le.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||cp).then(function(){o.postMessage({sourceName:i,targetName:a,stream:le.PULL_COMPLETE,streamId:e,success:!0})},function(d){o.postMessage({sourceName:i,targetName:a,stream:le.PULL_COMPLETE,streamId:e,reason:Ue(d)})});break;case le.ENQUEUE:if(ce(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case le.CLOSE:if(ce(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#a(l,e);break;case le.ERROR:ce(l,"error should have stream controller"),l.controller.error(Ue(t.reason)),this.#a(l,e);break;case le.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(Ue(t.reason)),this.#a(l,e);break;case le.CANCEL:if(!u)break;const h=Ue(t.reason);Promise.try(u.onCancel||cp,h).then(function(){o.postMessage({sourceName:i,targetName:a,stream:le.CANCEL_COMPLETE,streamId:e,success:!0})},function(d){o.postMessage({sourceName:i,targetName:a,stream:le.CANCEL_COMPLETE,streamId:e,reason:Ue(d)})}),u.sinkCapability.reject(h),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#a(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class Fp{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Gt("Abstract method `_createCanvas` called.")}}class oy extends Fp{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class zp{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Gt("Abstract method `_fetch` called.")}}class up extends zp{async _fetch(t){const e=await Xi(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):or(e)}}Tt(2489);class Up{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,a,o){return"none"}destroy(t=!1){}}class ly extends Up{#t;#e;#n;#s;#a;#i;#r=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#s=t,this.#a=e}get#o(){return this.#e||=new Map}get#l(){return this.#i||=new Map}get#c(){if(!this.#n){const t=this.#a.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const i=this.#a.createElementNS($n,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#n=this.#a.createElementNS($n,"defs"),t.append(i),i.append(this.#n),this.#a.body.append(t)}return this.#n}#d(t){if(t.length===1){const h=t[0],d=new Array(256);for(let m=0;m<256;m++)d[m]=h[m]/255;const f=d.join(",");return[f,f,f]}const[e,i,a]=t,o=new Array(256),l=new Array(256),u=new Array(256);for(let h=0;h<256;h++)o[h]=e[h]/255,l[h]=i[h]/255,u[h]=a[h]/255;return[o.join(","),l.join(","),u.join(",")]}#u(t){if(this.#t===void 0){this.#t="";const e=this.#a.URL;e!==this.#a.baseURI&&(cr(e)?Et('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=ju(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[i,a,o]=this.#d(t),l=t.length===1?i:`${i}${a}${o}`;if(e=this.#o.get(l),e)return this.#o.set(t,e),e;const u=`g_${this.#s}_transfer_map_${this.#r++}`,h=this.#u(u);this.#o.set(t,h),this.#o.set(l,h);const d=this.#g(u);return this.#m(i,a,o,d),h}addHCMFilter(t,e){const i=`${t}-${e}`,a="base";let o=this.#l.get(a);if(o?.key===i||(o?(o.filter?.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},this.#l.set(a,o)),!t||!e))return o.url;const l=this.#v(t);t=dt.makeHexColor(...l);const u=this.#v(e);if(e=dt.makeHexColor(...u),this.#c.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return o.url;const h=new Array(256);for(let b=0;b<=255;b++){const A=b/255;h[b]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const d=h.join(","),f=`g_${this.#s}_hcm_filter`,m=o.filter=this.#g(f);this.#m(d,d,d,m),this.#p(m);const y=(b,A)=>{const x=l[b]/255,w=u[b]/255,T=new Array(A+1);for(let O=0;O<=A;O++)T[O]=x+O/A*(w-x);return T.join(",")};return this.#m(y(0,5),y(1,5),y(2,5),m),o.url=this.#u(f),o.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[i]=this.#d([t]),a=`alpha_${i}`;if(e=this.#o.get(a),e)return this.#o.set(t,e),e;const o=`g_${this.#s}_alpha_map_${this.#r++}`,l=this.#u(o);this.#o.set(t,l),this.#o.set(a,l);const u=this.#g(o);return this.#b(i,u),l}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let i,a;if(t?([i]=this.#d([t]),a=`luminosity_${i}`):a="luminosity",e=this.#o.get(a),e)return this.#o.set(t,e),e;const o=`g_${this.#s}_luminosity_map_${this.#r++}`,l=this.#u(o);this.#o.set(t,l),this.#o.set(a,l);const u=this.#g(o);return this.#f(u),t&&this.#b(i,u),l}addHighlightHCMFilter(t,e,i,a,o){const l=`${e}-${i}-${a}-${o}`;let u=this.#l.get(t);if(u?.key===l||(u?(u.filter?.remove(),u.key=l,u.url="none",u.filter=null):(u={key:l,url:"none",filter:null},this.#l.set(t,u)),!e||!i))return u.url;const[h,d]=[e,i].map(this.#v.bind(this));let f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),m=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[y,b]=[a,o].map(this.#v.bind(this));m<f&&([f,m,y,b]=[m,f,b,y]),this.#c.style.color="";const A=(T,O,C)=>{const N=new Array(256),R=(m-f)/C,D=T/255,j=(O-T)/(255*C);let _=0;for(let F=0;F<=C;F++){const $=Math.round(f+F*R),X=D+F*j;for(let at=_;at<=$;at++)N[at]=X;_=$+1}for(let F=_;F<256;F++)N[F]=N[_-1];return N.join(",")},x=`g_${this.#s}_hcm_${t}_filter`,w=u.filter=this.#g(x);return this.#p(w),this.#m(A(y[0],b[0],5),A(y[1],b[1],5),A(y[2],b[2],5),w),u.url=this.#u(x),u.url}destroy(t=!1){t&&this.#i?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#i?.clear(),this.#i=null,this.#r=0)}#f(t){const e=this.#a.createElementNS($n,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#p(t){const e=this.#a.createElementNS($n,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#g(t){const e=this.#a.createElementNS($n,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#c.append(e),e}#h(t,e,i){const a=this.#a.createElementNS($n,e);a.setAttribute("type","discrete"),a.setAttribute("tableValues",i),t.append(a)}#m(t,e,i,a){const o=this.#a.createElementNS($n,"feComponentTransfer");a.append(o),this.#h(o,"feFuncR",t),this.#h(o,"feFuncG",e),this.#h(o,"feFuncB",i)}#b(t,e){const i=this.#a.createElementNS($n,"feComponentTransfer");e.append(i),this.#h(i,"feFuncA",t)}#v(t){return this.#c.style.color=t,ur(getComputedStyle(this.#c).getPropertyValue("color"))}}class Hp{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Gt("Abstract method `_fetch` called.")}}class hp extends Hp{async _fetch(t){const e=await Xi(t,"arraybuffer");return new Uint8Array(e)}}class Gp{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Gt("Abstract method `_fetch` called.")}}class dp extends Gp{async _fetch(t){const e=await Xi(t,"arraybuffer");return new Uint8Array(e)}}if(ke){let g;try{const t=process.getBuiltinModule("module").createRequire(import.meta.url);try{g=t("@napi-rs/canvas")}catch(e){Et(`Cannot load "@napi-rs/canvas" package: "${e}".`)}}catch(t){Et(`Cannot access the \`require\` function: "${t}".`)}globalThis.DOMMatrix||(g?.DOMMatrix?globalThis.DOMMatrix=g.DOMMatrix:Et("Cannot polyfill `DOMMatrix`, rendering may be broken.")),globalThis.ImageData||(g?.ImageData?globalThis.ImageData=g.ImageData:Et("Cannot polyfill `ImageData`, rendering may be broken.")),globalThis.Path2D||(g?.Path2D?globalThis.Path2D=g.Path2D:Et("Cannot polyfill `Path2D`, rendering may be broken.")),globalThis.navigator?.language||(globalThis.navigator={language:"en-US",platform:"",userAgent:""})}async function Hu(g){const e=await process.getBuiltinModule("fs").promises.readFile(g);return new Uint8Array(e)}class cy extends Up{}class uy extends Fp{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class hy extends zp{async _fetch(t){return Hu(t)}}class dy extends Hp{async _fetch(t){return Hu(t)}}class fy extends Gp{async _fetch(t){return Hu(t)}}Tt(7588);const _i="__forcedDependency";class gy{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[_i]:[]};#n=new Map;#s=[];#a=[];#i=[[1,0,0,1,0,0]];#r=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#l=-1;#c=new Set;#d=new Map;#u=new Map;#f;#p;constructor(t){this.#f=t.width,this.#p=t.height}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[_i]:{__proto__:this.#e[_i]}},this.#r={__proto__:this.#r},this.#s.push([t,null]),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#r=Object.getPrototypeOf(this.#r);const i=this.#s.pop();return i!==void 0&&(i[1]=t),this}recordOpenMarker(t){return this.#s.push([t,null]),this}getOpenMarker(){return this.#s.length===0?null:this.#s.at(-1)[0]}recordCloseMarker(t){const e=this.#s.pop();return e!==void 0&&(e[1]=t),this}beginMarkedContent(t){return this.#a.push([t,null]),this}endMarkedContent(t){const e=this.#a.pop();return e!==void 0&&(e[1]=t),this}pushBaseTransform(t){return this.#i.push(dt.multiplyByDOMMatrix(this.#i.at(-1),t.getTransform())),this}popBaseTransform(){return this.#i.length>1&&this.#i.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#n.set(t,e),this}recordFutureForcedDependency(t,e){return this.recordIncrementalData(_i,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#c)this.recordFutureForcedDependency(_i,t);return this}resetBBox(t){return this.#l=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0,this}get hasPendingBBox(){return this.#l!==-1}recordClipBox(t,e,i,a,o,l){const u=dt.multiplyByDOMMatrix(this.#i.at(-1),e.getTransform()),h=[1/0,1/0,-1/0,-1/0];dt.axialAlignedBoundingBox([i,o,a,l],u,h);const d=dt.intersect(this.#r,h);return d?(this.#r[0]=d[0],this.#r[1]=d[1],this.#r[2]=d[2],this.#r[3]=d[3]):(this.#r[0]=this.#r[1]=1/0,this.#r[2]=this.#r[3]=-1/0),this}recordBBox(t,e,i,a,o,l){const u=this.#r;if(u[0]===1/0)return this;const h=dt.multiplyByDOMMatrix(this.#i.at(-1),e.getTransform());if(u[0]===-1/0)return dt.axialAlignedBoundingBox([i,o,a,l],h,this.#o),this;const d=[1/0,1/0,-1/0,-1/0];return dt.axialAlignedBoundingBox([i,o,a,l],h,d),this.#o[0]=Math.min(this.#o[0],Math.max(d[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(d[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(d[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(d[3],u[3])),this}recordCharacterBBox(t,e,i,a=1,o=0,l=0,u){const h=i.bbox;let d,f;if(h&&(d=h[2]!==h[0]&&h[3]!==h[1]&&this.#u.get(i),d!==!1&&(f=[0,0,0,0],dt.axialAlignedBoundingBox(h,i.fontMatrix,f),(a!==1||o!==0||l!==0)&&dt.scaleMinMax([a,0,0,-a,o,l],f),d)))return this.recordBBox(t,e,f[0],f[2],f[1],f[3]);if(!u)return this.recordFullPageBBox(t);const m=u();return h&&f&&d===void 0&&(d=f[0]<=o-m.actualBoundingBoxLeft&&f[2]>=o+m.actualBoundingBoxRight&&f[1]<=l-m.actualBoundingBoxAscent&&f[3]>=l+m.actualBoundingBoxDescent,this.#u.set(i,d),d)?this.recordBBox(t,e,f[0],f[2],f[1],f[3]):this.recordBBox(t,e,o-m.actualBoundingBoxLeft,o+m.actualBoundingBoxRight,l-m.actualBoundingBoxAscent,l+m.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#r[0]),this.#o[1]=Math.max(0,this.#r[1]),this.#o[2]=Math.min(this.#f,this.#r[2]),this.#o[3]=Math.min(this.#p,this.#r[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const i=this.#c,a=this.#t,o=this.#e;for(const l of e)l in this.#t?i.add(a[l]):l in o&&o[l].forEach(i.add,i);return this}copyDependenciesFromIncrementalOperation(t,e){const i=this.#d,a=this.#c;for(const o of this.#e[e])i.get(o).dependencies.forEach(a.add,a.add(o));return this}recordNamedDependency(t,e){return this.#n.has(e)&&this.#c.add(this.#n.get(e)),this}recordOperation(t,e=!1){this.recordDependencies(t,[_i]);const i=new Set(this.#c),a=this.#s.concat(this.#a),o=this.#l===t?{minX:this.#o[0],minY:this.#o[1],maxX:this.#o[2],maxY:this.#o[3]}:null;return this.#d.set(t,{bbox:o,pairs:a,dependencies:i}),e||(this.#l=-1),this.#c.clear(),this}bboxToClipBoxDropOperation(t){return this.#l!==-1&&(this.#l=-1,this.#r[0]=Math.max(this.#r[0],this.#o[0]),this.#r[1]=Math.max(this.#r[1],this.#o[1]),this.#r[2]=Math.min(this.#r[2],this.#o[2]),this.#r[3]=Math.min(this.#r[3],this.#o[3])),this.#c.clear(),this}_takePendingDependencies(){const t=this.#c;return this.#c=new Set,t}_extractOperation(t){const e=this.#d.get(t);return this.#d.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#c.add(e)}take(){return this.#u.clear(),Array.from(this.#d,([t,{bbox:e,pairs:i,dependencies:a}])=>(i.forEach(o=>o.forEach(a.add,a)),a.delete(t),{minX:(e?.minX??0)/this.#f,maxX:(e?.maxX??this.#f)/this.#f,minY:(e?.minY??0)/this.#p,maxY:(e?.maxY??this.#p)/this.#p,dependencies:Array.from(a).sort((o,l)=>o-l),idx:t}))}}class Go{#t;#e;#n=0;#s;#a=0;constructor(t,e){if(t instanceof Go)return t;this.#t=t,this.#s=t._takePendingDependencies(),this.#e=e}save(t){return this.#a++,this.#t.save(this.#e),this}restore(t){return this.#a>0&&(this.#t.restore(this.#e),this.#a--),this}recordOpenMarker(t){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#n--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#t.hasPendingBBox||this.#t.resetBBox(this.#e),this}get hasPendingBBox(){return this.#t.hasPendingBBox}recordClipBox(t,e,i,a,o,l){return this.#t.recordClipBox(this.#e,e,i,a,o,l),this}recordBBox(t,e,i,a,o,l){return this.#t.recordBBox(this.#e,e,i,a,o,l),this}recordCharacterBBox(t,e,i,a,o,l,u){return this.#t.recordCharacterBBox(this.#e,e,i,a,o,l,u),this}recordFullPageBBox(t){return this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}copyDependenciesFromIncrementalOperation(t,e){return this.#t.copyDependenciesFromIncrementalOperation(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){this.#t.recordOperation(this.#e,!0);const e=this.#t._extractOperation(this.#e);for(const i of e.dependencies)this.#s.add(i);return this.#s.delete(this.#e),this.#s.delete(null),this}bboxToClipBoxDropOperation(t){return this.#t.bboxToClipBoxDropOperation(this.#e),this}recordNestedDependencies(){this.#t._pushPendingDependencies(this.#s)}take(){throw new Error("Unreachable")}}const fn={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation"],transform:["transform"],transformAndFill:["transform","fillColor"]},Ce={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Mu(g,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],e,i),g.clip(a)}class Gu{isModifyingCurrentTransform(){return!1}getPattern(){Gt("Abstract method `getPattern` called.")}}class py extends Gu{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,a){let o;if(a===Ce.STROKE||a===Ce.FILL){const l=e.current.getClippedPathBoundingBox(a,Qt(t))||[0,0,0,0],u=Math.ceil(l[2]-l[0])||1,h=Math.ceil(l[3]-l[1])||1,d=e.cachedCanvases.getCanvas("pattern",u,h),f=d.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-l[0],-l[1]),i=dt.transform(i,[1,0,0,1,l[0],l[1]]),f.transform(...e.baseTransform),this.matrix&&f.transform(...this.matrix),Mu(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),o=t.createPattern(d.canvas,"no-repeat");const m=new DOMMatrix(i);o.setTransform(m)}else Mu(t,this._bbox),o=this._createGradient(t);return o}}function xu(g,t,e,i,a,o,l,u){const h=t.coords,d=t.colors,f=g.data,m=g.width*4;let y;h[e+1]>h[i+1]&&(y=e,e=i,i=y,y=o,o=l,l=y),h[i+1]>h[a+1]&&(y=i,i=a,a=y,y=l,l=u,u=y),h[e+1]>h[i+1]&&(y=e,e=i,i=y,y=o,o=l,l=y);const b=(h[e]+t.offsetX)*t.scaleX,A=(h[e+1]+t.offsetY)*t.scaleY,x=(h[i]+t.offsetX)*t.scaleX,w=(h[i+1]+t.offsetY)*t.scaleY,T=(h[a]+t.offsetX)*t.scaleX,O=(h[a+1]+t.offsetY)*t.scaleY;if(A>=O)return;const C=d[o],N=d[o+1],R=d[o+2],D=d[l],j=d[l+1],_=d[l+2],F=d[u],$=d[u+1],X=d[u+2],at=Math.round(A),V=Math.round(O);let J,rt,L,P,Q,ct,k,K;for(let st=at;st<=V;st++){if(st<w){const Z=st<A?0:(A-st)/(A-w);J=b-(b-x)*Z,rt=C-(C-D)*Z,L=N-(N-j)*Z,P=R-(R-_)*Z}else{let Z;st>O?Z=1:w===O?Z=0:Z=(w-st)/(w-O),J=x-(x-T)*Z,rt=D-(D-F)*Z,L=j-(j-$)*Z,P=_-(_-X)*Z}let et;st<A?et=0:st>O?et=1:et=(A-st)/(A-O),Q=b-(b-T)*et,ct=C-(C-F)*et,k=N-(N-$)*et,K=R-(R-X)*et;const ot=Math.round(Math.min(J,Q)),lt=Math.round(Math.max(J,Q));let W=m*st+ot*4;for(let Z=ot;Z<=lt;Z++)et=(J-Z)/(J-Q),et<0?et=0:et>1&&(et=1),f[W++]=rt-(rt-ct)*et|0,f[W++]=L-(L-k)*et|0,f[W++]=P-(P-K)*et|0,f[W++]=255}}function my(g,t,e){const i=t.coords,a=t.colors;let o,l;switch(t.type){case"lattice":const u=t.verticesPerRow,h=Math.floor(i.length/u)-1,d=u-1;for(o=0;o<h;o++){let f=o*u;for(let m=0;m<d;m++,f++)xu(g,e,i[f],i[f+1],i[f+u],a[f],a[f+1],a[f+u]),xu(g,e,i[f+u+1],i[f+1],i[f+u],a[f+u+1],a[f+1],a[f+u])}break;case"triangles":for(o=0,l=i.length;o<l;o+=3)xu(g,e,i[o],i[o+1],i[o+2],a[o],a[o+1],a[o+2]);break;default:throw new Error("illegal figure")}}class vy extends Gu{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,i){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-u,f=Math.ceil(this._bounds[3])-h,m=Math.min(Math.ceil(Math.abs(d*t[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(f*t[1]*1.1)),3e3),b=d/m,A=f/y,x={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/b,scaleY:1/A},w=m+2*2,T=y+2*2,O=i.getCanvas("mesh",w,T),C=O.context,N=C.createImageData(m,y);if(e){const D=N.data;for(let j=0,_=D.length;j<_;j+=4)D[j]=e[0],D[j+1]=e[1],D[j+2]=e[2],D[j+3]=255}for(const D of this._figures)my(N,D,x);return C.putImageData(N,2,2),{canvas:O.canvas,offsetX:u-2*b,offsetY:h-2*A,scaleX:b,scaleY:A}}isModifyingCurrentTransform(){return!0}getPattern(t,e,i,a){Mu(t,this._bbox);const o=new Float32Array(2);if(a===Ce.SHADING)dt.singularValueDecompose2dScale(Qt(t),o);else if(this.matrix){dt.singularValueDecompose2dScale(this.matrix,o);const[u,h]=o;dt.singularValueDecompose2dScale(e.baseTransform,o),o[0]*=u,o[1]*=h}else dt.singularValueDecompose2dScale(e.baseTransform,o);const l=this._createMeshCanvas(o,a===Ce.SHADING?null:this._background,e.cachedCanvases);return a!==Ce.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class yy extends Gu{getPattern(){return"hotpink"}}function by(g){switch(g[0]){case"RadialAxial":return new py(g);case"Mesh":return new vy(g);case"Dummy":return new yy}throw new Error(`Unknown IR type: ${g[0]}`)}const fp={COLORED:1,UNCOLORED:2};class Vu{static MAX_PATTERN_SIZE=3e3;constructor(t,e,i,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=i,this.baseTransform=a}createPatternCanvas(t){const{bbox:e,operatorList:i,paintType:a,tilingType:o,color:l,canvasGraphicsFactory:u}=this;let{xstep:h,ystep:d}=this;h=Math.abs(h),d=Math.abs(d),Xo("TilingType: "+o);const f=e[0],m=e[1],y=e[2],b=e[3],A=y-f,x=b-m,w=new Float32Array(2);dt.singularValueDecompose2dScale(this.matrix,w);const[T,O]=w;dt.singularValueDecompose2dScale(this.baseTransform,w);const C=T*w[0],N=O*w[1];let R=A,D=x,j=!1,_=!1;const F=Math.ceil(h*C),$=Math.ceil(d*N),X=Math.ceil(A*C),at=Math.ceil(x*N);F>=X?R=h:j=!0,$>=at?D=d:_=!0;const V=this.getSizeAndScale(R,this.ctx.canvas.width,C),J=this.getSizeAndScale(D,this.ctx.canvas.height,N),rt=t.cachedCanvases.getCanvas("pattern",V.size,J.size),L=rt.context,P=u.createCanvasGraphics(L);if(P.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(P,a,l),L.translate(-V.scale*f,-J.scale*m),P.transform(0,V.scale,0,0,J.scale,0,0),L.save(),P.dependencyTracker?.save(),this.clipBbox(P,f,m,y,b),P.baseTransform=Qt(P.ctx),P.executeOperatorList(i),P.endDrawing(),P.dependencyTracker?.restore().recordNestedDependencies?.(),L.restore(),j||_){const Q=rt.canvas;j&&(R=h),_&&(D=d);const ct=this.getSizeAndScale(R,this.ctx.canvas.width,C),k=this.getSizeAndScale(D,this.ctx.canvas.height,N),K=ct.size,st=k.size,et=t.cachedCanvases.getCanvas("pattern-workaround",K,st),ot=et.context,lt=j?Math.floor(A/h):0,W=_?Math.floor(x/d):0;for(let Z=0;Z<=lt;Z++)for(let it=0;it<=W;it++)ot.drawImage(Q,K*Z,st*it,K,st,0,0,K,st);return{canvas:et.canvas,scaleX:ct.scale,scaleY:k.scale,offsetX:f,offsetY:m}}return{canvas:rt.canvas,scaleX:V.scale,scaleY:J.scale,offsetX:f,offsetY:m}}getSizeAndScale(t,e,i){const a=Math.max(Vu.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*i);return o>=a?o=a:i=o/t,{scale:i,size:o}}clipBbox(t,e,i,a,o){const l=a-e,u=o-i;t.ctx.rect(e,i,l,u),dt.axialAlignedBoundingBox([e,i,a,o],Qt(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const a=t.ctx,o=t.current;switch(e){case fp.COLORED:const{fillStyle:l,strokeStyle:u}=this.ctx;a.fillStyle=o.fillColor=l,a.strokeStyle=o.strokeColor=u;break;case fp.UNCOLORED:a.fillStyle=a.strokeStyle=i,o.fillColor=o.strokeColor=i;break;default:throw new Hv(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,i,a){let o=i;a!==Ce.SHADING&&(o=dt.transform(o,e.baseTransform),this.matrix&&(o=dt.transform(o,this.matrix)));const l=this.createPatternCanvas(e);let u=new DOMMatrix(o);u=u.translate(l.offsetX,l.offsetY),u=u.scale(1/l.scaleX,1/l.scaleY);const h=t.createPattern(l.canvas,"repeat");return h.setTransform(u),h}}function xy({src:g,srcPos:t=0,dest:e,width:i,height:a,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const u=be.isLittleEndian?4278190080:255,[h,d]=l?[o,u]:[u,o],f=i>>3,m=i&7,y=g.length;e=new Uint32Array(e.buffer);let b=0;for(let A=0;A<a;A++){for(const w=t+f;t<w;t++){const T=t<y?g[t]:255;e[b++]=T&128?d:h,e[b++]=T&64?d:h,e[b++]=T&32?d:h,e[b++]=T&16?d:h,e[b++]=T&8?d:h,e[b++]=T&4?d:h,e[b++]=T&2?d:h,e[b++]=T&1?d:h}if(m===0)continue;const x=t<y?g[t++]:255;for(let w=0;w<m;w++)e[b++]=x&1<<7-w?d:h}return{srcPos:t,destPos:b}}const gp=16,pp=100,Ay=15,mp=10,He=16,Au=new DOMMatrix,tn=new Float32Array(2),zi=new Float32Array([1/0,1/0,-1/0,-1/0]);function Sy(g,t){if(g._removeMirroring)throw new Error("Context is already forwarding operations.");g.__originalSave=g.save,g.__originalRestore=g.restore,g.__originalRotate=g.rotate,g.__originalScale=g.scale,g.__originalTranslate=g.translate,g.__originalTransform=g.transform,g.__originalSetTransform=g.setTransform,g.__originalResetTransform=g.resetTransform,g.__originalClip=g.clip,g.__originalMoveTo=g.moveTo,g.__originalLineTo=g.lineTo,g.__originalBezierCurveTo=g.bezierCurveTo,g.__originalRect=g.rect,g.__originalClosePath=g.closePath,g.__originalBeginPath=g.beginPath,g._removeMirroring=()=>{g.save=g.__originalSave,g.restore=g.__originalRestore,g.rotate=g.__originalRotate,g.scale=g.__originalScale,g.translate=g.__originalTranslate,g.transform=g.__originalTransform,g.setTransform=g.__originalSetTransform,g.resetTransform=g.__originalResetTransform,g.clip=g.__originalClip,g.moveTo=g.__originalMoveTo,g.lineTo=g.__originalLineTo,g.bezierCurveTo=g.__originalBezierCurveTo,g.rect=g.__originalRect,g.closePath=g.__originalClosePath,g.beginPath=g.__originalBeginPath,delete g._removeMirroring},g.save=function(){t.save(),this.__originalSave()},g.restore=function(){t.restore(),this.__originalRestore()},g.translate=function(e,i){t.translate(e,i),this.__originalTranslate(e,i)},g.scale=function(e,i){t.scale(e,i),this.__originalScale(e,i)},g.transform=function(e,i,a,o,l,u){t.transform(e,i,a,o,l,u),this.__originalTransform(e,i,a,o,l,u)},g.setTransform=function(e,i,a,o,l,u){t.setTransform(e,i,a,o,l,u),this.__originalSetTransform(e,i,a,o,l,u)},g.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},g.rotate=function(e){t.rotate(e),this.__originalRotate(e)},g.clip=function(e){t.clip(e),this.__originalClip(e)},g.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},g.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},g.bezierCurveTo=function(e,i,a,o,l,u){t.bezierCurveTo(e,i,a,o,l,u),this.__originalBezierCurveTo(e,i,a,o,l,u)},g.rect=function(e,i,a,o){t.rect(e,i,a,o),this.__originalRect(e,i,a,o)},g.closePath=function(){t.closePath(),this.__originalClosePath()},g.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class Ey{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,e,i)):(a=this.canvasFactory.create(e,i),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Po(g,t,e,i,a,o,l,u,h,d){const[f,m,y,b,A,x]=Qt(g);if(m===0&&y===0){const O=l*f+A,C=Math.round(O),N=u*b+x,R=Math.round(N),D=(l+h)*f+A,j=Math.abs(Math.round(D)-C)||1,_=(u+d)*b+x,F=Math.abs(Math.round(_)-R)||1;return g.setTransform(Math.sign(f),0,0,Math.sign(b),C,R),g.drawImage(t,e,i,a,o,0,0,j,F),g.setTransform(f,m,y,b,A,x),[j,F]}if(f===0&&b===0){const O=u*y+A,C=Math.round(O),N=l*m+x,R=Math.round(N),D=(u+d)*y+A,j=Math.abs(Math.round(D)-C)||1,_=(l+h)*m+x,F=Math.abs(Math.round(_)-R)||1;return g.setTransform(0,Math.sign(m),Math.sign(y),0,C,R),g.drawImage(t,e,i,a,o,0,0,F,j),g.setTransform(f,m,y,b,A,x),[F,j]}g.drawImage(t,e,i,a,o,l,u,h,d);const w=Math.hypot(f,m),T=Math.hypot(y,b);return[w*h,T*d]}class vp{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Tu;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Te.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,i){i?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=zi.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Ce.FILL,e=null){const i=this.minMax.slice();if(t===Ce.STROKE){e||Gt("Stroke bounding box must include transform."),dt.singularValueDecompose2dScale(e,tn);const a=tn[0]*this.lineWidth/2,o=tn[1]*this.lineWidth/2;i[0]-=a,i[1]-=o,i[2]+=a,i[3]+=o}return i}updateClipFromPath(){const t=dt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(zi,0)}getClippedPathBoundingBox(t=Ce.FILL,e=null){return dt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function yp(g,t){if(t instanceof ImageData){g.putImageData(t,0,0);return}const e=t.height,i=t.width,a=e%He,o=(e-a)/He,l=a===0?o:o+1,u=g.createImageData(i,He);let h=0,d;const f=t.data,m=u.data;let y,b,A,x;if(t.kind===tr.GRAYSCALE_1BPP){const w=f.byteLength,T=new Uint32Array(m.buffer,0,m.byteLength>>2),O=T.length,C=i+7>>3,N=4294967295,R=be.isLittleEndian?4278190080:255;for(y=0;y<l;y++){for(A=y<o?He:a,d=0,b=0;b<A;b++){const D=w-h;let j=0;const _=D>C?i:D*8-7,F=_&-8;let $=0,X=0;for(;j<F;j+=8)X=f[h++],T[d++]=X&128?N:R,T[d++]=X&64?N:R,T[d++]=X&32?N:R,T[d++]=X&16?N:R,T[d++]=X&8?N:R,T[d++]=X&4?N:R,T[d++]=X&2?N:R,T[d++]=X&1?N:R;for(;j<_;j++)$===0&&(X=f[h++],$=128),T[d++]=X&$?N:R,$>>=1}for(;d<O;)T[d++]=0;g.putImageData(u,0,y*He)}}else if(t.kind===tr.RGBA_32BPP){for(b=0,x=i*He*4,y=0;y<o;y++)m.set(f.subarray(h,h+x)),h+=x,g.putImageData(u,0,b),b+=He;y<l&&(x=i*a*4,m.set(f.subarray(h,h+x)),g.putImageData(u,0,b))}else if(t.kind===tr.RGB_24BPP)for(A=He,x=i*A,y=0;y<l;y++){for(y>=o&&(A=a,x=i*A),d=0,b=x;b--;)m[d++]=f[h++],m[d++]=f[h++],m[d++]=f[h++],m[d++]=255;g.putImageData(u,0,y*He)}else throw new Error(`bad image kind: ${t.kind}`)}function bp(g,t){if(t.bitmap){g.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,a=e%He,o=(e-a)/He,l=a===0?o:o+1,u=g.createImageData(i,He);let h=0;const d=t.data,f=u.data;for(let m=0;m<l;m++){const y=m<o?He:a;({srcPos:h}=xy({src:d,srcPos:h,dest:f,width:i,height:y,nonBlackColor:0})),g.putImageData(u,0,m*He)}}function $a(g,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)g[i]!==void 0&&(t[i]=g[i]);g.setLineDash!==void 0&&(t.setLineDash(g.getLineDash()),t.lineDashOffset=g.lineDashOffset)}function Io(g){g.strokeStyle=g.fillStyle="#000000",g.fillRule="nonzero",g.globalAlpha=1,g.lineWidth=1,g.lineCap="butt",g.lineJoin="miter",g.miterLimit=10,g.globalCompositeOperation="source-over",g.font="10px sans-serif",g.setLineDash!==void 0&&(g.setLineDash([]),g.lineDashOffset=0);const{filter:t}=g;t!=="none"&&t!==""&&(g.filter="none")}function xp(g,t){if(t)return!0;dt.singularValueDecompose2dScale(g,tn);const e=Math.fround(yn.pixelRatio*Ws.PDF_TO_CSS_UNITS);return tn[0]<=e&&tn[1]<=e}const wy=["butt","round","square"],Ty=["miter","round","bevel"],Cy={},Ap={};class Hi{constructor(t,e,i,a,o,{optionalContentConfig:l,markedContentStack:u=null},h,d,f){this.ctx=t,this.current=new vp(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=a,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=l,this.cachedCanvases=new Ey(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=f??null}getObject(t,e,i=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):i}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:a=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=u,i){const h=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...Qt(this.compositeCtx))}this.ctx.save(),Io(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Qt(this.ctx)}executeOperatorList(t,e,i,a,o){const l=t.argsArray,u=t.fnArray;let h=e||0;const d=l.length;if(d===h)return h;const f=d-h>mp&&typeof i=="function",m=f?Date.now()+Ay:0;let y=0;const b=this.commonObjs,A=this.objs;let x,w;for(;;){if(a!==void 0&&h===a.nextBreakPoint)return a.breakIt(h,i),h;if(!o||o.has(h))if(x=u[h],w=l[h]??null,x!==Vi.dependency)w===null?this[x](h):this[x](h,...w);else for(const T of w){this.dependencyTracker?.recordNamedData(T,h);const O=T.startsWith("g_")?b:A;if(!O.has(T))return O.get(T,i),h}if(h++,h===d)return h;if(f&&++y>mp){if(Date.now()>m)return i(),h;y=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const i=t.width??t.displayWidth,a=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),u=i,h=a,d="prescale1",f,m;for(;o>2&&u>1||l>2&&h>1;){let y=u,b=h;o>2&&u>1&&(y=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/y),l>2&&h>1&&(b=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,l/=h/b),f=this.cachedCanvases.getCanvas(d,y,b),m=f.context,m.clearRect(0,0,y,b),m.drawImage(t,0,0,u,h,0,0,y,b),t=f.canvas,u=y,h=b,d=d==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:h}}_createMaskCanvas(t,e){const i=this.ctx,{width:a,height:o}=e,l=this.current.fillColor,u=this.current.patternFill,h=Qt(i);let d,f,m,y;if((e.bitmap||e.data)&&e.count>1){const $=e.bitmap||e.data.buffer;f=JSON.stringify(u?h:[h.slice(0,4),l]),d=this._cachedBitmapsMap.get($),d||(d=new Map,this._cachedBitmapsMap.set($,d));const X=d.get(f);if(X&&!u){const at=Math.round(Math.min(h[0],h[2])+h[4]),V=Math.round(Math.min(h[1],h[3])+h[5]);return this.dependencyTracker?.recordDependencies(t,fn.transformAndFill),{canvas:X,offsetX:at,offsetY:V}}m=X}m||(y=this.cachedCanvases.getCanvas("maskCanvas",a,o),bp(y.context,e));let b=dt.transform(h,[1/a,0,0,-1/o,0,0]);b=dt.transform(b,[1,0,0,1,0,-o]);const A=zi.slice();dt.axialAlignedBoundingBox([0,0,a,o],b,A);const[x,w,T,O]=A,C=Math.round(T-x)||1,N=Math.round(O-w)||1,R=this.cachedCanvases.getCanvas("fillCanvas",C,N),D=R.context,j=x,_=w;D.translate(-j,-_),D.transform(...b),m||(m=this._scaleImage(y.canvas,Cn(D)),m=m.img,d&&u&&d.set(f,m)),D.imageSmoothingEnabled=xp(Qt(D),e.interpolate),Po(D,m,0,0,m.width,m.height,0,0,a,o),D.globalCompositeOperation="source-in";const F=dt.transform(Cn(D),[1,0,0,1,-j,-_]);return D.fillStyle=u?l.getPattern(i,this,F,Ce.FILL):l,D.fillRect(0,0,a,o),d&&!u&&(this.cachedCanvases.delete("fillCanvas"),d.set(f,R.canvas)),this.dependencyTracker?.recordDependencies(t,fn.transformAndFill),{canvas:R.canvas,offsetX:Math.round(j),offsetY:Math.round(_)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=wy[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=Ty[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,i){this.dependencyTracker?.recordSimpleData("dash",t);const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(e),a.lineDashOffset=i)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[i,a]of e)switch(i){case"LW":this.setLineWidth(t,a);break;case"LC":this.setLineCap(t,a);break;case"LJ":this.setLineJoin(t,a);break;case"ML":this.setMiterLimit(t,a);break;case"D":this.setDash(t,a[0],a[1]);break;case"RI":this.setRenderingIntent(t,a);break;case"FL":this.setFlatness(t,a);break;case"Font":this.setFont(t,a[0],a[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=a;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=a;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=a;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=a?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(a);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,i=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(a,e,i);this.suspendedCtx=this.ctx;const l=this.ctx=o.context;l.setTransform(this.suspendedCtx.getTransform()),$a(this.suspendedCtx,l),Sy(l,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),$a(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,a){const o=a[0],l=a[1],u=a[2]-o,h=a[3]-l;u===0||h===0||(this.genericComposeSMask(e.context,i,u,h,e.subtype,e.backdrop,e.transferMap,o,l,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,a,o,l,u,h,d,f,m){let y=t.canvas,b=h-f,A=d-m;if(l)if(b<0||A<0||b+i>y.width||A+a>y.height){const w=this.cachedCanvases.getCanvas("maskExtension",i,a),T=w.context;T.drawImage(y,-b,-A),T.globalCompositeOperation="destination-atop",T.fillStyle=l,T.fillRect(0,0,i,a),T.globalCompositeOperation="source-over",y=w.canvas,b=A=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const w=new Path2D;w.rect(b,A,i,a),t.clip(w),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(b,A,i,a),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const x=new Path2D;x.rect(h,d,i,a),e.clip(x),e.globalCompositeOperation="destination-in",e.drawImage(y,b,A,i,a,h,d,i,a),e.restore()}save(t){this.inSMaskMode&&$a(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&$a(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,i,a,o,l,u){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,i,a,o,l,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i,a){let[o]=i;if(!a){o||=i[0]=new Path2D,this[e](t,o);return}if(this.dependencyTracker!==null){const l=e===Vi.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,a[0]-l,a[2]+l,a[1]-l,a[3]+l).recordDependencies(t,["transform"])}if(!(o instanceof Path2D)){const l=i[0]=new Path2D;for(let u=0,h=o.length;u<h;)switch(o[u++]){case Oo.moveTo:l.moveTo(o[u++],o[u++]);break;case Oo.lineTo:l.lineTo(o[u++],o[u++]);break;case Oo.curveTo:l.bezierCurveTo(o[u++],o[u++],o[u++],o[u++],o[u++],o[u++]);break;case Oo.closePath:l.closePath();break;default:Et(`Unrecognized drawing path operator: ${o[u-1]}`);break}o=l}dt.axialAlignedBoundingBox(a,Qt(this.ctx),this.current.minMax),this[e](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,i=!0){const a=this.ctx,o=this.current.strokeColor;if(a.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const l=o.isModifyingCurrentTransform()?a.getTransform():null;if(a.save(),a.strokeStyle=o.getPattern(a,this,Cn(a),Ce.STROKE),l){const u=new Path2D;u.addPath(e,a.getTransform().invertSelf().multiplySelf(l)),e=u}this.rescaleAndStroke(e,!1),a.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,fn.stroke),i&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Ce.STROKE,Qt(this.ctx))),a.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,i=!0){const a=this.ctx,o=this.current.fillColor,l=this.current.patternFill;let u=!1;if(l){const d=o.isModifyingCurrentTransform()?a.getTransform():null;if(this.dependencyTracker?.save(t),a.save(),a.fillStyle=o.getPattern(a,this,Cn(a),Ce.FILL),d){const f=new Path2D;f.addPath(e,a.getTransform().invertSelf().multiplySelf(d)),e=f}u=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(a.fill(e,"evenodd"),this.pendingEOFill=!1):a.fill(e)),this.dependencyTracker?.recordDependencies(t,fn.fill),u&&(a.restore(),this.dependencyTracker?.restore(t)),i&&this.consumePath(t,e,h)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,fn.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=Cy}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=Ap}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,i=this.ctx;if(this.dependencyTracker){const{dependencyTracker:a}=this;e!==void 0&&a.recordFutureForcedDependency("textClip",a.getOpenMarker()).recordFutureForcedDependency("textClip",t),a.recordCloseMarker(t)}if(e!==void 0){const a=new Path2D,o=i.getTransform().invertSelf();for(const{transform:l,x:u,y:h,fontSize:d,path:f}of e)f&&a.addPath(f,new DOMMatrix(l).preMultiplySelf(o).translate(u,h).scale(d,-d));i.clip(a)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,i){this.dependencyTracker?.recordSimpleData("font",t).recordNamedDependency(t,e);const a=this.commonObjs.get(e),o=this.current;if(!a)throw new Error(`Can't find font for ${e}`);if(o.fontMatrix=a.fontMatrix||Tu,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&Et("Invalid font matrix for font "+e),i<0?(i=-i,o.fontDirection=-1):o.fontDirection=1,this.current.font=a,this.current.fontSize=i,a.isType3Font)return;const l=a.loadedName||"sans-serif",u=a.systemFontInfo?.css||`"${l}", ${a.fallbackName}`;let h="normal";a.black?h="900":a.bold&&(h="bold");const d=a.italic?"italic":"normal";let f=i;i<gp?f=gp:i>pp&&(f=pp),this.current.fontSizeScale=i/f,this.ctx.font=`${d} ${h} ${f}px ${u}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=i}setLeadingMoveText(t,e,i){this.setLeading(t,-i),this.moveText(t,e,i)}setTextMatrix(t,e){this.dependencyTracker?.recordSimpleData("textMatrix",t);const{current:i}=this;i.textMatrix=e,i.textMatrixScale=Math.hypot(e[0],e[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#n(t,e,i){const a=new Path2D;return a.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),a}paintChar(t,e,i,a,o,l){const u=this.ctx,h=this.current,d=h.font,f=h.textRenderingMode,m=h.fontSize/h.fontSizeScale,y=f&Te.FILL_STROKE_MASK,b=!!(f&Te.ADD_TO_PATH_FLAG),A=h.patternFill&&!d.missingFile,x=h.patternStroke&&!d.missingFile;let w;if((d.disableFontFace||b||A||x)&&!d.missingFile&&(w=d.getPathGenerator(this.commonObjs,e)),w&&(d.disableFontFace||A||x)){u.save(),u.translate(i,a),u.scale(m,-m),this.dependencyTracker?.recordCharacterBBox(t,u,d);let T;if(y===Te.FILL||y===Te.FILL_STROKE)if(o){T=u.getTransform(),u.setTransform(...o);const O=this.#n(w,T,o);u.fill(O)}else u.fill(w);if(y===Te.STROKE||y===Te.FILL_STROKE)if(l){T||=u.getTransform(),u.setTransform(...l);const{a:O,b:C,c:N,d:R}=T,D=dt.inverseTransform(l),j=dt.transform([O,C,N,R,0,0],D);dt.singularValueDecompose2dScale(j,tn),u.lineWidth*=Math.max(tn[0],tn[1])/m,u.stroke(this.#n(w,T,l))}else u.lineWidth/=m,u.stroke(w);u.restore()}else(y===Te.FILL||y===Te.FILL_STROKE)&&(u.fillText(e,i,a),this.dependencyTracker?.recordCharacterBBox(t,u,d,m,i,a,()=>u.measureText(e))),(y===Te.STROKE||y===Te.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,u,d,m,i,a,()=>u.measureText(e)).recordDependencies(t,fn.stroke),u.strokeText(e,i,a));b&&((this.pendingTextPaths||=[]).push({transform:Qt(u),x:i,y:a,fontSize:m,path:w}),this.dependencyTracker?.recordCharacterBBox(t,u,d,m,i,a))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){i=!0;break}return Nt(this,"isFontSubpixelAAEnabled",i)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,fn.showText).copyDependenciesFromIncrementalOperation(t,"sameLineText").resetBBox(t),this.current.textRenderingMode&Te.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,a=i.font;if(a.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordOperation(t).recordIncrementalData("sameLineText",t);return}const o=i.fontSize;if(o===0){this.dependencyTracker?.recordOperation(t);return}const l=this.ctx,u=i.fontSizeScale,h=i.charSpacing,d=i.wordSpacing,f=i.fontDirection,m=i.textHScale*f,y=e.length,b=a.vertical,A=b?1:-1,x=a.defaultVMetrics,w=o*i.fontMatrix[0],T=i.textRenderingMode===Te.FILL&&!a.disableFontFace&&!i.patternFill;l.save(),i.textMatrix&&l.transform(...i.textMatrix),l.translate(i.x,i.y+i.textRise),f>0?l.scale(m,-1):l.scale(m,1);let O,C;if(i.patternFill){l.save();const _=i.fillColor.getPattern(l,this,Cn(l),Ce.FILL);O=Qt(l),l.restore(),l.fillStyle=_}if(i.patternStroke){l.save();const _=i.strokeColor.getPattern(l,this,Cn(l),Ce.STROKE);C=Qt(l),l.restore(),l.strokeStyle=_}let N=i.lineWidth;const R=i.textMatrixScale;if(R===0||N===0){const _=i.textRenderingMode&Te.FILL_STROKE_MASK;(_===Te.STROKE||_===Te.FILL_STROKE)&&(N=this.getSinglePixelWidth())}else N/=R;if(u!==1&&(l.scale(u,u),N/=u),l.lineWidth=N,a.isInvalidPDFjsFont){const _=[];let F=0;for(const X of e)_.push(X.unicode),F+=X.width;const $=_.join("");if(l.fillText($,0,0),this.dependencyTracker!==null){const X=l.measureText($);this.dependencyTracker.recordBBox(t,this.ctx,-X.actualBoundingBoxLeft,X.actualBoundingBoxRight,-X.actualBoundingBoxAscent,X.actualBoundingBoxDescent).recordOperation(t).recordIncrementalData("sameLineText",t)}i.x+=F*w*m,l.restore(),this.compose();return}let D=0,j;for(j=0;j<y;++j){const _=e[j];if(typeof _=="number"){D+=A*_*o/1e3;continue}let F=!1;const $=(_.isSpace?d:0)+h,X=_.fontChar,at=_.accent;let V,J,rt=_.width;if(b){const Q=_.vmetric||x,ct=-(_.vmetric?Q[1]:rt*.5)*w,k=Q[2]*w;rt=Q?-Q[0]:rt,V=ct/u,J=(D+k)/u}else V=D/u,J=0;let L;if(a.remeasure&&rt>0){L=l.measureText(X);const Q=L.width*1e3/o*u;if(rt<Q&&this.isFontSubpixelAAEnabled){const ct=rt/Q;F=!0,l.save(),l.scale(ct,1),V/=ct}else rt!==Q&&(V+=(rt-Q)/2e3*o/u)}if(this.contentVisible&&(_.isInFont||a.missingFile)){if(T&&!at)l.fillText(X,V,J),this.dependencyTracker?.recordCharacterBBox(t,l,L?{bbox:null}:a,o/u,V,J,()=>L??l.measureText(X));else if(this.paintChar(t,X,V,J,O,C),at){const Q=V+o*at.offset.x/u,ct=J-o*at.offset.y/u;this.paintChar(t,at.fontChar,Q,ct,O,C)}}const P=b?rt*w-$*f:rt*w+$*f;D+=P,F&&l.restore()}b?i.y-=D:i.x+=D*m,l.restore(),this.compose(),this.dependencyTracker?.recordOperation(t).recordIncrementalData("sameLineText",t)}showType3Text(t,e){const i=this.ctx,a=this.current,o=a.font,l=a.fontSize,u=a.fontDirection,h=o.vertical?1:-1,d=a.charSpacing,f=a.wordSpacing,m=a.textHScale*u,y=a.fontMatrix||Tu,b=e.length,A=a.textRenderingMode===Te.INVISIBLE;let x,w,T,O;if(A||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),a.textMatrix&&i.transform(...a.textMatrix),i.translate(a.x,a.y+a.textRise),i.scale(m,u);const C=this.dependencyTracker;for(this.dependencyTracker=C?new Go(C,t):null,x=0;x<b;++x){if(w=e[x],typeof w=="number"){O=h*w*l/1e3,this.ctx.translate(O,0),a.x+=O*m;continue}const N=(w.isSpace?f:0)+d,R=o.charProcOperatorList[w.operatorListId];R?this.contentVisible&&(this.save(),i.scale(l,l),i.transform(...y),this.executeOperatorList(R),this.restore()):Et(`Type3 character "${w.operatorListId}" is not available.`);const D=[w.width,0];dt.applyTransform(D,y),T=D[0]*l+N,i.translate(T,0),a.x+=T*m}i.restore(),C&&(this.dependencyTracker.recordNestedDependencies(),this.dependencyTracker=C)}setCharWidth(t,e,i){}setCharWidthAndBounds(t,e,i,a,o,l,u){const h=new Path2D;h.rect(a,o,l-a,u-o),this.ctx.clip(h),this.dependencyTracker?.recordBBox(t,this.ctx,a,l,o,u).recordClipBox(t,this.ctx,a,l,o,u),this.endPath(t)}getColorN_Pattern(t,e){let i;if(e[0]==="TilingPattern"){const a=this.baseTransform||Qt(this.ctx),o={createCanvasGraphics:l=>new Hi(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Go(this.dependencyTracker,t):null)};i=new Vu(e,this.ctx,o,a)}else i=this._getPattern(t,e[1],e[2]);return i}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,i=null){let a;return this.cachedPatterns.has(e)?a=this.cachedPatterns.get(e):(a=by(this.getObject(t,e)),this.cachedPatterns.set(e,a)),i&&(a.matrix=i),a}shadingFill(t,e){if(!this.contentVisible)return;const i=this.ctx;this.save(t);const a=this._getPattern(t,e);i.fillStyle=a.getPattern(i,this,Cn(i),Ce.SHADING);const o=Cn(i);if(o){const{width:l,height:u}=i.canvas,h=zi.slice();dt.axialAlignedBoundingBox([0,0,l,u],o,h);const[d,f,m,y]=h;this.ctx.fillRect(d,f,m-d,y-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,fn.transform).recordDependencies(t,fn.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Gt("Should not call beginInlineImage")}beginImageData(){Gt("Should not call beginImageData")}paintFormXObjectBegin(t,e,i){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Qt(this.ctx),i)){dt.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[a,o,l,u]=i,h=new Path2D;h.rect(a,o,l-a,u-o),this.ctx.clip(h),this.dependencyTracker?.recordClipBox(t,this.ctx,a,l,o,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;e.isolated||Xo("TODO: Support non-isolated groups."),e.knockout&&Et("Knockout groups not supported.");const a=Qt(i);if(e.matrix&&i.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let o=zi.slice();dt.axialAlignedBoundingBox(e.bbox,Qt(i),o);const l=[0,0,i.canvas.width,i.canvas.height];o=dt.intersect(o,l)||[0,0,0,0];const u=Math.floor(o[0]),h=Math.floor(o[1]),d=Math.max(Math.ceil(o[2])-u,1),f=Math.max(Math.ceil(o[3])-h,1);this.current.startNewPathAndClipBox([0,0,d,f]);let m="groupAt"+this.groupLevel;e.smask&&(m+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(m,d,f),b=y.context;b.translate(-u,-h),b.transform(...a);let A=new Path2D;const[x,w,T,O]=e.bbox;if(A.rect(x,w,T-x,O-w),e.matrix){const C=new Path2D;C.addPath(A,new DOMMatrix(e.matrix)),A=C}b.clip(A),e.smask&&this.smaskStack.push({canvas:y.canvas,context:b,offsetX:u,offsetY:h,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(i.setTransform(1,0,0,1,0,0),i.translate(u,h),i.save()),$a(i,b),this.ctx=b,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=Qt(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const l=zi.slice();dt.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],o,l),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,e,i,a,o,l){if(this.#t(),Io(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const u=i[2]-i[0],h=i[3]-i[1];if(l&&this.annotationCanvasMap){a=a.slice(),a[4]-=i[0],a[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=u,i[3]=h,dt.singularValueDecompose2dScale(Qt(this.ctx),tn);const{viewportScale:d}=this,f=Math.ceil(u*this.outputScaleX*d),m=Math.ceil(h*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(f,m);const{canvas:y,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(e,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(tn[0],0,0,-tn[1],0,h*tn[1]),Io(this.ctx)}else{Io(this.ctx),this.endPath(t);const d=new Path2D;d.rect(i[0],i[1],u,h),this.ctx.clip(d)}}this.current=new vp(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...a),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const i=e.count;e=this.getObject(t,e.data,e),e.count=i;const a=this.ctx,o=this._createMaskCanvas(t,e),l=o.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(l,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+l.width,o.offsetY,o.offsetY+l.height).recordOperation(t),a.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i,a=0,o=0,l,u){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const h=this.ctx;h.save();const d=Qt(h);h.transform(i,a,o,l,0,0);const f=this._createMaskCanvas(t,e);h.setTransform(1,0,0,1,f.offsetX-d[4],f.offsetY-d[5]),this.dependencyTracker?.resetBBox(t);for(let m=0,y=u.length;m<y;m+=2){const b=dt.transform(d,[i,a,o,l,u[m],u[m+1]]);h.drawImage(f.canvas,b[4],b[5]),this.dependencyTracker?.recordBBox(t,this.ctx,b[4],b[4]+f.canvas.width,b[5],b[5]+f.canvas.height)}h.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx,a=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,fn.transformAndFill);for(const l of e){const{data:u,width:h,height:d,transform:f}=l,m=this.cachedCanvases.getCanvas("maskCanvas",h,d),y=m.context;y.save();const b=this.getObject(t,u,l);bp(y,b),y.globalCompositeOperation="source-in",y.fillStyle=o?a.getPattern(y,this,Cn(i),Ce.FILL):a,y.fillRect(0,0,h,d),y.restore(),i.save(),i.transform(...f),i.scale(1,-1),Po(i,m.canvas,0,0,h,d,0,-1,1,1),this.dependencyTracker?.recordBBox(t,i,0,h,0,d),i.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const i=this.getObject(t,e);if(!i){Et("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,i)}paintImageXObjectRepeat(t,e,i,a,o){if(!this.contentVisible)return;const l=this.getObject(t,e);if(!l){Et("Dependent image isn't ready yet");return}const u=l.width,h=l.height,d=[];for(let f=0,m=o.length;f<m;f+=2)d.push({transform:[i,0,0,a,o[f],o[f+1]],x:0,y:0,w:u,h});this.paintInlineImageXObjectGroup(t,l,d)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:a}=t,o=this.cachedCanvases.getCanvas("inlineImage",i,a),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(e,0,0),l.filter="none",o.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const i=e.width,a=e.height,o=this.ctx;this.save(t);const{filter:l}=o;l!=="none"&&l!==""&&(o.filter="none"),o.scale(1/i,-1/a);let u;if(e.bitmap)u=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)u=e;else{const f=this.cachedCanvases.getCanvas("inlineImage",i,a).context;yp(f,e),u=this.applyTransferMapsToCanvas(f)}const h=this._scaleImage(u,Cn(o));o.imageSmoothingEnabled=xp(Qt(o),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,o,0,i,-a,0).recordDependencies(t,fn.imageXObject).recordOperation(t),Po(o,h.img,0,0,h.paintWidth,h.paintHeight,0,-a,i,a),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,i){if(!this.contentVisible)return;const a=this.ctx;let o;if(e.bitmap)o=e.bitmap;else{const l=e.width,u=e.height,d=this.cachedCanvases.getCanvas("inlineImage",l,u).context;yp(d,e),o=this.applyTransferMapsToCanvas(d)}this.dependencyTracker?.resetBBox(t);for(const l of i)a.save(),a.transform(...l.transform),a.scale(1,-1),Po(a,o,l.x,l.y,l.w,l.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,a,0,1,-1,0),a.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,fn.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,i){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,i){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,i){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const o=this.ctx;this.pendingClip?(a||(this.pendingClip===Ap?o.clip(e,"evenodd"):o.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Qt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:a,d:o}=this.ctx.getTransform();let l,u;if(i===0&&a===0){const h=Math.abs(e),d=Math.abs(o);if(h===d)if(t===0)l=u=1/h;else{const f=h*t;l=u=f<1?1/f:1}else if(t===0)l=1/h,u=1/d;else{const f=h*t,m=d*t;l=f<1?1/f:1,u=m<1?1/m:1}}else{const h=Math.abs(e*o-i*a),d=Math.hypot(e,i),f=Math.hypot(a,o);if(t===0)l=f/h,u=d/h;else{const m=t*h;l=f>m?f/m:1,u=d>m?d/m:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:i,current:{lineWidth:a}}=this,[o,l]=this.getScaleForStroking();if(o===l){i.lineWidth=(a||1)*o,i.stroke(t);return}const u=i.getLineDash();e&&i.save(),i.scale(o,l),Au.a=1/o,Au.d=1/l;const h=new Path2D;if(h.addPath(t,Au),u.length>0){const d=Math.max(o,l);i.setLineDash(u.map(f=>f/d)),i.lineDashOffset/=d}i.lineWidth=a||1,i.stroke(h),e&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const g in Vi)Hi.prototype[g]!==void 0&&(Hi.prototype[Vi[g]]=Hi.prototype[g]);class Dn{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class Ry{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const Fi=Symbol("INTERNAL");class My{#t=!1;#e=!1;#n=!1;#s=!0;constructor(t,{name:e,intent:i,usage:a,rbGroups:o}){this.#t=!!(t&Je.DISPLAY),this.#e=!!(t&Je.PRINT),this.name=e,this.intent=i,this.usage=a,this.rbGroups=o}get visible(){if(this.#n)return this.#s;if(!this.#s)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,i=!1){t!==Fi&&Gt("Internal method `_setVisible` called."),this.#n=i,this.#s=e}}class Ny{#t=null;#e=new Map;#n=null;#s=null;constructor(t,e=Je.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#s=t.order;for(const i of t.groups)this.#e.set(i.id,new My(e,i));if(t.baseState==="OFF")for(const i of this.#e.values())i._setVisible(Fi,!1);for(const i of t.on)this.#e.get(i)._setVisible(Fi,!0);for(const i of t.off)this.#e.get(i)._setVisible(Fi,!1);this.#n=this.getHash()}}#a(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let a=1;a<e;a++){const o=t[a];let l;if(Array.isArray(o))l=this.#a(o);else if(this.#e.has(o))l=this.#e.get(o).visible;else return Et(`Optional content group not found: ${o}`),!0;switch(i){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return i==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return Xo("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(Et(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#a(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return Et(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return Et(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return Et(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return Et(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return Et(`Unknown optional content policy ${t.policy}.`),!0}return Et(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){const a=this.#e.get(t);if(!a){Et(`Optional content group not found: ${t}`);return}if(i&&e&&a.rbGroups.length)for(const o of a.rbGroups)for(const l of o)l!==t&&this.#e.get(l)?._setVisible(Fi,!1,!0);a._setVisible(Fi,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let i;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":i=a;continue}const o=this.#e.get(a);if(o)switch(i){case"ON":this.setVisibility(a,!0,e);break;case"OFF":this.setVisibility(a,!1,e);break;case"Toggle":this.setVisibility(a,!o.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#s?this.#s.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new jp;for(const[e,i]of this.#e)t.update(`${e}:${i.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class Oy{constructor(t,{disableRange:e=!1,disableStream:i=!1}){ce(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:o,progressiveDone:l,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=u,o?.length>0){const h=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((h,d)=>{this._onReceiveData({begin:h,chunk:d})}),t.addProgressListener((h,d)=>{this._onProgress({loaded:h,total:d})}),t.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const a=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(i),!0)});ce(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){ce(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Dy(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Ly(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class Dy{constructor(t,e,i=!1,a=null){this._stream=t,this._done=i||!1,this._filename=Wo(a)?a:null,this._queuedChunks=e||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Ly{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function ky(g){let t=!0,e=i("filename\\*","i").exec(g);if(e){e=e[1];let f=u(e);return f=unescape(f),f=h(f),f=d(f),o(f)}if(e=l(g),e){const f=d(e);return o(f)}if(e=i("filename","i").exec(g),e){e=e[1];let f=u(e);return f=d(f),o(f)}function i(f,m){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function a(f,m){if(f){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const y=new TextDecoder(f,{fatal:!0}),b=or(m);m=y.decode(b),t=!1}catch{}}return m}function o(f){return t&&/[\x80-\xff]/.test(f)&&(f=a("utf-8",f),t&&(f=a("iso-8859-1",f))),f}function l(f){const m=[];let y;const b=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=b.exec(f))!==null;){let[,x,w,T]=y;if(x=parseInt(x,10),x in m){if(x===0)break;continue}m[x]=[w,T]}const A=[];for(let x=0;x<m.length&&x in m;++x){let[w,T]=m[x];T=u(T),w&&(T=unescape(T),x===0&&(T=h(T))),A.push(T)}return A.join("")}function u(f){if(f.startsWith('"')){const m=f.slice(1).split('\\"');for(let y=0;y<m.length;++y){const b=m[y].indexOf('"');b!==-1&&(m[y]=m[y].slice(0,b),m.length=y+1),m[y]=m[y].replaceAll(/\\(.)/g,"$1")}f=m.join('"')}return f}function h(f){const m=f.indexOf("'");if(m===-1)return f;const y=f.slice(0,m),A=f.slice(m+1).replace(/^[^']*'/,"");return a(y,A)}function d(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,y,b,A){if(b==="q"||b==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,w){return String.fromCharCode(parseInt(w,16))}),a(y,A);try{A=atob(A)}catch{}return a(y,A)})}return""}function Vp(g,t){const e=new Headers;if(!g||!t||typeof t!="object")return e;for(const i in t){const a=t[i];a!==void 0&&e.append(i,a)}return e}function Ko(g){return URL.parse(g)?.origin??null}function Yp({responseHeaders:g,isHttp:t,rangeChunkSize:e,disableRange:i}){const a={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(g.get("Content-Length"),10);return!Number.isInteger(o)||(a.suggestedLength=o,o<=2*e)||i||!t||g.get("Accept-Ranges")!=="bytes"||(g.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function Xp(g){const t=g.get("Content-Disposition");if(t){let e=ky(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Wo(e))return e}return null}function fr(g,t){return new nr(`Unexpected server response (${g}) while retrieving PDF "${t}".`,g,g===404||g===0&&t.startsWith("file:"))}function $p(g){return g===200||g===206}function Wp(g,t,e){return{method:"GET",headers:g,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Kp(g){return g instanceof Uint8Array?g.buffer:g instanceof ArrayBuffer?g:(Et(`getArrayBuffer - unexpected data format: ${g}`),new Uint8Array(g).buffer)}class Py{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Vp(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ce(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Iy(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new jy(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Iy{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),a=e.url;fetch(a,Wp(i,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=Ko(o.url),!$p(o.status))throw fr(o.status,a);this._reader=o.body.getReader(),this._headersCapability.resolve();const l=o.headers,{allowRangeRequests:u,suggestedLength:h}=Yp({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=h||this._contentLength,this._filename=Xp(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Qn("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Kp(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class jy{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${e}-${i-1}`);const l=a.url;fetch(l,Wp(o,this._withCredentials,this._abortController)).then(u=>{const h=Ko(u.url);if(h!==t._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${t._responseOrigin}".`);if(!$p(u.status))throw fr(u.status,l);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Kp(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const Su=200,Eu=206;function _y(g){const t=g.response;return typeof t!="string"?t:or(t).buffer}class By{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:i}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Vp(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,a=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[o,l]of this.headers)e.setRequestHeader(o,l);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=Eu):a.expectedStatus=Su,e.responseType="arraybuffer",ce(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){const i=this.pendingRequests[t];i&&i.onProgress?.(e)}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const a=i.xhr;if(a.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){i.onError(a.status);return}const o=a.status||Su;if(!(o===Su&&i.expectedStatus===Eu)&&o!==i.expectedStatus){i.onError(a.status);return}const u=_y(a);if(o===Eu){const h=a.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);d?i.onDone({begin:parseInt(d[1],10),chunk:u}):(Et('Missing or invalid "Content-Range" header.'),i.onError(0))}else u?i.onDone({begin:0,chunk:u}):i.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class Fy{constructor(t){this._source=t,this._manager=new By(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return ce(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new zy(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new Uy(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class zy{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Ko(e.responseURL);const i=e.getAllResponseHeaders(),a=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[h,...d]=u.split(": ");return[h,d.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:l}=Yp({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=Xp(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=fr(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Uy{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=Ko(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=fr(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Hy=/^[a-z][a-z0-9\-+.]+:/i;function Gy(g){if(Hy.test(g))return new URL(g);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(g))}class Vy{constructor(t){this.source=t,this.url=Gy(t.url),ce(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ce(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Yy(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Xy(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Yy{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=fr(0,this._url.href)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Qn("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Xy{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Wa=Symbol("INITIAL_DATA");class Qp{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Wa}}get(t,e=null){if(e){const a=this.#e(t);return a.promise.then(()=>e(a.data)),null}const i=this.#t[t];if(!i||i.data===Wa)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=this.#t[t];return!!e&&e.data!==Wa}delete(t){const e=this.#t[t];return!e||e.data===Wa?!1:(delete this.#t[t],!0)}resolve(t,e=null){const i=this.#e(t);i.data=e,i.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==Wa&&(yield[t,e])}}}const $y=1e5,Sp=30;class Oe{#t=Promise.withResolvers();#e=null;#n=!1;#s=!!globalThis.FontInspector?.enabled;#a=null;#i=null;#r=0;#o=0;#l=null;#c=null;#d=0;#u=0;#f=Object.create(null);#p=[];#g=null;#h=[];#m=new WeakMap;#b=null;static#v=new Map;static#A=new Map;static#S=new WeakMap;static#y=null;static#E=new Set;constructor({textContentSource:t,container:e,viewport:i}){if(t instanceof ReadableStream)this.#g=t;else if(typeof t=="object")this.#g=new ReadableStream({start(h){h.enqueue(t),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#c=e,this.#u=i.scale*yn.pixelRatio,this.#d=i.rotation,this.#i={div:null,properties:null,ctx:null};const{pageWidth:a,pageHeight:o,pageX:l,pageY:u}=i.rawDims;this.#b=[1,0,0,-1,-l,u+o],this.#o=a,this.#r=o,Oe.#N(),Es(e,i),this.#t.promise.finally(()=>{Oe.#E.delete(this),this.#i=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=be.platform;return Nt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#l.read().then(({value:e,done:i})=>{if(i){this.#t.resolve();return}this.#a??=e.lang,Object.assign(this.#f,e.styles),this.#M(e.items),t()},this.#t.reject)};return this.#l=this.#g.getReader(),Oe.#E.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const i=t.scale*yn.pixelRatio,a=t.rotation;if(a!==this.#d&&(e?.(),this.#d=a,Es(this.#c,{rotation:a})),i!==this.#u){e?.(),this.#u=i;const o={div:null,properties:null,ctx:Oe.#L(this.#a)};for(const l of this.#h)o.properties=this.#m.get(l),o.div=l,this.#w(o)}}cancel(){const t=new Qn("TextLayer task cancelled.");this.#l?.cancel(t).catch(()=>{}),this.#l=null,this.#t.reject(t)}get textDivs(){return this.#h}get textContentItemsStr(){return this.#p}#M(t){if(this.#n)return;this.#i.ctx??=Oe.#L(this.#a);const e=this.#h,i=this.#p;for(const a of t){if(e.length>$y){Et("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),a.id&&this.#e.setAttribute("id",`${a.id}`),o.append(this.#e)}else a.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}i.push(a.str),this.#C(a)}}#C(t){const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#h.push(e);const a=dt.transform(this.#b,t.transform);let o=Math.atan2(a[1],a[0]);const l=this.#f[t.fontName];l.vertical&&(o+=Math.PI/2);let u=this.#s&&l.fontSubstitution||l.fontFamily;u=Oe.fontFamilyMap.get(u)||u;const h=Math.hypot(a[2],a[3]),d=h*Oe.#I(u,l,this.#a);let f,m;o===0?(f=a[4],m=a[5]-d):(f=a[4]+d*Math.sin(o),m=a[5]-d*Math.cos(o));const y="calc(var(--total-scale-factor) *",b=e.style;this.#e===this.#c?(b.left=`${(100*f/this.#o).toFixed(2)}%`,b.top=`${(100*m/this.#r).toFixed(2)}%`):(b.left=`${y}${f.toFixed(2)}px)`,b.top=`${y}${m.toFixed(2)}px)`),b.fontSize=`${y}${(Oe.#y*h).toFixed(2)}px)`,b.fontFamily=u,i.fontSize=h,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#s&&(e.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),o!==0&&(i.angle=o*(180/Math.PI));let A=!1;if(t.str.length>1)A=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const x=Math.abs(t.transform[0]),w=Math.abs(t.transform[3]);x!==w&&Math.max(x,w)/Math.min(x,w)>1.5&&(A=!0)}if(A&&(i.canvasWidth=l.vertical?t.height:t.width),this.#m.set(e,i),this.#i.div=e,this.#i.properties=i,this.#w(this.#i),i.hasText&&this.#e.append(e),i.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),this.#e.append(x)}}#w(t){const{div:e,properties:i,ctx:a}=t,{style:o}=e;let l="";if(Oe.#y>1&&(l=`scale(${1/Oe.#y})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:u}=o,{canvasWidth:h,fontSize:d}=i;Oe.#R(a,d*this.#u,u);const{width:f}=a.measureText(e.textContent);f>0&&(l=`scaleX(${h*this.#u/f}) ${l}`)}i.angle!==0&&(l=`rotate(${i.angle}deg) ${l}`),l.length>0&&(o.transform=l)}static cleanup(){if(!(this.#E.size>0)){this.#v.clear();for(const{canvas:t}of this.#A.values())t.remove();this.#A.clear()}}static#L(t=null){let e=this.#A.get(t||="");if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#A.set(t,e),this.#S.set(e,{size:0,family:""})}return e}static#R(t,e,i){const a=this.#S.get(t);e===a.size&&i===a.family||(t.font=`${e}px ${i}`,a.size=e,a.family=i)}static#N(){if(this.#y!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#y=t.getBoundingClientRect().height,t.remove()}static#I(t,e,i){const a=this.#v.get(t);if(a)return a;const o=this.#L(i);o.canvas.width=o.canvas.height=Sp,this.#R(o,Sp,t);const l=o.measureText(""),u=l.fontBoundingBoxAscent,h=Math.abs(l.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let d=.8;return u?d=u/(u+h):(be.platform.isFirefox&&Et("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?d=e.ascent:e.descent&&(d=1+e.descent)),this.#v.set(t,d),d}}class sr{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function a(o){if(!o)return;let l=null;const u=o.name;if(u==="#text")l=o.value;else if(sr.shouldBuildText(u))o?.attributes?.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&e.push({str:l}),!!o.children)for(const h of o.children)a(h)}return a(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const Wy=100;function Zp(g={}){typeof g=="string"||g instanceof URL?g={url:g}:(g instanceof ArrayBuffer||ArrayBuffer.isView(g))&&(g={data:g});const t=new Yu,{docId:e}=t,i=g.url?sy(g.url):null,a=g.data?iy(g.data):null,o=g.httpHeaders||null,l=g.withCredentials===!0,u=g.password??null,h=g.range instanceof Xu?g.range:null,d=Number.isInteger(g.rangeChunkSize)&&g.rangeChunkSize>0?g.rangeChunkSize:2**16;let f=g.worker instanceof Yi?g.worker:null;const m=g.verbosity,y=typeof g.docBaseUrl=="string"&&!cr(g.docBaseUrl)?g.docBaseUrl:null,b=Lo(g.cMapUrl),A=g.cMapPacked!==!1,x=g.CMapReaderFactory||(ke?hy:up),w=Lo(g.iccUrl),T=Lo(g.standardFontDataUrl),O=g.StandardFontDataFactory||(ke?dy:hp),C=Lo(g.wasmUrl),N=g.WasmFactory||(ke?fy:dp),R=g.stopAtErrors!==!0,D=Number.isInteger(g.maxImageSize)&&g.maxImageSize>-1?g.maxImageSize:-1,j=g.isEvalSupported!==!1,_=typeof g.isOffscreenCanvasSupported=="boolean"?g.isOffscreenCanvasSupported:!ke,F=typeof g.isImageDecoderSupported=="boolean"?g.isImageDecoderSupported:!ke&&(be.platform.isFirefox||!globalThis.chrome),$=Number.isInteger(g.canvasMaxAreaInBytes)?g.canvasMaxAreaInBytes:-1,X=typeof g.disableFontFace=="boolean"?g.disableFontFace:ke,at=g.fontExtraProperties===!0,V=g.enableXfa===!0,J=g.ownerDocument||globalThis.document,rt=g.disableRange===!0,L=g.disableStream===!0,P=g.disableAutoFetch===!0,Q=g.pdfBug===!0,ct=g.CanvasFactory||(ke?uy:oy),k=g.FilterFactory||(ke?cy:ly),K=g.enableHWA===!0,st=g.useWasm!==!1,et=h?h.length:g.length??NaN,ot=typeof g.useSystemFonts=="boolean"?g.useSystemFonts:!ke&&!X,lt=typeof g.useWorkerFetch=="boolean"?g.useWorkerFetch:!!(x===up&&O===hp&&N===dp&&b&&T&&C&&Za(b,document.baseURI)&&Za(T,document.baseURI)&&Za(C,document.baseURI)),W=null;Fv(m);const Z={canvasFactory:new ct({ownerDocument:J,enableHWA:K}),filterFactory:new k({docId:e,ownerDocument:J}),cMapReaderFactory:lt?null:new x({baseUrl:b,isCompressed:A}),standardFontDataFactory:lt?null:new O({baseUrl:T}),wasmFactory:lt?null:new N({baseUrl:C})};f||(f=Yi.create({verbosity:m,port:Dn.workerPort}),t._worker=f);const it={docId:e,apiVersion:"5.4.149",data:a,password:u,disableAutoFetch:P,rangeChunkSize:d,length:et,docBaseUrl:y,enableXfa:V,evaluatorOptions:{maxImageSize:D,disableFontFace:X,ignoreErrors:R,isEvalSupported:j,isOffscreenCanvasSupported:_,isImageDecoderSupported:F,canvasMaxAreaInBytes:$,fontExtraProperties:at,useSystemFonts:ot,useWasm:st,useWorkerFetch:lt,cMapUrl:b,iccUrl:w,standardFontDataUrl:T,wasmUrl:C}},ft={ownerDocument:J,pdfBug:Q,styleElement:W,loadingParams:{disableAutoFetch:P,enableXfa:V}};return f.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const At=f.messageHandler.sendWithPromise("GetDocRequest",it,a?[a.buffer]:null);let ut;if(h)ut=new Oy(h,{disableRange:rt,disableStream:L});else if(!a){if(!i)throw new Error("getDocument - no `url` parameter provided.");const Rt=Za(i)?Py:ke?Vy:Fy;ut=new Rt({url:i,length:et,httpHeaders:o,withCredentials:l,rangeChunkSize:d,disableRange:rt,disableStream:L})}return At.then(Rt=>{if(t.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Pt=new Ja(e,Rt,f.port),de=new Zy(Pt,t,ut,ft,Z,K);t._transport=de,Pt.send("Ready",null)})}).catch(t._capability.reject),t}class Yu{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Yu.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class Xu{#t=Promise.withResolvers();#e=[];#n=[];#s=[];#a=[];constructor(t,e,i=!1,a=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=a}addRangeListener(t){this.#a.push(t)}addProgressListener(t){this.#s.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const i of this.#a)i(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const i of this.#s)i(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#n)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){Gt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Ky{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Nt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class Qy{#t=!1;constructor(t,e,i,a=!1){this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=a?new op:null,this._pdfBug=a,this.commonObjs=i.commonObjs,this.objs=new Qp,this._intentStates=new Map,this.destroyed=!1,this.recordedGroups=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:a=0,dontFlip:o=!1}={}){return new lr({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:a,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Nt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:i,intent:a="display",annotationMode:o=Kn.ENABLE,transform:l=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:d=null,pageColors:f=null,printAnnotationStorage:m=null,isEditing:y=!1,recordOperations:b=!1,filteredOperationIndexes:A=null}){this._stats?.time("Overall");const x=this._transport.getRenderingIntent(a,o,m,y),{renderingIntent:w,cacheKey:T}=x;this.#t=!1,h||=this._transport.getOptionalContentConfig(w);let O=this._intentStates.get(T);O||(O=Object.create(null),this._intentStates.set(T,O)),O.streamReaderCancelTimeout&&(clearTimeout(O.streamReaderCancelTimeout),O.streamReaderCancelTimeout=null);const C=!!(w&Je.PRINT);O.displayReadyCapability||(O.displayReadyCapability=Promise.withResolvers(),O.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(x));const N=!this.recordedGroups&&(b||this._pdfBug&&globalThis.StepperManager?.enabled),R=_=>{if(O.renderTasks.delete(D),N){const F=D.gfx?.dependencyTracker.take();F?(D.stepper?.setOperatorGroups(F),b&&(this.recordedGroups=F)):b&&(this.recordedGroups=[])}C&&(this.#t=!0),this.#e(),_?(D.capability.reject(_),this._abortOperatorList({intentState:O,reason:_ instanceof Error?_:new Error(_)})):D.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},D=new Ui({callback:R,params:{canvas:e,canvasContext:t,dependencyTracker:N?new gy(e):null,viewport:i,transform:l,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:O.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:f,enableHWA:this._transport.enableHWA,filteredOperationIndexes:A});(O.renderTasks||=new Set).add(D);const j=D.task;return Promise.all([O.displayReadyCapability.promise,h]).then(([_,F])=>{if(this.destroyed){R();return}if(this._stats?.time("Rendering"),!(F.renderingIntent&w))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");D.initializeGraphics({transparency:_,optionalContentConfig:F}),D.operatorListChanged()}).catch(R),j}getOperatorList({intent:t="display",annotationMode:e=Kn.ENABLE,printAnnotationStorage:i=null,isEditing:a=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const l=this._transport.getRenderingIntent(t,e,i,a,!0);let u=this._intentStates.get(l.cacheKey);u||(u=Object.create(null),this._intentStates.set(l.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>sr.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,a){function o(){l.read().then(function({value:h,done:d}){if(d){i(u);return}u.lang??=h.lang,Object.assign(u.styles,h.styles),u.items.push(...h.items),o()},a)}const l=e.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new op),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const i=this._intentStates.get(e);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let i=0,a=t.length;i<a;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:a}){const{map:o,transfer:l}=i,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:a},l).getReader(),d=this._intentStates.get(e);d.streamReader=h;const f=()=>{h.read().then(({value:m,done:y})=>{if(y){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,d),f())},m=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const y of d.renderTasks)y.operatorListChanged();this.#e()}if(d.displayReadyCapability)d.displayReadyCapability.reject(m);else if(d.opListReadCapability)d.opListReadCapability.reject(m);else throw m}})};f()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof $o){let a=Wy;e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},a);return}}if(t.streamReader.cancel(new Qn(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,o]of this._intentStates)if(o===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}var Ss,vn,Wn,Ys,Vo,Xs,$s,Pe,Bo,Jp,qp,qa,Gi,Fo;const Wt=class Wt{constructor({name:t=null,port:e=null,verbosity:i=zv()}={}){wn(this,Pe);wn(this,Ss,Promise.withResolvers());wn(this,vn,null);wn(this,Wn,null);wn(this,Ys,null);if(this.name=t,this.destroyed=!1,this.verbosity=i,e){if($t(Wt,$s).has(e))throw new Error("Cannot use more than one PDFWorker per port.");$t(Wt,$s).set(e,this),Tn(this,Pe,Jp).call(this,e)}else Tn(this,Pe,qp).call(this)}get promise(){return $t(this,Ss).promise}get port(){return $t(this,Wn)}get messageHandler(){return $t(this,vn)}destroy(){this.destroyed=!0,$t(this,Ys)?.terminate(),ze(this,Ys,null),$t(Wt,$s).delete($t(this,Wn)),ze(this,Wn,null),$t(this,vn)?.destroy(),ze(this,vn,null)}static create(t){const e=$t(this,$s).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Wt(t)}static get workerSrc(){if(Dn.workerSrc)return Dn.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Nt(this,"_setupFakeWorkerGlobal",(async()=>$t(this,Gi,Fo)?$t(this,Gi,Fo):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ss=new WeakMap,vn=new WeakMap,Wn=new WeakMap,Ys=new WeakMap,Vo=new WeakMap,Xs=new WeakMap,$s=new WeakMap,Pe=new WeakSet,Bo=function(){$t(this,Ss).resolve(),$t(this,vn).send("configure",{verbosity:this.verbosity})},Jp=function(t){ze(this,Wn,t),ze(this,vn,new Ja("main","worker",t)),$t(this,vn).on("ready",()=>{}),Tn(this,Pe,Bo).call(this)},qp=function(){if($t(Wt,Xs)||$t(Wt,Gi,Fo)){Tn(this,Pe,qa).call(this);return}let{workerSrc:t}=Wt;try{Wt._isSameOrigin(window.location,t)||(t=Wt._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new Ja("main","worker",e),a=()=>{o.abort(),i.destroy(),e.terminate(),this.destroyed?$t(this,Ss).reject(new Error("Worker was destroyed")):Tn(this,Pe,qa).call(this)},o=new AbortController;e.addEventListener("error",()=>{$t(this,Ys)||a()},{signal:o.signal}),i.on("test",u=>{if(o.abort(),this.destroyed||!u){a();return}ze(this,vn,i),ze(this,Wn,e),ze(this,Ys,e),Tn(this,Pe,Bo).call(this)}),i.on("ready",u=>{if(o.abort(),this.destroyed){a();return}try{l()}catch{Tn(this,Pe,qa).call(this)}});const l=()=>{const u=new Uint8Array;i.send("test",u,[u.buffer])};l();return}catch{Xo("The worker has been disabled.")}Tn(this,Pe,qa).call(this)},qa=function(){$t(Wt,Xs)||(Et("Setting up fake worker."),ze(Wt,Xs,!0)),Wt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){$t(this,Ss).reject(new Error("Worker was destroyed"));return}const e=new ry;ze(this,Wn,e);const i=`fake${$g(Wt,Vo)._++}`,a=new Ja(i+"_worker",i,e);t.setup(a,e),ze(this,vn,new Ja(i,i+"_worker",e)),Tn(this,Pe,Bo).call(this)}).catch(t=>{$t(this,Ss).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Gi=new WeakSet,Fo=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},wn(Wt,Gi),wn(Wt,Vo,0),wn(Wt,Xs,!1),wn(Wt,$s,new WeakMap),ke&&(ze(Wt,Xs,!0),Dn.workerSrc||="./pdf.worker.mjs"),Wt._isSameOrigin=(t,e)=>{const i=URL.parse(t);if(!i?.origin||i.origin==="null")return!1;const a=new URL(e,i);return i.origin===a.origin},Wt._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Wt.fromPort=t=>{if(Kv("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Wt.create(t)};let Yi=Wt;class Zy{#t=new Map;#e=new Map;#n=new Map;#s=new Map;#a=null;constructor(t,e,i,a,o,l){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Qp,this.fontLoader=new ey({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=l,this.setupMessageHandler()}#i(t,e=null){const i=this.#t.get(t);if(i)return i;const a=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,a),a}get annotationStorage(){return Nt(this,"annotationStorage",new Uu)}getRenderingIntent(t,e=Kn.ENABLE,i=null,a=!1,o=!1){let l=Je.DISPLAY,u=Cu;switch(t){case"any":l=Je.ANY;break;case"display":break;case"print":l=Je.PRINT;break;default:Et(`getRenderingIntent - invalid intent: ${t}`)}const h=l&Je.PRINT&&i instanceof _p?i:this.annotationStorage;switch(e){case Kn.DISABLE:l+=Je.ANNOTATIONS_DISABLE;break;case Kn.ENABLE:break;case Kn.ENABLE_FORMS:l+=Je.ANNOTATIONS_FORMS;break;case Kn.ENABLE_STORAGE:l+=Je.ANNOTATIONS_STORAGE,u=h.serializable;break;default:Et(`getRenderingIntent - invalid annotationMode: ${e}`)}a&&(l+=Je.IS_EDITING),o&&(l+=Je.OPLIST);const{ids:d,hash:f}=h.modifiedIds,m=[l,u.hash,f];return{renderingIntent:l,cacheKey:m.join("_"),annotationStorageSerializable:u,modifiedIds:d}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of this.#e.values())t.push(i._destroy());this.#e.clear(),this.#n.clear(),this.#s.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Oe.cleanup(),this._networkStream?.cancelAllRequests(new Qn("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,a)=>{ce(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},a.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){a.close();return}ce(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{this._fullReader.cancel(o),a.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async i=>{await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:o,contentLength:l}=this._fullReader;return(!a||!o)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{e.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:a,isRangeSupported:o,contentLength:l}}),t.on("GetRangeReader",(i,a)=>{ce(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(i.begin,i.end);if(!o){a.close();return}a.onPull=()=>{o.read().then(function({value:l,done:u}){if(u){a.close();return}ce(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{a.error(l)})},a.onCancel=l=>{o.cancel(l),a.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new Ky(i,this))}),t.on("DocException",i=>{e._capability.reject(Ue(i))}),t.on("PasswordRequest",i=>{this.#a=Promise.withResolvers();try{if(!e.onPassword)throw Ue(i);const a=o=>{o instanceof Error?this.#a.reject(o):this.#a.resolve({password:o})};e.onPassword(a,i.code)}catch(a){this.#a.reject(a)}return this.#a.promise}),t.on("DataLoaded",i=>{e.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;this.#e.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,a,o])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(a){case"Font":if("error"in o){const d=o.error;Et(`Error during font loading: ${d}`),this.commonObjs.resolve(i,d);break}const l=this._params.pdfBug&&globalThis.FontInspector?.enabled?(d,f)=>globalThis.FontInspector.fontAdded(d,f):null,u=new ny(o,l);this.fontLoader.bind(u).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!u.fontExtraProperties&&u.data&&(u.data=null),this.commonObjs.resolve(i,u)});break;case"CopyLocalImage":const{imageRef:h}=o;ce(h,"The imageRef must be defined.");for(const d of this.#e.values())for(const[,f]of d.objs)if(f?.ref===h)return f.dataLen?(this.commonObjs.resolve(i,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,o);break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([i,a,o,l])=>{if(this.destroyed)return;const u=this.#e.get(a);if(!u.objs.has(i)){if(u._intentStates.size===0){l?.bitmap?.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(i,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",i=>{this.destroyed||e.onProgress?.({loaded:i.loaded,total:i.total})}),t.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[i.type];if(!a)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Et("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=this.#n.get(e);if(i)return i;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#s.set(o.refStr,t);const l=new Qy(e,o,this,this._params.pdfBug);return this.#e.set(e,l),l});return this.#n.set(e,a),a}getPageIndex(t){return Ru(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#i("GetFieldObjects")}hasJSActions(){return this.#i("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#i("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#i("GetOptionalContentConfig").then(e=>new Ny(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(a=>({info:a[0],metadata:a[1]?new Ry(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Oe.cleanup()}}cachedPageNumber(t){if(!Ru(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#s.get(e)??null}}class Jy{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class Ui{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:a,annotationCanvasMap:o,operatorList:l,pageIndex:u,canvasFactory:h,filterFactory:d,useRequestAnimationFrame:f=!1,pdfBug:m=!1,pageColors:y=null,enableHWA:b=!1,filteredOperationIndexes:A=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=a,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=d,this._pdfBug=m,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Jy(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=b,this._dependencyTracker=e.dependencyTracker,this._filteredOperationIndexes=A}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(Ui.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Ui.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:i,transform:a,background:o,dependencyTracker:l}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Hi(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:a,viewport:i,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),Ui.#e.delete(this._canvas),t||=new $o(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._filteredOperationIndexes),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Ui.#e.delete(this._canvas),this.callback())))}}const $u="5.4.149",tm="9e2e9e209";class qe{#t=null;#e=null;#n;#s=null;#a=!1;#i=!1;#r=null;#o;#l=null;#c=null;static#d=null;static get _keyboardManager(){return Nt(this,"_keyboardManager",new hr([[["Escape","mac+Escape"],qe.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],qe.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],qe.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],qe.prototype._moveToPrevious],[["Home","mac+Home"],qe.prototype._moveToBeginning],[["End","mac+End"],qe.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#i=!1,this.#r=t):this.#i=!0,this.#c=t?._uiManager||e,this.#o=this.#c._eventBus,this.#n=t?.color?.toUpperCase()||this.#c?.highlightColors.values().next().value||"#FFFF98",qe.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#r&&(t.ariaControls=`${this.#r.id}_colorpicker_dropdown`);const e=this.#c._signal;t.addEventListener("click",this.#g.bind(this),{signal:e}),t.addEventListener("keydown",this.#p.bind(this),{signal:e});const i=this.#e=document.createElement("span");return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=this.#n,t.append(i),t}renderMainDropdown(){const t=this.#s=this.#u();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#u(){const t=document.createElement("div"),e=this.#c._signal;t.addEventListener("contextmenu",en,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#r&&(t.id=`${this.#r.id}_colorpicker_dropdown`);for(const[i,a]of this.#c.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",a),o.title=i,o.setAttribute("data-l10n-id",qe.#d[i]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=a,o.ariaSelected=a===this.#n,o.addEventListener("click",this.#f.bind(this,a),{signal:e}),t.append(o)}return t.addEventListener("keydown",this.#p.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:kt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#g(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#m){this.#g(t);return}if(t.target===this.#t){this.#s.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#s?.firstChild||t.target===this.#t){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#g(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#m){this.#g(t);return}this.#s.firstChild?.focus()}_moveToEnd(t){if(!this.#m){this.#g(t);return}this.#s.lastChild?.focus()}#p(t){qe._keyboardManager.exec(this,t)}#g(t){if(this.#m){this.hideDropdown();return}if(this.#a=t.detail===0,this.#l||(this.#l=new AbortController,window.addEventListener("pointerdown",this.#h.bind(this),{signal:this.#c.combinedSignal(this.#l)})),this.#t.ariaExpanded="true",this.#s){this.#s.classList.remove("hidden");return}const e=this.#s=this.#u();this.#t.append(e)}#h(t){this.#s?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#s?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#l?.abort(),this.#l=null}get#m(){return this.#s&&!this.#s.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#i){if(!this.#m){this.#r?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#s)return;const e=this.#c.highlightColors.values();for(const i of this.#s.children)i.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#s?.remove(),this.#s=null}}class ir{#t=null;#e=null;#n=null;static#s=null;constructor(t){this.#e=t,this.#n=t._uiManager,ir.#s||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,colorValue:i}=this.#e,a=this.#t=document.createElement("input");return a.type="color",a.value=i||"#000000",a.className="basicColorPicker",a.tabIndex=0,a.setAttribute("data-l10n-id",ir.#s[t]),a.addEventListener("input",()=>{this.#n.updateParams(e,a.value)},{signal:this.#n._signal}),a}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}Tt(116);Tt(531);function Ep(g){return Math.floor(Math.max(0,Math.min(1,g))*255).toString(16).padStart(2,"0")}function Ka(g){return Math.max(0,Math.min(255,255*g))}class wp{static CMYK_G([t,e,i,a]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Ka(t),[t,t,t]}static G_HTML([t]){const e=Ep(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(Ka)}static RGB_HTML(t){return`#${t.map(Ep).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,i+a),1-Math.min(1,e+a)]}static CMYK_rgb([t,e,i,a]){return[Ka(1-Math.min(1,t+a)),Ka(1-Math.min(1,i+a)),Ka(1-Math.min(1,e+a))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const a=1-t,o=1-e,l=1-i,u=Math.min(a,o,l);return["CMYK",a,o,l,u]}}class qy{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),i||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${e}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Gt("Abstract method `_createSVG` called.")}}class ar extends qy{_createSVG(t){return document.createElementNS($n,t)}}class Wu{static setupStorage(t,e,i,a,o){const l=a.getValue(e,{value:null});switch(i.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),o==="print")break;t.addEventListener("input",u=>{a.setValue(e,{value:u.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(l.value===i.attributes.xfaOn?t.setAttribute("checked",!0):l.value===i.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{a.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),o==="print")break;t.addEventListener("input",u=>{a.setValue(e,{value:u.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const u of i.children)u.attributes.value===l.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const h=u.target.options,d=h.selectedIndex===-1?"":h[h.selectedIndex].value;a.setValue(e,{value:d})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:a,linkService:o}){const{attributes:l}=e,u=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${a}`);for(const[h,d]of Object.entries(l))if(d!=null)switch(h){case"class":d.length&&t.setAttribute(h,d.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",d);break;case"style":Object.assign(t.style,d);break;case"textContent":t.textContent=d;break;default:(!u||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,d)}u&&o.addLinkAttributes(t,l.href,l.newWindow),i&&l.dataId&&this.setupStorage(t,l.dataId,e,i)}static render(t){const e=t.annotationStorage,i=t.linkService,a=t.xfaHtml,o=t.intent||"display",l=document.createElement(a.name);a.attributes&&this.setAttributes({html:l,element:a,intent:o,linkService:i});const u=o!=="richText",h=t.div;if(h.append(l),t.viewport){const m=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=m}u&&h.setAttribute("class","xfaLayer xfaFont");const d=[];if(a.children.length===0){if(a.value){const m=document.createTextNode(a.value);l.append(m),u&&sr.shouldBuildText(a.name)&&d.push(m)}return{textDivs:d}}const f=[[a,-1,l]];for(;f.length>0;){const[m,y,b]=f.at(-1);if(y+1===m.children.length){f.pop();continue}const A=m.children[++f.at(-1)[1]];if(A===null)continue;const{name:x}=A;if(x==="#text"){const T=document.createTextNode(A.value);d.push(T),b.append(T);continue}const w=A?.attributes?.xmlns?document.createElementNS(A.attributes.xmlns,x):document.createElement(x);if(b.append(w),A.attributes&&this.setAttributes({html:w,element:A,storage:e,intent:o,linkService:i}),A.children?.length>0)f.push([A,-1,w]);else if(A.value){const T=document.createTextNode(A.value);u&&sr.shouldBuildText(x)&&d.push(T),w.append(T)}}for(const m of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:d}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const tb=9,Ks=new WeakSet,eb=new Date().getTimezoneOffset()*60*1e3;class Tp{static create(t){switch(t.data.annotationType){case ee.LINK:return new Ku(t);case ee.TEXT:return new nb(t);case ee.WIDGET:switch(t.data.fieldType){case"Tx":return new sb(t);case"Btn":return t.data.radioButton?new em(t):t.data.checkBox?new ab(t):new rb(t);case"Ch":return new ob(t);case"Sig":return new ib(t)}return new Zs(t);case ee.POPUP:return new Nu(t);case ee.FREETEXT:return new nm(t);case ee.LINE:return new cb(t);case ee.SQUARE:return new ub(t);case ee.CIRCLE:return new hb(t);case ee.POLYLINE:return new sm(t);case ee.CARET:return new fb(t);case ee.INK:return new Qu(t);case ee.POLYGON:return new db(t);case ee.HIGHLIGHT:return new im(t);case ee.UNDERLINE:return new gb(t);case ee.SQUIGGLY:return new pb(t);case ee.STRIKEOUT:return new mb(t);case ee.STAMP:return new am(t);case ee.FILEATTACHMENT:return new vb(t);default:return new ie(t)}}}class ie{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:a=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),a&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return ie._hasPopupData(this.data)}get hasCommentButton(){return this.enableComment&&this._isEditable&&this.hasPopupElement}get commentButtonPosition(){const{quadPoints:t,rect:e}=this.data;let i=-1/0,a=-1/0;if(t?.length>=8){for(let o=0;o<t.length;o+=8)t[o+1]>a?(a=t[o+1],i=t[o+2]):t[o+1]===a&&(i=Math.max(i,t[o+2]));return[i,a]}return e?[e[2],e[3]]:null}get commentButtonColor(){if(!this.data.color)return null;const[t,e,i]=this.data.color,o=255*(1-(this.data.opacity??1));return this.#s(Math.min(t+o,255),Math.min(e+o,255),Math.min(i+o,255))}#s(t,e,i){t/=255,e/=255,i/=255;const a=Math.max(t,e,i),o=Math.min(t,e,i),l=(a+o)/2,u=((1+Math.sqrt(l))/2*100).toFixed(2);if(a===o)return`hsl(0, 0%, ${u}%)`;const h=a-o;let d;a===t?d=(e-i)/h+(e<i?6:0):a===e?d=(i-t)/h+2:d=(t-e)/h+4,d=(d*60).toFixed(2);const f=(h/(1-Math.abs(2*l-1))*100).toFixed(2);return`hsl(${d}, ${f}%, ${u}%)`}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:l}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-o)/i,t[1]=100*(t[1]-l)/a,t}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:i}=t;e&&this.#a(e);let a=this.#n?.popup||this.popup;!a&&i?.text&&(this._createPopup(i),a=this.#n.popup),a&&(a.updateEdited(t),i?.deleted&&(a.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#t&&(this.#a(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#a(t){const{container:{style:e},data:{rect:i,rotation:a},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:u,pageY:h}}}}=this;i?.splice(0,4,...t),e.left=`${100*(t[0]-u)/o}%`,e.top=`${100*(l-t[3]+h)/l}%`,a===0?(e.width=`${100*(t[2]-t[0])/o}%`,e.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(a)}_createContainer(t){const{data:e,parent:{page:i,viewport:a}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),!(this instanceof Zs)&&!(this instanceof Ku)&&(o.tabIndex=0);const{style:l}=o;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof Nu){const{rotation:x}=e;return!e.hasOwnCanvas&&x!==0&&this.setRotation(x,o),o}const{width:u,height:h}=this;if(!t&&e.borderStyle.width>0){l.borderWidth=`${e.borderStyle.width}px`;const x=e.borderStyle.horizontalCornerRadius,w=e.borderStyle.verticalCornerRadius;if(x>0||w>0){const O=`calc(${x}px * var(--total-scale-factor)) / calc(${w}px * var(--total-scale-factor))`;l.borderRadius=O}else if(this instanceof em){const O=`calc(${u}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;l.borderRadius=O}switch(e.borderStyle.style){case Bi.SOLID:l.borderStyle="solid";break;case Bi.DASHED:l.borderStyle="dashed";break;case Bi.BEVELED:Et("Unimplemented border style: beveled");break;case Bi.INSET:Et("Unimplemented border style: inset");break;case Bi.UNDERLINE:l.borderBottomStyle="solid";break}const T=e.borderColor||null;T?(this.#e=!0,l.borderColor=dt.makeHexColor(T[0]|0,T[1]|0,T[2]|0)):l.borderWidth=0}const d=dt.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:f,pageHeight:m,pageX:y,pageY:b}=a.rawDims;l.left=`${100*(d[0]-y)/f}%`,l.top=`${100*(d[1]-b)/m}%`;const{rotation:A}=e;return e.hasOwnCanvas||A===0?(l.width=`${100*u/f}%`,l.height=`${100*h/m}%`):this.setRotation(A,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:a}=this.parent.viewport.rawDims;let{width:o,height:l}=this;t%180!==0&&([o,l]=[l,o]),e.style.width=`${100*o/i}%`,e.style.height=`${100*l/a}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,a)=>{const o=a.detail[e],l=o[0],u=o.slice(1);a.target.style[i]=wp[`${l}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[i]:wp[`${l}_rgb`](u)})};return Nt(this,"_commonActions",{display:e=>{const{display:i}=e.detail,a=i%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const a of Object.keys(e.detail))(t[a]||i[a])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[a,o]of Object.entries(e)){const l=i[a];if(l){const u={detail:{[a]:o},target:t};l(u),delete e[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,a,o]=this.data.rect.map(x=>Math.fround(x));if(t.length===8){const[x,w,T,O]=t.subarray(2,6);if(a===x&&o===w&&e===T&&i===O)return}const{style:l}=this.container;let u;if(this.#e){const{borderColor:x,borderWidth:w}=l;l.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${x}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}const h=a-e,d=o-i,{svgFactory:f}=this,m=f.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0),m.role="none";const y=f.createElement("defs");m.append(y);const b=f.createElement("clipPath"),A=`clippath_${this.data.id}`;b.setAttribute("id",A),b.setAttribute("clipPathUnits","objectBoundingBox"),y.append(b);for(let x=2,w=t.length;x<w;x+=8){const T=t[x],O=t[x+1],C=t[x+2],N=t[x+3],R=f.createElement("rect"),D=(C-e)/h,j=(o-O)/d,_=(T-C)/h,F=(O-N)/d;R.setAttribute("x",D),R.setAttribute("y",j),R.setAttribute("width",_),R.setAttribute("height",F),b.append(R),u?.push(`<rect vector-effect="non-scaling-stroke" x="${D}" y="${j}" width="${_}" height="${F}"/>`)}this.#e&&(u.push("</g></svg>')"),l.backgroundImage=u.join("")),this.container.append(m),this.container.style.clipPath=`url(#${A})`}_createPopup(t=null){const{data:e}=this;let i,a;t?(i={str:t.text},a=t.date):(i=e.contentsObj,a=e.modificationDate);const o=this.#n=new Nu({data:{color:e.color,titleObj:e.titleObj,modificationDate:a,contentsObj:i,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent.div.append(o.render())}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}render(){Gt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:o,id:l,exportValues:u}of a){if(o===-1||l===e)continue;const h=typeof u=="string"?u:null,d=document.querySelector(`[data-element-id="${l}"]`);if(d&&!Ks.has(d)){Et(`_getElementsByName - element not allowed: ${l}`);continue}i.push({id:l,exportValue:h,domElement:d})}return i}for(const a of document.getElementsByName(t)){const{exportValue:o}=a,l=a.getAttribute("data-element-id");l!==e&&Ks.has(a)&&i.push({id:l,exportValue:o,domElement:a})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class Ku extends ie{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let a=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),a=!0):t.attachment?(this.#e(i,t.attachment,t.overlaidText,t.attachmentDest),a=!0):t.setOCGState?(this.#n(i,t.setOCGState,t.overlaidText),a=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),a=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(i,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(i),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,i=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),i&&(t.title=i)}_bindNamedAction(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),i&&(t.title=i),this.#t()}#e(t,e,i="",a=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:i&&(t.title=i),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,a),!1),this.#t()}#n(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),i&&(t.title=i),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(e.actions)){const o=i.get(a);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:a}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){Et('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{i?.();const{fields:a,refs:o,include:l}=e,u=[];if(a.length!==0||o.length!==0){const f=new Set(o);for(const m of a){const y=this._fieldObjects[m]||[];for(const{id:b}of y)f.add(b)}for(const m of Object.values(this._fieldObjects))for(const y of m)f.has(y.id)===l&&u.push(y)}else for(const f of Object.values(this._fieldObjects))u.push(...f);const h=this.annotationStorage,d=[];for(const f of u){const{id:m}=f;switch(d.push(m),f.type){case"text":{const b=f.defaultValue||"";h.setValue(m,{value:b});break}case"checkbox":case"radiobutton":{const b=f.defaultValue===f.exportValues;h.setValue(m,{value:b});break}case"combobox":case"listbox":{const b=f.defaultValue||"";h.setValue(m,{value:b});break}default:continue}const y=document.querySelector(`[data-element-id="${m}"]`);if(y){if(!Ks.has(y)){Et(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}}),!1}}}class nb extends ie{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Zs extends ie{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return be.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,a,o){i.includes("mouse")?t.addEventListener(i,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(i,l=>{if(i==="blur"){if(!e.focused||!l.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(l)}})})}_setEventListeners(t,e,i,a){for(const[o,l]of i)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,o,l,a),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":dt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||tb,o=t.style;let l;const u=2,h=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-u),f=Math.round(d/(mu*a))||1,m=d/f;l=Math.min(a,h(m/mu))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-u);l=Math.min(a,h(d/mu))}o.fontSize=`calc(${l}px * var(--total-scale-factor))`,o.color=dt.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class sb extends Zs{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,a){const o=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[e]=i),o.setValue(l.id,{[a]:i})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let o=a.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let u=a.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??o,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",u??o),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Ks.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const{datetimeFormat:d,datetimeType:f,timeStep:m}=this.data,y=!!f&&this.enableScripting;d&&(i.title=d),this._setRequired(i,this.data.required),l&&(i.maxLength=l),i.addEventListener("input",A=>{t.setValue(e,{value:A.target.value}),this.setPropertyOnSiblings(i,"value",A.target.value,"value"),h.formattedValue=null}),i.addEventListener("resetform",A=>{const x=this.data.defaultFieldValue??"";i.value=h.userValue=x,h.formattedValue=null});let b=A=>{const{formattedValue:x}=h;x!=null&&(A.target.value=x),A.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",x=>{if(h.focused)return;const{target:w}=x;if(y&&(w.type=f,m&&(w.step=m)),h.userValue){const T=h.userValue;if(y)if(f==="time"){const O=new Date(T),C=[O.getHours(),O.getMinutes(),O.getSeconds()];w.value=C.map(N=>N.toString().padStart(2,"0")).join(":")}else w.value=new Date(T-eb).toISOString().split(f==="date"?"T":".",1)[0];else w.value=T}h.lastCommittedValue=w.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),i.addEventListener("updatefromsandbox",x=>{this.showElementAndHideCanvas(x.target);const w={value(T){h.userValue=T.detail.value??"",y||t.setValue(e,{value:h.userValue.toString()}),T.target.value=h.userValue},formattedValue(T){const{formattedValue:O}=T.detail;h.formattedValue=O,O!=null&&T.target!==document.activeElement&&(T.target.value=O);const C={formattedValue:O};y&&(C.value=O),t.setValue(e,C)},selRange(T){T.target.setSelectionRange(...T.detail.selRange)},charLimit:T=>{const{charLimit:O}=T.detail,{target:C}=T;if(O===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",O);let N=h.userValue;!N||N.length<=O||(N=N.slice(0,O),C.value=h.userValue=N,t.setValue(e,{value:N}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:N,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(w,x)}),i.addEventListener("keydown",x=>{h.commitKey=1;let w=-1;if(x.key==="Escape"?w=0:x.key==="Enter"&&!this.data.multiLine?w=2:x.key==="Tab"&&(h.commitKey=3),w===-1)return;const{value:T}=x.target;h.lastCommittedValue!==T&&(h.lastCommittedValue=T,h.userValue=T,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,willCommit:!0,commitKey:w,selStart:x.target.selectionStart,selEnd:x.target.selectionEnd}}))});const A=b;b=null,i.addEventListener("blur",x=>{if(!h.focused||!x.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{target:w}=x;let{value:T}=w;if(y){if(T&&f==="time"){const O=T.split(":").map(C=>parseInt(C,10));T=new Date(2e3,0,1,O[0],O[1],O[2]||0).valueOf(),w.step=""}else T=new Date(T).valueOf();w.type="text"}h.userValue=T,h.lastCommittedValue!==T&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,willCommit:!0,commitKey:h.commitKey,selStart:x.target.selectionStart,selEnd:x.target.selectionEnd}}),A(x)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",x=>{h.lastCommittedValue=null;const{data:w,target:T}=x,{value:O,selectionStart:C,selectionEnd:N}=T;let R=C,D=N;switch(x.inputType){case"deleteWordBackward":{const j=O.substring(0,C).match(/\w*[^\w]*$/);j&&(R-=j[0].length);break}case"deleteWordForward":{const j=O.substring(C).match(/^[^\w]*\w*/);j&&(D+=j[0].length);break}case"deleteContentBackward":C===N&&(R-=1);break;case"deleteContentForward":C===N&&(D+=1);break}x.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:O,change:w||"",willCommit:!1,selStart:R,selEnd:D}})}),this._setEventListeners(i,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],x=>x.target.value)}if(b&&i.addEventListener("blur",b),this.data.comb){const x=(this.data.rect[2]-this.data.rect[0])/l;i.classList.add("comb"),i.style.letterSpacing=`calc(${x}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class ib extends Zs{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class ab extends Zs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let a=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(i,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return Ks.add(o),o.setAttribute("data-element-id",i),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:h}=l.target;for(const d of this._getElementsByName(u,i)){const f=h&&d.exportValue===e.exportValue;d.domElement&&(d.domElement.checked=f),t.setValue(d.id,{value:f})}t.setValue(i,{value:h})}),o.addEventListener("resetform",l=>{const u=e.defaultFieldValue||"Off";l.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const u={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(i,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class em extends Zs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let a=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof a=="string"&&(a=a!==e.buttonValue,t.setValue(i,{value:a})),a)for(const l of this._getElementsByName(e.fieldName,i))t.setValue(l.id,{value:!1});const o=document.createElement("input");if(Ks.add(o),o.setAttribute("data-element-id",i),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:h}=l.target;for(const d of this._getElementsByName(u,i))t.setValue(d.id,{value:!1});t.setValue(i,{value:h})}),o.addEventListener("resetform",l=>{const u=e.defaultFieldValue;l.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const l=e.buttonValue;o.addEventListener("updatefromsandbox",u=>{const h={value:d=>{const f=l===d.detail.value;for(const m of this._getElementsByName(d.target.name)){const y=f&&m.id===i;m.domElement&&(m.domElement.checked=y),t.setValue(m.id,{value:y})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class rb extends Ku{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class ob extends Zs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");Ks.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",f=>{const m=this.data.defaultFieldValue;for(const y of a.options)y.selected=y.value===m});for(const f of this.data.options){const m=document.createElement("option");m.textContent=f.displayValue,m.value=f.exportValue,i.value.includes(f.exportValue)&&(m.setAttribute("selected",!0),o=!1),a.append(m)}let l=null;if(o){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),a.prepend(f),l=()=>{f.remove(),a.removeEventListener("input",l),l=null},a.addEventListener("input",l)}const u=f=>{const m=f?"value":"textContent",{options:y,multiple:b}=a;return b?Array.prototype.filter.call(y,A=>A.selected).map(A=>A[m]):y.selectedIndex===-1?null:y[y.selectedIndex][m]};let h=u(!1);const d=f=>{const m=f.target.options;return Array.prototype.map.call(m,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",f=>{const m={value(y){l?.();const b=y.detail.value,A=new Set(Array.isArray(b)?b:[b]);for(const x of a.options)x.selected=A.has(x.value);t.setValue(e,{value:u(!0)}),h=u(!1)},multipleSelection(y){a.multiple=!0},remove(y){const b=a.options,A=y.detail.remove;b[A].selected=!1,a.remove(A),b.length>0&&Array.prototype.findIndex.call(b,w=>w.selected)===-1&&(b[0].selected=!0),t.setValue(e,{value:u(!0),items:d(y)}),h=u(!1)},clear(y){for(;a.length!==0;)a.remove(0);t.setValue(e,{value:null,items:[]}),h=u(!1)},insert(y){const{index:b,displayValue:A,exportValue:x}=y.detail.insert,w=a.children[b],T=document.createElement("option");T.textContent=A,T.value=x,w?w.before(T):a.append(T),t.setValue(e,{value:u(!0),items:d(y)}),h=u(!1)},items(y){const{items:b}=y.detail;for(;a.length!==0;)a.remove(0);for(const A of b){const{displayValue:x,exportValue:w}=A,T=document.createElement("option");T.textContent=x,T.value=w,a.append(T)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(e,{value:u(!0),items:d(y)}),h=u(!1)},indices(y){const b=new Set(y.detail.indices);for(const A of y.target.options)A.selected=b.has(A.index);t.setValue(e,{value:u(!0)}),h=u(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(m,f)}),a.addEventListener("input",f=>{const m=u(!0),y=u(!1);t.setValue(e,{value:m}),f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,change:y,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):a.addEventListener("input",function(f){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class Nu extends ie{constructor(t){const{data:e,elements:i}=t;super(t,{isRenderable:ie._hasPopupData(e)}),this.elements=i,this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=new lb({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,eventBus:this.linkService.eventBus}),i=[];for(const a of this.elements)a.popup=e,a.container.ariaHasPopup="dialog",i.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(a=>`${Bu}${a}`).join(",")),this.container}}class lb{#t=this.#P.bind(this);#e=this.#T.bind(this);#n=this.#F.bind(this);#s=this.#D.bind(this);#a=null;#i=null;#r=null;#o=null;#l=null;#c=null;#d=null;#u=null;#f=!1;#p=null;#g=null;#h=null;#m=null;#b=null;#v=null;#A=null;#S=null;#y=null;#E=null;#M=!1;constructor({container:t,color:e,elements:i,titleObj:a,modificationDate:o,contentsObj:l,richText:u,parent:h,rect:d,parentRect:f,open:m,eventBus:y=null}){this.#i=t,this.#y=a,this.#r=l,this.#S=u,this.#d=h,this.#a=e,this.#A=d,this.#u=f,this.#l=i,this.#c=y,this.#o=Uo.toDateObject(o),this.trigger=i.flatMap(b=>b.getElementsToTriggerPopup()),this.#C(),this.#i.hidden=!0,m&&this.#D()}#C(){if(this.#g)return;this.#g=new AbortController;const{signal:t}=this.#g;for(const e of this.trigger)e.addEventListener("click",this.#s,{signal:t}),e.addEventListener("mouseenter",this.#n,{signal:t}),e.addEventListener("mouseleave",this.#e,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#t,{signal:t});this.#L()}#w(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#b=t._normalizePoint(t.commentButtonPosition),this.#v=t.commentButtonColor)}#L(){if(this.#m||(this.#b||this.#w(),!this.#b))return;const t=this.#m=document.createElement("button");t.className="annotationCommentButton";const e=this.#l[0].container;t.style.zIndex=e.style.zIndex+1,t.tabIndex=0;const{signal:i}=this.#g;t.addEventListener("hover",this.#s,{signal:i}),t.addEventListener("keydown",this.#t,{signal:i}),t.addEventListener("click",()=>{const[{data:{id:o},annotationEditorType:l}]=this.#l;this.#c?.dispatch("switchannotationeditormode",{source:this,editId:o,mode:l,editComment:!0})},{signal:i});const{style:a}=t;a.left=`calc(${this.#b[0]}%)`,a.top=`calc(${this.#b[1]}% - var(--comment-button-dim))`,this.#v&&(a.backgroundColor=this.#v),e.after(t)}render(){if(this.#p)return;const t=this.#p=document.createElement("div");if(t.className="popup",this.#a){const a=t.style.outlineColor=dt.makeHexColor(...this.#a);t.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#y?.str){const a=document.createElement("span");a.className="title",e.append(a),{dir:a.dir,str:a.textContent}=this.#y}if(t.append(e),this.#o){const a=document.createElement("time");a.className="popupDate",a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#o.valueOf()})),a.dateTime=this.#o.toISOString(),e.append(a)}const i=this.#R;if(i)Wu.render({xfaHtml:i,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const a=this._formatContents(this.#r);t.append(a)}this.#i.append(t)}get#R(){const t=this.#S,e=this.#r;return t?.str&&(!e?.str||e.str===t.str)&&this.#S.html||null}get#N(){return this.#R?.attributes?.style?.fontSize||0}get#I(){return this.#R?.attributes?.style?.color||null}#k(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:this.#I,fontSize:this.#N?`calc(${this.#N}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:a});return i}_formatContents({str:t,dir:e}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=e;const a=t.split(/(?:\r\n?|\n)/);for(let o=0,l=a.length;o<l;++o){const u=a[o];i.append(document.createTextNode(u)),o<l-1&&i.append(document.createElement("br"))}return i}#P(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#D()}updateEdited({rect:t,popup:e,deleted:i}){if(i||e?.deleted){this.remove();return}this.#C(),this.#E||={contentsObj:this.#r,richText:this.#S},t&&(this.#h=null),e&&(this.#S=this.#k(e.text),this.#o=Uo.toDateObject(e.date),this.#r=null),this.#p?.remove(),this.#p=null}resetEdited(){this.#E&&({contentsObj:this.#r,richText:this.#S}=this.#E,this.#E=null,this.#p?.remove(),this.#p=null,this.#h=null)}remove(){this.#g?.abort(),this.#g=null,this.#p?.remove(),this.#p=null,this.#M=!1,this.#f=!1;for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#j(){if(this.#h!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:a,pageY:o}}}=this.#d;let l=!!this.#u,u=l?this.#u:this.#A;for(const A of this.#l)if(!u||dt.intersect(A.data.rect,u)!==null){u=A.data.rect,l=!0;break}const h=dt.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),f=l?u[2]-u[0]+5:0,m=h[0]+f,y=h[1];this.#h=[100*(m-a)/e,100*(y-o)/i];const{style:b}=this.#i;b.left=`${this.#h[0]}%`,b.top=`${this.#h[1]}%`}#D(){this.#f=!this.#f,this.#f?(this.#F(),this.#i.addEventListener("click",this.#s),this.#i.addEventListener("keydown",this.#t)):(this.#T(),this.#i.removeEventListener("click",this.#s),this.#i.removeEventListener("keydown",this.#t))}#F(){this.#p||this.render(),this.isVisible?this.#f&&this.#i.classList.add("focused"):(this.#j(),this.#i.hidden=!1,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)+1e3)}#T(){this.#i.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#i.hidden=!0,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)-1e3)}forceHide(){this.#M=this.isVisible,this.#M&&(this.#i.hidden=!0)}maybeShow(){this.#C(),this.#M&&(this.#p||this.#F(),this.#M=!1,this.#i.hidden=!1)}get isVisible(){return this.#i.hidden===!1}}class nm extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=wt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class cb extends ie{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class ub extends ie{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",e-o),l.setAttribute("height",i-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class hb extends ie{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",e/2),l.setAttribute("cy",i/2),l.setAttribute("rx",e/2-o/2),l.setAttribute("ry",i/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class sm extends ie{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:i,popupRef:a},width:o,height:l}=this;if(!e)return this.container;const u=this.svgFactory.create(o,l,!0);let h=[];for(let f=0,m=e.length;f<m;f+=2){const y=e[f]-t[0],b=t[3]-e[f+1];h.push(`${y},${b}`)}h=h.join(" ");const d=this.#t=this.svgFactory.createElement(this.svgElementName);return d.setAttribute("points",h),d.setAttribute("stroke-width",i.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),u.append(d),this.container.append(u),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class db extends sm{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class fb extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Qu extends ie{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?wt.HIGHLIGHT:wt.INK}#n(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:i,borderStyle:a,popupRef:o}}=this,{transform:l,width:u,height:h}=this.#n(e,t),d=this.svgFactory.create(u,h,!0),f=this.#t=this.svgFactory.createElement("svg:g");d.append(f),f.setAttribute("stroke-width",a.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",l);for(let m=0,y=i.length;m<y;m++){const b=this.svgFactory.createElement(this.svgElementName);this.#e.push(b),b.setAttribute("points",i[m].join(",")),f.append(b)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:i,rect:a}=t,o=this.#t;if(e>=0&&o.setAttribute("stroke-width",e||1),i)for(let l=0,u=this.#e.length;l<u;l++)this.#e[l].setAttribute("points",i[l].join(","));if(a){const{transform:l,width:u,height:h}=this.#n(this.data.rotation,a);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${h}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}get commentButtonPosition(){const{inkLists:t,rect:e}=this.data;if(t?.length>=1){let i=-1/0,a=-1/0;for(const o of t)for(let l=0,u=o.length;l<u;l+=2)o[l+1]>a?(a=o[l+1],i=o[l]):o[l+1]===a&&(i=Math.max(i,o[l]));if(i!==1/0)return[i,a]}return e?[e[2],e[3]]:null}}class im extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=wt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class gb extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class pb extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class mb extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class am extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=wt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class vb extends ie{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let i;e.hasAppearance||e.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#e.bind(this)),this.#t=i;const{isMac:a}=be.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(a?o.metaKey:o.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class Qo{#t=null;#e=null;#n=new Map;#s=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:a,page:o,viewport:l,structTreeLayer:u}){this.div=t,this.#t=e,this.#e=i,this.#s=u||null,this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=a}hasEditableAnnotations(){return this.#n.size>0}async#a(t,e,i){const a=t.firstChild||t,o=a.id=`${Bu}${e}`,l=await this.#s?.getAriaAttributes(o);if(l)for(const[u,h]of l)a.setAttribute(u,h);i?i.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,a,!1))}async render(t){const{annotations:e}=t,i=this.div;Es(i,this.viewport);const a=new Map,o={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new ar,annotationStorage:t.annotationStorage||new Uu,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of e){if(l.noHTML)continue;const u=l.annotationType===ee.POPUP;if(u){const f=a.get(l.id);if(!f)continue;o.elements=f}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;o.data=l;const h=Tp.create(o);if(!h.isRenderable)continue;if(!u&&l.popupRef){const f=a.get(l.popupRef);f?f.push(h):a.set(l.popupRef,[h])}const d=h.render();l.hidden&&(d.style.visibility="hidden"),await this.#a(d,l.id,o.elements),h._isEditable&&(this.#n.set(h.data.id,h),this._annotationEditorUIManager?.renderAnnotationElement(h))}this.#i()}async addLinkAnnotations(t,e){const i={data:null,layer:this.div,linkService:e,svgFactory:new ar,parent:this};for(const a of t){a.borderStyle||=Qo._defaultBorderStyle,i.data=a;const o=Tp.create(i);if(!o.isRenderable)continue;const l=o.render();await this.#a(l,a.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,Es(e,{rotation:t.rotation}),this.#i(),e.hidden=!1}#i(){if(!this.#e)return;const t=this.div;for(const[e,i]of this.#e){const a=t.querySelector(`[data-annotation-id="${e}"]`);if(!a)continue;i.className="annotationContent";const{firstChild:o}=a;o?o.nodeName==="CANVAS"?o.replaceWith(i):o.classList.contains("annotationContent")?o.after(i):o.before(i):a.append(i);const l=this.#n.get(e);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,a.id,i),l._hasNoCanvas=!1):l.canvas=i)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}static get _defaultBorderStyle(){return Nt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Bi.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const jo=/\r\n?|\n/g;class ve extends vt{#t;#e="";#n=`${this.id}-editor`;#s=null;#a;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=ve.prototype,e=o=>o.isEmpty(),i=Zn.TRANSLATE_SMALL,a=Zn.TRANSLATE_BIG;return Nt(this,"_keyboardManager",new hr([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:e}]]))}static _type="freetext";static _editorType=wt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#t=t.color||ve._defaultColor||vt._defaultLineColor,this.#a=t.fontSize||ve._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){vt.initialize(t,e);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case kt.FREETEXT_SIZE:ve._defaultFontSize=e;break;case kt.FREETEXT_COLOR:ve._defaultColor=e;break}}updateParams(t,e){switch(t){case kt.FREETEXT_SIZE:this.#i(e);break;case kt.FREETEXT_COLOR:this.#r(e);break}}static get defaultPropertiesToUpdate(){return[[kt.FREETEXT_SIZE,ve._defaultFontSize],[kt.FREETEXT_COLOR,ve._defaultColor||vt._defaultLineColor]]}get propertiesToUpdate(){return[[kt.FREETEXT_SIZE,this.#a],[kt.FREETEXT_COLOR,this.#t]]}get toolbarButtons(){return this._colorPicker||=new ir(this),[["colorPicker",this._colorPicker]]}get colorType(){return kt.FREETEXT_COLOR}get colorValue(){return this.#t}#i(t){const e=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-this.#a)*this.parentScale),this.#a=a,this.#l()},i=this.#a;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:kt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#r(t){const e=a=>{this.#t=this.editorDiv.style.color=a,this._colorPicker?.update(a)},i=this.#t;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:kt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-ve._internalPadding*t,-(ve._internalPadding+this.#a)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#s=new AbortController;const t=this._uiManager.combinedSignal(this.#s);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#s?.abort(),this.#s=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#o(){const t=[];this.editorDiv.normalize();let e=null;for(const i of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(ve.#c(i)),e=i);return t.join(`
`)}#l(){const[t,e]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:a,div:o}=this,l=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",a.div.append(this.div),i=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#e,e=this.#e=this.#o().trimEnd();if(t===e)return;const i=a=>{if(this.#e=a,!a){this.remove();return}this.#d(),this._uiManager.rebuild(this),this.#l()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#l()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){ve._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#a}px * var(--total-scale-factor))`,i.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[u,h]=this.getInitialTranslation();[u,h]=this.pageTranslationToScreen(u,h);const[d,f]=this.pageDimensions,[m,y]=this.pageTranslation;let b,A;switch(this.rotation){case 0:b=t+(l[0]-m)/d,A=e+this.height-(l[1]-y)/f;break;case 90:b=t+(l[0]-m)/d,A=e-(l[1]-y)/f,[u,h]=[h,-u];break;case 180:b=t-this.width+(l[0]-m)/d,A=e-(l[1]-y)/f,[u,h]=[-u,-h];break;case 270:b=t+(l[0]-m-this.height*f)/d,A=e+(l[1]-y-this.width*d)/f,[u,h]=[-h,u];break}this.setAt(b*a,A*o,u,h)}else this._moveAfterPaste(t,e);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(jo,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:i}=e;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const a=ve.#f(e.getData("text")||"").replaceAll(jo,`
`);if(!a)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!a.includes(`
`)){l.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:h}=l,d=[],f=[];if(u.nodeType===Node.TEXT_NODE){const b=u.parentElement;if(f.push(u.nodeValue.slice(h).replaceAll(jo,"")),b!==this.editorDiv){let A=d;for(const x of this.editorDiv.childNodes){if(x===b){A=f;continue}A.push(ve.#c(x))}}d.push(u.nodeValue.slice(0,h).replaceAll(jo,""))}else if(u===this.editorDiv){let b=d,A=0;for(const x of this.editorDiv.childNodes)A++===h&&(b=f),b.push(ve.#c(x))}this.#e=`${d.join(`
`)}${a}${f.join(`
`)}`,this.#d();const m=new Range;let y=Math.sumPrecise(d.map(b=>b.length));for(const{firstChild:b}of this.editorDiv.childNodes)if(b.nodeType===Node.TEXT_NODE){const A=b.nodeValue.length;if(y<=A){m.setStart(b,y),m.setEnd(b,y);break}y-=A}o.removeAllRanges(),o.addRange(m)}#d(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const t of this.#e.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#u(){return this.#e.replaceAll(""," ")}static#f(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=ve._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,i){let a=null;if(t instanceof nm){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:h,rotation:d,id:f,popupRef:m,contentsObj:y},textContent:b,textPosition:A,parent:{page:{pageNumber:x}}}=t;if(!b||b.length===0)return null;a=t={annotationType:wt.FREETEXT,color:Array.from(u),fontSize:l,value:b.join(`
`),position:A,pageIndex:x-1,rect:h.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:m,comment:y?.str||null}}const o=await super.deserialize(t,e,i);return o.#a=t.fontSize,o.#t=dt.makeHexColor(...t.color),o.#e=ve.#f(t.value),o._initialData=a,t.comment&&o.setCommentData(t.comment),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=this.getPDFRect(),i=vt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),a={annotationType:wt.FREETEXT,color:i,fontSize:this.#a,value:this.#u(),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(a),t?(a.isCopy=!0,a):this.annotationElementId&&!this.#p(a)?null:(a.id=this.annotationElementId,a)}#p(t){const{value:e,fontSize:i,color:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some((l,u)=>l!==a[u])||t.pageIndex!==o}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:i}=e;i.fontSize=`calc(${this.#a}px * var(--total-scale-factor))`,i.color=this.#t,e.replaceChildren();for(const o of this.#e.split(`
`)){const l=document.createElement("div");l.append(o?document.createTextNode(o):document.createElement("br")),e.append(l)}const a={rect:this.getPDFRect()};return a.popup=this.hasEditedComment?this.comment:{text:this.#e},t.updateEdited(a),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class ht{static PRECISION=1e-4;toSVGPath(){Gt("Abstract method `toSVGPath` must be implemented.")}get box(){Gt("Abstract getter `box` must be implemented.")}serialize(t,e){Gt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,a,o,l){l||=new Float32Array(t.length);for(let u=0,h=t.length;u<h;u+=2)l[u]=e+t[u]*a,l[u+1]=i+t[u+1]*o;return l}static _rescaleAndSwap(t,e,i,a,o,l){l||=new Float32Array(t.length);for(let u=0,h=t.length;u<h;u+=2)l[u]=e+t[u+1]*a,l[u+1]=i+t[u]*o;return l}static _translate(t,e,i,a){a||=new Float32Array(t.length);for(let o=0,l=t.length;o<l;o+=2)a[o]=e+t[o],a[o+1]=i+t[o+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,a,o){switch(o){case 90:return[1-e/i,t/a];case 180:return[1-t/i,1-e/a];case 270:return[e/i,1-t/a];default:return[t/i,e/a]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,a,o,l){return[(t+5*i)/6,(e+5*a)/6,(5*i+o)/6,(5*a+l)/6,(i+o)/2,(a+l)/2]}}class Vs{#t;#e=[];#n;#s;#a=[];#i=new Float32Array(18);#r;#o;#l;#c;#d;#u;#f=[];static#p=8;static#g=2;static#h=Vs.#p+Vs.#g;constructor({x:t,y:e},i,a,o,l,u=0){this.#t=i,this.#u=o*a,this.#s=l,this.#i.set([NaN,NaN,NaN,NaN,t,e],6),this.#n=u,this.#c=Vs.#p*a,this.#l=Vs.#h*a,this.#d=a,this.#f.push(t,e)}isEmpty(){return isNaN(this.#i[8])}#m(){const t=this.#i.subarray(4,6),e=this.#i.subarray(16,18),[i,a,o,l]=this.#t;return[(this.#r+(t[0]-e[0])/2-i)/o,(this.#o+(t[1]-e[1])/2-a)/l,(this.#r+(e[0]-t[0])/2-i)/o,(this.#o+(e[1]-t[1])/2-a)/l]}add({x:t,y:e}){this.#r=t,this.#o=e;const[i,a,o,l]=this.#t;let[u,h,d,f]=this.#i.subarray(8,12);const m=t-d,y=e-f,b=Math.hypot(m,y);if(b<this.#l)return!1;const A=b-this.#c,x=A/b,w=x*m,T=x*y;let O=u,C=h;u=d,h=f,d+=w,f+=T,this.#f?.push(t,e);const N=-T/A,R=w/A,D=N*this.#u,j=R*this.#u;return this.#i.set(this.#i.subarray(2,8),0),this.#i.set([d+D,f+j],4),this.#i.set(this.#i.subarray(14,18),12),this.#i.set([d-D,f-j],16),isNaN(this.#i[6])?(this.#a.length===0&&(this.#i.set([u+D,h+j],2),this.#a.push(NaN,NaN,NaN,NaN,(u+D-i)/o,(h+j-a)/l),this.#i.set([u-D,h-j],14),this.#e.push(NaN,NaN,NaN,NaN,(u-D-i)/o,(h-j-a)/l)),this.#i.set([O,C,u,h,d,f],6),!this.isEmpty()):(this.#i.set([O,C,u,h,d,f],6),Math.abs(Math.atan2(C-h,O-u)-Math.atan2(T,w))<Math.PI/2?([u,h,d,f]=this.#i.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((u+d)/2-i)/o,((h+f)/2-a)/l),[u,h,O,C]=this.#i.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((O+u)/2-i)/o,((C+h)/2-a)/l),!0):([O,C,u,h,d,f]=this.#i.subarray(0,6),this.#a.push(((O+5*u)/6-i)/o,((C+5*h)/6-a)/l,((5*u+d)/6-i)/o,((5*h+f)/6-a)/l,((u+d)/2-i)/o,((h+f)/2-a)/l),[d,f,u,h,O,C]=this.#i.subarray(12,18),this.#e.push(((O+5*u)/6-i)/o,((C+5*h)/6-a)/l,((5*u+d)/6-i)/o,((5*h+f)/6-a)/l,((u+d)/2-i)/o,((h+f)/2-a)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#a,e=this.#e;if(isNaN(this.#i[6])&&!this.isEmpty())return this.#b();const i=[];i.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?i.push(`L${t[a+4]} ${t[a+5]}`):i.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);this.#A(i);for(let a=e.length-6;a>=6;a-=6)isNaN(e[a])?i.push(`L${e[a+4]} ${e[a+5]}`):i.push(`C${e[a]} ${e[a+1]} ${e[a+2]} ${e[a+3]} ${e[a+4]} ${e[a+5]}`);return this.#v(i),i.join(" ")}#b(){const[t,e,i,a]=this.#t,[o,l,u,h]=this.#m();return`M${(this.#i[2]-t)/i} ${(this.#i[3]-e)/a} L${(this.#i[4]-t)/i} ${(this.#i[5]-e)/a} L${o} ${l} L${u} ${h} L${(this.#i[16]-t)/i} ${(this.#i[17]-e)/a} L${(this.#i[14]-t)/i} ${(this.#i[15]-e)/a} Z`}#v(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#A(t){const[e,i,a,o]=this.#t,l=this.#i.subarray(4,6),u=this.#i.subarray(16,18),[h,d,f,m]=this.#m();t.push(`L${(l[0]-e)/a} ${(l[1]-i)/o} L${h} ${d} L${f} ${m} L${(u[0]-e)/a} ${(u[1]-i)/o}`)}newFreeDrawOutline(t,e,i,a,o,l){return new rm(t,e,i,a,o,l)}getOutlines(){const t=this.#a,e=this.#e,i=this.#i,[a,o,l,u]=this.#t,h=new Float32Array((this.#f?.length??0)+2);for(let m=0,y=h.length-2;m<y;m+=2)h[m]=(this.#f[m]-a)/l,h[m+1]=(this.#f[m+1]-o)/u;if(h[h.length-2]=(this.#r-a)/l,h[h.length-1]=(this.#o-o)/u,isNaN(i[6])&&!this.isEmpty())return this.#S(h);const d=new Float32Array(this.#a.length+24+this.#e.length);let f=t.length;for(let m=0;m<f;m+=2){if(isNaN(t[m])){d[m]=d[m+1]=NaN;continue}d[m]=t[m],d[m+1]=t[m+1]}f=this.#E(d,f);for(let m=e.length-6;m>=6;m-=6)for(let y=0;y<6;y+=2){if(isNaN(e[m+y])){d[f]=d[f+1]=NaN,f+=2;continue}d[f]=e[m+y],d[f+1]=e[m+y+1],f+=2}return this.#y(d,f),this.newFreeDrawOutline(d,h,this.#t,this.#d,this.#n,this.#s)}#S(t){const e=this.#i,[i,a,o,l]=this.#t,[u,h,d,f]=this.#m(),m=new Float32Array(36);return m.set([NaN,NaN,NaN,NaN,(e[2]-i)/o,(e[3]-a)/l,NaN,NaN,NaN,NaN,(e[4]-i)/o,(e[5]-a)/l,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(e[16]-i)/o,(e[17]-a)/l,NaN,NaN,NaN,NaN,(e[14]-i)/o,(e[15]-a)/l],0),this.newFreeDrawOutline(m,t,this.#t,this.#d,this.#n,this.#s)}#y(t,e){const i=this.#e;return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6}#E(t,e){const i=this.#i.subarray(4,6),a=this.#i.subarray(16,18),[o,l,u,h]=this.#t,[d,f,m,y]=this.#m();return t.set([NaN,NaN,NaN,NaN,(i[0]-o)/u,(i[1]-l)/h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,m,y,NaN,NaN,NaN,NaN,(a[0]-o)/u,(a[1]-l)/h],e),e+=24}}class rm extends ht{#t;#e=new Float32Array(4);#n;#s;#a;#i;#r;constructor(t,e,i,a,o,l){super(),this.#r=t,this.#a=e,this.#t=i,this.#i=a,this.#n=o,this.#s=l,this.lastPoint=[NaN,NaN],this.#o(l);const[u,h,d,f]=this.#e;for(let m=0,y=t.length;m<y;m+=2)t[m]=(t[m]-u)/d,t[m+1]=(t[m+1]-h)/f;for(let m=0,y=e.length;m<y;m+=2)e[m]=(e[m]-u)/d,e[m+1]=(e[m+1]-h)/f}toSVGPath(){const t=[`M${this.#r[4]} ${this.#r[5]}`];for(let e=6,i=this.#r.length;e<i;e+=6){if(isNaN(this.#r[e])){t.push(`L${this.#r[e+4]} ${this.#r[e+5]}`);continue}t.push(`C${this.#r[e]} ${this.#r[e+1]} ${this.#r[e+2]} ${this.#r[e+3]} ${this.#r[e+4]} ${this.#r[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,i,a],o){const l=i-t,u=a-e;let h,d;switch(o){case 0:h=ht._rescale(this.#r,t,a,l,-u),d=ht._rescale(this.#a,t,a,l,-u);break;case 90:h=ht._rescaleAndSwap(this.#r,t,e,l,u),d=ht._rescaleAndSwap(this.#a,t,e,l,u);break;case 180:h=ht._rescale(this.#r,i,e,-l,u),d=ht._rescale(this.#a,i,e,-l,u);break;case 270:h=ht._rescaleAndSwap(this.#r,i,a,-l,-u),d=ht._rescaleAndSwap(this.#a,i,a,-l,-u);break}return{outline:Array.from(h),points:[Array.from(d)]}}#o(t){const e=this.#r;let i=e[4],a=e[5];const o=[i,a,i,a];let l=i,u=a;const h=t?Math.max:Math.min;for(let f=6,m=e.length;f<m;f+=6){const y=e[f+4],b=e[f+5];if(isNaN(e[f]))dt.pointBoundingBox(y,b,o),u<b?(l=y,u=b):u===b&&(l=h(l,y));else{const A=[1/0,1/0,-1/0,-1/0];dt.bezierBoundingBox(i,a,...e.slice(f,f+6),A),dt.rectBoundingBox(...A,o),u<A[3]?(l=A[2],u=A[3]):u===A[3]&&(l=h(l,A[2]))}i=y,a=b}const d=this.#e;d[0]=o[0]-this.#n,d[1]=o[1]-this.#n,d[2]=o[2]-o[0]+2*this.#n,d[3]=o[3]-o[1]+2*this.#n,this.lastPoint=[l,u]}get box(){return this.#e}newOutliner(t,e,i,a,o,l=0){return new Vs(t,e,i,a,o,l)}getNewOutline(t,e){const[i,a,o,l]=this.#e,[u,h,d,f]=this.#t,m=o*d,y=l*f,b=i*d+u,A=a*f+h,x=this.newOutliner({x:this.#a[0]*m+b,y:this.#a[1]*y+A},this.#t,this.#i,t,this.#s,e??this.#n);for(let w=2;w<this.#a.length;w+=2)x.add({x:this.#a[w]*m+b,y:this.#a[w+1]*y+A});return x.getOutlines()}}class Ou{#t;#e;#n=[];#s=[];constructor(t,e=0,i=0,a=!0){const o=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:b,y:A,width:x,height:w}of t){const T=Math.floor((b-e)/l)*l,O=Math.ceil((b+x+e)/l)*l,C=Math.floor((A-e)/l)*l,N=Math.ceil((A+w+e)/l)*l,R=[T,C,N,!0],D=[O,C,N,!1];this.#n.push(R,D),dt.rectBoundingBox(T,C,O,N,o)}const u=o[2]-o[0]+2*i,h=o[3]-o[1]+2*i,d=o[0]-i,f=o[1]-i,m=this.#n.at(a?-1:-2),y=[m[0],m[2]];for(const b of this.#n){const[A,x,w]=b;b[0]=(A-d)/u,b[1]=(x-f)/h,b[2]=(w-f)/h}this.#t=new Float32Array([d,f,u,h]),this.#e=y}getOutlines(){this.#n.sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#l(e)),this.#r(e)):(this.#o(e),t.push(...this.#l(e)));return this.#a(t)}#a(t){const e=[],i=new Set;for(const l of t){const[u,h,d]=l;e.push([u,h,l],[u,d,l])}e.sort((l,u)=>l[1]-u[1]||l[0]-u[0]);for(let l=0,u=e.length;l<u;l+=2){const h=e[l][2],d=e[l+1][2];h.push(d),d.push(h),i.add(h),i.add(d)}const a=[];let o;for(;i.size>0;){const l=i.values().next().value;let[u,h,d,f,m]=l;i.delete(l);let y=u,b=h;for(o=[u,d],a.push(o);;){let A;if(i.has(f))A=f;else if(i.has(m))A=m;else break;i.delete(A),[u,h,d,f,m]=A,y!==u&&(o.push(y,b,u,b===h?h:d),y=u),b=b===h?d:h}o.push(y,b)}return new yb(a,this.#t,this.#e)}#i(t){const e=this.#s;let i=0,a=e.length-1;for(;i<=a;){const o=i+a>>1,l=e[o][0];if(l===t)return o;l<t?i=o+1:a=o-1}return a+1}#r([,t,e]){const i=this.#i(t);this.#s.splice(i,0,[t,e])}#o([,t,e]){const i=this.#i(t);for(let a=i;a<this.#s.length;a++){const[o,l]=this.#s[a];if(o!==t)break;if(o===t&&l===e){this.#s.splice(a,1);return}}for(let a=i-1;a>=0;a--){const[o,l]=this.#s[a];if(o!==t)break;if(o===t&&l===e){this.#s.splice(a,1);return}}}#l(t){const[e,i,a]=t,o=[[e,i,a]],l=this.#i(a);for(let u=0;u<l;u++){const[h,d]=this.#s[u];for(let f=0,m=o.length;f<m;f++){const[,y,b]=o[f];if(!(d<=y||b<=h)){if(y>=h){if(b>d)o[f][1]=d;else{if(m===1)return[];o.splice(f,1),f--,m--}continue}o[f][2]=h,b>d&&o.push([e,d,b])}}}return o}}class yb extends ht{#t;#e;constructor(t,e,i){super(),this.#e=t,this.#t=e,this.lastPoint=i}toSVGPath(){const t=[];for(const e of this.#e){let[i,a]=e;t.push(`M${i} ${a}`);for(let o=2;o<e.length;o+=2){const l=e[o],u=e[o+1];l===i?(t.push(`V${u}`),a=u):u===a&&(t.push(`H${l}`),i=l)}t.push("Z")}return t.join(" ")}serialize([t,e,i,a],o){const l=[],u=i-t,h=a-e;for(const d of this.#e){const f=new Array(d.length);for(let m=0;m<d.length;m+=2)f[m]=t+d[m]*u,f[m+1]=a-d[m+1]*h;l.push(f)}return l}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Du extends Vs{newFreeDrawOutline(t,e,i,a,o,l){return new bb(t,e,i,a,o,l)}}class bb extends rm{newOutliner(t,e,i,a,o,l=0){return new Du(t,e,i,a,o,l)}}class ne extends vt{#t=null;#e=0;#n;#s=null;#a=null;#i=null;#r=null;#o=0;#l=null;#c=null;#d=null;#u=!1;#f=null;#p;#g=null;#h="";#m;#b="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=wt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=ne.prototype;return Nt(this,"_keyboardManager",new hr([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||ne._defaultColor,this.#m=t.thickness||ne._defaultThickness,this.#p=t.opacity||ne._defaultOpacity,this.#n=t.boxes||null,this.#b=t.methodOfCreation||"",this.#h=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#u=!0,this.#A(t),this.#C()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#r=t.focusNode,this.#o=t.focusOffset,this.#v(),this.#C(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#u?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#m,methodOfCreation:this.#b}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}get commentColor(){return this.color}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new Ou(this.#n,.001);this.#c=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#c.box;const e=new Ou(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#i=e.getOutlines();const{lastPoint:i}=this.#i;this.#f=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#A({highlightOutlines:t,highlightId:e,clipPathId:i}){this.#c=t;const a=1.5;if(this.#i=t.getNewOutline(this.#m/2+a,.0025),e>=0)this.#d=e,this.#s=i,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#g=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},!0);else if(this.parent){const f=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:ne.#w(this.#c.box,(f-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#g,{bbox:ne.#w(this.#i.box,f),path:{d:this.#i.toSVGPath()}})}const[o,l,u,h]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=u,this.height=h;break;case 90:{const[f,m]=this.parentDimensions;this.x=l,this.y=1-o,this.width=u*m/f,this.height=h*f/m;break}case 180:this.x=1-o,this.y=1-l,this.width=u,this.height=h;break;case 270:{const[f,m]=this.parentDimensions;this.x=1-l,this.y=o,this.width=u*m/f,this.height=h*f/m;break}}const{lastPoint:d}=this.#i;this.#f=[(d[0]-o)/u,(d[1]-l)/h]}static initialize(t,e){vt.initialize(t,e),ne._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case kt.HIGHLIGHT_COLOR:ne._defaultColor=e;break;case kt.HIGHLIGHT_THICKNESS:ne._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#f}updateParams(t,e){switch(t){case kt.HIGHLIGHT_COLOR:this.#S(e);break;case kt.HIGHLIGHT_THICKNESS:this.#y(e);break}}static get defaultPropertiesToUpdate(){return[[kt.HIGHLIGHT_COLOR,ne._defaultColor],[kt.HIGHLIGHT_THICKNESS,ne._defaultThickness]]}get propertiesToUpdate(){return[[kt.HIGHLIGHT_COLOR,this.color||ne._defaultColor],[kt.HIGHLIGHT_THICKNESS,this.#m||ne._defaultThickness],[kt.HIGHLIGHT_FREE,this.#u]]}#S(t){const e=(o,l)=>{this.color=o,this.#p=l,this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:o,"fill-opacity":l}}),this.#a?.updateColor(o)},i=this.color,a=this.#p;this.addCommands({cmd:e.bind(this,t,ne._defaultOpacity),undo:e.bind(this,i,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:kt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#y(t){const e=this.#m,i=a=>{this.#m=a,this.#E(a)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:kt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#a=new qe({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#N())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#N())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#M(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#C(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#M():t&&(this.#C(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#E(t){if(!this.#u)return;this.#A({highlightOutlines:this.#c.getNewOutline(t/2)}),this.fixAndSetPosition();const[e,i]=this.parentDimensions;this.setDims(this.width*e,this.height*i)}#M(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#g),this.#g=null)}#C(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#s}=t.drawLayer.draw({bbox:this.#c.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#p},rootClass:{highlight:!0,free:this.#u},path:{d:this.#c.toSVGPath()}},!1,!0),this.#g=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#u},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},this.#u),this.#l&&(this.#l.style.clipPath=this.#s))}static#w([t,e,i,a],o){switch(o){case 90:return[1-e-a,t,a,i];case 180:return[1-t-i,1-e-a,i,a];case 270:return[e,1-t-i,a,i]}return[t,e,i,a]}rotate(t){const{drawLayer:e}=this.parent;let i;this.#u?(t=(t-this.rotation+360)%360,i=ne.#w(this.#c.box,t)):i=ne.#w([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:i,root:{"data-main-rotation":t}}),e.updateProperties(this.#g,{bbox:ne.#w(this.#i.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#h&&(t.setAttribute("aria-label",this.#h),t.setAttribute("role","mark")),this.#u?t.classList.add("free"):this.div.addEventListener("keydown",this.#L.bind(this),{signal:this._uiManager._signal});const e=this.#l=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#s;const[i,a]=this.parentDimensions;return this.setDims(this.width*i,this.height*a),Ip(this,this.#l,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1}})}#L(t){ne._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#R(!0);break;case 1:case 3:this.#R(!1);break}}#R(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#r,this.#o)}select(){super.select(),this.#g&&this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#g&&(this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{selected:!1}}),this.#u||this.#R(!1))}get _mustFixPosition(){return!this.#u}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#g,{rootClass:{hidden:!t}}))}#N(){return this.#u?this.rotation:0}#I(){if(this.#u)return null;const[t,e]=this.pageDimensions,[i,a]=this.pageTranslation,o=this.#n,l=new Float32Array(o.length*8);let u=0;for(const{x:h,y:d,width:f,height:m}of o){const y=h*t+i,b=(1-d)*e+a;l[u]=l[u+4]=y,l[u+1]=l[u+3]=b,l[u+2]=l[u+6]=y+f*t,l[u+5]=l[u+7]=b-m*e,u+=8}return l}#k(t){return this.#c.serialize(t,this.#N())}static startHighlighting(t,e,{target:i,x:a,y:o}){const{x:l,y:u,width:h,height:d}=i.getBoundingClientRect(),f=new AbortController,m=t.combinedSignal(f),y=b=>{f.abort(),this.#j(t,b)};window.addEventListener("blur",y,{signal:m}),window.addEventListener("pointerup",y,{signal:m}),window.addEventListener("pointerdown",se,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",en,{signal:m}),i.addEventListener("pointermove",this.#P.bind(this,t),{signal:m}),this._freeHighlight=new Du({x:a,y:o},[l,u,h,d],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#P(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#j(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,i){let a=null;if(t instanceof im){const{data:{quadPoints:A,rect:x,rotation:w,id:T,color:O,opacity:C,popupRef:N,contentsObj:R},parent:{page:{pageNumber:D}}}=t;a=t={annotationType:wt.HIGHLIGHT,color:Array.from(O),opacity:C,quadPoints:A,boxes:null,pageIndex:D-1,rect:x.slice(0),rotation:w,annotationElementId:T,id:T,deleted:!1,popupRef:N,comment:R?.str||null}}else if(t instanceof Qu){const{data:{inkLists:A,rect:x,rotation:w,id:T,color:O,borderStyle:{rawWidth:C},popupRef:N,contentsObj:R},parent:{page:{pageNumber:D}}}=t;a=t={annotationType:wt.HIGHLIGHT,color:Array.from(O),thickness:C,inkLists:A,boxes:null,pageIndex:D-1,rect:x.slice(0),rotation:w,annotationElementId:T,id:T,deleted:!1,popupRef:N,comment:R?.str||null}}const{color:o,quadPoints:l,inkLists:u,opacity:h}=t,d=await super.deserialize(t,e,i);d.color=dt.makeHexColor(...o),d.#p=h||1,u&&(d.#m=t.thickness),d._initialData=a,t.comment&&d.setCommentData(t.comment);const[f,m]=d.pageDimensions,[y,b]=d.pageTranslation;if(l){const A=d.#n=[];for(let x=0;x<l.length;x+=8)A.push({x:(l[x]-y)/f,y:1-(l[x+1]-b)/m,width:(l[x+2]-l[x])/f,height:(l[x+1]-l[x+5])/m});d.#v(),d.#C(),d.rotate(d.rotation)}else if(u){d.#u=!0;const A=u[0],x={x:A[0]-y,y:m-(A[1]-b)},w=new Du(x,[0,0,f,m],1,d.#m/2,!0,.001);for(let C=0,N=A.length;C<N;C+=2)x.x=A[C]-y,x.y=m-(A[C+1]-b),w.add(x);const{id:T,clipPathId:O}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:w.toSVGPath()}},!0,!0);d.#A({highlightOutlines:w.getOutlines(),highlightId:T,clipPathId:O}),d.#C(),d.rotate(d.parentRotation)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=this.getPDFRect(),i=vt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),a={annotationType:wt.HIGHLIGHT,color:i,opacity:this.#p,thickness:this.#m,quadPoints:this.#I(),outlines:this.#k(e),pageIndex:this.pageIndex,rect:e,rotation:this.#N(),structTreeParentId:this._structTreeParentId};return this.addComment(a),this.annotationElementId&&!this.#D(a)?null:(a.id=this.annotationElementId,a)}#D(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((i,a)=>i!==e[a])}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const e={rect:this.getPDFRect()};return this.hasEditedComment&&(e.popup=this.comment),t.updateEdited(e),null}static canCreateNewEmptyEditor(){return!1}}class om{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,i)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Gt("Not implemented")}}class xt extends vt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#s=null;static#a=null;static#i=NaN;static#r=null;static#o=null;static#l=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(this.#c(t),this.#f())}#c({drawOutlines:t,drawId:e,drawingOptions:i}){this.#t=t,this._drawingOptions||=i,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#h(t.box)}#d(t,e){const{id:i}=e.drawLayer.draw(xt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(t,e){const i=new Set(Object.keys(t));for(const[a,o]of Object.entries(e))i.has(a)?Object.assign(t[a],o):t[a]=o;return t}static getDefaultDrawingOptions(t){Gt("Not implemented")}static get typesMap(){Gt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,e),this._currentParent&&(xt.#n.updateProperty(i,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[i,a]of this.typesMap)t.push([i,e[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[i,a]of this.constructor.typesMap)t.push([i,e[a]]);return t}_updateProperty(t,e,i){const a=this._drawingOptions,o=a[e],l=u=>{a.updateProperty(e,u);const h=this.#t.updateProperty(e,u);h&&this.#h(h),this.parent?.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),t===this.colorType&&this._colorPicker?.update(u)};this.addCommands({cmd:l.bind(this,i),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,xt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#g()),{bbox:this.#m()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,xt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#g()),{bbox:this.#m()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#m()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,xt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#g(),this.parentDimensions),{bbox:this.#m()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#u(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#u()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#u(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#p([t,e,i,a]){const{parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[e,1-t,i*(l/o),a*(o/l)];case 180:return[1-t,1-e,i,a];case 270:return[1-e,t,i*(l/o),a*(o/l)];default:return[t,e,i,a]}}#g(){const{x:t,y:e,width:i,height:a,parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[1-e,t,i*(o/l),a*(l/o)];case 180:return[1-t,1-e,i,a];case 270:return[e,1-t,i*(o/l),a*(l/o)];default:return[t,e,i,a]}}#h(t){if([this.x,this.y,this.width,this.height]=this.#p(t),this.div){this.fixAndSetPosition();const[e,i]=this.parentDimensions;this.setDims(this.width*e,this.height*i)}this._onResized()}#m(){const{x:t,y:e,width:i,height:a,rotation:o,parentRotation:l,parentDimensions:[u,h]}=this;switch((o*4+l)/90){case 1:return[1-e-a,t,a,i];case 2:return[1-t-i,1-e-a,i,a];case 3:return[e,1-t-i,a,i];case 4:return[t,e-i*(u/h),a*(h/u),i*(u/h)];case 5:return[1-e,t,i*(u/h),a*(h/u)];case 6:return[1-t-a*(h/u),1-e,a*(h/u),i*(u/h)];case 7:return[e-i*(u/h),1-t-a*(h/u),i*(u/h),a*(h/u)];case 8:return[t-i,e-a,i,a];case 9:return[1-e,t-i,a,i];case 10:return[1-t,1-e,i,a];case 11:return[e-a,1-t,a,i];case 12:return[t-a*(h/u),e,a*(h/u),i*(u/h)];case 13:return[1-e-i*(u/h),t-a*(h/u),i*(u/h),a*(h/u)];case 14:return[1-t,1-e-i*(u/h),a*(h/u),i*(u/h)];case 15:return[e,1-t,i*(u/h),a*(h/u)];default:return[t,e,i,a]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,xt._mergeSVGProperties({bbox:this.#m()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const i=super.render();i.classList.add("draw");const a=document.createElement("div");i.append(a),a.setAttribute("aria-hidden","true"),a.className="internal";const[o,l]=this.parentDimensions;return this.setDims(this.width*o,this.height*l),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),i}static createDrawerInstance(t,e,i,a,o){Gt("Not implemented")}static startDrawing(t,e,i,a){const{target:o,offsetX:l,offsetY:u,pointerId:h,pointerType:d}=a;if(xt.#r&&xt.#r!==d)return;const{viewport:{rotation:f}}=t,{width:m,height:y}=o.getBoundingClientRect(),b=xt.#s=new AbortController,A=t.combinedSignal(b);if(xt.#i||=h,xt.#r??=d,window.addEventListener("pointerup",x=>{xt.#i===x.pointerId?this._endDraw(x):xt.#o?.delete(x.pointerId)},{signal:A}),window.addEventListener("pointercancel",x=>{xt.#i===x.pointerId?this._currentParent.endDrawingSession():xt.#o?.delete(x.pointerId)},{signal:A}),window.addEventListener("pointerdown",x=>{xt.#r===x.pointerType&&((xt.#o||=new Set).add(x.pointerId),xt.#n.isCancellable()&&(xt.#n.removeLastElement(),xt.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:A}),window.addEventListener("contextmenu",en,{signal:A}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:A}),o.addEventListener("touchmove",x=>{x.timeStamp===xt.#l&&se(x)},{signal:A}),t.toggleDrawing(),e._editorUndoBar?.hide(),xt.#n){t.drawLayer.updateProperties(this._currentDrawId,xt.#n.startNew(l,u,m,y,f));return}e.updateUIForDefaultProperties(this),xt.#n=this.createDrawerInstance(l,u,m,y,f),xt.#a=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(xt.#a.toSVGProperties(),xt.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(xt.#l=-1,!xt.#n)return;const{offsetX:e,offsetY:i,pointerId:a}=t;if(xt.#i===a){if(xt.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,xt.#n.add(e,i)),xt.#l=t.timeStamp,se(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,xt.#n=null,xt.#a=null,xt.#r=null,xt.#l=NaN),xt.#s&&(xt.#s.abort(),xt.#s=null,xt.#i=NaN,xt.#o=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,xt.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=xt.#n,a=this._currentDrawId,o=i.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(a,i.setLastElement(o))},undo:()=>{e.drawLayer.updateProperties(a,i.removeLastElement())},mustExec:!1,type:kt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(kt.DRAW_STEP),!xt.#n.isEmpty()){const{pageDimensions:[i,a],scale:o}=e,l=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:xt.#n.getOutlines(i*o,a*o,o,this._INNER_MARGIN),drawingOptions:xt.#a,mustBeCommitted:!t});return this._cleanup(!0),l}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,i,a,o,l){Gt("Not implemented")}static async deserialize(t,e,i){const{rawDims:{pageWidth:a,pageHeight:o,pageX:l,pageY:u}}=e.viewport,h=this.deserializeDraw(l,u,a,o,this._INNER_MARGIN,t),d=await super.deserialize(t,e,i);return d.createDrawingOptions(t),d.#c({drawOutlines:h}),d.#f(),d.onScaleChanging(),d.rotate(),d}serializeDraw(t){const[e,i]=this.pageTranslation,[a,o]=this.pageDimensions;return this.#t.serialize([e,i,a,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class xb{#t=new Float64Array(6);#e;#n;#s;#a;#i;#r="";#o=0;#l=new gr;#c;#d;constructor(t,e,i,a,o,l){this.#c=i,this.#d=a,this.#s=o,this.#a=l,[t,e]=this.#u(t,e);const u=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#i=[t,e],this.#n=[{line:u,points:this.#i}],this.#t.set(u,0)}updateProperty(t,e){t==="stroke-width"&&(this.#a=e)}#u(t,e){return ht._normalizePoint(t,e,this.#c,this.#d,this.#s)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#i.length<=10}add(t,e){[t,e]=this.#u(t,e);const[i,a,o,l]=this.#t.subarray(2,6),u=t-o,h=e-l;return Math.hypot(this.#c*u,this.#d*h)<=2?null:(this.#i.push(t,e),isNaN(i)?(this.#t.set([o,l,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([i,a,o,l,t,e],0),this.#e.push(...ht.createBezierPoints(i,a,o,l,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(this.#i.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,a,o){this.#c=i,this.#d=a,this.#s=o,[t,e]=this.#u(t,e);const l=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#i=[t,e];const u=this.#n.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#n.push({line:l,points:this.#i}),this.#t.set(l,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#i=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#l.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#l.removeLastElement();this.#n.pop(),this.#r="";for(let t=0,e=this.#n.length;t<e;t++){const{line:i,points:a}=this.#n[t];this.#e=i,this.#i=a,this.#o=0,this.toSVGPath()}return{path:{d:this.#r}}}toSVGPath(){const t=ht.svgRound(this.#e[4]),e=ht.svgRound(this.#e[5]);if(this.#i.length===2)return this.#r=`${this.#r} M ${t} ${e} Z`,this.#r;if(this.#i.length<=6){const a=this.#r.lastIndexOf("M");this.#r=`${this.#r.slice(0,a)} M ${t} ${e}`,this.#o=6}if(this.#i.length===4){const a=ht.svgRound(this.#e[10]),o=ht.svgRound(this.#e[11]);return this.#r=`${this.#r} L ${a} ${o}`,this.#o=12,this.#r}const i=[];this.#o===0&&(i.push(`M ${t} ${e}`),this.#o=6);for(let a=this.#o,o=this.#e.length;a<o;a+=6){const[l,u,h,d,f,m]=this.#e.slice(a,a+6).map(ht.svgRound);i.push(`C${l} ${u} ${h} ${d} ${f} ${m}`)}return this.#r+=i.join(" "),this.#o=this.#e.length,this.#r}getOutlines(t,e,i,a){const o=this.#n.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#l.build(this.#n,t,e,i,this.#s,this.#a,a),this.#t=null,this.#e=null,this.#n=null,this.#r=null,this.#l}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class gr extends ht{#t;#e=0;#n;#s;#a;#i;#r;#o;#l;build(t,e,i,a,o,l,u){this.#a=e,this.#i=i,this.#r=a,this.#o=o,this.#l=l,this.#n=u??0,this.#s=t,this.#u()}get thickness(){return this.#l}setLastElement(t){return this.#s.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#s.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#s){if(t.push(`M${ht.svgRound(e[4])} ${ht.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${ht.svgRound(e[10])} ${ht.svgRound(e[11])}`);continue}for(let i=6,a=e.length;i<a;i+=6){const[o,l,u,h,d,f]=e.subarray(i,i+6).map(ht.svgRound);t.push(`C${o} ${l} ${u} ${h} ${d} ${f}`)}}return t.join("")}serialize([t,e,i,a],o){const l=[],u=[],[h,d,f,m]=this.#d();let y,b,A,x,w,T,O,C,N;switch(this.#o){case 0:N=ht._rescale,y=t,b=e+a,A=i,x=-a,w=t+h*i,T=e+(1-d-m)*a,O=t+(h+f)*i,C=e+(1-d)*a;break;case 90:N=ht._rescaleAndSwap,y=t,b=e,A=i,x=a,w=t+d*i,T=e+h*a,O=t+(d+m)*i,C=e+(h+f)*a;break;case 180:N=ht._rescale,y=t+i,b=e,A=-i,x=a,w=t+(1-h-f)*i,T=e+d*a,O=t+(1-h)*i,C=e+(d+m)*a;break;case 270:N=ht._rescaleAndSwap,y=t+i,b=e+a,A=-i,x=-a,w=t+(1-d-m)*i,T=e+(1-h-f)*a,O=t+(1-d)*i,C=e+(1-h)*a;break}for(const{line:R,points:D}of this.#s)l.push(N(R,y,b,A,x,o?new Array(R.length):null)),u.push(N(D,y,b,A,x,o?new Array(D.length):null));return{lines:l,points:u,rect:[w,T,O,C]}}static deserialize(t,e,i,a,o,{paths:{lines:l,points:u},rotation:h,thickness:d}){const f=[];let m,y,b,A,x;switch(h){case 0:x=ht._rescale,m=-t/i,y=e/a+1,b=1/i,A=-1/a;break;case 90:x=ht._rescaleAndSwap,m=-e/a,y=-t/i,b=1/a,A=1/i;break;case 180:x=ht._rescale,m=t/i+1,y=-e/a,b=-1/i,A=1/a;break;case 270:x=ht._rescaleAndSwap,m=e/a+1,y=t/i+1,b=-1/a,A=-1/i;break}if(!l){l=[];for(const T of u){const O=T.length;if(O===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,T[0],T[1]]));continue}if(O===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,T[0],T[1],NaN,NaN,NaN,NaN,T[2],T[3]]));continue}const C=new Float32Array(3*(O-2));l.push(C);let[N,R,D,j]=T.subarray(0,4);C.set([NaN,NaN,NaN,NaN,N,R],0);for(let _=4;_<O;_+=2){const F=T[_],$=T[_+1];C.set(ht.createBezierPoints(N,R,D,j,F,$),(_-2)*3),[N,R,D,j]=[D,j,F,$]}}}for(let T=0,O=l.length;T<O;T++)f.push({line:x(l[T].map(C=>C??NaN),m,y,b,A),points:x(u[T].map(C=>C??NaN),m,y,b,A)});const w=new this.prototype.constructor;return w.build(f,i,a,1,h,d,o),w}#c(t=this.#l){const e=this.#n+t/2*this.#r;return this.#o%180===0?[e/this.#a,e/this.#i]:[e/this.#i,e/this.#a]}#d(){const[t,e,i,a]=this.#t,[o,l]=this.#c(0);return[t+o,e+l,i-2*o,a-2*l]}#u(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:a}of this.#s){if(a.length<=12){for(let u=4,h=a.length;u<h;u+=6)dt.pointBoundingBox(a[u],a[u+1],t);continue}let o=a[4],l=a[5];for(let u=6,h=a.length;u<h;u+=6){const[d,f,m,y,b,A]=a.subarray(u,u+6);dt.bezierBoundingBox(o,l,d,f,m,y,b,A,t),o=b,l=A}}const[e,i]=this.#c();t[0]=De(t[0]-e,0,1),t[1]=De(t[1]-i,0,1),t[2]=De(t[2]+e,0,1),t[3]=De(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,i]=this.#c();this.#l=t;const[a,o]=this.#c(),[l,u]=[a-e,o-i],h=this.#t;return h[0]-=l,h[1]-=u,h[2]+=2*l,h[3]+=2*u,h}updateParentDimensions([t,e],i){const[a,o]=this.#c();this.#a=t,this.#i=e,this.#r=i;const[l,u]=this.#c(),h=l-a,d=u-o,f=this.#t;return f[0]-=h,f[1]-=d,f[2]+=2*h,f[3]+=2*d,f}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(ht.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ht.svgRound(t)} ${ht.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let i=0,a=0,o=0,l=0,u=0,h=0;switch(this.#e){case 90:a=e/t,o=-t/e,u=t;break;case 180:i=-1,l=-1,u=t,h=e;break;case 270:a=-e/t,o=t/e,h=e;break;default:return""}return`matrix(${i} ${a} ${o} ${l} ${ht.svgRound(u)} ${ht.svgRound(h)})`}getPathResizingSVGProperties([t,e,i,a]){const[o,l]=this.#c(),[u,h,d,f]=this.#t;if(Math.abs(d-o)<=ht.PRECISION||Math.abs(f-l)<=ht.PRECISION){const x=t+i/2-(u+d/2),w=e+a/2-(h+f/2);return{path:{"transform-origin":`${ht.svgRound(t)} ${ht.svgRound(e)}`,transform:`${this.rotationTransform} translate(${x} ${w})`}}}const m=(i-2*o)/(d-2*o),y=(a-2*l)/(f-2*l),b=d/i,A=f/a;return{path:{"transform-origin":`${ht.svgRound(u)} ${ht.svgRound(h)}`,transform:`${this.rotationTransform} scale(${b} ${A}) translate(${ht.svgRound(o)} ${ht.svgRound(l)}) scale(${m} ${y}) translate(${ht.svgRound(-o)} ${ht.svgRound(-l)})`}}}getPathResizedSVGProperties([t,e,i,a]){const[o,l]=this.#c(),u=this.#t,[h,d,f,m]=u;if(u[0]=t,u[1]=e,u[2]=i,u[3]=a,Math.abs(f-o)<=ht.PRECISION||Math.abs(m-l)<=ht.PRECISION){const w=t+i/2-(h+f/2),T=e+a/2-(d+m/2);for(const{line:O,points:C}of this.#s)ht._translate(O,w,T,O),ht._translate(C,w,T,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ht.svgRound(t)} ${ht.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(i-2*o)/(f-2*o),b=(a-2*l)/(m-2*l),A=-y*(h+o)+t+o,x=-b*(d+l)+e+l;if(y!==1||b!==1||A!==0||x!==0)for(const{line:w,points:T}of this.#s)ht._rescale(w,A,x,y,b,w),ht._rescale(T,A,x,y,b,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ht.svgRound(t)} ${ht.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],i){const[a,o]=i,l=this.#t,u=t-l[0],h=e-l[1];if(this.#a===a&&this.#i===o)for(const{line:d,points:f}of this.#s)ht._translate(d,u,h,d),ht._translate(f,u,h,f);else{const d=this.#a/a,f=this.#i/o;this.#a=a,this.#i=o;for(const{line:m,points:y}of this.#s)ht._rescale(m,u,h,d,f,m),ht._rescale(y,u,h,d,f,y);l[2]*=d,l[3]*=f}return l[0]=t,l[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ht.svgRound(t)} ${ht.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ht.svgRound(t[0])} ${ht.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Zo extends om{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:vt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new Zo(this._viewParameters);return t.updateAll(this),t}}class Zu extends xt{static _type="ink";static _editorType=wt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){vt.initialize(t,e),this._defaultDrawingOptions=new Zo(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return Nt(this,"typesMap",new Map([[kt.INK_THICKNESS,"stroke-width"],[kt.INK_COLOR,"stroke"],[kt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,i,a,o){return new xb(t,e,i,a,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,i,a,o,l){return gr.deserialize(t,e,i,a,o,l)}static async deserialize(t,e,i){let a=null;if(t instanceof Qu){const{data:{inkLists:l,rect:u,rotation:h,id:d,color:f,opacity:m,borderStyle:{rawWidth:y},popupRef:b,contentsObj:A},parent:{page:{pageNumber:x}}}=t;a=t={annotationType:wt.INK,color:Array.from(f),thickness:y,opacity:m,paths:{points:l},boxes:null,pageIndex:x-1,rect:u.slice(0),rotation:h,annotationElementId:d,id:d,deleted:!1,popupRef:b,comment:A?.str||null}}const o=await super.deserialize(t,e,i);return o._initialData=a,t.comment&&o.setCommentData(t.comment),o}get toolbarButtons(){return this._colorPicker||=new ir(this),[["colorPicker",this._colorPicker]]}get colorType(){return kt.INK_COLOR}get colorValue(){return this._drawingOptions.stroke}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:i}=this;e.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:i}){this._drawingOptions=Zu.getDefaultDrawingOptions({stroke:dt.makeHexColor(...t),"stroke-width":e,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:i,rect:a}=this.serializeDraw(t),{_drawingOptions:{stroke:o,"stroke-opacity":l,"stroke-width":u}}=this,h={annotationType:wt.INK,color:vt._colorManager.convert(o),opacity:l,thickness:u,paths:{lines:e,points:i},pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(h),t?(h.isCopy=!0,h):this.annotationElementId&&!this.#t(h)?null:(h.id=this.annotationElementId,h)}#t(t){const{color:e,thickness:i,opacity:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,u)=>l!==e[u])||t.thickness!==i||t.opacity!==a||t.pageIndex!==o}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:i}=this.serializeDraw(!1),a={rect:i,thickness:this._drawingOptions["stroke-width"],points:e};return this.hasEditedComment&&(a.popup=this.comment),t.updateEdited(a),null}}class Lu extends gr{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const _o=8,Qa=3;class Gs{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,i,a){return i-=t,a-=e,i===0?a>0?0:4:i===1?a+6:2-a}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#s(t,e,i,a,o,l,u){const h=this.#e(i,a,o,l);for(let d=0;d<8;d++){const f=(-d+h-u+16)%8,m=this.#n[2*f],y=this.#n[2*f+1];if(t[(i+m)*e+(a+y)]!==0)return f}return-1}static#a(t,e,i,a,o,l,u){const h=this.#e(i,a,o,l);for(let d=0;d<8;d++){const f=(d+h+u+16)%8,m=this.#n[2*f],y=this.#n[2*f+1];if(t[(i+m)*e+(a+y)]!==0)return f}return-1}static#i(t,e,i,a){const o=t.length,l=new Int32Array(o);for(let f=0;f<o;f++)l[f]=t[f]<=a?1:0;for(let f=1;f<i-1;f++)l[f*e]=l[f*e+e-1]=0;for(let f=0;f<e;f++)l[f]=l[e*i-1-f]=0;let u=1,h;const d=[];for(let f=1;f<i-1;f++){h=1;for(let m=1;m<e-1;m++){const y=f*e+m,b=l[y];if(b===0)continue;let A=f,x=m;if(b===1&&l[y-1]===0)u+=1,x-=1;else if(b>=1&&l[y+1]===0)u+=1,x+=1,b>1&&(h=b);else{b!==1&&(h=Math.abs(b));continue}const w=[m,f],T=x===m+1,O={isHole:T,points:w,id:u,parent:0};d.push(O);let C;for(const X of d)if(X.id===h){C=X;break}C?C.isHole?O.parent=T?C.parent:h:O.parent=T?h:C.parent:O.parent=T?h:0;const N=this.#s(l,e,f,m,A,x,0);if(N===-1){l[y]=-u,l[y]!==1&&(h=Math.abs(l[y]));continue}let R=this.#n[2*N],D=this.#n[2*N+1];const j=f+R,_=m+D;A=j,x=_;let F=f,$=m;for(;;){const X=this.#a(l,e,F,$,A,x,1);R=this.#n[2*X],D=this.#n[2*X+1];const at=F+R,V=$+D;w.push(V,at);const J=F*e+$;if(l[J+1]===0?l[J]=-u:l[J]===1&&(l[J]=u),at===f&&V===m&&F===j&&$===_){l[y]!==1&&(h=Math.abs(l[y]));break}else A=F,x=$,F=at,$=V}}}return d}static#r(t,e,i,a){if(i-e<=4){for(let j=e;j<i-2;j+=2)a.push(t[j],t[j+1]);return}const o=t[e],l=t[e+1],u=t[i-4]-o,h=t[i-3]-l,d=Math.hypot(u,h),f=u/d,m=h/d,y=f*l-m*o,b=h/u,A=1/d,x=Math.atan(b),w=Math.cos(x),T=Math.sin(x),O=A*(Math.abs(w)+Math.abs(T)),C=A*(1-O+O**2),N=Math.max(Math.atan(Math.abs(T+w)*C),Math.atan(Math.abs(T-w)*C));let R=0,D=e;for(let j=e+2;j<i-2;j+=2){const _=Math.abs(y-f*t[j+1]+m*t[j]);_>R&&(D=j,R=_)}R>(d*N)**2?(this.#r(t,e,D+2,a),this.#r(t,D,i,a)):a.push(o,l)}static#o(t){const e=[],i=t.length;return this.#r(t,0,i,e),e.push(t[i-2],t[i-1]),e.length<=4?null:e}static#l(t,e,i,a,o,l){const u=new Float32Array(l**2),h=-2*a**2,d=l>>1;for(let x=0;x<l;x++){const w=(x-d)**2;for(let T=0;T<l;T++)u[x*l+T]=Math.exp((w+(T-d)**2)/h)}const f=new Float32Array(256),m=-2*o**2;for(let x=0;x<256;x++)f[x]=Math.exp(x**2/m);const y=t.length,b=new Uint8Array(y),A=new Uint32Array(256);for(let x=0;x<i;x++)for(let w=0;w<e;w++){const T=x*e+w,O=t[T];let C=0,N=0;for(let D=0;D<l;D++){const j=x+D-d;if(!(j<0||j>=i))for(let _=0;_<l;_++){const F=w+_-d;if(F<0||F>=e)continue;const $=t[j*e+F],X=u[D*l+_]*f[Math.abs($-O)];C+=$*X,N+=X}}const R=b[T]=Math.round(C/N);A[R]++}return[b,A]}static#c(t){const e=new Uint32Array(256);for(const i of t)e[i]++;return e}static#d(t){const e=t.length,i=new Uint8ClampedArray(e>>2);let a=-1/0,o=1/0;for(let u=0,h=i.length;u<h;u++){const d=i[u]=t[u<<2];a=Math.max(a,d),o=Math.min(o,d)}const l=255/(a-o);for(let u=0,h=i.length;u<h;u++)i[u]=(i[u]-o)*l;return i}static#u(t){let e,i=-1/0,a=-1/0;const o=t.findIndex(h=>h!==0);let l=o,u=o;for(e=o;e<256;e++){const h=t[e];h>i&&(e-l>a&&(a=e-l,u=e-1),i=h,l=e)}for(e=u-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:i,height:a}=t,{maxDim:o}=this.#t;let l=i,u=a;if(i>o||a>o){let y=i,b=a,A=Math.log2(Math.max(i,a)/o);const x=Math.floor(A);A=A===x?x-1:x;for(let T=0;T<A;T++){l=Math.ceil(y/2),u=Math.ceil(b/2);const O=new OffscreenCanvas(l,u);O.getContext("2d").drawImage(t,0,0,y,b,0,0,l,u),y=l,b=u,t!==e&&t.close(),t=O.transferToImageBitmap()}const w=Math.min(o/l,o/u);l=Math.round(l*w),u=Math.round(u*w)}const d=new OffscreenCanvas(l,u).getContext("2d",{willReadFrequently:!0});d.fillStyle="white",d.fillRect(0,0,l,u),d.filter="grayscale(1)",d.drawImage(t,0,0,t.width,t.height,0,0,l,u);const f=d.getImageData(0,0,l,u).data;return[this.#d(f),l,u]}static extractContoursFromText(t,{fontFamily:e,fontStyle:i,fontWeight:a},o,l,u,h){let d=new OffscreenCanvas(1,1),f=d.getContext("2d",{alpha:!1});const m=200,y=f.font=`${i} ${a} ${m}px ${e}`,{actualBoundingBoxLeft:b,actualBoundingBoxRight:A,actualBoundingBoxAscent:x,actualBoundingBoxDescent:w,fontBoundingBoxAscent:T,fontBoundingBoxDescent:O,width:C}=f.measureText(t),N=1.5,R=Math.ceil(Math.max(Math.abs(b)+Math.abs(A)||0,C)*N),D=Math.ceil(Math.max(Math.abs(x)+Math.abs(w)||m,Math.abs(T)+Math.abs(O)||m)*N);d=new OffscreenCanvas(R,D),f=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=y,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,R,D),f.fillStyle="black",f.fillText(t,R*(N-1)/2,D*(3-N)/2);const j=this.#d(f.getImageData(0,0,R,D).data),_=this.#c(j),F=this.#u(_),$=this.#i(j,R,D,F);return this.processDrawnLines({lines:{curves:$,width:R,height:D},pageWidth:o,pageHeight:l,rotation:u,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(t,e,i,a,o){const[l,u,h]=this.#f(t),[d,f]=this.#l(l,u,h,Math.hypot(u,h)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),m=this.#u(f),y=this.#i(d,u,h,m);return this.processDrawnLines({lines:{curves:y,width:u,height:h},pageWidth:e,pageHeight:i,rotation:a,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:a,innerMargin:o,mustSmooth:l,areContours:u}){a%180!==0&&([e,i]=[i,e]);const{curves:h,width:d,height:f}=t,m=t.thickness??0,y=[],b=Math.min(e/d,i/f),A=b/e,x=b/i,w=[];for(const{points:O}of h){const C=l?this.#o(O):O;if(!C)continue;w.push(C);const N=C.length,R=new Float32Array(N),D=new Float32Array(3*(N===2?2:N-2));if(y.push({line:D,points:R}),N===2){R[0]=C[0]*A,R[1]=C[1]*x,D.set([NaN,NaN,NaN,NaN,R[0],R[1]],0);continue}let[j,_,F,$]=C;j*=A,_*=x,F*=A,$*=x,R.set([j,_,F,$],0),D.set([NaN,NaN,NaN,NaN,j,_],0);for(let X=4;X<N;X+=2){const at=R[X]=C[X]*A,V=R[X+1]=C[X+1]*x;D.set(ht.createBezierPoints(j,_,F,$,at,V),(X-2)*3),[j,_,F,$]=[F,$,at,V]}}if(y.length===0)return null;const T=u?new Lu:new gr;return T.build(y,e,i,1,a,u?0:m,o),{outline:T,newCurves:w,areContours:u,thickness:m,width:d,height:f}}static async compressSignature({outlines:t,areContours:e,thickness:i,width:a,height:o}){let l=1/0,u=-1/0,h=0;for(const C of t){h+=C.length;for(let N=2,R=C.length;N<R;N++){const D=C[N]-C[N-2];l=Math.min(l,D),u=Math.max(u,D)}}let d;l>=-128&&u<=127?d=Int8Array:l>=-32768&&u<=32767?d=Int16Array:d=Int32Array;const f=t.length,m=_o+Qa*f,y=new Uint32Array(m);let b=0;y[b++]=m*Uint32Array.BYTES_PER_ELEMENT+(h-2*f)*d.BYTES_PER_ELEMENT,y[b++]=0,y[b++]=a,y[b++]=o,y[b++]=e?0:1,y[b++]=Math.max(0,Math.floor(i??0)),y[b++]=f,y[b++]=d.BYTES_PER_ELEMENT;for(const C of t)y[b++]=C.length-2,y[b++]=C[0],y[b++]=C[1];const A=new CompressionStream("deflate-raw"),x=A.writable.getWriter();await x.ready,x.write(y);const w=d.prototype.constructor;for(const C of t){const N=new w(C.length-2);for(let R=2,D=C.length;R<D;R++)N[R-2]=C[R]-C[R-2];x.write(N)}x.close();const T=await new Response(A.readable).arrayBuffer(),O=new Uint8Array(T);return Dp(O)}static async decompressSignature(t){try{const e=Wv(t),{readable:i,writable:a}=new DecompressionStream("deflate-raw"),o=a.getWriter();await o.ready,o.write(e).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let l=null,u=0;for await(const C of i)l||=new Uint8Array(new Uint32Array(C.buffer,0,4)[0]),l.set(C,u),u+=C.length;const h=new Uint32Array(l.buffer,0,l.length>>2),d=h[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const f=h[2],m=h[3],y=h[4]===0,b=h[5],A=h[6],x=h[7],w=[],T=(_o+Qa*A)*Uint32Array.BYTES_PER_ELEMENT;let O;switch(x){case Int8Array.BYTES_PER_ELEMENT:O=new Int8Array(l.buffer,T);break;case Int16Array.BYTES_PER_ELEMENT:O=new Int16Array(l.buffer,T);break;case Int32Array.BYTES_PER_ELEMENT:O=new Int32Array(l.buffer,T);break}u=0;for(let C=0;C<A;C++){const N=h[Qa*C+_o],R=new Float32Array(N+2);w.push(R);for(let D=0;D<Qa-1;D++)R[D]=h[Qa*C+_o+D+1];for(let D=0;D<N;D++)R[D+2]=R[D]+O[u++]}return{areContours:y,thickness:b,outlines:w,width:f,height:m}}catch(e){return Et(`decompressSignature: ${e}`),null}}}class Ju extends om{constructor(){super(),super.updateProperties({fill:vt._defaultLineColor,"stroke-width":0})}clone(){const t=new Ju;return t.updateAll(this),t}}class qu extends Zo{constructor(t){super(t),super.updateProperties({stroke:vt._defaultLineColor,"stroke-width":1})}clone(){const t=new qu(this._viewParameters);return t.updateAll(this),t}}class Mn extends xt{#t=!1;#e=null;#n=null;#s=null;static _type="signature";static _editorType=wt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){vt.initialize(t,e),this._defaultDrawingOptions=new Ju,this._defaultDrawnSignatureOptions=new qu(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return Nt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:a,mustSmooth:o,areContours:l,description:u,uuid:h,heightInPage:d}=this.#n,{rawDims:{pageWidth:f,pageHeight:m},rotation:y}=this.parent.viewport,b=Gs.processDrawnLines({lines:a,pageWidth:f,pageHeight:m,rotation:y,innerMargin:Mn._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(b,d,u,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#s=t,this.addEditToolbar()}getUuid(){return this.#s}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:i,width:a,height:o}=this.#n,l=Math.max(a,o),u=Gs.processDrawnLines({lines:{curves:t.map(h=>({points:h})),thickness:i,width:a,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,i,a){const{x:o,y:l}=this,{outline:u}=this.#n=t;this.#t=u instanceof Lu,this.description=i;let h;this.#t?h=Mn.getDefaultDrawingOptions():(h=Mn._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:h});const[d,f]=this.parentDimensions,[,m]=this.pageDimensions;let y=e/m;y=y>=1?.5:y,this.width*=y/this.height,this.width>=1&&(y*=.9/this.width,this.width=.9),this.height=y,this.setDims(d*this.width,f*this.height),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:a}=this.parent.viewport;return Gs.process(t,e,i,a,Mn._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:i,pageHeight:a},rotation:o}=this.parent.viewport;return Gs.extractContoursFromText(t,e,i,a,o,Mn._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:a}=this.parent.viewport;return Gs.processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:a,innerMargin:Mn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=Mn.getDefaultDrawingOptions():(this._drawingOptions=Mn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:i,rect:a}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":o}}=this,l={annotationType:wt.SIGNATURE,isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:o,pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(l),t?(l.paths={lines:e,points:i},l.uuid=this.#s,l.isCopy=!0):l.lines=e,this.#e&&(l.accessibilityData={type:"Figure",alt:this.#e}),l}static deserializeDraw(t,e,i,a,o,l){return l.areContours?Lu.deserialize(t,e,i,a,o,l):gr.deserialize(t,e,i,a,o,l)}static async deserialize(t,e,i){const a=await super.deserialize(t,e,i);return a.#t=t.areContours,a.description=t.accessibilityData?.alt||"",a.#s=t.uuid,a}}class Ab extends vt{#t=null;#e=null;#n=null;#s=null;#a=null;#i="";#r=null;#o=!1;#l=null;#c=!1;#d=!1;static _type="stamp";static _editorType=wt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#s=t.bitmapUrl,this.#a=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){vt.initialize(t,e)}static isHandlingMimeForPasting(t){return Ho.includes(t)}static paste(t,e){e.pasteEditor({mode:wt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#u(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#c=t.isSvg),t.file&&(this.#i=t.file.name),this.#g()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#r){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,u=await i.guess({name:"altText",request:{data:a,width:o,height:l,channels:a.length/(o*l)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const h=u.output;return await this.setGuessedAltText(h),e&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#p(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(i=>this.#u(i,!0)).finally(()=>this.#f());return}if(this.#s){const i=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(i).then(a=>this.#u(a)).finally(()=>this.#f());return}if(this.#a){const i=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(i).then(a=>this.#u(a)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=Ho.join(",");const e=this._uiManager._signal;this.#n=new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#u(a)}i()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#r?.remove(),this.#r=null,this.#l&&(clearTimeout(this.#l),this.#l=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#p();return}super.rebuild(),this.div!==null&&(this.#e&&this.#r===null&&this.#p(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#s||this.#a||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#g():this.#p()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:i,bitmap:a}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(this.#e=i,a&&(this.#t=a),this.#o=!1,this.#g())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#l!==null&&clearTimeout(this.#l);const t=200;this.#l=setTimeout(()=>{this.#l=null,this.#m()},t)}#g(){const{div:t}=this;let{width:e,height:i}=this.#t;const[a,o]=this.pageDimensions,l=.75;if(this.width)e=this.width*a,i=this.height*o;else if(e>l*a||i>l*o){const f=Math.min(l*a/e,l*o/i);e*=f,i*=f}const[u,h]=this.parentDimensions;this.setDims(e*u/a,i*h/o),this._uiManager.enableWaiting(!1);const d=this.#r=document.createElement("canvas");d.setAttribute("role","img"),this.addContainer(d),this.width=e/a,this.height=i/o,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#m(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#i&&this.div.setAttribute("aria-description",this.#i),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,i=!1){t||(t=224);const{width:a,height:o}=this.#t,l=new yn;let u=this.#t,h=a,d=o,f=null;if(e){if(a>e||o>e){const D=Math.min(e/a,e/o);h=Math.floor(a*D),d=Math.floor(o*D)}f=document.createElement("canvas");const y=f.width=Math.ceil(h*l.sx),b=f.height=Math.ceil(d*l.sy);this.#c||(u=this.#h(y,b));const A=f.getContext("2d");A.filter=this._uiManager.hcmFilter;let x="white",w="#cfcfd8";this._uiManager.hcmFilter!=="none"?w="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(x="#8f8f9d",w="#42414d");const T=15,O=T*l.sx,C=T*l.sy,N=new OffscreenCanvas(O*2,C*2),R=N.getContext("2d");R.fillStyle=x,R.fillRect(0,0,O*2,C*2),R.fillStyle=w,R.fillRect(0,0,O,C),R.fillRect(O,C,O,C),A.fillStyle=A.createPattern(N,"repeat"),A.fillRect(0,0,y,b),A.drawImage(u,0,0,u.width,u.height,0,0,y,b)}let m=null;if(i){let y,b;if(l.symmetric&&u.width<t&&u.height<t)y=u.width,b=u.height;else if(u=this.#t,a>t||o>t){const w=Math.min(t/a,t/o);y=Math.floor(a*w),b=Math.floor(o*w),this.#c||(u=this.#h(y,b))}const x=new OffscreenCanvas(y,b).getContext("2d",{willReadFrequently:!0});x.drawImage(u,0,0,u.width,u.height,0,0,y,b),m={width:y,height:b,data:x.getImageData(0,0,y,b).data}}return{canvas:f,width:h,height:d,imageData:m}}#h(t,e){const{width:i,height:a}=this.#t;let o=i,l=a,u=this.#t;for(;o>2*t||l>2*e;){const h=o,d=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const f=new OffscreenCanvas(o,l);f.getContext("2d").drawImage(u,0,0,h,d,0,0,o,l),u=f.transferToImageBitmap()}return u}#m(){const[t,e]=this.parentDimensions,{width:i,height:a}=this,o=new yn,l=Math.ceil(i*t*o.sx),u=Math.ceil(a*e*o.sy),h=this.#r;if(!h||h.width===l&&h.height===u)return;h.width=l,h.height=u;const d=this.#c?this.#t:this.#h(l,u),f=h.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(d,0,0,d.width,d.height,0,0,l,u)}#b(t){if(t){if(this.#c){const a=this._uiManager.imageManager.getSvgUrl(this.#e);if(a)return a}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#c){const[e,i]=this.pageDimensions,a=Math.round(this.width*e*Ws.PDF_TO_CSS_UNITS),o=Math.round(this.height*i*Ws.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(a,o);return l.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,a,o),l.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,i){let a=null,o=!1;if(t instanceof am){const{data:{rect:x,rotation:w,id:T,structParent:O,popupRef:C,contentsObj:N},container:R,parent:{page:{pageNumber:D}},canvas:j}=t;let _,F;j?(delete t.canvas,{id:_,bitmap:F}=i.imageManager.getFromCanvas(R.id,j),j.remove()):(o=!0,t._hasNoCanvas=!0);const $=(await e._structTree.getAriaAttributes(`${Bu}${T}`))?.get("aria-label")||"";a=t={annotationType:wt.STAMP,bitmapId:_,bitmap:F,pageIndex:D-1,rect:x.slice(0),rotation:w,annotationElementId:T,id:T,deleted:!1,accessibilityData:{decorative:!1,altText:$},isSvg:!1,structParent:O,popupRef:C,comment:N?.str||null}}const l=await super.deserialize(t,e,i),{rect:u,bitmap:h,bitmapUrl:d,bitmapId:f,isSvg:m,accessibilityData:y}=t;o?(i.addMissingCanvas(t.id,l),l.#o=!0):f&&i.imageManager.isValidId(f)?(l.#e=f,h&&(l.#t=h)):l.#s=d,l.#c=m;const[b,A]=l.pageDimensions;return l.width=(u[2]-u[0])/b,l.height=(u[3]-u[1])/A,y&&(l.altTextData=y),l._initialData=a,t.comment&&l.setCommentData(t.comment),l.#d=!!a,l}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:wt.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(this.addComment(i),t)return i.bitmapUrl=this.#b(!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:a,altText:o}=this.serializeAltText(!1);if(!a&&o&&(i.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=this.#v(i);if(u.isSame)return null;u.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,e===null)return i;e.stamps||=new Map;const l=this.#c?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:l,serialized:i}),i.bitmap=this.#b(!1);else if(this.#c){const u=e.stamps.get(this.#e);l>u.area&&(u.area=l,u.serialized.bitmap.close(),u.serialized.bitmap=this.#b(!1))}return i}#v(t){const{pageIndex:e,accessibilityData:{altText:i}}=this._initialData,a=t.pageIndex===e,o=(t.accessibilityData?.alt||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&o,isSameAltText:o}}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const e={rect:this.getPDFRect()};return this.hasEditedComment&&(e.popup=this.comment),t.updateEdited(e),null}}class On{#t;#e=!1;#n=null;#s=null;#a=null;#i=new Map;#r=!1;#o=!1;#l=!1;#c=null;#d=null;#u=null;#f=null;#p=null;#g=-1;#h;static _initialized=!1;static#m=new Map([ve,Zu,Ab,ne,Mn].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:a,accessibilityManager:o,annotationLayer:l,drawLayer:u,textLayer:h,viewport:d,l10n:f}){const m=[...On.#m.values()];if(!On._initialized){On._initialized=!0;for(const y of m)y.initialize(f,t)}t.registerEditorTypes(m),this.#h=t,this.pageIndex=e,this.div=i,this.#t=o,this.#n=l,this.viewport=d,this.#u=h,this.drawLayer=u,this._structTree=a,this.#h.addLayer(this)}get isEmpty(){return this.#i.size===0}get isInvisible(){return this.isEmpty&&this.#h.getMode()===wt.NONE}updateToolbar(t){this.#h.updateToolbar(t)}updateMode(t=this.#h.getMode()){switch(this.#y(),t){case wt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case wt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case wt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const i of On.#m.values())e.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#u?.div}setEditingState(t){this.#h.setEditingState(t)}addCommands(t){this.#h.addCommands(t)}cleanUndoStack(t){this.#h.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.div.classList.toggle("disabled",!t)}async enable(){this.#l=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.#p?.abort(),this.#p=null;const t=new Set;for(const i of this.#i.values())i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#h.removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!this.#n){this.#l=!1;return}const e=this.#n.getEditableAnnotations();for(const i of e){if(i.hide(),this.#h.isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const a=await this.deserialize(i);a&&(this.addOrRebuild(a),a.enableEditing())}this.#l=!1}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.#u&&!this.#p){this.#p=new AbortController;const a=this.#h.combinedSignal(this.#p);this.#u.div.addEventListener("pointerdown",o=>{const{clientX:u,clientY:h,timeStamp:d}=o,f=this.#g;if(d-f>500){this.#g=d;return}this.#g=-1;const{classList:m}=this.div;m.toggle("getElements",!0);const y=document.elementsFromPoint(u,h);if(m.toggle("getElements",!1),!this.div.contains(y[0]))return;let b;const A=new RegExp(`^${Cp}[0-9]+$`);for(const w of y)if(A.test(w.id)){b=w.id;break}if(!b)return;const x=this.#i.get(b);x?.annotationElementId===null&&(o.stopPropagation(),o.preventDefault(),x.dblclick())},{signal:a,capture:!0})}const t=new Map,e=new Map;for(const a of this.#i.values())if(a.disableEditing(),!!a.annotationElementId){if(a.serialize()!==null){t.set(a.annotationElementId,a);continue}else e.set(a.annotationElementId,a);this.getEditableAnnotation(a.annotationElementId)?.show(),a.remove()}if(this.#n){const a=this.#n.getEditableAnnotations();for(const o of a){const{id:l}=o.data;if(this.#h.isDeletedAnnotationElement(l)){o.updateEdited({deleted:!0});continue}let u=e.get(l);if(u){u.resetAnnotationElement(o),u.show(!1),o.show();continue}u=t.get(l),u&&(this.#h.addChangedExistingAnnotation(u),u.renderAnnotationElement(o)&&u.show(!1)),o.show()}}this.#y(),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const a of On.#m.values())i.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#h.getActive()!==t&&this.#h.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#u?.div&&!this.#f){this.#f=new AbortController;const t=this.#h.combinedSignal(this.#f);this.#u.div.addEventListener("pointerdown",this.#b.bind(this),{signal:t}),this.#u.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#u?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#u.div.classList.remove("highlighting"))}#b(t){this.#h.unselectAll();const{target:e}=t;if(e===this.#u.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#u.div.contains(e)){const{isMac:i}=be.platform;if(t.button!==0||t.ctrlKey&&i)return;this.#h.showAllEditors("highlight",!0,!0),this.#u.div.classList.add("free"),this.toggleDrawing(),ne.startHighlighting(this,this.#h.direction==="ltr",{target:this.#u.div,x:t.x,y:t.y}),this.#u.div.addEventListener("pointerup",()=>{this.#u.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#h._signal}),t.preventDefault()}}enableClick(){if(this.#s)return;this.#s=new AbortController;const t=this.#h.combinedSignal(this.#s);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#s?.abort(),this.#s=null}attach(t){this.#i.set(t.id,t);const{annotationElementId:e}=t;e&&this.#h.isDeletedAnnotationElement(e)&&this.#h.removeDeletedAnnotationElement(t)}detach(t){this.#i.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#h.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#h.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#h.addDeletedAnnotationElement(t.annotationElementId),vt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#h.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#l),this.#h.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#a&&(t._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#h._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getNextId(){return this.#h.getId()}get#v(){return On.#m.get(this.#h.getMode())}combinedSignal(t){return this.#h.combinedSignal(t)}#A(t){const e=this.#v;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#v?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#h.updateMode(t.mode);const{offsetX:i,offsetY:a}=this.#S(),o=this.getNextId(),l=this.#A({parent:this,id:o,x:i,y:a,uiManager:this.#h,isCentered:!0,...e});l&&this.add(l)}async deserialize(t){return await On.#m.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#h)||null}createAndAddNewEditor(t,e,i={}){const a=this.getNextId(),o=this.#A({parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:this.#h,isCentered:e,...i});return o&&this.add(o),o}#S(){const{x:t,y:e,width:i,height:a}=this.div.getBoundingClientRect(),o=Math.max(0,t),l=Math.max(0,e),u=Math.min(window.innerWidth,t+i),h=Math.min(window.innerHeight,e+a),d=(o+u)/2-t,f=(l+h)/2-e,[m,y]=this.viewport.rotation%180===0?[d,f]:[f,d];return{offsetX:m,offsetY:y}}addNewEditor(t={}){this.createAndAddNewEditor(this.#S(),!0,t)}setSelected(t){this.#h.setSelected(t)}toggleSelected(t){this.#h.toggleSelected(t)}unselect(t){this.#h.unselect(t)}pointerup(t){const{isMac:e}=be.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#r||(this.#r=!1,this.#v?.isDrawer&&this.#v.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const i=this.#h.getMode();if(i===wt.STAMP||i===wt.SIGNATURE){this.#h.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#h.getMode()===wt.HIGHLIGHT&&this.enableTextSelection(),this.#r){this.#r=!1;return}const{isMac:e}=be.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#r=!0,this.#v?.isDrawer){this.startDrawingSession(t);return}const i=this.#h.getActive();this.#e=!i||i.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#c){this.#v.startDrawing(this,this.#h,!1,t);return}this.#h.setCurrentDrawingSession(this),this.#c=new AbortController;const e=this.#h.combinedSignal(this.#c);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#v.startDrawing(this,this.#h,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#c?(this.#h.setCurrentDrawingSession(null),this.#c.abort(),this.#c=null,this.#d=null,this.#v.endDrawing(t)):null}findNewParent(t,e,i){const a=this.#h.findParent(e,i);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return this.#c?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#c&&this.#v.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#h.getActive()?.parent===this&&(this.#h.commitOrRemove(),this.#h.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const t of this.#i.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#i.clear(),this.#h.removeLayer(this)}#y(){for(const t of this.#i.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Es(this.div,t);for(const e of this.#h.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#h.commitOrRemove(),this.#y();const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,Es(this.div,{rotation:i}),e!==i)for(const a of this.#i.values())a.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#h.viewParameters.realScale}}class ye{#t=null;#e=new Map;#n=new Map;static#s=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return Nt(this,"_svgFactory",new ar)}static#a(t,[e,i,a,o]){const{style:l}=t;l.top=`${100*i}%`,l.left=`${100*e}%`,l.width=`${100*a}%`,l.height=`${100*o}%`}#i(){const t=ye._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#r(t,e){const i=ye._svgFactory.createElement("clipPath");t.append(i);const a=`clip_${e}`;i.setAttribute("id",a),i.setAttribute("clipPathUnits","objectBoundingBox");const o=ye._svgFactory.createElement("use");return i.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),a}#o(t,e){for(const[i,a]of Object.entries(e))a===null?t.removeAttribute(i):t.setAttribute(i,a)}draw(t,e=!1,i=!1){const a=ye.#s++,o=this.#i(),l=ye._svgFactory.createElement("defs");o.append(l);const u=ye._svgFactory.createElement("path");l.append(u);const h=`path_p${this.pageIndex}_${a}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#n.set(a,u);const d=i?this.#r(l,h):null,f=ye._svgFactory.createElement("use");return o.append(f),f.setAttribute("href",`#${h}`),this.updateProperties(o,t),this.#e.set(a,o),{id:a,clipPathId:`url(#${d})`}}drawOutline(t,e){const i=ye.#s++,a=this.#i(),o=ye._svgFactory.createElement("defs");a.append(o);const l=ye._svgFactory.createElement("path");o.append(l);const u=`path_p${this.pageIndex}_${i}`;l.setAttribute("id",u),l.setAttribute("vector-effect","non-scaling-stroke");let h;if(e){const m=ye._svgFactory.createElement("mask");o.append(m),h=`mask_p${this.pageIndex}_${i}`,m.setAttribute("id",h),m.setAttribute("maskUnits","objectBoundingBox");const y=ye._svgFactory.createElement("rect");m.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const b=ye._svgFactory.createElement("use");m.append(b),b.setAttribute("href",`#${u}`),b.setAttribute("stroke","none"),b.setAttribute("fill","black"),b.setAttribute("fill-rule","nonzero"),b.classList.add("mask")}const d=ye._svgFactory.createElement("use");a.append(d),d.setAttribute("href",`#${u}`),h&&d.setAttribute("mask",`url(#${h})`);const f=d.cloneNode();return a.append(f),d.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(a,t),this.#e.set(i,a),i}finalizeDraw(t,e){this.#n.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:i,bbox:a,rootClass:o,path:l}=e,u=typeof t=="number"?this.#e.get(t):t;if(u){if(i&&this.#o(u,i),a&&ye.#a(u,a),o){const{classList:h}=u;for(const[d,f]of Object.entries(o))h.toggle(d,f)}if(l){const d=u.firstChild.firstChild;this.#o(d,l)}}}updateParent(t,e){if(e===this)return;const i=this.#e.get(t);i&&(e.#t.append(i),this.#e.delete(t),e.#e.set(t,i))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Ou};globalThis.pdfjsLib={AbortException:Qn,AnnotationEditorLayer:On,AnnotationEditorParamsType:kt,AnnotationEditorType:wt,AnnotationEditorUIManager:Zn,AnnotationLayer:Qo,AnnotationMode:Kn,AnnotationType:ee,build:tm,ColorPicker:qe,createValidAbsoluteUrl:Iu,DOMSVGFactory:ar,DrawLayer:ye,FeatureTest:be,fetchData:Xi,getDocument:Zp,getFilenameFromUrl:Lp,getPdfFilenameFromUrl:kp,getRGB:ur,getUuid:_u,getXfaPageViewport:Pp,GlobalWorkerOptions:Dn,ImageKind:tr,InvalidPDFException:zo,isDataScheme:cr,isPdfFile:Wo,isValidExplicitDest:Bp,MathClamp:De,noContextMenu:en,normalizeUnicode:Op,OPS:Vi,OutputScale:yn,PasswordResponses:Mp,PDFDataRangeTransport:Xu,PDFDateString:Uo,PDFWorker:Yi,PermissionFlag:Rp,PixelsPerInch:Ws,RenderingCancelledException:$o,ResponseException:nr,setLayerDimensions:Es,shadow:Nt,SignatureExtractor:Gs,stopEvent:se,SupportedImageMimeTypes:Ho,TextLayer:Oe,TouchManager:dr,updateUrlHash:ju,Util:dt,VerbosityLevel:rr,version:$u,XfaLayer:Wu};const ku=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Qn,AnnotationEditorLayer:On,AnnotationEditorParamsType:kt,AnnotationEditorType:wt,AnnotationEditorUIManager:Zn,AnnotationLayer:Qo,AnnotationMode:Kn,AnnotationType:ee,ColorPicker:qe,DOMSVGFactory:ar,DrawLayer:ye,FeatureTest:be,GlobalWorkerOptions:Dn,ImageKind:tr,InvalidPDFException:zo,MathClamp:De,OPS:Vi,OutputScale:yn,PDFDataRangeTransport:Xu,PDFDateString:Uo,PDFWorker:Yi,PasswordResponses:Mp,PermissionFlag:Rp,PixelsPerInch:Ws,RenderingCancelledException:$o,ResponseException:nr,SignatureExtractor:Gs,SupportedImageMimeTypes:Ho,TextLayer:Oe,TouchManager:dr,Util:dt,VerbosityLevel:rr,XfaLayer:Wu,build:tm,createValidAbsoluteUrl:Iu,fetchData:Xi,getDocument:Zp,getFilenameFromUrl:Lp,getPdfFilenameFromUrl:kp,getRGB:ur,getUuid:_u,getXfaPageViewport:Pp,isDataScheme:cr,isPdfFile:Wo,isValidExplicitDest:Bp,noContextMenu:en,normalizeUnicode:Op,setLayerDimensions:Es,shadow:Nt,stopEvent:se,updateUrlHash:ju,version:$u},Symbol.toStringTag,{value:"Module"}));if(typeof window<"u"){const g="/course-routine-planner/",t=window.location.href.includes("github.io");console.log("PDF.js worker initialization:"),console.log("- Base URL:",g),console.log("- Is GitHub Pages:",t),console.log("- PDF.js version:",$u),t?(Dn.workerSrc="https://cdn.jsdelivr.net/npm/pdfjs-dist@5.4.149/legacy/build/pdf.worker.min.mjs",console.log("- Using CDN worker source:",Dn.workerSrc)):(Dn.workerSrc=`${g}pdf.worker.min.js`,console.log("- Using local worker source:",Dn.workerSrc))}function Sb(g){const t=[];let i=g.replace(/\n/g," ").replace(/United\s+International\s+University.*?Credit\s+/g,"");i=i.replace(/CLASS\s+ROUTINE\s+252.*?monir@admin\.uiu,ac\.bd/g,"");const a=/(\d+)\s+(BSCSE|BSDS)\s+[A-Z]{2,4}\s+\d{4}/g,o=[];let l;for(;(l=a.exec(i))!==null;)o.push({sl:parseInt(l[1]),start:l.index,fullMatch:l[0]});const u=[];for(let h=0;h<o.length;h++){const d=o[h].start,f=h<o.length-1?o[h+1].start:i.length,m=i.substring(d,f);u.push(m.trim())}if(!u)return t;for(const h of u){const f=h.trim().split(/\s+/);let m=0;const y=parseInt(f[m++]);if(isNaN(y))continue;const b=f[m++]||"",A=f[m++]||"",x=f[m++]||"",w=`${A} ${x}`;let T="",O=-1;for(let L=m;L<f.length;L++){const P=f[L];if(/^[A-Z]{1,2}$/.test(P)||P.startsWith("A(If")||P.startsWith("B(If")||P.startsWith("C(If")||P.startsWith("D(If")||P.startsWith("E(If")||P.startsWith("F(If")||P.startsWith("G(If")||P.startsWith("H(If")||P.startsWith("I(If")||P.startsWith("J(If")||P.startsWith("K(If")||P.startsWith("L(If")||P.startsWith("M(If")||P.startsWith("N(If")||P.startsWith("O(If")||P.startsWith("P(If")||P.startsWith("Q(If")||P.startsWith("R(If")||P.startsWith("S(If")||P.startsWith("T(If")||P.startsWith("U(If")||P.startsWith("V(If")||P.startsWith("W(If")||P.startsWith("X(If")||P.startsWith("Y(If")||P.startsWith("Z(If")||/^[A-Z]{2}\(If$/.test(P)||/^[A-Z]{1,2}\(If$/.test(P)||/^[A-Z]{1,2}\(\s*If$/.test(P)||/^[A-Z]{1,2}\(\s*if$/.test(P)||/^[A-Z]{1,2}\s*\(Time$/.test(P)||/^[A-Z]{1,2}\($/.test(P)){if(L+1<f.length){const Q=f[L+1];if(/^\d/.test(Q)||["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].includes(Q)||Q==="(If"||Q==="(if"||Q==="Required)"||Q==="required)"||Q==="changed)"||Q==="If"||Q==="(Time"||Q==="(time"||/^[A-Z]{1,2}\(If/.test(P)||/^[A-Z]{1,2}\(\s*If/.test(P)||/^[A-Z]{1,2}\(\s*if/.test(P)||/^[A-Z]{1,2}\s*\(Time/.test(P)||P.endsWith("(")&&(Q==="If"||Q==="if")){O=L;break}}else if(/^[A-Z]{1,2}$/.test(P)||/^[A-Z]{1,2}\(If/.test(P)||/^[A-Z]{1,2}\(\s*If/.test(P)||/^[A-Z]{1,2}\(\s*if/.test(P)||/^[A-Z]{1,2}\s*\(Time/.test(P)){O=L;break}}T+=(T?" ":"")+P}if(O===-1)continue;let C=f[O];if(m=O+1,C.endsWith("(If")&&m<f.length&&f[m]==="Required)"&&(C=C.replace("(If"," (If Required)"),m++),m<f.length&&(f[m]==="(if"||f[m]==="(If")&&m+1<f.length&&(f[m+1]==="required)"||f[m+1]==="Required)")&&(C=C+" (if required)",m+=2),/^[A-Z]{1,2}\(If/.test(C)){const L=C.match(/^([A-Z]{1,2})\(If(.*)$/);L&&(C=L[1]+" (If"+L[2],m<f.length&&(f[m]==="Required)"||f[m]==="required)")&&(C=C.replace("(If"," (If Required)"),m++))}if(/^[A-Z]{1,2}\(\s*If/.test(C)){const L=C.match(/^([A-Z]{1,2})\(\s*If(.*)$/);L&&(C=L[1]+" (If"+L[2],m<f.length&&(f[m]==="required)"||f[m]==="Required)")&&(C=C.replace("(If"," (If required)"),m++))}if(/^[A-Z]{1,2}\(\s*if/.test(C)){const L=C.match(/^([A-Z]{1,2})\(\s*if(.*)$/);L&&(C=L[1]+" (if"+L[2],m<f.length&&(f[m]==="required)"||f[m]==="Required)")&&(C=C.replace("(if"," (if required)"),m++))}if(/^[A-Z]{1,2}\s*\(Time/.test(C)){const L=C.match(/^([A-Z]{1,2})\s*\(Time(.*)$/);L&&(C=L[1]+" (Time"+L[2],m<f.length&&f[m]==="changed)"&&(C=C.replace("(Time"," (Time changed)"),m++))}C.endsWith("(")&&m<f.length&&f[m]==="If"&&(m+1<f.length&&(f[m+1]==="required)"||f[m+1]==="Required)")?(C=C.slice(0,-1)+" (If required)",m+=2):(C=C.slice(0,-1)+" (If)",m++)),/^[A-Z]{1,2}$/.test(C)&&m<f.length&&f[m]==="(Time"&&(m+1<f.length&&f[m+1]==="changed)"?(C=C+" (Time changed)",m+=2):(C=C+" (Time)",m++));let N="",R=-1;for(let L=f.length-1;L>=m;L--)if(/^\d+$/.test(f[L])&&parseInt(f[L])>=1&&parseInt(f[L])<=4){N=f[L],R=L;break}let D=N==="1"||T.includes("Laboratory")||T.includes("Lab");if(!D&&R>m){for(let L=m;L<Math.min(m+4,R);L++)if(f[L]&&(f[L].includes("Lab")||f[L].includes("Computer"))){D=!0;break}}let j="",_="",F="",$="",X="",at="",V="",J="";if(D){if(m<f.length&&!["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].includes(f[m]))for(j=f[m++];m<f.length&&!["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].includes(f[m]);)j+=" "+f[m++];m<f.length&&["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].includes(f[m])&&(F=f[m++]),m<f.length&&f[m].includes(":")&&(X=f[m++],m<f.length&&f[m]==="-"&&(X+=" "+f[m++],m<f.length&&f[m].includes(":")&&(X+=" "+f[m++]))),m<f.length&&f[m]==="-"&&m++,R>m&&(J=f[R-1],V=f.slice(m,R-1).join(" "))}else m<f.length&&!["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].includes(f[m])&&(j=f[m++]),m<f.length&&!["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].includes(f[m])&&(_=f[m++]),m<f.length&&["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].includes(f[m])&&(F=f[m++]),m<f.length&&["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].includes(f[m])&&($=f[m++]),m<f.length&&f[m].includes(":")&&(X=f[m++],m<f.length&&f[m]==="-"&&(X+=" "+f[m++],m<f.length&&f[m].includes(":")&&(X+=" "+f[m++]))),m<f.length&&f[m].includes(":")&&(at=f[m++],m<f.length&&f[m]==="-"&&(at+=" "+f[m++],m<f.length&&f[m].includes(":")&&(at+=" "+f[m++]))),R>m&&(J=f[R-1],V=f.slice(m,R-1).join(" "));const rt={sl:y,program:b,courseCode:w.trim(),title:T.trim(),section:C.trim(),room1:j.trim(),room2:_.trim(),day1:F.trim(),day2:$.trim(),time1:X.trim(),time2:at.trim(),facultyName:V.trim(),facultyInitial:J.trim(),credit:N.trim()};t.push(rt)}return t}function Eb({coursesCount:g,onClose:t}){console.log("SuccessPopup rendered with coursesCount:",g);const e=()=>{console.log("SuccessPopup button clicked"),t()};return E.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[9999] animate-fade-in",children:E.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl p-8 max-w-md w-full mx-4 shadow-2xl border border-gray-200 dark:border-dark-700 animate-scale-in",children:[E.jsx("div",{className:"flex items-center justify-center mb-6",children:E.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-full p-4 shadow-lg",children:E.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),E.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-3",children:" PDF Processed Successfully!"}),E.jsx("p",{className:"text-center text-gray-600 dark:text-gray-300 mb-6",children:"Your course PDF has been analyzed and all course information has been extracted."}),E.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border border-green-200 dark:border-green-800 rounded-xl p-4 mb-6",children:E.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[E.jsx("svg",{className:"w-5 h-5 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),E.jsxs("span",{className:"text-green-800 dark:text-green-200 font-semibold",children:[g," courses found"]})]})}),E.jsxs("button",{onClick:e,className:"w-full btn-primary text-lg",children:["Continue to Course Selection",E.jsx("svg",{className:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})})}function wb({pdfUrl:g,pdfData:t}){const e=mt.useRef(null),[i,a]=mt.useState(null),[o,l]=mt.useState(1),[u,h]=mt.useState(0),[d,f]=mt.useState(1.5),[m,y]=mt.useState(!0),[b,A]=mt.useState(null);mt.useEffect(()=>((g||t)&&(async()=>{try{y(!0),A(null);let N;if(g)console.log("Loading PDF from URL:",g),N=await ku.getDocument(g).promise;else if(t)console.log("Loading PDF from data, length:",t.byteLength),N=await ku.getDocument({data:t}).promise;else throw new Error("Either pdfUrl or pdfData must be provided");console.log("PDF loaded successfully! Pages:",N.numPages),a(N),h(N.numPages),l(1),y(!1)}catch(N){console.error("Error loading PDF:",N),A(`Failed to load PDF: ${N.message||"Unknown error"}`),y(!1)}})(),()=>{i&&i.destroy()}),[g,t]),mt.useEffect(()=>{(async()=>{if(!(!i||!e.current))try{console.log(`Rendering page ${o} of ${u}`);const N=await i.getPage(o),R=e.current,D=R.getContext("2d"),j=N.getViewport({scale:d});R.height=j.height,R.width=j.width;const _={canvasContext:D,viewport:j};await N.render(_).promise,console.log(`Page ${o} rendered successfully`)}catch(N){console.error("Error rendering page:",N),A(`Failed to render page ${o}: ${N.message||"Unknown error"}`)}})()},[i,o,d]);const x=()=>{o>1&&l(o-1)},w=()=>{o<u&&l(o+1)},T=()=>{f(C=>Math.min(C+.25,3))},O=()=>{f(C=>Math.max(C-.25,.5))};return E.jsx("div",{className:"flex flex-col items-center w-full",children:E.jsxs("div",{className:"w-full max-w-4xl bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[m?E.jsxs("div",{className:"flex justify-center items-center h-96",children:[E.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),E.jsx("span",{className:"ml-2 text-gray-700 dark:text-gray-300",children:"Loading PDF..."})]}):b?E.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg m-4",children:E.jsxs("div",{className:"flex items-center",children:[E.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),E.jsx("span",{className:"text-red-700 dark:text-red-300",children:b})]})}):E.jsx("div",{className:"p-4 flex justify-center",children:E.jsx("canvas",{ref:e,className:"border border-gray-300 dark:border-gray-600 shadow-sm"})}),u>0&&!m&&!b&&E.jsxs("div",{className:"px-4 py-3 bg-gray-100 dark:bg-gray-700 flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx("button",{onClick:O,className:"p-2 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":"Zoom out",disabled:d<=.5,children:E.jsx("svg",{className:"w-5 h-5 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),E.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:[Math.round(d*100),"%"]}),E.jsx("button",{onClick:T,className:"p-2 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":"Zoom in",disabled:d>=3,children:E.jsx("svg",{className:"w-5 h-5 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),E.jsxs("div",{className:"flex items-center space-x-4",children:[E.jsx("button",{onClick:x,disabled:o<=1,className:`px-3 py-1 rounded-md font-medium ${o<=1?"text-gray-400 cursor-not-allowed":"text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,children:"Previous"}),E.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["Page ",o," of ",u]}),E.jsx("button",{onClick:w,disabled:o>=u,className:`px-3 py-1 rounded-md font-medium ${o>=u?"text-gray-400 cursor-not-allowed":"text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,children:"Next"})]})]})]})})}function Tb({onParsed:g}){const t=mt.useRef(),[e,i]=mt.useState(!1),[a,o]=mt.useState(""),[l,u]=mt.useState([]),[h,d]=mt.useState(!1),[f,m]=mt.useState(!1),[y,b]=mt.useState(null),[A,x]=mt.useState(!1),w=async j=>{if(console.log("File change event triggered"),o(""),u([]),i(!0),b(null),x(!1),console.log("Selected file:",j),!j){console.log("No file selected"),i(!1);return}if(j.type!=="application/pdf"){console.log("File type is not PDF:",j.type),o("Please select a PDF file"),i(!1);return}try{console.log("Starting PDF processing...");const _=await j.arrayBuffer();console.log("Got array buffer, length:",_.byteLength),b(_);const F=await ku.getDocument({data:_}).promise;console.log("PDF loaded successfully! Pages:",F.numPages);let $="";for(let at=1;at<=F.numPages;at++){const rt=(await(await F.getPage(at)).getTextContent()).items.map(L=>L.str).join(" ");$+=rt+" "}console.log("Extracted text length:",$.length),console.log("First 500 chars:",$.substring(0,500));const X=Sb($);console.log("Parsed courses count:",X.length),u(X),i(!1),X.length>0?d(!0):o("No courses found in the PDF. Please ensure the PDF contains course information."),x(!0)}catch(_){console.error("Error processing PDF:",_),o(`Error processing PDF: ${_.message||"Unknown error"}`),i(!1)}},T=j=>{const _=j.target.files[0];_&&w(_)},O=j=>{j.preventDefault(),m(!1);const _=j.dataTransfer.files[0];_&&w(_)},C=j=>{j.preventDefault(),m(!0)},N=j=>{j.preventDefault(),m(!1)},R=()=>{console.log("Success popup close called"),d(!1),g(l)},D=()=>{x(!A)};return E.jsxs("div",{className:"p-8 bg-white dark:bg-gray-900 min-h-screen",children:[E.jsxs("div",{className:"text-center mb-8",children:[E.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:"Upload Course PDF"}),E.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"Upload your university's course offering PDF to get started. Our AI will automatically extract all course information."})]}),E.jsxs("div",{className:"max-w-4xl mx-auto",children:[E.jsxs("div",{className:`relative border-2 border-dashed rounded-xl p-12 text-center transition-all duration-300 ${f?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-blue-400 dark:hover:border-blue-500"}`,onDrop:O,onDragOver:C,onDragLeave:N,children:[E.jsx("input",{ref:t,type:"file",accept:".pdf",onChange:T,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),E.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[E.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:E.jsx("svg",{className:"w-8 h-8 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),E.jsxs("div",{children:[E.jsx("p",{className:"text-xl font-medium text-gray-900 dark:text-white mb-2",children:"Drop your PDF here or click to browse"}),E.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Supports PDF files up to 10MB"})]}),E.jsx("button",{type:"button",onClick:()=>t.current?.click(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700 transition-colors font-medium",children:"Choose File"})]})]}),e&&E.jsx("div",{className:"mt-8 text-center",children:E.jsxs("div",{className:"inline-flex items-center space-x-3 px-6 py-3 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[E.jsx("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),E.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:"Processing PDF..."})]})}),a&&E.jsx("div",{className:"mt-8 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),E.jsx("span",{className:"text-red-700 dark:text-red-300 font-medium",children:a})]})}),l.length>0&&!e&&!h&&E.jsx("div",{className:"mt-8 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),E.jsxs("span",{className:"text-green-700 dark:text-green-300 font-medium",children:["Successfully parsed ",l.length," courses!"]})]}),E.jsxs("button",{onClick:D,className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-medium flex items-center",children:[A?"Hide PDF":"View PDF",E.jsx("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A?E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"}):E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})}),A&&y&&!e&&E.jsx("div",{className:"mt-8",children:E.jsx(wb,{pdfData:y})}),E.jsxs("div",{className:"mt-8 p-6 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[E.jsx("h3",{className:"text-lg font-medium text-blue-900 dark:text-blue-100 mb-3",children:" Tips for best results:"}),E.jsxs("ul",{className:"space-y-2 text-blue-800 dark:text-blue-200",children:[E.jsxs("li",{className:"flex items-start space-x-2",children:[E.jsx("span",{children:""}),E.jsx("span",{children:"Make sure your PDF contains course schedules with times and faculty information"})]}),E.jsxs("li",{className:"flex items-start space-x-2",children:[E.jsx("span",{children:""}),E.jsx("span",{children:"Text-based PDFs work better than scanned image PDFs"})]}),E.jsxs("li",{className:"flex items-start space-x-2",children:[E.jsx("span",{children:""}),E.jsx("span",{children:"University course catalogs or timetables are ideal"})]})]})]})]}),h&&E.jsx(Eb,{coursesCount:l.length,onClose:R})]})}function Cb({courses:g,onContinue:t,onBack:e,selectedCourses:i}){const[a,o]=mt.useState(""),[l,u]=mt.useState(i||[]),[h,d]=mt.useState([]),f=g.reduce((x,w)=>(x[w.courseCode]||(x[w.courseCode]={...w,sections:[]}),x[w.courseCode].sections.push(w),x),{}),m=Object.values(f),y=x=>{if(!x.trim()){d(m);return}const w=x.toLowerCase(),T=m.filter(O=>{const C=O.courseCode.toLowerCase(),N=O.title.toLowerCase();if(C.includes(w)||N.includes(w))return!0;const R=N.split(" ");return!!(R.map(_=>_.charAt(0)).join("").toLowerCase().includes(w)||R.map(_=>_.charAt(0).toLowerCase()).join("").includes(w))});d(T)};mt.useEffect(()=>{y(a)},[a]),mt.useEffect(()=>{d(m)},[g]);const b=x=>{l.includes(x)?u(l.filter(w=>w!==x)):u([...l,x])},A=()=>{if(l.length===0){alert("Please select at least one course before continuing.");return}t(l)};return E.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[E.jsxs("div",{className:"mb-6",children:[E.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Select Your Courses"}),E.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Search and select the courses you want to include in your routine."})]}),E.jsxs("div",{className:"flex justify-between mb-8",children:[e&&E.jsxs("button",{onClick:e,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-medium flex items-center",children:[E.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),E.jsx("button",{onClick:A,disabled:l.length===0,className:`px-6 py-3 rounded-lg font-medium transition-colors ${l.length===0?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:"Continue to Faculty Selection"})]}),E.jsxs("div",{className:"mb-6",children:[E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:E.jsx("svg",{className:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:E.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),E.jsx("input",{type:"text",placeholder:"Search courses (e.g., 'CSE 101', 'Computer Networks', or 'cn')...",value:a,onChange:x=>o(x.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 dark:border-gray-600 rounded-lg text-sm placeholder-gray-500 dark:placeholder-gray-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a&&E.jsx("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-300",children:h.length===0?`No courses found for "${a}"`:`Found ${h.length} course${h.length!==1?"s":""} matching "${a}"`})]}),l.length>0&&E.jsxs("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[E.jsxs("h3",{className:"font-semibold text-blue-900 mb-2",children:["Selected Courses (",l.length,")"]}),E.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(x=>(f[x],E.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:[x,E.jsx("button",{onClick:()=>b(x),className:"ml-2 text-blue-600 hover:text-blue-800",children:""})]},x)))})]}),E.jsx("div",{className:"space-y-3 mb-6",children:h.map(x=>E.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-all hover:shadow-md ${l.includes(x.courseCode)?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 dark:border-blue-400":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-gray-300 dark:hover:border-gray-500"}`,onClick:()=>b(x.courseCode),children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("div",{className:"flex-1",children:E.jsxs("div",{className:"flex items-center space-x-3",children:[E.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center ${l.includes(x.courseCode)?"bg-blue-500 border-blue-500":"border-gray-300 dark:border-gray-500"}`,children:l.includes(x.courseCode)&&E.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),E.jsxs("div",{children:[E.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:x.courseCode}),E.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:x.title})]})]})}),E.jsxs("div",{className:"text-right",children:[E.jsxs("div",{className:"text-sm text-gray-500",children:[x.sections.length," section",x.sections.length!==1?"s":""]}),E.jsxs("div",{className:"text-sm font-medium text-gray-700",children:[x.credit," credit",x.credit!=="1"?"s":""]})]})]})},x.courseCode))}),h.length===0&&a&&E.jsxs("div",{className:"text-center py-12",children:[E.jsxs("div",{className:"text-gray-500 mb-4",children:['No courses found matching "',a,'"']}),E.jsx("button",{onClick:()=>o(""),className:"text-blue-600 hover:text-blue-800",children:"Clear search"})]})]})}function Rb({selectedCourses:g,courses:t,onContinue:e,onBack:i,facultyPreferences:a}){const[o,l]=mt.useState(a||{}),[u,h]=mt.useState(""),[d,f]=mt.useState(""),[m,y]=mt.useState([]),b=t.reduce((N,R)=>(N[R.courseCode]||(N[R.courseCode]=[]),N[R.courseCode].push(R),N),{}),x=(()=>{const N=new Set;g.forEach(D=>{(b[D]||[]).forEach(_=>{_.facultyName&&_.facultyInitial&&N.add(JSON.stringify({name:_.facultyName,initial:_.facultyInitial,courses:[]}))})});const R=Array.from(N).map(D=>JSON.parse(D));return R.forEach(D=>{g.forEach(j=>{(b[j]||[]).some($=>$.facultyInitial===D.initial)&&D.courses.push(j)})}),R})(),w=N=>{if(!N.trim()){y(x);return}const R=N.toLowerCase(),D=x.filter(j=>{const _=j.name.toLowerCase(),F=j.initial.toLowerCase();return!!(_.includes(R)||F.includes(R)||_.split(" ").map(at=>at.charAt(0)).join("").toLowerCase().includes(R))});y(D)};mt.useEffect(()=>{w(d)},[d]),mt.useEffect(()=>{y(x)},[g]);const T=N=>{if(!u){alert("Please select a course first to assign this faculty.");return}l(R=>({...R,[u]:N})),h(""),f("")},O=N=>{l(R=>{const D={...R};return delete D[N],D})},C=()=>{e(o)};return E.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[E.jsxs("div",{className:"mb-6",children:[E.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Select Preferred Faculty"}),E.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Choose your preferred faculty for each course (optional). This will help us prioritize routines."})]}),E.jsx("div",{className:"flex mb-8",children:i&&E.jsxs("button",{onClick:i,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-medium flex items-center",children:[E.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]})}),E.jsxs("div",{className:"mb-6",children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select a course to assign preferred faculty:"}),E.jsxs("select",{value:u,onChange:N=>h(N.target.value),className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[E.jsx("option",{value:"",children:"Choose a course..."}),g.filter(N=>!o[N]).map(N=>{const R=b[N][0];return E.jsxs("option",{value:N,children:[N," - ",R.title]},N)})]})]}),u&&E.jsxs("div",{className:"mb-6",children:[E.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Search for faculty to assign to ",u,":"]}),E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:E.jsx("svg",{className:"h-5 w-5 text-gray-400 dark:text-gray-300",viewBox:"0 0 20 20",fill:"currentColor",children:E.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),E.jsx("input",{type:"text",placeholder:"Search faculty by name or initials...",value:d,onChange:N=>f(N.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg text-sm placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),u&&E.jsxs("div",{className:"mb-6",children:[E.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:["Available Faculty for ",u]}),E.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:m.filter(N=>N.courses.includes(u)).map(N=>E.jsx("div",{className:"p-3 border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-600 hover:border-gray-300 dark:hover:border-gray-500 transition-colors",onClick:()=>T(N),children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{children:[E.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:N.name}),E.jsxs("div",{className:"text-sm text-gray-600",children:["(",N.initial,")"]})]}),E.jsxs("div",{className:"text-sm text-gray-500",children:["Teaches ",N.courses.length," of your selected courses"]})]})},N.initial))}),m.filter(N=>N.courses.includes(u)).length===0&&E.jsx("div",{className:"text-center py-8 text-gray-500",children:d?`No faculty found matching "${d}" for ${u}`:`No faculty available for ${u}`})]}),Object.keys(o).length>0&&E.jsxs("div",{className:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[E.jsx("h3",{className:"font-semibold text-green-900 dark:text-green-100 mb-3",children:"Your Faculty Preferences"}),E.jsx("div",{className:"space-y-2",children:Object.entries(o).map(([N,R])=>E.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-700 p-3 rounded-lg",children:[E.jsxs("div",{children:[E.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:N}),E.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Preferred: ",R.name," (",R.initial,")"]})]}),E.jsx("button",{onClick:()=>O(N),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:"Remove"})]},N))}),E.jsx("div",{className:"mt-6 flex justify-center",children:E.jsx("button",{onClick:C,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Continue to Time & Day Preferences"})})]}),Object.keys(o).length===0&&E.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg",children:[E.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-center mb-4",children:"No faculty preferences set. You can continue without selecting any preferred faculty, or select courses above to assign preferred faculty."}),E.jsx("div",{className:"flex justify-center",children:E.jsx("button",{onClick:C,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Continue to Time & Day Preferences"})})]})]})}function Mb({onContinue:g,onBack:t,timePreferences:e}){const[i,a]=mt.useState(e?.preferredStartTime||"08:30 am"),[o,l]=mt.useState(e?.allowMonday!==void 0?e.allowMonday:!0),u=["08:30 am","09:51 am","11:11 am","12:31 pm","1:51 pm","3:11 pm"],h=()=>{g({preferredStartTime:i,allowMonday:o})};return E.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[E.jsxs("div",{className:"mb-6",children:[E.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Time & Day Preferences"}),E.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Set your preferred earliest class start time and day preferences."})]}),E.jsx("div",{className:"flex mb-8",children:t&&E.jsxs("button",{onClick:t,className:"px-6 py-3 bg-gray-600 dark:bg-gray-700 text-white rounded-lg hover:bg-gray-700 dark:hover:bg-gray-600 transition-colors font-medium flex items-center",children:[E.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]})}),E.jsxs("div",{className:"space-y-8",children:[E.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 border border-gray-200 dark:border-gray-700 rounded-lg",children:[E.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Preferred Earliest Class Start Time"}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"No classes should start before this time:"}),E.jsx("select",{value:i,onChange:d=>a(d.target.value),className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:u.map(d=>E.jsx("option",{value:d,children:d},d))})]}),E.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:E.jsxs("div",{className:"flex",children:[E.jsx("div",{className:"flex-shrink-0",children:E.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:E.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),E.jsx("div",{className:"ml-3",children:E.jsxs("p",{className:"text-sm text-blue-800",children:[E.jsx("strong",{children:"Important:"})," The system will strictly enforce this time preference. Any routines with classes starting before ",i," will not be shown."]})})]})})]})]}),E.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 border border-gray-200 dark:border-gray-700 rounded-lg",children:[E.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Monday Preference"}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{className:"flex items-center",children:[E.jsx("input",{id:"allow-monday",type:"checkbox",checked:o,onChange:d=>l(d.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded bg-gray-100 dark:bg-gray-700"}),E.jsx("label",{htmlFor:"allow-monday",className:"ml-2 block text-sm text-gray-900 dark:text-gray-300",children:"I'm willing to take classes on Monday"})]}),E.jsx("div",{className:`border rounded-lg p-4 ${o?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200"}`,children:E.jsxs("div",{className:"flex",children:[E.jsx("div",{className:"flex-shrink-0",children:E.jsx("svg",{className:`h-5 w-5 ${o?"text-green-400":"text-yellow-400"}`,viewBox:"0 0 20 20",fill:"currentColor",children:E.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),E.jsx("div",{className:"ml-3",children:E.jsx("p",{className:`text-sm ${o?"text-green-800":"text-yellow-800"}`,children:o?"Monday classes will be included in your routine suggestions.":"Monday classes will be excluded from your routine suggestions. This may limit your options."})})]})})]})]}),E.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-6 border border-gray-200 dark:border-gray-700 rounded-lg",children:[E.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Your Preferences Summary"}),E.jsxs("div",{className:"space-y-2 text-sm mb-6",children:[E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Earliest class start time:"}),E.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i})]}),E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Monday classes:"}),E.jsx("span",{className:`font-medium ${o?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:o?"Allowed":"Not allowed"})]})]}),E.jsx("div",{className:"flex justify-center",children:E.jsx("button",{onClick:h,className:"px-6 py-3 bg-blue-600 dark:bg-blue-700 text-white rounded-lg hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors font-medium",children:"Generate My Routines"})})]})]})]})}function Nb({selectedCourses:g,facultyPreferences:t,timePreferences:e,courses:i,routineResults:a,onRoutineGenerated:o,onBack:l}){const[u,h]=mt.useState([]),[d,f]=mt.useState([]),[m,y]=mt.useState(!1),[b,A]=mt.useState(!1),[x,w]=mt.useState(null),[T,O]=mt.useState(20),[C,N]=mt.useState(5);console.log(" EnhancedRoutineGenerator mounted/remounted"),mt.useEffect(()=>{a&&(h(a.preferred||[]),f(a.alternative||[]),w(a.rejectionReasons||null),y(!1))},[]),i.reduce((V,J)=>(V[J.courseCode]||(V[J.courseCode]=[]),V[J.courseCode].push(J),V),{});const R=V=>{if(!V)return 0;const J=V.trim().toLowerCase();if(J.includes("am")||J.includes("pm")){let ct,k;if(J.includes(":pm")||J.includes(":am")){const lt=J.lastIndexOf(":");ct=J.substring(0,lt),k=J.substring(lt+1)}else{const lt=J.split(" ");ct=lt[0],k=lt[1]}const K=ct.split(":"),st=parseInt(K[0],10),et=parseInt(K[1],10);let ot=st;return k==="pm"&&st!==12?ot+=12:k==="am"&&st===12&&(ot=0),ot*60+et}const L=J.split(" ")[0].split(":"),P=parseInt(L[0],10),Q=parseInt(L[1],10);return P*60+Q},D=V=>{if(!V)return!1;let J=V;V.includes(" - ")&&(J=V.split(" - ")[0].trim());const rt=R(e.preferredStartTime);return R(J)<rt},j=V=>e.allowMonday?!0:V.day1!=="Mon"&&V.day2!=="Mon",_=(V,J)=>{if(!V||!J)return!1;const rt=Q=>{const ct=Q.split(" - ");return ct.length!==2?null:{start:R(ct[0]),end:R(ct[1])}},L=rt(V),P=rt(J);return!L||!P?!1:!(L.end<=P.start||P.end<=L.start)},F=V=>{for(let J=0;J<V.length;J++)for(let rt=J+1;rt<V.length;rt++){const L=V[J],P=V[rt];if(L.day1===P.day1&&_(L.time1,P.time1)||L.day1===P.day2&&_(L.time1,P.time2)||L.day2===P.day1&&_(L.time2,P.time1)||L.day2===P.day2&&_(L.time2,P.time2))return!0}return!1},$=async()=>{console.log(" Starting routine generation..."),h([]),f([]),w(null),y(!0);try{if(!g||g.length===0){console.warn(" No courses selected"),y(!1);return}if(!i||i.length===0){console.warn(" No courses data available"),y(!1);return}if(!e||!e.preferredStartTime){console.warn(" No time preferences set"),y(!1);return}await new Promise(lt=>setTimeout(lt,100));const V=g.map(lt=>i.filter(Z=>Z.courseCode===lt));if(console.log(" Course sections array:",V),V.filter(lt=>lt.length===0).length>0){console.error(" Some courses have no sections available"),h([]),f([]),y(!1);return}const rt=(lt,W=0,Z=[])=>{if(W===lt.length)return[Z];const it=[],ft=lt[W];for(const At of ft){const ut=[...Z,At];it.push(...rt(lt,W+1,ut))}return it};console.log(" Generating combinations...");const L=rt(V);console.log(" Total combinations:",L.length),await new Promise(lt=>setTimeout(lt,50));const P=[],Q={timeConflicts:0,beforePreferredTime:0,mondayRestriction:0,total:L.length},ct=10,k=20;let K=0,st=0;for(let lt=0;lt<L.length;lt++){const W=L[lt];if(F(W)){Q.timeConflicts++;continue}let Z=!0;for(const At of W)if(D(At.time1)||D(At.time2)){Z=!1;break}if(!Z){Q.beforePreferredTime++;continue}let it=!0;for(const At of W)if(!j(At)){it=!1;break}if(!it){Q.mondayRestriction++;continue}let ft=!0;for(const At of W){const ut=t[At.courseCode];if(ut?.name&&!(At.facultyName&&At.facultyName.toLowerCase().trim()===ut.name.toLowerCase().trim())){ft=!1;break}}if(P.push(W),ft?K++:st++,K>=ct||K>=5&&st>=k){console.log(` Early termination: Found ${K} preferred and ${st} alternative routines after checking ${lt+1}/${L.length} combinations`);break}lt>0&&lt%1e3===0&&console.log(` Processed ${lt}/${L.length} combinations (${K} preferred, ${st} alternatives)`)}console.log(" Rejection Analysis:",Q),console.log(" Valid routines after filtering:",P.length),await new Promise(lt=>setTimeout(lt,50));const et=[],ot=[];P.forEach(lt=>{let W=!0;const Z=[];lt.forEach(ft=>{const At=t[ft.courseCode];let ut=null,Rt=null;At&&(typeof At=="string"?Rt=At:At.name&&(ut=At.name,Rt=At.initial));let Pt=!1;if(ut?Pt=ft.facultyName&&ft.facultyName.toLowerCase().trim()===ut.toLowerCase().trim():Rt&&(Rt.toLowerCase().trim()==="tba"?Pt=!1:Pt=ft.facultyInitial&&ft.facultyInitial.toLowerCase().trim()!=="tba"&&ft.facultyInitial.trim()===Rt.trim()),(ut||Rt)&&!Pt){W=!1;const de=ut||Rt;Z.push(`${ft.courseCode}: You preferred ${de} but got ${ft.facultyName}`)}});const it={sections:lt,warnings:Z,id:Math.random().toString(36).substr(2,9)};W?et.push(it):ot.push(it)}),console.log(" Preferred routines:",et.length),console.log(" Alternative routines:",ot.length),ot.sort((lt,W)=>lt.warnings.length!==W.warnings.length?lt.warnings.length-W.warnings.length:0),console.log(" Sorted alternatives by number of warnings:",ot.map(lt=>lt.warnings.length)),h(et),f(ot),y(!1),w(Q),o&&o({preferred:et,alternative:ot,rejectionReasons:Q}),console.log(" Routine generation complete!")}catch(V){console.error(" Error during routine generation:",V),h([]),f([]),y(!1)}};mt.useEffect(()=>{h([]),f([]),w(null),O(20),N(5),g&&g.length>0&&t&&e&&i&&i.length>0&&$()},[g,t,e]);const X=V=>V?V.replace(" - "," - "):"",at=({routine:V,isAlternative:J=!1})=>E.jsxs("div",{className:`border rounded-lg p-4 ${J?"border-yellow-200 bg-yellow-50 dark:bg-yellow-900/20 dark:border-yellow-800":"border-green-200 bg-green-50 dark:bg-green-900/20 dark:border-green-800"}`,children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx("div",{className:`w-3 h-3 rounded-full ${J?"bg-yellow-500":"bg-green-500"}`}),E.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:J?"Alternative Routine":"Preferred Routine"})]}),V.warnings.length>0&&E.jsxs("span",{className:"text-sm text-yellow-600 dark:text-yellow-400 font-medium",children:[V.warnings.length," warning",V.warnings.length!==1?"s":""]})]}),V.warnings.length>0&&E.jsx("div",{className:"mb-4 p-3 bg-yellow-100 dark:bg-yellow-900/30 border border-yellow-300 dark:border-yellow-700 rounded-lg",children:E.jsxs("div",{className:"flex items-start",children:[E.jsx("svg",{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400 mt-0.5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:E.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),E.jsxs("div",{children:[E.jsx("div",{className:"font-medium text-yellow-800 dark:text-yellow-200 mb-1",children:"Warnings:"}),E.jsx("ul",{className:"text-sm text-yellow-700 dark:text-yellow-300 space-y-1",children:V.warnings.map((rt,L)=>E.jsxs("li",{children:[" ",rt]},L))})]})]})}),E.jsx("div",{className:"overflow-x-auto",children:E.jsxs("table",{className:"min-w-full",children:[E.jsx("thead",{children:E.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[E.jsx("th",{className:"text-center py-2 px-3 text-sm font-bold text-gray-700 dark:text-gray-300",children:"Course"}),E.jsx("th",{className:"text-center py-2 px-3 text-sm font-bold text-gray-700 dark:text-gray-300",children:"Section"}),E.jsx("th",{className:"text-center py-2 px-3 text-sm font-bold text-gray-700 dark:text-gray-300",children:"Faculty"}),E.jsx("th",{className:"text-center py-2 px-3 text-sm font-bold text-gray-700 dark:text-gray-300",children:"Schedule"}),E.jsx("th",{className:"text-center py-2 px-3 text-sm font-bold text-gray-700 dark:text-gray-300",children:"Room"})]})}),E.jsx("tbody",{children:V.sections.map((rt,L)=>E.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700",children:[E.jsxs("td",{className:"py-2 px-3",children:[E.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:rt.courseCode}),E.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:rt.title})]}),E.jsx("td",{className:"py-2 px-3 text-sm text-gray-900 dark:text-white",children:rt.section}),E.jsxs("td",{className:"py-2 px-3",children:[E.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:rt.facultyName}),E.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",rt.facultyInitial,")"]})]}),E.jsxs("td",{className:"py-2 px-3 text-sm text-gray-900 dark:text-white",children:[E.jsxs("div",{children:[rt.day1," ",X(rt.time1)]}),rt.day2&&rt.time2&&E.jsxs("div",{children:[rt.day2," ",X(rt.time2)]})]}),E.jsxs("td",{className:"py-2 px-3 text-sm text-gray-900 dark:text-white",children:[E.jsx("div",{children:rt.room1}),rt.room2&&E.jsx("div",{children:rt.room2})]})]},L))})]})})]});return m?E.jsxs("div",{className:"flex items-center justify-center py-12",children:[E.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),E.jsx("span",{className:"ml-3 text-gray-600",children:"Generating your routines..."})]}):E.jsxs("div",{className:"max-w-6xl mx-auto p-6 bg-white dark:bg-gray-900 min-h-screen",children:[E.jsx("div",{className:"mb-6",children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{children:[E.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Your Routine Suggestions"}),E.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Here are your personalized routine suggestions based on your preferences."})]}),E.jsxs("button",{onClick:()=>{$()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center",children:[E.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]})}),E.jsxs("div",{className:"mb-8",children:[E.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[E.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),"Best Match Routines (",u.length>C?`${C} of ${u.length}`:u.length,")"]}),u.length===0?E.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6 text-center",children:E.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"No routines found that match all your preferred faculty choices."})}):E.jsxs("div",{className:"space-y-4",children:[u.slice(0,C).map((V,J)=>E.jsxs("div",{children:[E.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:["Best Match #",J+1]}),E.jsx(at,{routine:V})]},V.id)),u.length>C&&E.jsx("div",{className:"flex justify-center pt-4",children:E.jsxs("button",{onClick:()=>N(V=>Math.min(V+5,u.length)),className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium flex items-center",children:[E.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Load More (",Math.min(5,u.length-C)," more)"]})})]})]}),d.length>0&&E.jsxs("div",{children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center",children:[E.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full mr-2"}),"Alternative Routines (",d.length>T?`${T} of ${d.length}`:d.length,")"]}),E.jsx("button",{onClick:()=>A(!b),className:"text-blue-600 hover:text-blue-800 font-medium",children:b?"Hide Alternatives":"Show Alternatives"})]}),b&&E.jsxs("div",{className:"space-y-4",children:[E.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:E.jsxs("div",{className:"flex items-start",children:[E.jsx("svg",{className:"h-5 w-5 text-yellow-600 mt-0.5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:E.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),E.jsxs("div",{children:[E.jsx("div",{className:"font-medium text-yellow-800 mb-1",children:"Alternative Routines Notice:"}),E.jsxs("p",{className:"text-sm text-yellow-700",children:["These routines don't match all your preferred faculty choices, but are sorted from best to worst based on the number of faculty mismatches. Each routine will show specific warnings about faculty mismatches.",d.length>T&&E.jsxs("span",{className:"block mt-1 font-medium",children:["Showing ",T," out of ",d.length," alternatives."]})]})]})]})}),d.slice(0,T).map((V,J)=>E.jsxs("div",{children:[E.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:["Alternative #",J+1,E.jsxs("span",{className:"text-yellow-600 font-medium ml-2",children:["(",V.warnings.length," mismatch",V.warnings.length!==1?"es":"",")"]})]}),E.jsx(at,{routine:V,isAlternative:!0})]},V.id)),d.length>T&&E.jsx("div",{className:"flex justify-center pt-4",children:E.jsxs("button",{onClick:()=>O(V=>Math.min(V+10,d.length)),className:"px-6 py-3 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors font-medium flex items-center",children:[E.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Load More (",Math.min(10,d.length-T)," more)"]})})]})]}),u.length===0&&d.length===0&&E.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[E.jsx("div",{className:"text-red-800 font-medium mb-4 text-center",children:"No Valid Routines Found"}),x&&E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{className:"bg-white p-4 rounded-lg border border-red-200",children:[E.jsx("h4",{className:"font-medium text-red-800 mb-3",children:"Detailed Analysis:"}),E.jsxs("div",{className:"space-y-2 text-sm",children:[E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{className:"text-gray-700",children:"Total possible combinations:"}),E.jsx("span",{className:"font-medium text-gray-900",children:x.total})]}),x.timeConflicts>0&&E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{className:"text-gray-700",children:" Rejected due to time conflicts:"}),E.jsx("span",{className:"font-medium text-red-600",children:x.timeConflicts})]}),x.beforePreferredTime>0&&E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{className:"text-gray-700",children:" Rejected due to early start times:"}),E.jsx("span",{className:"font-medium text-red-600",children:x.beforePreferredTime})]}),x.mondayRestriction>0&&E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{className:"text-gray-700",children:" Rejected due to Monday restriction:"}),E.jsx("span",{className:"font-medium text-red-600",children:x.mondayRestriction})]})]})]}),E.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[E.jsx("h4",{className:"font-medium text-blue-800 mb-3",children:" Suggestions to get routines:"}),E.jsxs("ul",{className:"space-y-2 text-sm text-blue-700",children:[x.beforePreferredTime>0&&E.jsxs("li",{children:[" Try selecting an earlier preferred start time (currently: ",e.preferredStartTime,")"]}),x.mondayRestriction>0&&!e.allowMonday&&E.jsx("li",{children:" Consider allowing Monday classes to get more options"}),x.timeConflicts>0&&E.jsx("li",{children:" Some selected courses may have unavoidable time conflicts"}),x.total<10&&E.jsx("li",{children:" Very few combinations possible - try selecting courses with more sections"})]})]})]}),!x&&E.jsxs("div",{className:"text-center",children:[E.jsx("p",{className:"text-red-600 mb-4",children:"No routines could be generated with your current preferences. Common reasons:"}),E.jsxs("ul",{className:"text-sm text-red-600 space-y-1 max-w-md mx-auto text-left",children:[E.jsx("li",{children:" Selected courses have unavoidable time conflicts"}),E.jsx("li",{children:" Your preferred start time is too restrictive"}),E.jsx("li",{children:" Monday restriction limits available options"}),E.jsx("li",{children:" Not enough sections available for selected courses"})]})]})]}),l&&E.jsx("div",{className:"mt-8 flex justify-center",children:E.jsxs("button",{onClick:l,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-medium flex items-center",children:[E.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Change Preferences"]})})]})}const Ob=({darkMode:g,toggleDarkMode:t})=>E.jsx("button",{onClick:t,className:"fixed top-6 right-6 z-50 p-3 rounded-full bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 border border-gray-200 dark:border-gray-700","aria-label":"Toggle dark mode",children:E.jsxs("div",{className:"relative w-6 h-6",children:[E.jsx("svg",{className:`absolute inset-0 w-6 h-6 text-yellow-500 transition-all duration-300 ${g?"scale-0 rotate-90 opacity-0":"scale-100 rotate-0 opacity-100"}`,fill:"currentColor",viewBox:"0 0 20 20",children:E.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}),E.jsx("svg",{className:`absolute inset-0 w-6 h-6 text-gray-700 dark:text-gray-300 transition-all duration-300 ${g?"scale-100 rotate-0 opacity-100":"scale-0 -rotate-90 opacity-0"}`,fill:"currentColor",viewBox:"0 0 20 20",children:E.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})]})});function Db({darkMode:g,toggleDarkMode:t}){const[e,i]=mt.useState(1),[a,o]=mt.useState([]),[l,u]=mt.useState([]),[h,d]=mt.useState({}),[f,m]=mt.useState({}),[y,b]=mt.useState(null);mt.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[e]);const A=()=>{window.scrollTo({top:0,behavior:"smooth"}),window.location.reload()},x=R=>{console.log("handlePdfParsed called with courses:",R.length),o(R),i(2),console.log("Current step set to 2")},w=R=>{u(R),b(null),i(3)},T=R=>{JSON.stringify(R)!==JSON.stringify(h)&&b(null),d(R),i(4)},O=R=>{JSON.stringify(R)!==JSON.stringify(f)&&b(null),m(R),i(5)},C=R=>{b(R)},N=R=>{i(R)};return E.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 transition-colors duration-300",children:[E.jsx(Ob,{darkMode:g,toggleDarkMode:t}),E.jsx("div",{className:"fixed top-4 left-4 z-50",children:E.jsxs("button",{onClick:A,className:"flex items-center px-3 py-2 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 border border-gray-200 dark:border-gray-700",children:[E.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),E.jsx("span",{className:"text-sm",children:"Home"})]})}),E.jsx("div",{className:"glass border-0 border-b border-gray-200 dark:border-gray-700",children:E.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:E.jsxs("div",{className:"text-center animate-fade-in",children:[E.jsx("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-primary-600 to-primary-800 dark:from-primary-400 dark:to-primary-600 bg-clip-text text-transparent mb-3",children:"Course Routine Planner"}),E.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"Create your perfect semester schedule with smart routine suggestions powered by AI"})]})})}),E.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[E.jsx("div",{className:"mb-8 animate-slide-up",children:E.jsx("div",{className:"flex items-center justify-center space-x-3 md:space-x-4",children:[{step:1,label:"Upload PDF",icon:""},{step:2,label:"Select Courses",icon:""},{step:3,label:"Choose Faculty",icon:""},{step:4,label:"Set Preferences",icon:""},{step:5,label:"Generate Routines",icon:""}].map(({step:R,label:D,icon:j})=>E.jsxs("div",{className:"flex items-center",children:[E.jsx("div",{className:`relative w-8 h-8 md:w-10 md:h-10 rounded-full flex items-center justify-center text-xs font-semibold transition-all duration-300 ${e>=R?"bg-gradient-to-r from-primary-500 to-primary-600 text-white shadow-lg scale-105":"bg-white dark:bg-dark-800 text-gray-500 dark:text-gray-400 shadow-sm"}`,children:e>=R?E.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):E.jsx("span",{className:"text-sm md:text-base",children:j})}),E.jsx("div",{className:"ml-2 hidden md:block",children:E.jsx("div",{className:`text-xs font-medium transition-colors duration-300 ${e>=R?"text-primary-600 dark:text-primary-400":"text-gray-500 dark:text-gray-400"}`,children:D})}),R<5&&E.jsx("div",{className:`w-6 md:w-8 h-0.5 ml-2 md:ml-3 transition-all duration-300 ${e>R?"bg-gradient-to-r from-primary-500 to-primary-600":"bg-gray-200 dark:bg-gray-700"}`})]},R))})}),E.jsxs("div",{className:"card-elevated animate-scale-in",children:[e===1&&E.jsx(Tb,{onParsed:x}),e===2&&E.jsx(Cb,{courses:a,selectedCourses:l,onContinue:w,onBack:()=>N(1)}),e===3&&E.jsx(Rb,{selectedCourses:l,courses:a,facultyPreferences:h,onContinue:T,onBack:()=>N(2)}),e===4&&E.jsx(Mb,{timePreferences:f,onContinue:O,onBack:()=>N(3)}),e===5&&E.jsx(Nb,{selectedCourses:l,facultyPreferences:h,timePreferences:f,courses:a,routineResults:y,onRoutineGenerated:C,onBack:()=>N(4)},`${JSON.stringify(l)}-${JSON.stringify(h)}-${JSON.stringify(f)}`)]}),e===5&&E.jsx("div",{className:"mt-8 flex justify-center space-x-4 animate-fade-in",children:E.jsxs("button",{onClick:()=>N(1),className:"btn-primary",children:[E.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Start Over"]})})]})]})}const Lb=()=>{const g=localStorage.getItem("theme");return g?g==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches},wu=g=>{g?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")};function kb(){const[g,t]=mt.useState(()=>{const l=Lb();return wu(l),l}),[e,i]=mt.useState(!0);mt.useEffect(()=>{wu(g),localStorage.setItem("theme",g?"dark":"light")},[g]),mt.useEffect(()=>{wu(g)},[]),mt.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[e]);const a=()=>{t(!g)},o=()=>{i(!1),window.scrollTo({top:0,behavior:"smooth"})};return e?E.jsx(_v,{onGetStarted:o,darkMode:g,toggleDarkMode:a}):E.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 transition-colors duration-300",children:E.jsx(Db,{darkMode:g,toggleDarkMode:a})})}jv.createRoot(document.getElementById("root")).render(E.jsx(mt.StrictMode,{children:E.jsx(kb,{})}));
