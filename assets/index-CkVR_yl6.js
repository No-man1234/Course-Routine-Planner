var Lg=p=>{throw TypeError(p)};var Zc=(p,t,e)=>t.has(p)||Lg("Cannot "+e);var Yt=(p,t,e)=>(Zc(p,t,"read from private field"),e?e.call(p):t.get(p)),xs=(p,t,e)=>t.has(p)?Lg("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(p):t.set(p,e),Pe=(p,t,e,i)=>(Zc(p,t,"write to private field"),i?i.call(p,e):t.set(p,e),e),As=(p,t,e)=>(Zc(p,t,"access private method"),e);var Ig=(p,t,e,i)=>({set _(a){Pe(p,t,a,e)},get _(){return Yt(p,t,i)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=e(a);fetch(a.href,l)}})();var qc={exports:{}},za={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kg;function dv(){if(kg)return za;kg=1;var p=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,l){var o=null;if(l!==void 0&&(o=""+l),a.key!==void 0&&(o=""+a.key),"key"in a){l={};for(var u in a)u!=="key"&&(l[u]=a[u])}else l=a;return a=l.ref,{$$typeof:p,type:i,key:o,ref:a!==void 0?a:null,props:l}}return za.Fragment=t,za.jsx=e,za.jsxs=e,za}var _g;function fv(){return _g||(_g=1,qc.exports=dv()),qc.exports}var E=fv(),Jc={exports:{}},wt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg;function gv(){if(jg)return wt;jg=1;var p=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;function y(k){return k===null||typeof k!="object"?null:(k=m&&k[m]||k["@@iterator"],typeof k=="function"?k:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,x={};function w(k,K,nt){this.props=k,this.context=K,this.refs=x,this.updater=nt||b}w.prototype.isReactComponent={},w.prototype.setState=function(k,K){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,K,"setState")},w.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function T(){}T.prototype=w.prototype;function O(k,K,nt){this.props=k,this.context=K,this.refs=x,this.updater=nt||b}var R=O.prototype=new T;R.constructor=O,A(R,w.prototype),R.isPureReactComponent=!0;var M=Array.isArray,C={H:null,A:null,T:null,S:null,V:null},L=Object.prototype.hasOwnProperty;function _(k,K,nt,et,ot,rt){return nt=rt.ref,{$$typeof:p,type:k,key:K,ref:nt!==void 0?nt:null,props:rt}}function z(k,K){return _(k.type,K,void 0,void 0,void 0,k.props)}function G(k){return typeof k=="object"&&k!==null&&k.$$typeof===p}function Q(k){var K={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(nt){return K[nt]})}var J=/\/+/g;function at(k,K){return typeof k=="object"&&k!==null&&k.key!=null?Q(""+k.key):K.toString(36)}function Y(){}function it(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(Y,Y):(k.status="pending",k.then(function(K){k.status==="pending"&&(k.status="fulfilled",k.value=K)},function(K){k.status==="pending"&&(k.status="rejected",k.reason=K)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function lt(k,K,nt,et,ot){var rt=typeof k;(rt==="undefined"||rt==="boolean")&&(k=null);var X=!1;if(k===null)X=!0;else switch(rt){case"bigint":case"string":case"number":X=!0;break;case"object":switch(k.$$typeof){case p:case t:X=!0;break;case f:return X=k._init,lt(X(k._payload),K,nt,et,ot)}}if(X)return ot=ot(k),X=et===""?"."+at(k,0):et,M(ot)?(nt="",X!=null&&(nt=X.replace(J,"$&/")+"/"),lt(ot,K,nt,"",function(ht){return ht})):ot!=null&&(G(ot)&&(ot=z(ot,nt+(ot.key==null||k&&k.key===ot.key?"":(""+ot.key).replace(J,"$&/")+"/")+X)),K.push(ot)),1;X=0;var $=et===""?".":et+":";if(M(k))for(var tt=0;tt<k.length;tt++)et=k[tt],rt=$+at(et,tt),X+=lt(et,K,nt,rt,ot);else if(tt=y(k),typeof tt=="function")for(k=tt.call(k),tt=0;!(et=k.next()).done;)et=et.value,rt=$+at(et,tt++),X+=lt(et,K,nt,rt,ot);else if(rt==="object"){if(typeof k.then=="function")return lt(it(k),K,nt,et,ot);throw K=String(k),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return X}function D(k,K,nt){if(k==null)return k;var et=[],ot=0;return lt(k,et,"","",function(rt){return K.call(nt,rt,ot++)}),et}function j(k){if(k._status===-1){var K=k._result;K=K(),K.then(function(nt){(k._status===0||k._status===-1)&&(k._status=1,k._result=nt)},function(nt){(k._status===0||k._status===-1)&&(k._status=2,k._result=nt)}),k._status===-1&&(k._status=0,k._result=K)}if(k._status===1)return k._result.default;throw k._result}var st=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function gt(){}return wt.Children={map:D,forEach:function(k,K,nt){D(k,function(){K.apply(this,arguments)},nt)},count:function(k){var K=0;return D(k,function(){K++}),K},toArray:function(k){return D(k,function(K){return K})||[]},only:function(k){if(!G(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},wt.Component=w,wt.Fragment=e,wt.Profiler=a,wt.PureComponent=O,wt.StrictMode=i,wt.Suspense=h,wt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,wt.__COMPILER_RUNTIME={__proto__:null,c:function(k){return C.H.useMemoCache(k)}},wt.cache=function(k){return function(){return k.apply(null,arguments)}},wt.cloneElement=function(k,K,nt){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var et=A({},k.props),ot=k.key,rt=void 0;if(K!=null)for(X in K.ref!==void 0&&(rt=void 0),K.key!==void 0&&(ot=""+K.key),K)!L.call(K,X)||X==="key"||X==="__self"||X==="__source"||X==="ref"&&K.ref===void 0||(et[X]=K[X]);var X=arguments.length-2;if(X===1)et.children=nt;else if(1<X){for(var $=Array(X),tt=0;tt<X;tt++)$[tt]=arguments[tt+2];et.children=$}return _(k.type,ot,void 0,void 0,rt,et)},wt.createContext=function(k){return k={$$typeof:o,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:l,_context:k},k},wt.createElement=function(k,K,nt){var et,ot={},rt=null;if(K!=null)for(et in K.key!==void 0&&(rt=""+K.key),K)L.call(K,et)&&et!=="key"&&et!=="__self"&&et!=="__source"&&(ot[et]=K[et]);var X=arguments.length-2;if(X===1)ot.children=nt;else if(1<X){for(var $=Array(X),tt=0;tt<X;tt++)$[tt]=arguments[tt+2];ot.children=$}if(k&&k.defaultProps)for(et in X=k.defaultProps,X)ot[et]===void 0&&(ot[et]=X[et]);return _(k,rt,void 0,void 0,null,ot)},wt.createRef=function(){return{current:null}},wt.forwardRef=function(k){return{$$typeof:u,render:k}},wt.isValidElement=G,wt.lazy=function(k){return{$$typeof:f,_payload:{_status:-1,_result:k},_init:j}},wt.memo=function(k,K){return{$$typeof:d,type:k,compare:K===void 0?null:K}},wt.startTransition=function(k){var K=C.T,nt={};C.T=nt;try{var et=k(),ot=C.S;ot!==null&&ot(nt,et),typeof et=="object"&&et!==null&&typeof et.then=="function"&&et.then(gt,st)}catch(rt){st(rt)}finally{C.T=K}},wt.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},wt.use=function(k){return C.H.use(k)},wt.useActionState=function(k,K,nt){return C.H.useActionState(k,K,nt)},wt.useCallback=function(k,K){return C.H.useCallback(k,K)},wt.useContext=function(k){return C.H.useContext(k)},wt.useDebugValue=function(){},wt.useDeferredValue=function(k,K){return C.H.useDeferredValue(k,K)},wt.useEffect=function(k,K,nt){var et=C.H;if(typeof nt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return et.useEffect(k,K)},wt.useId=function(){return C.H.useId()},wt.useImperativeHandle=function(k,K,nt){return C.H.useImperativeHandle(k,K,nt)},wt.useInsertionEffect=function(k,K){return C.H.useInsertionEffect(k,K)},wt.useLayoutEffect=function(k,K){return C.H.useLayoutEffect(k,K)},wt.useMemo=function(k,K){return C.H.useMemo(k,K)},wt.useOptimistic=function(k,K){return C.H.useOptimistic(k,K)},wt.useReducer=function(k,K,nt){return C.H.useReducer(k,K,nt)},wt.useRef=function(k){return C.H.useRef(k)},wt.useState=function(k){return C.H.useState(k)},wt.useSyncExternalStore=function(k,K,nt){return C.H.useSyncExternalStore(k,K,nt)},wt.useTransition=function(){return C.H.useTransition()},wt.version="19.1.0",wt}var Pg;function Eu(){return Pg||(Pg=1,Jc.exports=gv()),Jc.exports}var Et=Eu(),tu={exports:{}},Fa={},eu={exports:{}},su={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bg;function pv(){return Bg||(Bg=1,function(p){function t(D,j){var st=D.length;D.push(j);t:for(;0<st;){var gt=st-1>>>1,k=D[gt];if(0<a(k,j))D[gt]=j,D[st]=k,st=gt;else break t}}function e(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var j=D[0],st=D.pop();if(st!==j){D[0]=st;t:for(var gt=0,k=D.length,K=k>>>1;gt<K;){var nt=2*(gt+1)-1,et=D[nt],ot=nt+1,rt=D[ot];if(0>a(et,st))ot<k&&0>a(rt,et)?(D[gt]=rt,D[ot]=st,gt=ot):(D[gt]=et,D[nt]=st,gt=nt);else if(ot<k&&0>a(rt,st))D[gt]=rt,D[ot]=st,gt=ot;else break t}}return j}function a(D,j){var st=D.sortIndex-j.sortIndex;return st!==0?st:D.id-j.id}if(p.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;p.unstable_now=function(){return l.now()}}else{var o=Date,u=o.now();p.unstable_now=function(){return o.now()-u}}var h=[],d=[],f=1,m=null,y=3,b=!1,A=!1,x=!1,w=!1,T=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function M(D){for(var j=e(d);j!==null;){if(j.callback===null)i(d);else if(j.startTime<=D)i(d),j.sortIndex=j.expirationTime,t(h,j);else break;j=e(d)}}function C(D){if(x=!1,M(D),!A)if(e(h)!==null)A=!0,L||(L=!0,at());else{var j=e(d);j!==null&&lt(C,j.startTime-D)}}var L=!1,_=-1,z=5,G=-1;function Q(){return w?!0:!(p.unstable_now()-G<z)}function J(){if(w=!1,L){var D=p.unstable_now();G=D;var j=!0;try{t:{A=!1,x&&(x=!1,O(_),_=-1),b=!0;var st=y;try{e:{for(M(D),m=e(h);m!==null&&!(m.expirationTime>D&&Q());){var gt=m.callback;if(typeof gt=="function"){m.callback=null,y=m.priorityLevel;var k=gt(m.expirationTime<=D);if(D=p.unstable_now(),typeof k=="function"){m.callback=k,M(D),j=!0;break e}m===e(h)&&i(h),M(D)}else i(h);m=e(h)}if(m!==null)j=!0;else{var K=e(d);K!==null&&lt(C,K.startTime-D),j=!1}}break t}finally{m=null,y=st,b=!1}j=void 0}}finally{j?at():L=!1}}}var at;if(typeof R=="function")at=function(){R(J)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,it=Y.port2;Y.port1.onmessage=J,at=function(){it.postMessage(null)}}else at=function(){T(J,0)};function lt(D,j){_=T(function(){D(p.unstable_now())},j)}p.unstable_IdlePriority=5,p.unstable_ImmediatePriority=1,p.unstable_LowPriority=4,p.unstable_NormalPriority=3,p.unstable_Profiling=null,p.unstable_UserBlockingPriority=2,p.unstable_cancelCallback=function(D){D.callback=null},p.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<D?Math.floor(1e3/D):5},p.unstable_getCurrentPriorityLevel=function(){return y},p.unstable_next=function(D){switch(y){case 1:case 2:case 3:var j=3;break;default:j=y}var st=y;y=j;try{return D()}finally{y=st}},p.unstable_requestPaint=function(){w=!0},p.unstable_runWithPriority=function(D,j){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var st=y;y=D;try{return j()}finally{y=st}},p.unstable_scheduleCallback=function(D,j,st){var gt=p.unstable_now();switch(typeof st=="object"&&st!==null?(st=st.delay,st=typeof st=="number"&&0<st?gt+st:gt):st=gt,D){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=st+k,D={id:f++,callback:j,priorityLevel:D,startTime:st,expirationTime:k,sortIndex:-1},st>gt?(D.sortIndex=st,t(d,D),e(h)===null&&D===e(d)&&(x?(O(_),_=-1):x=!0,lt(C,st-gt))):(D.sortIndex=k,t(h,D),A||b||(A=!0,L||(L=!0,at()))),D},p.unstable_shouldYield=Q,p.unstable_wrapCallback=function(D){var j=y;return function(){var st=y;y=j;try{return D.apply(this,arguments)}finally{y=st}}}}(su)),su}var zg;function mv(){return zg||(zg=1,eu.exports=pv()),eu.exports}var nu={exports:{}},Te={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fg;function vv(){if(Fg)return Te;Fg=1;var p=Eu();function t(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(h,d,f){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:m==null?null:""+m,children:h,containerInfo:d,implementation:f}}var o=p.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,d){if(h==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Te.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Te.createPortal=function(h,d){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return l(h,d,null,f)},Te.flushSync=function(h){var d=o.T,f=i.p;try{if(o.T=null,i.p=2,h)return h()}finally{o.T=d,i.p=f,i.d.f()}},Te.preconnect=function(h,d){typeof h=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(h,d))},Te.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},Te.preinit=function(h,d){if(typeof h=="string"&&d&&typeof d.as=="string"){var f=d.as,m=u(f,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;f==="style"?i.d.S(h,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:b}):f==="script"&&i.d.X(h,{crossOrigin:m,integrity:y,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Te.preinitModule=function(h,d){if(typeof h=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var f=u(d.as,d.crossOrigin);i.d.M(h,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(h)},Te.preload=function(h,d){if(typeof h=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var f=d.as,m=u(f,d.crossOrigin);i.d.L(h,f,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Te.preloadModule=function(h,d){if(typeof h=="string")if(d){var f=u(d.as,d.crossOrigin);i.d.m(h,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(h)},Te.requestFormReset=function(h){i.d.r(h)},Te.unstable_batchedUpdates=function(h,d){return h(d)},Te.useFormState=function(h,d,f){return o.H.useFormState(h,d,f)},Te.useFormStatus=function(){return o.H.useHostTransitionStatus()},Te.version="19.1.0",Te}var Ug;function yv(){if(Ug)return nu.exports;Ug=1;function p(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(p)}catch(t){console.error(t)}}return p(),nu.exports=vv(),nu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hg;function bv(){if(Hg)return Fa;Hg=1;var p=mv(),t=Eu(),e=yv();function i(s){var n="https://react.dev/errors/"+s;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+s+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var n=s,r=s;if(s.alternate)for(;n.return;)n=n.return;else{s=n;do n=s,(n.flags&4098)!==0&&(r=n.return),s=n.return;while(s)}return n.tag===3?r:null}function o(s){if(s.tag===13){var n=s.memoizedState;if(n===null&&(s=s.alternate,s!==null&&(n=s.memoizedState)),n!==null)return n.dehydrated}return null}function u(s){if(l(s)!==s)throw Error(i(188))}function h(s){var n=s.alternate;if(!n){if(n=l(s),n===null)throw Error(i(188));return n!==s?null:s}for(var r=s,c=n;;){var g=r.return;if(g===null)break;var v=g.alternate;if(v===null){if(c=g.return,c!==null){r=c;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===r)return u(g),s;if(v===c)return u(g),n;v=v.sibling}throw Error(i(188))}if(r.return!==c.return)r=g,c=v;else{for(var S=!1,N=g.child;N;){if(N===r){S=!0,r=g,c=v;break}if(N===c){S=!0,c=g,r=v;break}N=N.sibling}if(!S){for(N=v.child;N;){if(N===r){S=!0,r=v,c=g;break}if(N===c){S=!0,c=v,r=g;break}N=N.sibling}if(!S)throw Error(i(189))}}if(r.alternate!==c)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?s:n}function d(s){var n=s.tag;if(n===5||n===26||n===27||n===6)return s;for(s=s.child;s!==null;){if(n=d(s),n!==null)return n;s=s.sibling}return null}var f=Object.assign,m=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),R=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function at(s){return s===null||typeof s!="object"?null:(s=J&&s[J]||s["@@iterator"],typeof s=="function"?s:null)}var Y=Symbol.for("react.client.reference");function it(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===Y?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case A:return"Fragment";case w:return"Profiler";case x:return"StrictMode";case C:return"Suspense";case L:return"SuspenseList";case G:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case b:return"Portal";case R:return(s.displayName||"Context")+".Provider";case O:return(s._context.displayName||"Context")+".Consumer";case M:var n=s.render;return s=s.displayName,s||(s=n.displayName||n.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case _:return n=s.displayName||null,n!==null?n:it(s.type)||"Memo";case z:n=s._payload,s=s._init;try{return it(s(n))}catch{}}return null}var lt=Array.isArray,D=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,st={pending:!1,data:null,method:null,action:null},gt=[],k=-1;function K(s){return{current:s}}function nt(s){0>k||(s.current=gt[k],gt[k]=null,k--)}function et(s,n){k++,gt[k]=s.current,s.current=n}var ot=K(null),rt=K(null),X=K(null),$=K(null);function tt(s,n){switch(et(X,n),et(rt,s),et(ot,null),n.nodeType){case 9:case 11:s=(s=n.documentElement)&&(s=s.namespaceURI)?rg(s):0;break;default:if(s=n.tagName,n=n.namespaceURI)n=rg(n),s=lg(n,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}nt(ot),et(ot,s)}function ht(){nt(ot),nt(rt),nt(X)}function At(s){s.memoizedState!==null&&et($,s);var n=ot.current,r=lg(n,s.type);n!==r&&(et(rt,s),et(ot,r))}function Rt(s){rt.current===s&&(nt(ot),nt(rt)),$.current===s&&(nt($),ka._currentValue=st)}var Zt=Object.prototype.hasOwnProperty,pe=p.unstable_scheduleCallback,cs=p.unstable_cancelCallback,$n=p.unstable_shouldYield,Fe=p.unstable_requestPaint,Se=p.unstable_now,nr=p.unstable_getCurrentPriorityLevel,xn=p.unstable_ImmediatePriority,Fu=p.unstable_UserBlockingPriority,ir=p.unstable_NormalPriority,$p=p.unstable_LowPriority,Uu=p.unstable_IdlePriority,Kp=p.log,Wp=p.unstable_setDisableYieldValue,Hi=null,Ue=null;function Ys(s){if(typeof Kp=="function"&&Wp(s),Ue&&typeof Ue.setStrictMode=="function")try{Ue.setStrictMode(Hi,s)}catch{}}var He=Math.clz32?Math.clz32:qp,Qp=Math.log,Zp=Math.LN2;function qp(s){return s>>>=0,s===0?32:31-(Qp(s)/Zp|0)|0}var ar=256,rr=4194304;function An(s){var n=s&42;if(n!==0)return n;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function lr(s,n,r){var c=s.pendingLanes;if(c===0)return 0;var g=0,v=s.suspendedLanes,S=s.pingedLanes;s=s.warmLanes;var N=c&134217727;return N!==0?(c=N&~v,c!==0?g=An(c):(S&=N,S!==0?g=An(S):r||(r=N&~s,r!==0&&(g=An(r))))):(N=c&~v,N!==0?g=An(N):S!==0?g=An(S):r||(r=c&~s,r!==0&&(g=An(r)))),g===0?0:n!==0&&n!==g&&(n&v)===0&&(v=g&-g,r=n&-n,v>=r||v===32&&(r&4194048)!==0)?n:g}function Gi(s,n){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&n)===0}function Jp(s,n){switch(s){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hu(){var s=ar;return ar<<=1,(ar&4194048)===0&&(ar=256),s}function Gu(){var s=rr;return rr<<=1,(rr&62914560)===0&&(rr=4194304),s}function zl(s){for(var n=[],r=0;31>r;r++)n.push(s);return n}function Vi(s,n){s.pendingLanes|=n,n!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function tm(s,n,r,c,g,v){var S=s.pendingLanes;s.pendingLanes=r,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=r,s.entangledLanes&=r,s.errorRecoveryDisabledLanes&=r,s.shellSuspendCounter=0;var N=s.entanglements,I=s.expirationTimes,U=s.hiddenUpdates;for(r=S&~r;0<r;){var W=31-He(r),q=1<<W;N[W]=0,I[W]=-1;var H=U[W];if(H!==null)for(U[W]=null,W=0;W<H.length;W++){var V=H[W];V!==null&&(V.lane&=-536870913)}r&=~q}c!==0&&Vu(s,c,0),v!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=v&~(S&~n))}function Vu(s,n,r){s.pendingLanes|=n,s.suspendedLanes&=~n;var c=31-He(n);s.entangledLanes|=n,s.entanglements[c]=s.entanglements[c]|1073741824|r&4194090}function Yu(s,n){var r=s.entangledLanes|=n;for(s=s.entanglements;r;){var c=31-He(r),g=1<<c;g&n|s[c]&n&&(s[c]|=n),r&=~g}}function Fl(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ul(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Xu(){var s=j.p;return s!==0?s:(s=window.event,s===void 0?32:Cg(s.type))}function em(s,n){var r=j.p;try{return j.p=s,n()}finally{j.p=r}}var Xs=Math.random().toString(36).slice(2),Ee="__reactFiber$"+Xs,Le="__reactProps$"+Xs,Kn="__reactContainer$"+Xs,Hl="__reactEvents$"+Xs,sm="__reactListeners$"+Xs,nm="__reactHandles$"+Xs,$u="__reactResources$"+Xs,Yi="__reactMarker$"+Xs;function Gl(s){delete s[Ee],delete s[Le],delete s[Hl],delete s[sm],delete s[nm]}function Wn(s){var n=s[Ee];if(n)return n;for(var r=s.parentNode;r;){if(n=r[Kn]||r[Ee]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(s=hg(s);s!==null;){if(r=s[Ee])return r;s=hg(s)}return n}s=r,r=s.parentNode}return null}function Qn(s){if(s=s[Ee]||s[Kn]){var n=s.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return s}return null}function Xi(s){var n=s.tag;if(n===5||n===26||n===27||n===6)return s.stateNode;throw Error(i(33))}function Zn(s){var n=s[$u];return n||(n=s[$u]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function he(s){s[Yi]=!0}var Ku=new Set,Wu={};function Sn(s,n){qn(s,n),qn(s+"Capture",n)}function qn(s,n){for(Wu[s]=n,s=0;s<n.length;s++)Ku.add(n[s])}var im=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qu={},Zu={};function am(s){return Zt.call(Zu,s)?!0:Zt.call(Qu,s)?!1:im.test(s)?Zu[s]=!0:(Qu[s]=!0,!1)}function or(s,n,r){if(am(n))if(r===null)s.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":s.removeAttribute(n);return;case"boolean":var c=n.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(n);return}}s.setAttribute(n,""+r)}}function cr(s,n,r){if(r===null)s.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(n);return}s.setAttribute(n,""+r)}}function Rs(s,n,r,c){if(c===null)s.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttributeNS(n,r,""+c)}}var Vl,qu;function Jn(s){if(Vl===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);Vl=n&&n[1]||"",qu=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vl+s+qu}var Yl=!1;function Xl(s,n){if(!s||Yl)return"";Yl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(n){var q=function(){throw Error()};if(Object.defineProperty(q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(q,[])}catch(V){var H=V}Reflect.construct(s,[],q)}else{try{q.call()}catch(V){H=V}s.call(q.prototype)}}else{try{throw Error()}catch(V){H=V}(q=s())&&typeof q.catch=="function"&&q.catch(function(){})}}catch(V){if(V&&H&&typeof V.stack=="string")return[V.stack,H.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),S=v[0],N=v[1];if(S&&N){var I=S.split(`
`),U=N.split(`
`);for(g=c=0;c<I.length&&!I[c].includes("DetermineComponentFrameRoot");)c++;for(;g<U.length&&!U[g].includes("DetermineComponentFrameRoot");)g++;if(c===I.length||g===U.length)for(c=I.length-1,g=U.length-1;1<=c&&0<=g&&I[c]!==U[g];)g--;for(;1<=c&&0<=g;c--,g--)if(I[c]!==U[g]){if(c!==1||g!==1)do if(c--,g--,0>g||I[c]!==U[g]){var W=`
`+I[c].replace(" at new "," at ");return s.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",s.displayName)),W}while(1<=c&&0<=g);break}}}finally{Yl=!1,Error.prepareStackTrace=r}return(r=s?s.displayName||s.name:"")?Jn(r):""}function rm(s){switch(s.tag){case 26:case 27:case 5:return Jn(s.type);case 16:return Jn("Lazy");case 13:return Jn("Suspense");case 19:return Jn("SuspenseList");case 0:case 15:return Xl(s.type,!1);case 11:return Xl(s.type.render,!1);case 1:return Xl(s.type,!0);case 31:return Jn("Activity");default:return""}}function Ju(s){try{var n="";do n+=rm(s),s=s.return;while(s);return n}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function qe(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function th(s){var n=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function lm(s){var n=th(s)?"checked":"value",r=Object.getOwnPropertyDescriptor(s.constructor.prototype,n),c=""+s[n];if(!s.hasOwnProperty(n)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var g=r.get,v=r.set;return Object.defineProperty(s,n,{configurable:!0,get:function(){return g.call(this)},set:function(S){c=""+S,v.call(this,S)}}),Object.defineProperty(s,n,{enumerable:r.enumerable}),{getValue:function(){return c},setValue:function(S){c=""+S},stopTracking:function(){s._valueTracker=null,delete s[n]}}}}function ur(s){s._valueTracker||(s._valueTracker=lm(s))}function eh(s){if(!s)return!1;var n=s._valueTracker;if(!n)return!0;var r=n.getValue(),c="";return s&&(c=th(s)?s.checked?"true":"false":s.value),s=c,s!==r?(n.setValue(s),!0):!1}function hr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var om=/[\n"\\]/g;function Je(s){return s.replace(om,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function $l(s,n,r,c,g,v,S,N){s.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?s.type=S:s.removeAttribute("type"),n!=null?S==="number"?(n===0&&s.value===""||s.value!=n)&&(s.value=""+qe(n)):s.value!==""+qe(n)&&(s.value=""+qe(n)):S!=="submit"&&S!=="reset"||s.removeAttribute("value"),n!=null?Kl(s,S,qe(n)):r!=null?Kl(s,S,qe(r)):c!=null&&s.removeAttribute("value"),g==null&&v!=null&&(s.defaultChecked=!!v),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?s.name=""+qe(N):s.removeAttribute("name")}function sh(s,n,r,c,g,v,S,N){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),n!=null||r!=null){if(!(v!=="submit"&&v!=="reset"||n!=null))return;r=r!=null?""+qe(r):"",n=n!=null?""+qe(n):r,N||n===s.value||(s.value=n),s.defaultValue=n}c=c??g,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=N?s.checked:!!c,s.defaultChecked=!!c,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(s.name=S)}function Kl(s,n,r){n==="number"&&hr(s.ownerDocument)===s||s.defaultValue===""+r||(s.defaultValue=""+r)}function ti(s,n,r,c){if(s=s.options,n){n={};for(var g=0;g<r.length;g++)n["$"+r[g]]=!0;for(r=0;r<s.length;r++)g=n.hasOwnProperty("$"+s[r].value),s[r].selected!==g&&(s[r].selected=g),g&&c&&(s[r].defaultSelected=!0)}else{for(r=""+qe(r),n=null,g=0;g<s.length;g++){if(s[g].value===r){s[g].selected=!0,c&&(s[g].defaultSelected=!0);return}n!==null||s[g].disabled||(n=s[g])}n!==null&&(n.selected=!0)}}function nh(s,n,r){if(n!=null&&(n=""+qe(n),n!==s.value&&(s.value=n),r==null)){s.defaultValue!==n&&(s.defaultValue=n);return}s.defaultValue=r!=null?""+qe(r):""}function ih(s,n,r,c){if(n==null){if(c!=null){if(r!=null)throw Error(i(92));if(lt(c)){if(1<c.length)throw Error(i(93));c=c[0]}r=c}r==null&&(r=""),n=r}r=qe(n),s.defaultValue=r,c=s.textContent,c===r&&c!==""&&c!==null&&(s.value=c)}function ei(s,n){if(n){var r=s.firstChild;if(r&&r===s.lastChild&&r.nodeType===3){r.nodeValue=n;return}}s.textContent=n}var cm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ah(s,n,r){var c=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?c?s.setProperty(n,""):n==="float"?s.cssFloat="":s[n]="":c?s.setProperty(n,r):typeof r!="number"||r===0||cm.has(n)?n==="float"?s.cssFloat=r:s[n]=(""+r).trim():s[n]=r+"px"}function rh(s,n,r){if(n!=null&&typeof n!="object")throw Error(i(62));if(s=s.style,r!=null){for(var c in r)!r.hasOwnProperty(c)||n!=null&&n.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var g in n)c=n[g],n.hasOwnProperty(g)&&r[g]!==c&&ah(s,g,c)}else for(var v in n)n.hasOwnProperty(v)&&ah(s,v,n[v])}function Wl(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var um=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function dr(s){return hm.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Ql=null;function Zl(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var si=null,ni=null;function lh(s){var n=Qn(s);if(n&&(s=n.stateNode)){var r=s[Le]||null;t:switch(s=n.stateNode,n.type){case"input":if($l(s,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=s;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Je(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var c=r[n];if(c!==s&&c.form===s.form){var g=c[Le]||null;if(!g)throw Error(i(90));$l(c,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(n=0;n<r.length;n++)c=r[n],c.form===s.form&&eh(c)}break t;case"textarea":nh(s,r.value,r.defaultValue);break t;case"select":n=r.value,n!=null&&ti(s,!!r.multiple,n,!1)}}}var ql=!1;function oh(s,n,r){if(ql)return s(n,r);ql=!0;try{var c=s(n);return c}finally{if(ql=!1,(si!==null||ni!==null)&&(Zr(),si&&(n=si,s=ni,ni=si=null,lh(n),s)))for(n=0;n<s.length;n++)lh(s[n])}}function $i(s,n){var r=s.stateNode;if(r===null)return null;var c=r[Le]||null;if(c===null)return null;r=c[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break t;default:s=!1}if(s)return null;if(r&&typeof r!="function")throw Error(i(231,n,typeof r));return r}var Ns=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jl=!1;if(Ns)try{var Ki={};Object.defineProperty(Ki,"passive",{get:function(){Jl=!0}}),window.addEventListener("test",Ki,Ki),window.removeEventListener("test",Ki,Ki)}catch{Jl=!1}var $s=null,to=null,fr=null;function ch(){if(fr)return fr;var s,n=to,r=n.length,c,g="value"in $s?$s.value:$s.textContent,v=g.length;for(s=0;s<r&&n[s]===g[s];s++);var S=r-s;for(c=1;c<=S&&n[r-c]===g[v-c];c++);return fr=g.slice(s,1<c?1-c:void 0)}function gr(s){var n=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&n===13&&(s=13)):s=n,s===10&&(s=13),32<=s||s===13?s:0}function pr(){return!0}function uh(){return!1}function Ie(s){function n(r,c,g,v,S){this._reactName=r,this._targetInst=g,this.type=c,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var N in s)s.hasOwnProperty(N)&&(r=s[N],this[N]=r?r(v):v[N]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?pr:uh,this.isPropagationStopped=uh,this}return f(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=pr)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=pr)},persist:function(){},isPersistent:pr}),n}var En={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mr=Ie(En),Wi=f({},En,{view:0,detail:0}),dm=Ie(Wi),eo,so,Qi,vr=f({},Wi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:io,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Qi&&(Qi&&s.type==="mousemove"?(eo=s.screenX-Qi.screenX,so=s.screenY-Qi.screenY):so=eo=0,Qi=s),eo)},movementY:function(s){return"movementY"in s?s.movementY:so}}),hh=Ie(vr),fm=f({},vr,{dataTransfer:0}),gm=Ie(fm),pm=f({},Wi,{relatedTarget:0}),no=Ie(pm),mm=f({},En,{animationName:0,elapsedTime:0,pseudoElement:0}),vm=Ie(mm),ym=f({},En,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),bm=Ie(ym),xm=f({},En,{data:0}),dh=Ie(xm),Am={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Em={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wm(s){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(s):(s=Em[s])?!!n[s]:!1}function io(){return wm}var Tm=f({},Wi,{key:function(s){if(s.key){var n=Am[s.key]||s.key;if(n!=="Unidentified")return n}return s.type==="keypress"?(s=gr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Sm[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:io,charCode:function(s){return s.type==="keypress"?gr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?gr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Cm=Ie(Tm),Rm=f({},vr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fh=Ie(Rm),Nm=f({},Wi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:io}),Mm=Ie(Nm),Om=f({},En,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dm=Ie(Om),Lm=f({},vr,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Im=Ie(Lm),km=f({},En,{newState:0,oldState:0}),_m=Ie(km),jm=[9,13,27,32],ao=Ns&&"CompositionEvent"in window,Zi=null;Ns&&"documentMode"in document&&(Zi=document.documentMode);var Pm=Ns&&"TextEvent"in window&&!Zi,gh=Ns&&(!ao||Zi&&8<Zi&&11>=Zi),ph=" ",mh=!1;function vh(s,n){switch(s){case"keyup":return jm.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yh(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ii=!1;function Bm(s,n){switch(s){case"compositionend":return yh(n);case"keypress":return n.which!==32?null:(mh=!0,ph);case"textInput":return s=n.data,s===ph&&mh?null:s;default:return null}}function zm(s,n){if(ii)return s==="compositionend"||!ao&&vh(s,n)?(s=ch(),fr=to=$s=null,ii=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return gh&&n.locale!=="ko"?null:n.data;default:return null}}var Fm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bh(s){var n=s&&s.nodeName&&s.nodeName.toLowerCase();return n==="input"?!!Fm[s.type]:n==="textarea"}function xh(s,n,r,c){si?ni?ni.push(c):ni=[c]:si=c,n=nl(n,"onChange"),0<n.length&&(r=new mr("onChange","change",null,r,c),s.push({event:r,listeners:n}))}var qi=null,Ji=null;function Um(s){eg(s,0)}function yr(s){var n=Xi(s);if(eh(n))return s}function Ah(s,n){if(s==="change")return n}var Sh=!1;if(Ns){var ro;if(Ns){var lo="oninput"in document;if(!lo){var Eh=document.createElement("div");Eh.setAttribute("oninput","return;"),lo=typeof Eh.oninput=="function"}ro=lo}else ro=!1;Sh=ro&&(!document.documentMode||9<document.documentMode)}function wh(){qi&&(qi.detachEvent("onpropertychange",Th),Ji=qi=null)}function Th(s){if(s.propertyName==="value"&&yr(Ji)){var n=[];xh(n,Ji,s,Zl(s)),oh(Um,n)}}function Hm(s,n,r){s==="focusin"?(wh(),qi=n,Ji=r,qi.attachEvent("onpropertychange",Th)):s==="focusout"&&wh()}function Gm(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return yr(Ji)}function Vm(s,n){if(s==="click")return yr(n)}function Ym(s,n){if(s==="input"||s==="change")return yr(n)}function Xm(s,n){return s===n&&(s!==0||1/s===1/n)||s!==s&&n!==n}var Ge=typeof Object.is=="function"?Object.is:Xm;function ta(s,n){if(Ge(s,n))return!0;if(typeof s!="object"||s===null||typeof n!="object"||n===null)return!1;var r=Object.keys(s),c=Object.keys(n);if(r.length!==c.length)return!1;for(c=0;c<r.length;c++){var g=r[c];if(!Zt.call(n,g)||!Ge(s[g],n[g]))return!1}return!0}function Ch(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Rh(s,n){var r=Ch(s);s=0;for(var c;r;){if(r.nodeType===3){if(c=s+r.textContent.length,s<=n&&c>=n)return{node:r,offset:n-s};s=c}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=Ch(r)}}function Nh(s,n){return s&&n?s===n?!0:s&&s.nodeType===3?!1:n&&n.nodeType===3?Nh(s,n.parentNode):"contains"in s?s.contains(n):s.compareDocumentPosition?!!(s.compareDocumentPosition(n)&16):!1:!1}function Mh(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var n=hr(s.document);n instanceof s.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)s=n.contentWindow;else break;n=hr(s.document)}return n}function oo(s){var n=s&&s.nodeName&&s.nodeName.toLowerCase();return n&&(n==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||n==="textarea"||s.contentEditable==="true")}var $m=Ns&&"documentMode"in document&&11>=document.documentMode,ai=null,co=null,ea=null,uo=!1;function Oh(s,n,r){var c=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;uo||ai==null||ai!==hr(c)||(c=ai,"selectionStart"in c&&oo(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ea&&ta(ea,c)||(ea=c,c=nl(co,"onSelect"),0<c.length&&(n=new mr("onSelect","select",null,n,r),s.push({event:n,listeners:c}),n.target=ai)))}function wn(s,n){var r={};return r[s.toLowerCase()]=n.toLowerCase(),r["Webkit"+s]="webkit"+n,r["Moz"+s]="moz"+n,r}var ri={animationend:wn("Animation","AnimationEnd"),animationiteration:wn("Animation","AnimationIteration"),animationstart:wn("Animation","AnimationStart"),transitionrun:wn("Transition","TransitionRun"),transitionstart:wn("Transition","TransitionStart"),transitioncancel:wn("Transition","TransitionCancel"),transitionend:wn("Transition","TransitionEnd")},ho={},Dh={};Ns&&(Dh=document.createElement("div").style,"AnimationEvent"in window||(delete ri.animationend.animation,delete ri.animationiteration.animation,delete ri.animationstart.animation),"TransitionEvent"in window||delete ri.transitionend.transition);function Tn(s){if(ho[s])return ho[s];if(!ri[s])return s;var n=ri[s],r;for(r in n)if(n.hasOwnProperty(r)&&r in Dh)return ho[s]=n[r];return s}var Lh=Tn("animationend"),Ih=Tn("animationiteration"),kh=Tn("animationstart"),Km=Tn("transitionrun"),Wm=Tn("transitionstart"),Qm=Tn("transitioncancel"),_h=Tn("transitionend"),jh=new Map,fo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");fo.push("scrollEnd");function us(s,n){jh.set(s,n),Sn(n,[s])}var Ph=new WeakMap;function ts(s,n){if(typeof s=="object"&&s!==null){var r=Ph.get(s);return r!==void 0?r:(n={value:s,source:n,stack:Ju(n)},Ph.set(s,n),n)}return{value:s,source:n,stack:Ju(n)}}var es=[],li=0,go=0;function br(){for(var s=li,n=go=li=0;n<s;){var r=es[n];es[n++]=null;var c=es[n];es[n++]=null;var g=es[n];es[n++]=null;var v=es[n];if(es[n++]=null,c!==null&&g!==null){var S=c.pending;S===null?g.next=g:(g.next=S.next,S.next=g),c.pending=g}v!==0&&Bh(r,g,v)}}function xr(s,n,r,c){es[li++]=s,es[li++]=n,es[li++]=r,es[li++]=c,go|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function po(s,n,r,c){return xr(s,n,r,c),Ar(s)}function oi(s,n){return xr(s,null,null,n),Ar(s)}function Bh(s,n,r){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r);for(var g=!1,v=s.return;v!==null;)v.childLanes|=r,c=v.alternate,c!==null&&(c.childLanes|=r),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(g=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,g&&n!==null&&(g=31-He(r),s=v.hiddenUpdates,c=s[g],c===null?s[g]=[n]:c.push(n),n.lane=r|536870912),v):null}function Ar(s){if(50<Ca)throw Ca=0,Ac=null,Error(i(185));for(var n=s.return;n!==null;)s=n,n=s.return;return s.tag===3?s.stateNode:null}var ci={};function Zm(s,n,r,c){this.tag=s,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ve(s,n,r,c){return new Zm(s,n,r,c)}function mo(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ms(s,n){var r=s.alternate;return r===null?(r=Ve(s.tag,n,s.key,s.mode),r.elementType=s.elementType,r.type=s.type,r.stateNode=s.stateNode,r.alternate=s,s.alternate=r):(r.pendingProps=n,r.type=s.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=s.flags&65011712,r.childLanes=s.childLanes,r.lanes=s.lanes,r.child=s.child,r.memoizedProps=s.memoizedProps,r.memoizedState=s.memoizedState,r.updateQueue=s.updateQueue,n=s.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=s.sibling,r.index=s.index,r.ref=s.ref,r.refCleanup=s.refCleanup,r}function zh(s,n){s.flags&=65011714;var r=s.alternate;return r===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=r.childLanes,s.lanes=r.lanes,s.child=r.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=r.memoizedProps,s.memoizedState=r.memoizedState,s.updateQueue=r.updateQueue,s.type=r.type,n=r.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),s}function Sr(s,n,r,c,g,v){var S=0;if(c=s,typeof s=="function")mo(s)&&(S=1);else if(typeof s=="string")S=J0(s,r,ot.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case G:return s=Ve(31,r,n,g),s.elementType=G,s.lanes=v,s;case A:return Cn(r.children,g,v,n);case x:S=8,g|=24;break;case w:return s=Ve(12,r,n,g|2),s.elementType=w,s.lanes=v,s;case C:return s=Ve(13,r,n,g),s.elementType=C,s.lanes=v,s;case L:return s=Ve(19,r,n,g),s.elementType=L,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case T:case R:S=10;break t;case O:S=9;break t;case M:S=11;break t;case _:S=14;break t;case z:S=16,c=null;break t}S=29,r=Error(i(130,s===null?"null":typeof s,"")),c=null}return n=Ve(S,r,n,g),n.elementType=s,n.type=c,n.lanes=v,n}function Cn(s,n,r,c){return s=Ve(7,s,c,n),s.lanes=r,s}function vo(s,n,r){return s=Ve(6,s,null,n),s.lanes=r,s}function yo(s,n,r){return n=Ve(4,s.children!==null?s.children:[],s.key,n),n.lanes=r,n.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},n}var ui=[],hi=0,Er=null,wr=0,ss=[],ns=0,Rn=null,Os=1,Ds="";function Nn(s,n){ui[hi++]=wr,ui[hi++]=Er,Er=s,wr=n}function Fh(s,n,r){ss[ns++]=Os,ss[ns++]=Ds,ss[ns++]=Rn,Rn=s;var c=Os;s=Ds;var g=32-He(c)-1;c&=~(1<<g),r+=1;var v=32-He(n)+g;if(30<v){var S=g-g%5;v=(c&(1<<S)-1).toString(32),c>>=S,g-=S,Os=1<<32-He(n)+g|r<<g|c,Ds=v+s}else Os=1<<v|r<<g|c,Ds=s}function bo(s){s.return!==null&&(Nn(s,1),Fh(s,1,0))}function xo(s){for(;s===Er;)Er=ui[--hi],ui[hi]=null,wr=ui[--hi],ui[hi]=null;for(;s===Rn;)Rn=ss[--ns],ss[ns]=null,Ds=ss[--ns],ss[ns]=null,Os=ss[--ns],ss[ns]=null}var Re=null,Wt=null,_t=!1,Mn=null,ps=!1,Ao=Error(i(519));function On(s){var n=Error(i(418,""));throw ia(ts(n,s)),Ao}function Uh(s){var n=s.stateNode,r=s.type,c=s.memoizedProps;switch(n[Ee]=s,n[Le]=c,r){case"dialog":Mt("cancel",n),Mt("close",n);break;case"iframe":case"object":case"embed":Mt("load",n);break;case"video":case"audio":for(r=0;r<Na.length;r++)Mt(Na[r],n);break;case"source":Mt("error",n);break;case"img":case"image":case"link":Mt("error",n),Mt("load",n);break;case"details":Mt("toggle",n);break;case"input":Mt("invalid",n),sh(n,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),ur(n);break;case"select":Mt("invalid",n);break;case"textarea":Mt("invalid",n),ih(n,c.value,c.defaultValue,c.children),ur(n)}r=c.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||c.suppressHydrationWarning===!0||ag(n.textContent,r)?(c.popover!=null&&(Mt("beforetoggle",n),Mt("toggle",n)),c.onScroll!=null&&Mt("scroll",n),c.onScrollEnd!=null&&Mt("scrollend",n),c.onClick!=null&&(n.onclick=il),n=!0):n=!1,n||On(s)}function Hh(s){for(Re=s.return;Re;)switch(Re.tag){case 5:case 13:ps=!1;return;case 27:case 3:ps=!0;return;default:Re=Re.return}}function sa(s){if(s!==Re)return!1;if(!_t)return Hh(s),_t=!0,!1;var n=s.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=s.type,r=!(r!=="form"&&r!=="button")||Pc(s.type,s.memoizedProps)),r=!r),r&&Wt&&On(s),Hh(s),n===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));t:{for(s=s.nextSibling,n=0;s;){if(s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){Wt=ds(s.nextSibling);break t}n--}else r!=="$"&&r!=="$!"&&r!=="$?"||n++;s=s.nextSibling}Wt=null}}else n===27?(n=Wt,un(s.type)?(s=Uc,Uc=null,Wt=s):Wt=n):Wt=Re?ds(s.stateNode.nextSibling):null;return!0}function na(){Wt=Re=null,_t=!1}function Gh(){var s=Mn;return s!==null&&(je===null?je=s:je.push.apply(je,s),Mn=null),s}function ia(s){Mn===null?Mn=[s]:Mn.push(s)}var So=K(null),Dn=null,Ls=null;function Ks(s,n,r){et(So,n._currentValue),n._currentValue=r}function Is(s){s._currentValue=So.current,nt(So)}function Eo(s,n,r){for(;s!==null;){var c=s.alternate;if((s.childLanes&n)!==n?(s.childLanes|=n,c!==null&&(c.childLanes|=n)):c!==null&&(c.childLanes&n)!==n&&(c.childLanes|=n),s===r)break;s=s.return}}function wo(s,n,r,c){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var v=g.dependencies;if(v!==null){var S=g.child;v=v.firstContext;t:for(;v!==null;){var N=v;v=g;for(var I=0;I<n.length;I++)if(N.context===n[I]){v.lanes|=r,N=v.alternate,N!==null&&(N.lanes|=r),Eo(v.return,r,s),c||(S=null);break t}v=N.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(i(341));S.lanes|=r,v=S.alternate,v!==null&&(v.lanes|=r),Eo(S,r,s),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===s){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function aa(s,n,r,c){s=null;for(var g=n,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var N=g.type;Ge(g.pendingProps.value,S.value)||(s!==null?s.push(N):s=[N])}}else if(g===$.current){if(S=g.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(ka):s=[ka])}g=g.return}s!==null&&wo(n,s,r,c),n.flags|=262144}function Tr(s){for(s=s.firstContext;s!==null;){if(!Ge(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ln(s){Dn=s,Ls=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function we(s){return Vh(Dn,s)}function Cr(s,n){return Dn===null&&Ln(s),Vh(s,n)}function Vh(s,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},Ls===null){if(s===null)throw Error(i(308));Ls=n,s.dependencies={lanes:0,firstContext:n},s.flags|=524288}else Ls=Ls.next=n;return r}var qm=typeof AbortController<"u"?AbortController:function(){var s=[],n=this.signal={aborted:!1,addEventListener:function(r,c){s.push(c)}};this.abort=function(){n.aborted=!0,s.forEach(function(r){return r()})}},Jm=p.unstable_scheduleCallback,t0=p.unstable_NormalPriority,oe={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function To(){return{controller:new qm,data:new Map,refCount:0}}function ra(s){s.refCount--,s.refCount===0&&Jm(t0,function(){s.controller.abort()})}var la=null,Co=0,di=0,fi=null;function e0(s,n){if(la===null){var r=la=[];Co=0,di=Nc(),fi={status:"pending",value:void 0,then:function(c){r.push(c)}}}return Co++,n.then(Yh,Yh),n}function Yh(){if(--Co===0&&la!==null){fi!==null&&(fi.status="fulfilled");var s=la;la=null,di=0,fi=null;for(var n=0;n<s.length;n++)(0,s[n])()}}function s0(s,n){var r=[],c={status:"pending",value:null,reason:null,then:function(g){r.push(g)}};return s.then(function(){c.status="fulfilled",c.value=n;for(var g=0;g<r.length;g++)(0,r[g])(n)},function(g){for(c.status="rejected",c.reason=g,g=0;g<r.length;g++)(0,r[g])(void 0)}),c}var Xh=D.S;D.S=function(s,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&e0(s,n),Xh!==null&&Xh(s,n)};var In=K(null);function Ro(){var s=In.current;return s!==null?s:Gt.pooledCache}function Rr(s,n){n===null?et(In,In.current):et(In,n.pool)}function $h(){var s=Ro();return s===null?null:{parent:oe._currentValue,pool:s}}var oa=Error(i(460)),Kh=Error(i(474)),Nr=Error(i(542)),No={then:function(){}};function Wh(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Mr(){}function Qh(s,n,r){switch(r=s[r],r===void 0?s.push(n):r!==n&&(n.then(Mr,Mr),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw s=n.reason,qh(s),s;default:if(typeof n.status=="string")n.then(Mr,Mr);else{if(s=Gt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=n,s.status="pending",s.then(function(c){if(n.status==="pending"){var g=n;g.status="fulfilled",g.value=c}},function(c){if(n.status==="pending"){var g=n;g.status="rejected",g.reason=c}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw s=n.reason,qh(s),s}throw ca=n,oa}}var ca=null;function Zh(){if(ca===null)throw Error(i(459));var s=ca;return ca=null,s}function qh(s){if(s===oa||s===Nr)throw Error(i(483))}var Ws=!1;function Mo(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Oo(s,n){s=s.updateQueue,n.updateQueue===s&&(n.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Qs(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Zs(s,n,r){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(jt&2)!==0){var g=c.pending;return g===null?n.next=n:(n.next=g.next,g.next=n),c.pending=n,n=Ar(s),Bh(s,null,r),n}return xr(s,c,n,r),Ar(s)}function ua(s,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var c=n.lanes;c&=s.pendingLanes,r|=c,n.lanes=r,Yu(s,r)}}function Do(s,n){var r=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,r===c)){var g=null,v=null;if(r=r.firstBaseUpdate,r!==null){do{var S={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};v===null?g=v=S:v=v.next=S,r=r.next}while(r!==null);v===null?g=v=n:v=v.next=n}else g=v=n;r={baseState:c.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},s.updateQueue=r;return}s=r.lastBaseUpdate,s===null?r.firstBaseUpdate=n:s.next=n,r.lastBaseUpdate=n}var Lo=!1;function ha(){if(Lo){var s=fi;if(s!==null)throw s}}function da(s,n,r,c){Lo=!1;var g=s.updateQueue;Ws=!1;var v=g.firstBaseUpdate,S=g.lastBaseUpdate,N=g.shared.pending;if(N!==null){g.shared.pending=null;var I=N,U=I.next;I.next=null,S===null?v=U:S.next=U,S=I;var W=s.alternate;W!==null&&(W=W.updateQueue,N=W.lastBaseUpdate,N!==S&&(N===null?W.firstBaseUpdate=U:N.next=U,W.lastBaseUpdate=I))}if(v!==null){var q=g.baseState;S=0,W=U=I=null,N=v;do{var H=N.lane&-536870913,V=H!==N.lane;if(V?(Lt&H)===H:(c&H)===H){H!==0&&H===di&&(Lo=!0),W!==null&&(W=W.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});t:{var bt=s,mt=N;H=n;var Ft=r;switch(mt.tag){case 1:if(bt=mt.payload,typeof bt=="function"){q=bt.call(Ft,q,H);break t}q=bt;break t;case 3:bt.flags=bt.flags&-65537|128;case 0:if(bt=mt.payload,H=typeof bt=="function"?bt.call(Ft,q,H):bt,H==null)break t;q=f({},q,H);break t;case 2:Ws=!0}}H=N.callback,H!==null&&(s.flags|=64,V&&(s.flags|=8192),V=g.callbacks,V===null?g.callbacks=[H]:V.push(H))}else V={lane:H,tag:N.tag,payload:N.payload,callback:N.callback,next:null},W===null?(U=W=V,I=q):W=W.next=V,S|=H;if(N=N.next,N===null){if(N=g.shared.pending,N===null)break;V=N,N=V.next,V.next=null,g.lastBaseUpdate=V,g.shared.pending=null}}while(!0);W===null&&(I=q),g.baseState=I,g.firstBaseUpdate=U,g.lastBaseUpdate=W,v===null&&(g.shared.lanes=0),rn|=S,s.lanes=S,s.memoizedState=q}}function Jh(s,n){if(typeof s!="function")throw Error(i(191,s));s.call(n)}function td(s,n){var r=s.callbacks;if(r!==null)for(s.callbacks=null,s=0;s<r.length;s++)Jh(r[s],n)}var gi=K(null),Or=K(0);function ed(s,n){s=Fs,et(Or,s),et(gi,n),Fs=s|n.baseLanes}function Io(){et(Or,Fs),et(gi,gi.current)}function ko(){Fs=Or.current,nt(gi),nt(Or)}var qs=0,Tt=null,Bt=null,se=null,Dr=!1,pi=!1,kn=!1,Lr=0,fa=0,mi=null,n0=0;function qt(){throw Error(i(321))}function _o(s,n){if(n===null)return!1;for(var r=0;r<n.length&&r<s.length;r++)if(!Ge(s[r],n[r]))return!1;return!0}function jo(s,n,r,c,g,v){return qs=v,Tt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,D.H=s===null||s.memoizedState===null?Bd:zd,kn=!1,v=r(c,g),kn=!1,pi&&(v=nd(n,r,c,g)),sd(s),v}function sd(s){D.H=Br;var n=Bt!==null&&Bt.next!==null;if(qs=0,se=Bt=Tt=null,Dr=!1,fa=0,mi=null,n)throw Error(i(300));s===null||de||(s=s.dependencies,s!==null&&Tr(s)&&(de=!0))}function nd(s,n,r,c){Tt=s;var g=0;do{if(pi&&(mi=null),fa=0,pi=!1,25<=g)throw Error(i(301));if(g+=1,se=Bt=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}D.H=u0,v=n(r,c)}while(pi);return v}function i0(){var s=D.H,n=s.useState()[0];return n=typeof n.then=="function"?ga(n):n,s=s.useState()[0],(Bt!==null?Bt.memoizedState:null)!==s&&(Tt.flags|=1024),n}function Po(){var s=Lr!==0;return Lr=0,s}function Bo(s,n,r){n.updateQueue=s.updateQueue,n.flags&=-2053,s.lanes&=~r}function zo(s){if(Dr){for(s=s.memoizedState;s!==null;){var n=s.queue;n!==null&&(n.pending=null),s=s.next}Dr=!1}qs=0,se=Bt=Tt=null,pi=!1,fa=Lr=0,mi=null}function ke(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return se===null?Tt.memoizedState=se=s:se=se.next=s,se}function ne(){if(Bt===null){var s=Tt.alternate;s=s!==null?s.memoizedState:null}else s=Bt.next;var n=se===null?Tt.memoizedState:se.next;if(n!==null)se=n,Bt=s;else{if(s===null)throw Tt.alternate===null?Error(i(467)):Error(i(310));Bt=s,s={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},se===null?Tt.memoizedState=se=s:se=se.next=s}return se}function Fo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ga(s){var n=fa;return fa+=1,mi===null&&(mi=[]),s=Qh(mi,s,n),n=Tt,(se===null?n.memoizedState:se.next)===null&&(n=n.alternate,D.H=n===null||n.memoizedState===null?Bd:zd),s}function Ir(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return ga(s);if(s.$$typeof===R)return we(s)}throw Error(i(438,String(s)))}function Uo(s){var n=null,r=Tt.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var c=Tt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(n={data:c.data.map(function(g){return g.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=Fo(),Tt.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(s),c=0;c<s;c++)r[c]=Q;return n.index++,r}function ks(s,n){return typeof n=="function"?n(s):n}function kr(s){var n=ne();return Ho(n,Bt,s)}function Ho(s,n,r){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var g=s.baseQueue,v=c.pending;if(v!==null){if(g!==null){var S=g.next;g.next=v.next,v.next=S}n.baseQueue=g=v,c.pending=null}if(v=s.baseState,g===null)s.memoizedState=v;else{n=g.next;var N=S=null,I=null,U=n,W=!1;do{var q=U.lane&-536870913;if(q!==U.lane?(Lt&q)===q:(qs&q)===q){var H=U.revertLane;if(H===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),q===di&&(W=!0);else if((qs&H)===H){U=U.next,H===di&&(W=!0);continue}else q={lane:0,revertLane:U.revertLane,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},I===null?(N=I=q,S=v):I=I.next=q,Tt.lanes|=H,rn|=H;q=U.action,kn&&r(v,q),v=U.hasEagerState?U.eagerState:r(v,q)}else H={lane:q,revertLane:U.revertLane,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},I===null?(N=I=H,S=v):I=I.next=H,Tt.lanes|=q,rn|=q;U=U.next}while(U!==null&&U!==n);if(I===null?S=v:I.next=N,!Ge(v,s.memoizedState)&&(de=!0,W&&(r=fi,r!==null)))throw r;s.memoizedState=v,s.baseState=S,s.baseQueue=I,c.lastRenderedState=v}return g===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function Go(s){var n=ne(),r=n.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=s;var c=r.dispatch,g=r.pending,v=n.memoizedState;if(g!==null){r.pending=null;var S=g=g.next;do v=s(v,S.action),S=S.next;while(S!==g);Ge(v,n.memoizedState)||(de=!0),n.memoizedState=v,n.baseQueue===null&&(n.baseState=v),r.lastRenderedState=v}return[v,c]}function id(s,n,r){var c=Tt,g=ne(),v=_t;if(v){if(r===void 0)throw Error(i(407));r=r()}else r=n();var S=!Ge((Bt||g).memoizedState,r);S&&(g.memoizedState=r,de=!0),g=g.queue;var N=ld.bind(null,c,g,s);if(pa(2048,8,N,[s]),g.getSnapshot!==n||S||se!==null&&se.memoizedState.tag&1){if(c.flags|=2048,vi(9,_r(),rd.bind(null,c,g,r,n),null),Gt===null)throw Error(i(349));v||(qs&124)!==0||ad(c,n,r)}return r}function ad(s,n,r){s.flags|=16384,s={getSnapshot:n,value:r},n=Tt.updateQueue,n===null?(n=Fo(),Tt.updateQueue=n,n.stores=[s]):(r=n.stores,r===null?n.stores=[s]:r.push(s))}function rd(s,n,r,c){n.value=r,n.getSnapshot=c,od(n)&&cd(s)}function ld(s,n,r){return r(function(){od(n)&&cd(s)})}function od(s){var n=s.getSnapshot;s=s.value;try{var r=n();return!Ge(s,r)}catch{return!0}}function cd(s){var n=oi(s,2);n!==null&&We(n,s,2)}function Vo(s){var n=ke();if(typeof s=="function"){var r=s;if(s=r(),kn){Ys(!0);try{r()}finally{Ys(!1)}}}return n.memoizedState=n.baseState=s,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ks,lastRenderedState:s},n}function ud(s,n,r,c){return s.baseState=r,Ho(s,Bt,typeof c=="function"?c:ks)}function a0(s,n,r,c,g){if(Pr(s))throw Error(i(485));if(s=n.action,s!==null){var v={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){v.listeners.push(S)}};D.T!==null?r(!0):v.isTransition=!1,c(v),r=n.pending,r===null?(v.next=n.pending=v,hd(n,v)):(v.next=r.next,n.pending=r.next=v)}}function hd(s,n){var r=n.action,c=n.payload,g=s.state;if(n.isTransition){var v=D.T,S={};D.T=S;try{var N=r(g,c),I=D.S;I!==null&&I(S,N),dd(s,n,N)}catch(U){Yo(s,n,U)}finally{D.T=v}}else try{v=r(g,c),dd(s,n,v)}catch(U){Yo(s,n,U)}}function dd(s,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(c){fd(s,n,c)},function(c){return Yo(s,n,c)}):fd(s,n,r)}function fd(s,n,r){n.status="fulfilled",n.value=r,gd(n),s.state=r,n=s.pending,n!==null&&(r=n.next,r===n?s.pending=null:(r=r.next,n.next=r,hd(s,r)))}function Yo(s,n,r){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do n.status="rejected",n.reason=r,gd(n),n=n.next;while(n!==c)}s.action=null}function gd(s){s=s.listeners;for(var n=0;n<s.length;n++)(0,s[n])()}function pd(s,n){return n}function md(s,n){if(_t){var r=Gt.formState;if(r!==null){t:{var c=Tt;if(_t){if(Wt){e:{for(var g=Wt,v=ps;g.nodeType!==8;){if(!v){g=null;break e}if(g=ds(g.nextSibling),g===null){g=null;break e}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){Wt=ds(g.nextSibling),c=g.data==="F!";break t}}On(c)}c=!1}c&&(n=r[0])}}return r=ke(),r.memoizedState=r.baseState=n,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pd,lastRenderedState:n},r.queue=c,r=_d.bind(null,Tt,c),c.dispatch=r,c=Vo(!1),v=Qo.bind(null,Tt,!1,c.queue),c=ke(),g={state:n,dispatch:null,action:s,pending:null},c.queue=g,r=a0.bind(null,Tt,g,v,r),g.dispatch=r,c.memoizedState=s,[n,r,!1]}function vd(s){var n=ne();return yd(n,Bt,s)}function yd(s,n,r){if(n=Ho(s,n,pd)[0],s=kr(ks)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var c=ga(n)}catch(S){throw S===oa?Nr:S}else c=n;n=ne();var g=n.queue,v=g.dispatch;return r!==n.memoizedState&&(Tt.flags|=2048,vi(9,_r(),r0.bind(null,g,r),null)),[c,v,s]}function r0(s,n){s.action=n}function bd(s){var n=ne(),r=Bt;if(r!==null)return yd(n,r,s);ne(),n=n.memoizedState,r=ne();var c=r.queue.dispatch;return r.memoizedState=s,[n,c,!1]}function vi(s,n,r,c){return s={tag:s,create:r,deps:c,inst:n,next:null},n=Tt.updateQueue,n===null&&(n=Fo(),Tt.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=s.next=s:(c=r.next,r.next=s,s.next=c,n.lastEffect=s),s}function _r(){return{destroy:void 0,resource:void 0}}function xd(){return ne().memoizedState}function jr(s,n,r,c){var g=ke();c=c===void 0?null:c,Tt.flags|=s,g.memoizedState=vi(1|n,_r(),r,c)}function pa(s,n,r,c){var g=ne();c=c===void 0?null:c;var v=g.memoizedState.inst;Bt!==null&&c!==null&&_o(c,Bt.memoizedState.deps)?g.memoizedState=vi(n,v,r,c):(Tt.flags|=s,g.memoizedState=vi(1|n,v,r,c))}function Ad(s,n){jr(8390656,8,s,n)}function Sd(s,n){pa(2048,8,s,n)}function Ed(s,n){return pa(4,2,s,n)}function wd(s,n){return pa(4,4,s,n)}function Td(s,n){if(typeof n=="function"){s=s();var r=n(s);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return s=s(),n.current=s,function(){n.current=null}}function Cd(s,n,r){r=r!=null?r.concat([s]):null,pa(4,4,Td.bind(null,n,s),r)}function Xo(){}function Rd(s,n){var r=ne();n=n===void 0?null:n;var c=r.memoizedState;return n!==null&&_o(n,c[1])?c[0]:(r.memoizedState=[s,n],s)}function Nd(s,n){var r=ne();n=n===void 0?null:n;var c=r.memoizedState;if(n!==null&&_o(n,c[1]))return c[0];if(c=s(),kn){Ys(!0);try{s()}finally{Ys(!1)}}return r.memoizedState=[c,n],c}function $o(s,n,r){return r===void 0||(qs&1073741824)!==0?s.memoizedState=n:(s.memoizedState=r,s=Lf(),Tt.lanes|=s,rn|=s,r)}function Md(s,n,r,c){return Ge(r,n)?r:gi.current!==null?(s=$o(s,r,c),Ge(s,n)||(de=!0),s):(qs&42)===0?(de=!0,s.memoizedState=r):(s=Lf(),Tt.lanes|=s,rn|=s,n)}function Od(s,n,r,c,g){var v=j.p;j.p=v!==0&&8>v?v:8;var S=D.T,N={};D.T=N,Qo(s,!1,n,r);try{var I=g(),U=D.S;if(U!==null&&U(N,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var W=s0(I,c);ma(s,n,W,Ke(s))}else ma(s,n,c,Ke(s))}catch(q){ma(s,n,{then:function(){},status:"rejected",reason:q},Ke())}finally{j.p=v,D.T=S}}function l0(){}function Ko(s,n,r,c){if(s.tag!==5)throw Error(i(476));var g=Dd(s).queue;Od(s,g,n,st,r===null?l0:function(){return Ld(s),r(c)})}function Dd(s){var n=s.memoizedState;if(n!==null)return n;n={memoizedState:st,baseState:st,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ks,lastRenderedState:st},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ks,lastRenderedState:r},next:null},s.memoizedState=n,s=s.alternate,s!==null&&(s.memoizedState=n),n}function Ld(s){var n=Dd(s).next.queue;ma(s,n,{},Ke())}function Wo(){return we(ka)}function Id(){return ne().memoizedState}function kd(){return ne().memoizedState}function o0(s){for(var n=s.return;n!==null;){switch(n.tag){case 24:case 3:var r=Ke();s=Qs(r);var c=Zs(n,s,r);c!==null&&(We(c,n,r),ua(c,n,r)),n={cache:To()},s.payload=n;return}n=n.return}}function c0(s,n,r){var c=Ke();r={lane:c,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},Pr(s)?jd(n,r):(r=po(s,n,r,c),r!==null&&(We(r,s,c),Pd(r,n,c)))}function _d(s,n,r){var c=Ke();ma(s,n,r,c)}function ma(s,n,r,c){var g={lane:c,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(Pr(s))jd(n,g);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=n.lastRenderedReducer,v!==null))try{var S=n.lastRenderedState,N=v(S,r);if(g.hasEagerState=!0,g.eagerState=N,Ge(N,S))return xr(s,n,g,0),Gt===null&&br(),!1}catch{}finally{}if(r=po(s,n,g,c),r!==null)return We(r,s,c),Pd(r,n,c),!0}return!1}function Qo(s,n,r,c){if(c={lane:2,revertLane:Nc(),action:c,hasEagerState:!1,eagerState:null,next:null},Pr(s)){if(n)throw Error(i(479))}else n=po(s,r,c,2),n!==null&&We(n,s,2)}function Pr(s){var n=s.alternate;return s===Tt||n!==null&&n===Tt}function jd(s,n){pi=Dr=!0;var r=s.pending;r===null?n.next=n:(n.next=r.next,r.next=n),s.pending=n}function Pd(s,n,r){if((r&4194048)!==0){var c=n.lanes;c&=s.pendingLanes,r|=c,n.lanes=r,Yu(s,r)}}var Br={readContext:we,use:Ir,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useLayoutEffect:qt,useInsertionEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useSyncExternalStore:qt,useId:qt,useHostTransitionStatus:qt,useFormState:qt,useActionState:qt,useOptimistic:qt,useMemoCache:qt,useCacheRefresh:qt},Bd={readContext:we,use:Ir,useCallback:function(s,n){return ke().memoizedState=[s,n===void 0?null:n],s},useContext:we,useEffect:Ad,useImperativeHandle:function(s,n,r){r=r!=null?r.concat([s]):null,jr(4194308,4,Td.bind(null,n,s),r)},useLayoutEffect:function(s,n){return jr(4194308,4,s,n)},useInsertionEffect:function(s,n){jr(4,2,s,n)},useMemo:function(s,n){var r=ke();n=n===void 0?null:n;var c=s();if(kn){Ys(!0);try{s()}finally{Ys(!1)}}return r.memoizedState=[c,n],c},useReducer:function(s,n,r){var c=ke();if(r!==void 0){var g=r(n);if(kn){Ys(!0);try{r(n)}finally{Ys(!1)}}}else g=n;return c.memoizedState=c.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},c.queue=s,s=s.dispatch=c0.bind(null,Tt,s),[c.memoizedState,s]},useRef:function(s){var n=ke();return s={current:s},n.memoizedState=s},useState:function(s){s=Vo(s);var n=s.queue,r=_d.bind(null,Tt,n);return n.dispatch=r,[s.memoizedState,r]},useDebugValue:Xo,useDeferredValue:function(s,n){var r=ke();return $o(r,s,n)},useTransition:function(){var s=Vo(!1);return s=Od.bind(null,Tt,s.queue,!0,!1),ke().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,n,r){var c=Tt,g=ke();if(_t){if(r===void 0)throw Error(i(407));r=r()}else{if(r=n(),Gt===null)throw Error(i(349));(Lt&124)!==0||ad(c,n,r)}g.memoizedState=r;var v={value:r,getSnapshot:n};return g.queue=v,Ad(ld.bind(null,c,v,s),[s]),c.flags|=2048,vi(9,_r(),rd.bind(null,c,v,r,n),null),r},useId:function(){var s=ke(),n=Gt.identifierPrefix;if(_t){var r=Ds,c=Os;r=(c&~(1<<32-He(c)-1)).toString(32)+r,n="«"+n+"R"+r,r=Lr++,0<r&&(n+="H"+r.toString(32)),n+="»"}else r=n0++,n="«"+n+"r"+r.toString(32)+"»";return s.memoizedState=n},useHostTransitionStatus:Wo,useFormState:md,useActionState:md,useOptimistic:function(s){var n=ke();n.memoizedState=n.baseState=s;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=Qo.bind(null,Tt,!0,r),r.dispatch=n,[s,n]},useMemoCache:Uo,useCacheRefresh:function(){return ke().memoizedState=o0.bind(null,Tt)}},zd={readContext:we,use:Ir,useCallback:Rd,useContext:we,useEffect:Sd,useImperativeHandle:Cd,useInsertionEffect:Ed,useLayoutEffect:wd,useMemo:Nd,useReducer:kr,useRef:xd,useState:function(){return kr(ks)},useDebugValue:Xo,useDeferredValue:function(s,n){var r=ne();return Md(r,Bt.memoizedState,s,n)},useTransition:function(){var s=kr(ks)[0],n=ne().memoizedState;return[typeof s=="boolean"?s:ga(s),n]},useSyncExternalStore:id,useId:Id,useHostTransitionStatus:Wo,useFormState:vd,useActionState:vd,useOptimistic:function(s,n){var r=ne();return ud(r,Bt,s,n)},useMemoCache:Uo,useCacheRefresh:kd},u0={readContext:we,use:Ir,useCallback:Rd,useContext:we,useEffect:Sd,useImperativeHandle:Cd,useInsertionEffect:Ed,useLayoutEffect:wd,useMemo:Nd,useReducer:Go,useRef:xd,useState:function(){return Go(ks)},useDebugValue:Xo,useDeferredValue:function(s,n){var r=ne();return Bt===null?$o(r,s,n):Md(r,Bt.memoizedState,s,n)},useTransition:function(){var s=Go(ks)[0],n=ne().memoizedState;return[typeof s=="boolean"?s:ga(s),n]},useSyncExternalStore:id,useId:Id,useHostTransitionStatus:Wo,useFormState:bd,useActionState:bd,useOptimistic:function(s,n){var r=ne();return Bt!==null?ud(r,Bt,s,n):(r.baseState=s,[s,r.queue.dispatch])},useMemoCache:Uo,useCacheRefresh:kd},yi=null,va=0;function zr(s){var n=va;return va+=1,yi===null&&(yi=[]),Qh(yi,s,n)}function ya(s,n){n=n.props.ref,s.ref=n!==void 0?n:null}function Fr(s,n){throw n.$$typeof===m?Error(i(525)):(s=Object.prototype.toString.call(n),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":s)))}function Fd(s){var n=s._init;return n(s._payload)}function Ud(s){function n(B,P){if(s){var F=B.deletions;F===null?(B.deletions=[P],B.flags|=16):F.push(P)}}function r(B,P){if(!s)return null;for(;P!==null;)n(B,P),P=P.sibling;return null}function c(B){for(var P=new Map;B!==null;)B.key!==null?P.set(B.key,B):P.set(B.index,B),B=B.sibling;return P}function g(B,P){return B=Ms(B,P),B.index=0,B.sibling=null,B}function v(B,P,F){return B.index=F,s?(F=B.alternate,F!==null?(F=F.index,F<P?(B.flags|=67108866,P):F):(B.flags|=67108866,P)):(B.flags|=1048576,P)}function S(B){return s&&B.alternate===null&&(B.flags|=67108866),B}function N(B,P,F,Z){return P===null||P.tag!==6?(P=vo(F,B.mode,Z),P.return=B,P):(P=g(P,F),P.return=B,P)}function I(B,P,F,Z){var ut=F.type;return ut===A?W(B,P,F.props.children,Z,F.key):P!==null&&(P.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===z&&Fd(ut)===P.type)?(P=g(P,F.props),ya(P,F),P.return=B,P):(P=Sr(F.type,F.key,F.props,null,B.mode,Z),ya(P,F),P.return=B,P)}function U(B,P,F,Z){return P===null||P.tag!==4||P.stateNode.containerInfo!==F.containerInfo||P.stateNode.implementation!==F.implementation?(P=yo(F,B.mode,Z),P.return=B,P):(P=g(P,F.children||[]),P.return=B,P)}function W(B,P,F,Z,ut){return P===null||P.tag!==7?(P=Cn(F,B.mode,Z,ut),P.return=B,P):(P=g(P,F),P.return=B,P)}function q(B,P,F){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=vo(""+P,B.mode,F),P.return=B,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case y:return F=Sr(P.type,P.key,P.props,null,B.mode,F),ya(F,P),F.return=B,F;case b:return P=yo(P,B.mode,F),P.return=B,P;case z:var Z=P._init;return P=Z(P._payload),q(B,P,F)}if(lt(P)||at(P))return P=Cn(P,B.mode,F,null),P.return=B,P;if(typeof P.then=="function")return q(B,zr(P),F);if(P.$$typeof===R)return q(B,Cr(B,P),F);Fr(B,P)}return null}function H(B,P,F,Z){var ut=P!==null?P.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return ut!==null?null:N(B,P,""+F,Z);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case y:return F.key===ut?I(B,P,F,Z):null;case b:return F.key===ut?U(B,P,F,Z):null;case z:return ut=F._init,F=ut(F._payload),H(B,P,F,Z)}if(lt(F)||at(F))return ut!==null?null:W(B,P,F,Z,null);if(typeof F.then=="function")return H(B,P,zr(F),Z);if(F.$$typeof===R)return H(B,P,Cr(B,F),Z);Fr(B,F)}return null}function V(B,P,F,Z,ut){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return B=B.get(F)||null,N(P,B,""+Z,ut);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case y:return B=B.get(Z.key===null?F:Z.key)||null,I(P,B,Z,ut);case b:return B=B.get(Z.key===null?F:Z.key)||null,U(P,B,Z,ut);case z:var Ct=Z._init;return Z=Ct(Z._payload),V(B,P,F,Z,ut)}if(lt(Z)||at(Z))return B=B.get(F)||null,W(P,B,Z,ut,null);if(typeof Z.then=="function")return V(B,P,F,zr(Z),ut);if(Z.$$typeof===R)return V(B,P,F,Cr(P,Z),ut);Fr(P,Z)}return null}function bt(B,P,F,Z){for(var ut=null,Ct=null,dt=P,vt=P=0,ge=null;dt!==null&&vt<F.length;vt++){dt.index>vt?(ge=dt,dt=null):ge=dt.sibling;var kt=H(B,dt,F[vt],Z);if(kt===null){dt===null&&(dt=ge);break}s&&dt&&kt.alternate===null&&n(B,dt),P=v(kt,P,vt),Ct===null?ut=kt:Ct.sibling=kt,Ct=kt,dt=ge}if(vt===F.length)return r(B,dt),_t&&Nn(B,vt),ut;if(dt===null){for(;vt<F.length;vt++)dt=q(B,F[vt],Z),dt!==null&&(P=v(dt,P,vt),Ct===null?ut=dt:Ct.sibling=dt,Ct=dt);return _t&&Nn(B,vt),ut}for(dt=c(dt);vt<F.length;vt++)ge=V(dt,B,vt,F[vt],Z),ge!==null&&(s&&ge.alternate!==null&&dt.delete(ge.key===null?vt:ge.key),P=v(ge,P,vt),Ct===null?ut=ge:Ct.sibling=ge,Ct=ge);return s&&dt.forEach(function(pn){return n(B,pn)}),_t&&Nn(B,vt),ut}function mt(B,P,F,Z){if(F==null)throw Error(i(151));for(var ut=null,Ct=null,dt=P,vt=P=0,ge=null,kt=F.next();dt!==null&&!kt.done;vt++,kt=F.next()){dt.index>vt?(ge=dt,dt=null):ge=dt.sibling;var pn=H(B,dt,kt.value,Z);if(pn===null){dt===null&&(dt=ge);break}s&&dt&&pn.alternate===null&&n(B,dt),P=v(pn,P,vt),Ct===null?ut=pn:Ct.sibling=pn,Ct=pn,dt=ge}if(kt.done)return r(B,dt),_t&&Nn(B,vt),ut;if(dt===null){for(;!kt.done;vt++,kt=F.next())kt=q(B,kt.value,Z),kt!==null&&(P=v(kt,P,vt),Ct===null?ut=kt:Ct.sibling=kt,Ct=kt);return _t&&Nn(B,vt),ut}for(dt=c(dt);!kt.done;vt++,kt=F.next())kt=V(dt,B,vt,kt.value,Z),kt!==null&&(s&&kt.alternate!==null&&dt.delete(kt.key===null?vt:kt.key),P=v(kt,P,vt),Ct===null?ut=kt:Ct.sibling=kt,Ct=kt);return s&&dt.forEach(function(hv){return n(B,hv)}),_t&&Nn(B,vt),ut}function Ft(B,P,F,Z){if(typeof F=="object"&&F!==null&&F.type===A&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case y:t:{for(var ut=F.key;P!==null;){if(P.key===ut){if(ut=F.type,ut===A){if(P.tag===7){r(B,P.sibling),Z=g(P,F.props.children),Z.return=B,B=Z;break t}}else if(P.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===z&&Fd(ut)===P.type){r(B,P.sibling),Z=g(P,F.props),ya(Z,F),Z.return=B,B=Z;break t}r(B,P);break}else n(B,P);P=P.sibling}F.type===A?(Z=Cn(F.props.children,B.mode,Z,F.key),Z.return=B,B=Z):(Z=Sr(F.type,F.key,F.props,null,B.mode,Z),ya(Z,F),Z.return=B,B=Z)}return S(B);case b:t:{for(ut=F.key;P!==null;){if(P.key===ut)if(P.tag===4&&P.stateNode.containerInfo===F.containerInfo&&P.stateNode.implementation===F.implementation){r(B,P.sibling),Z=g(P,F.children||[]),Z.return=B,B=Z;break t}else{r(B,P);break}else n(B,P);P=P.sibling}Z=yo(F,B.mode,Z),Z.return=B,B=Z}return S(B);case z:return ut=F._init,F=ut(F._payload),Ft(B,P,F,Z)}if(lt(F))return bt(B,P,F,Z);if(at(F)){if(ut=at(F),typeof ut!="function")throw Error(i(150));return F=ut.call(F),mt(B,P,F,Z)}if(typeof F.then=="function")return Ft(B,P,zr(F),Z);if(F.$$typeof===R)return Ft(B,P,Cr(B,F),Z);Fr(B,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,P!==null&&P.tag===6?(r(B,P.sibling),Z=g(P,F),Z.return=B,B=Z):(r(B,P),Z=vo(F,B.mode,Z),Z.return=B,B=Z),S(B)):r(B,P)}return function(B,P,F,Z){try{va=0;var ut=Ft(B,P,F,Z);return yi=null,ut}catch(dt){if(dt===oa||dt===Nr)throw dt;var Ct=Ve(29,dt,null,B.mode);return Ct.lanes=Z,Ct.return=B,Ct}finally{}}}var bi=Ud(!0),Hd=Ud(!1),is=K(null),ms=null;function Js(s){var n=s.alternate;et(ce,ce.current&1),et(is,s),ms===null&&(n===null||gi.current!==null||n.memoizedState!==null)&&(ms=s)}function Gd(s){if(s.tag===22){if(et(ce,ce.current),et(is,s),ms===null){var n=s.alternate;n!==null&&n.memoizedState!==null&&(ms=s)}}else tn()}function tn(){et(ce,ce.current),et(is,is.current)}function _s(s){nt(is),ms===s&&(ms=null),nt(ce)}var ce=K(0);function Ur(s){for(var n=s;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||Fc(r)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break;for(;n.sibling===null;){if(n.return===null||n.return===s)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function Zo(s,n,r,c){n=s.memoizedState,r=r(c,n),r=r==null?n:f({},n,r),s.memoizedState=r,s.lanes===0&&(s.updateQueue.baseState=r)}var qo={enqueueSetState:function(s,n,r){s=s._reactInternals;var c=Ke(),g=Qs(c);g.payload=n,r!=null&&(g.callback=r),n=Zs(s,g,c),n!==null&&(We(n,s,c),ua(n,s,c))},enqueueReplaceState:function(s,n,r){s=s._reactInternals;var c=Ke(),g=Qs(c);g.tag=1,g.payload=n,r!=null&&(g.callback=r),n=Zs(s,g,c),n!==null&&(We(n,s,c),ua(n,s,c))},enqueueForceUpdate:function(s,n){s=s._reactInternals;var r=Ke(),c=Qs(r);c.tag=2,n!=null&&(c.callback=n),n=Zs(s,c,r),n!==null&&(We(n,s,r),ua(n,s,r))}};function Vd(s,n,r,c,g,v,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,v,S):n.prototype&&n.prototype.isPureReactComponent?!ta(r,c)||!ta(g,v):!0}function Yd(s,n,r,c){s=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,c),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,c),n.state!==s&&qo.enqueueReplaceState(n,n.state,null)}function _n(s,n){var r=n;if("ref"in n){r={};for(var c in n)c!=="ref"&&(r[c]=n[c])}if(s=s.defaultProps){r===n&&(r=f({},r));for(var g in s)r[g]===void 0&&(r[g]=s[g])}return r}var Hr=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function Xd(s){Hr(s)}function $d(s){console.error(s)}function Kd(s){Hr(s)}function Gr(s,n){try{var r=s.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(c){setTimeout(function(){throw c})}}function Wd(s,n,r){try{var c=s.onCaughtError;c(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Jo(s,n,r){return r=Qs(r),r.tag=3,r.payload={element:null},r.callback=function(){Gr(s,n)},r}function Qd(s){return s=Qs(s),s.tag=3,s}function Zd(s,n,r,c){var g=r.type.getDerivedStateFromError;if(typeof g=="function"){var v=c.value;s.payload=function(){return g(v)},s.callback=function(){Wd(n,r,c)}}var S=r.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(s.callback=function(){Wd(n,r,c),typeof g!="function"&&(ln===null?ln=new Set([this]):ln.add(this));var N=c.stack;this.componentDidCatch(c.value,{componentStack:N!==null?N:""})})}function h0(s,n,r,c,g){if(r.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(n=r.alternate,n!==null&&aa(n,r,g,!0),r=is.current,r!==null){switch(r.tag){case 13:return ms===null?Ec():r.alternate===null&&Qt===0&&(Qt=3),r.flags&=-257,r.flags|=65536,r.lanes=g,c===No?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([c]):n.add(c),Tc(s,c,g)),!1;case 22:return r.flags|=65536,c===No?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([c])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([c]):r.add(c)),Tc(s,c,g)),!1}throw Error(i(435,r.tag))}return Tc(s,c,g),Ec(),!1}if(_t)return n=is.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=g,c!==Ao&&(s=Error(i(422),{cause:c}),ia(ts(s,r)))):(c!==Ao&&(n=Error(i(423),{cause:c}),ia(ts(n,r))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,c=ts(c,r),g=Jo(s.stateNode,c,g),Do(s,g),Qt!==4&&(Qt=2)),!1;var v=Error(i(520),{cause:c});if(v=ts(v,r),Ta===null?Ta=[v]:Ta.push(v),Qt!==4&&(Qt=2),n===null)return!0;c=ts(c,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,s=g&-g,r.lanes|=s,s=Jo(r.stateNode,c,s),Do(r,s),!1;case 1:if(n=r.type,v=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ln===null||!ln.has(v))))return r.flags|=65536,g&=-g,r.lanes|=g,g=Qd(g),Zd(g,s,r,c),Do(r,g),!1}r=r.return}while(r!==null);return!1}var qd=Error(i(461)),de=!1;function me(s,n,r,c){n.child=s===null?Hd(n,null,r,c):bi(n,s.child,r,c)}function Jd(s,n,r,c,g){r=r.render;var v=n.ref;if("ref"in c){var S={};for(var N in c)N!=="ref"&&(S[N]=c[N])}else S=c;return Ln(n),c=jo(s,n,r,S,v,g),N=Po(),s!==null&&!de?(Bo(s,n,g),js(s,n,g)):(_t&&N&&bo(n),n.flags|=1,me(s,n,c,g),n.child)}function tf(s,n,r,c,g){if(s===null){var v=r.type;return typeof v=="function"&&!mo(v)&&v.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=v,ef(s,n,v,c,g)):(s=Sr(r.type,null,c,n,n.mode,g),s.ref=n.ref,s.return=n,n.child=s)}if(v=s.child,!lc(s,g)){var S=v.memoizedProps;if(r=r.compare,r=r!==null?r:ta,r(S,c)&&s.ref===n.ref)return js(s,n,g)}return n.flags|=1,s=Ms(v,c),s.ref=n.ref,s.return=n,n.child=s}function ef(s,n,r,c,g){if(s!==null){var v=s.memoizedProps;if(ta(v,c)&&s.ref===n.ref)if(de=!1,n.pendingProps=c=v,lc(s,g))(s.flags&131072)!==0&&(de=!0);else return n.lanes=s.lanes,js(s,n,g)}return tc(s,n,r,c,g)}function sf(s,n,r){var c=n.pendingProps,g=c.children,v=s!==null?s.memoizedState:null;if(c.mode==="hidden"){if((n.flags&128)!==0){if(c=v!==null?v.baseLanes|r:r,s!==null){for(g=n.child=s.child,v=0;g!==null;)v=v|g.lanes|g.childLanes,g=g.sibling;n.childLanes=v&~c}else n.childLanes=0,n.child=null;return nf(s,n,c,r)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},s!==null&&Rr(n,v!==null?v.cachePool:null),v!==null?ed(n,v):Io(),Gd(n);else return n.lanes=n.childLanes=536870912,nf(s,n,v!==null?v.baseLanes|r:r,r)}else v!==null?(Rr(n,v.cachePool),ed(n,v),tn(),n.memoizedState=null):(s!==null&&Rr(n,null),Io(),tn());return me(s,n,g,r),n.child}function nf(s,n,r,c){var g=Ro();return g=g===null?null:{parent:oe._currentValue,pool:g},n.memoizedState={baseLanes:r,cachePool:g},s!==null&&Rr(n,null),Io(),Gd(n),s!==null&&aa(s,n,c,!0),null}function Vr(s,n){var r=n.ref;if(r===null)s!==null&&s.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(s===null||s.ref!==r)&&(n.flags|=4194816)}}function tc(s,n,r,c,g){return Ln(n),r=jo(s,n,r,c,void 0,g),c=Po(),s!==null&&!de?(Bo(s,n,g),js(s,n,g)):(_t&&c&&bo(n),n.flags|=1,me(s,n,r,g),n.child)}function af(s,n,r,c,g,v){return Ln(n),n.updateQueue=null,r=nd(n,c,r,g),sd(s),c=Po(),s!==null&&!de?(Bo(s,n,v),js(s,n,v)):(_t&&c&&bo(n),n.flags|=1,me(s,n,r,v),n.child)}function rf(s,n,r,c,g){if(Ln(n),n.stateNode===null){var v=ci,S=r.contextType;typeof S=="object"&&S!==null&&(v=we(S)),v=new r(c,v),n.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=qo,n.stateNode=v,v._reactInternals=n,v=n.stateNode,v.props=c,v.state=n.memoizedState,v.refs={},Mo(n),S=r.contextType,v.context=typeof S=="object"&&S!==null?we(S):ci,v.state=n.memoizedState,S=r.getDerivedStateFromProps,typeof S=="function"&&(Zo(n,r,S,c),v.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(S=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),S!==v.state&&qo.enqueueReplaceState(v,v.state,null),da(n,c,v,g),ha(),v.state=n.memoizedState),typeof v.componentDidMount=="function"&&(n.flags|=4194308),c=!0}else if(s===null){v=n.stateNode;var N=n.memoizedProps,I=_n(r,N);v.props=I;var U=v.context,W=r.contextType;S=ci,typeof W=="object"&&W!==null&&(S=we(W));var q=r.getDerivedStateFromProps;W=typeof q=="function"||typeof v.getSnapshotBeforeUpdate=="function",N=n.pendingProps!==N,W||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(N||U!==S)&&Yd(n,v,c,S),Ws=!1;var H=n.memoizedState;v.state=H,da(n,c,v,g),ha(),U=n.memoizedState,N||H!==U||Ws?(typeof q=="function"&&(Zo(n,r,q,c),U=n.memoizedState),(I=Ws||Vd(n,r,I,c,H,U,S))?(W||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(n.flags|=4194308)):(typeof v.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=c,n.memoizedState=U),v.props=c,v.state=U,v.context=S,c=I):(typeof v.componentDidMount=="function"&&(n.flags|=4194308),c=!1)}else{v=n.stateNode,Oo(s,n),S=n.memoizedProps,W=_n(r,S),v.props=W,q=n.pendingProps,H=v.context,U=r.contextType,I=ci,typeof U=="object"&&U!==null&&(I=we(U)),N=r.getDerivedStateFromProps,(U=typeof N=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==q||H!==I)&&Yd(n,v,c,I),Ws=!1,H=n.memoizedState,v.state=H,da(n,c,v,g),ha();var V=n.memoizedState;S!==q||H!==V||Ws||s!==null&&s.dependencies!==null&&Tr(s.dependencies)?(typeof N=="function"&&(Zo(n,r,N,c),V=n.memoizedState),(W=Ws||Vd(n,r,W,c,H,V,I)||s!==null&&s.dependencies!==null&&Tr(s.dependencies))?(U||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,V,I),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,V,I)),typeof v.componentDidUpdate=="function"&&(n.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===s.memoizedProps&&H===s.memoizedState||(n.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&H===s.memoizedState||(n.flags|=1024),n.memoizedProps=c,n.memoizedState=V),v.props=c,v.state=V,v.context=I,c=W):(typeof v.componentDidUpdate!="function"||S===s.memoizedProps&&H===s.memoizedState||(n.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&H===s.memoizedState||(n.flags|=1024),c=!1)}return v=c,Vr(s,n),c=(n.flags&128)!==0,v||c?(v=n.stateNode,r=c&&typeof r.getDerivedStateFromError!="function"?null:v.render(),n.flags|=1,s!==null&&c?(n.child=bi(n,s.child,null,g),n.child=bi(n,null,r,g)):me(s,n,r,g),n.memoizedState=v.state,s=n.child):s=js(s,n,g),s}function lf(s,n,r,c){return na(),n.flags|=256,me(s,n,r,c),n.child}var ec={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sc(s){return{baseLanes:s,cachePool:$h()}}function nc(s,n,r){return s=s!==null?s.childLanes&~r:0,n&&(s|=as),s}function of(s,n,r){var c=n.pendingProps,g=!1,v=(n.flags&128)!==0,S;if((S=v)||(S=s!==null&&s.memoizedState===null?!1:(ce.current&2)!==0),S&&(g=!0,n.flags&=-129),S=(n.flags&32)!==0,n.flags&=-33,s===null){if(_t){if(g?Js(n):tn(),_t){var N=Wt,I;if(I=N){t:{for(I=N,N=ps;I.nodeType!==8;){if(!N){N=null;break t}if(I=ds(I.nextSibling),I===null){N=null;break t}}N=I}N!==null?(n.memoizedState={dehydrated:N,treeContext:Rn!==null?{id:Os,overflow:Ds}:null,retryLane:536870912,hydrationErrors:null},I=Ve(18,null,null,0),I.stateNode=N,I.return=n,n.child=I,Re=n,Wt=null,I=!0):I=!1}I||On(n)}if(N=n.memoizedState,N!==null&&(N=N.dehydrated,N!==null))return Fc(N)?n.lanes=32:n.lanes=536870912,null;_s(n)}return N=c.children,c=c.fallback,g?(tn(),g=n.mode,N=Yr({mode:"hidden",children:N},g),c=Cn(c,g,r,null),N.return=n,c.return=n,N.sibling=c,n.child=N,g=n.child,g.memoizedState=sc(r),g.childLanes=nc(s,S,r),n.memoizedState=ec,c):(Js(n),ic(n,N))}if(I=s.memoizedState,I!==null&&(N=I.dehydrated,N!==null)){if(v)n.flags&256?(Js(n),n.flags&=-257,n=ac(s,n,r)):n.memoizedState!==null?(tn(),n.child=s.child,n.flags|=128,n=null):(tn(),g=c.fallback,N=n.mode,c=Yr({mode:"visible",children:c.children},N),g=Cn(g,N,r,null),g.flags|=2,c.return=n,g.return=n,c.sibling=g,n.child=c,bi(n,s.child,null,r),c=n.child,c.memoizedState=sc(r),c.childLanes=nc(s,S,r),n.memoizedState=ec,n=g);else if(Js(n),Fc(N)){if(S=N.nextSibling&&N.nextSibling.dataset,S)var U=S.dgst;S=U,c=Error(i(419)),c.stack="",c.digest=S,ia({value:c,source:null,stack:null}),n=ac(s,n,r)}else if(de||aa(s,n,r,!1),S=(r&s.childLanes)!==0,de||S){if(S=Gt,S!==null&&(c=r&-r,c=(c&42)!==0?1:Fl(c),c=(c&(S.suspendedLanes|r))!==0?0:c,c!==0&&c!==I.retryLane))throw I.retryLane=c,oi(s,c),We(S,s,c),qd;N.data==="$?"||Ec(),n=ac(s,n,r)}else N.data==="$?"?(n.flags|=192,n.child=s.child,n=null):(s=I.treeContext,Wt=ds(N.nextSibling),Re=n,_t=!0,Mn=null,ps=!1,s!==null&&(ss[ns++]=Os,ss[ns++]=Ds,ss[ns++]=Rn,Os=s.id,Ds=s.overflow,Rn=n),n=ic(n,c.children),n.flags|=4096);return n}return g?(tn(),g=c.fallback,N=n.mode,I=s.child,U=I.sibling,c=Ms(I,{mode:"hidden",children:c.children}),c.subtreeFlags=I.subtreeFlags&65011712,U!==null?g=Ms(U,g):(g=Cn(g,N,r,null),g.flags|=2),g.return=n,c.return=n,c.sibling=g,n.child=c,c=g,g=n.child,N=s.child.memoizedState,N===null?N=sc(r):(I=N.cachePool,I!==null?(U=oe._currentValue,I=I.parent!==U?{parent:U,pool:U}:I):I=$h(),N={baseLanes:N.baseLanes|r,cachePool:I}),g.memoizedState=N,g.childLanes=nc(s,S,r),n.memoizedState=ec,c):(Js(n),r=s.child,s=r.sibling,r=Ms(r,{mode:"visible",children:c.children}),r.return=n,r.sibling=null,s!==null&&(S=n.deletions,S===null?(n.deletions=[s],n.flags|=16):S.push(s)),n.child=r,n.memoizedState=null,r)}function ic(s,n){return n=Yr({mode:"visible",children:n},s.mode),n.return=s,s.child=n}function Yr(s,n){return s=Ve(22,s,null,n),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function ac(s,n,r){return bi(n,s.child,null,r),s=ic(n,n.pendingProps.children),s.flags|=2,n.memoizedState=null,s}function cf(s,n,r){s.lanes|=n;var c=s.alternate;c!==null&&(c.lanes|=n),Eo(s.return,n,r)}function rc(s,n,r,c,g){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:c,tail:r,tailMode:g}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=r,v.tailMode=g)}function uf(s,n,r){var c=n.pendingProps,g=c.revealOrder,v=c.tail;if(me(s,n,c.children,r),c=ce.current,(c&2)!==0)c=c&1|2,n.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=n.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&cf(s,r,n);else if(s.tag===19)cf(s,r,n);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break t;for(;s.sibling===null;){if(s.return===null||s.return===n)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}c&=1}switch(et(ce,c),g){case"forwards":for(r=n.child,g=null;r!==null;)s=r.alternate,s!==null&&Ur(s)===null&&(g=r),r=r.sibling;r=g,r===null?(g=n.child,n.child=null):(g=r.sibling,r.sibling=null),rc(n,!1,g,r,v);break;case"backwards":for(r=null,g=n.child,n.child=null;g!==null;){if(s=g.alternate,s!==null&&Ur(s)===null){n.child=g;break}s=g.sibling,g.sibling=r,r=g,g=s}rc(n,!0,r,null,v);break;case"together":rc(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function js(s,n,r){if(s!==null&&(n.dependencies=s.dependencies),rn|=n.lanes,(r&n.childLanes)===0)if(s!==null){if(aa(s,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(s!==null&&n.child!==s.child)throw Error(i(153));if(n.child!==null){for(s=n.child,r=Ms(s,s.pendingProps),n.child=r,r.return=n;s.sibling!==null;)s=s.sibling,r=r.sibling=Ms(s,s.pendingProps),r.return=n;r.sibling=null}return n.child}function lc(s,n){return(s.lanes&n)!==0?!0:(s=s.dependencies,!!(s!==null&&Tr(s)))}function d0(s,n,r){switch(n.tag){case 3:tt(n,n.stateNode.containerInfo),Ks(n,oe,s.memoizedState.cache),na();break;case 27:case 5:At(n);break;case 4:tt(n,n.stateNode.containerInfo);break;case 10:Ks(n,n.type,n.memoizedProps.value);break;case 13:var c=n.memoizedState;if(c!==null)return c.dehydrated!==null?(Js(n),n.flags|=128,null):(r&n.child.childLanes)!==0?of(s,n,r):(Js(n),s=js(s,n,r),s!==null?s.sibling:null);Js(n);break;case 19:var g=(s.flags&128)!==0;if(c=(r&n.childLanes)!==0,c||(aa(s,n,r,!1),c=(r&n.childLanes)!==0),g){if(c)return uf(s,n,r);n.flags|=128}if(g=n.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),et(ce,ce.current),c)break;return null;case 22:case 23:return n.lanes=0,sf(s,n,r);case 24:Ks(n,oe,s.memoizedState.cache)}return js(s,n,r)}function hf(s,n,r){if(s!==null)if(s.memoizedProps!==n.pendingProps)de=!0;else{if(!lc(s,r)&&(n.flags&128)===0)return de=!1,d0(s,n,r);de=(s.flags&131072)!==0}else de=!1,_t&&(n.flags&1048576)!==0&&Fh(n,wr,n.index);switch(n.lanes=0,n.tag){case 16:t:{s=n.pendingProps;var c=n.elementType,g=c._init;if(c=g(c._payload),n.type=c,typeof c=="function")mo(c)?(s=_n(c,s),n.tag=1,n=rf(null,n,c,s,r)):(n.tag=0,n=tc(null,n,c,s,r));else{if(c!=null){if(g=c.$$typeof,g===M){n.tag=11,n=Jd(null,n,c,s,r);break t}else if(g===_){n.tag=14,n=tf(null,n,c,s,r);break t}}throw n=it(c)||c,Error(i(306,n,""))}}return n;case 0:return tc(s,n,n.type,n.pendingProps,r);case 1:return c=n.type,g=_n(c,n.pendingProps),rf(s,n,c,g,r);case 3:t:{if(tt(n,n.stateNode.containerInfo),s===null)throw Error(i(387));c=n.pendingProps;var v=n.memoizedState;g=v.element,Oo(s,n),da(n,c,null,r);var S=n.memoizedState;if(c=S.cache,Ks(n,oe,c),c!==v.cache&&wo(n,[oe],r,!0),ha(),c=S.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:S.cache},n.updateQueue.baseState=v,n.memoizedState=v,n.flags&256){n=lf(s,n,c,r);break t}else if(c!==g){g=ts(Error(i(424)),n),ia(g),n=lf(s,n,c,r);break t}else{switch(s=n.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Wt=ds(s.firstChild),Re=n,_t=!0,Mn=null,ps=!0,r=Hd(n,null,c,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(na(),c===g){n=js(s,n,r);break t}me(s,n,c,r)}n=n.child}return n;case 26:return Vr(s,n),s===null?(r=pg(n.type,null,n.pendingProps,null))?n.memoizedState=r:_t||(r=n.type,s=n.pendingProps,c=al(X.current).createElement(r),c[Ee]=n,c[Le]=s,ye(c,r,s),he(c),n.stateNode=c):n.memoizedState=pg(n.type,s.memoizedProps,n.pendingProps,s.memoizedState),null;case 27:return At(n),s===null&&_t&&(c=n.stateNode=dg(n.type,n.pendingProps,X.current),Re=n,ps=!0,g=Wt,un(n.type)?(Uc=g,Wt=ds(c.firstChild)):Wt=g),me(s,n,n.pendingProps.children,r),Vr(s,n),s===null&&(n.flags|=4194304),n.child;case 5:return s===null&&_t&&((g=c=Wt)&&(c=F0(c,n.type,n.pendingProps,ps),c!==null?(n.stateNode=c,Re=n,Wt=ds(c.firstChild),ps=!1,g=!0):g=!1),g||On(n)),At(n),g=n.type,v=n.pendingProps,S=s!==null?s.memoizedProps:null,c=v.children,Pc(g,v)?c=null:S!==null&&Pc(g,S)&&(n.flags|=32),n.memoizedState!==null&&(g=jo(s,n,i0,null,null,r),ka._currentValue=g),Vr(s,n),me(s,n,c,r),n.child;case 6:return s===null&&_t&&((s=r=Wt)&&(r=U0(r,n.pendingProps,ps),r!==null?(n.stateNode=r,Re=n,Wt=null,s=!0):s=!1),s||On(n)),null;case 13:return of(s,n,r);case 4:return tt(n,n.stateNode.containerInfo),c=n.pendingProps,s===null?n.child=bi(n,null,c,r):me(s,n,c,r),n.child;case 11:return Jd(s,n,n.type,n.pendingProps,r);case 7:return me(s,n,n.pendingProps,r),n.child;case 8:return me(s,n,n.pendingProps.children,r),n.child;case 12:return me(s,n,n.pendingProps.children,r),n.child;case 10:return c=n.pendingProps,Ks(n,n.type,c.value),me(s,n,c.children,r),n.child;case 9:return g=n.type._context,c=n.pendingProps.children,Ln(n),g=we(g),c=c(g),n.flags|=1,me(s,n,c,r),n.child;case 14:return tf(s,n,n.type,n.pendingProps,r);case 15:return ef(s,n,n.type,n.pendingProps,r);case 19:return uf(s,n,r);case 31:return c=n.pendingProps,r=n.mode,c={mode:c.mode,children:c.children},s===null?(r=Yr(c,r),r.ref=n.ref,n.child=r,r.return=n,n=r):(r=Ms(s.child,c),r.ref=n.ref,n.child=r,r.return=n,n=r),n;case 22:return sf(s,n,r);case 24:return Ln(n),c=we(oe),s===null?(g=Ro(),g===null&&(g=Gt,v=To(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=r),g=v),n.memoizedState={parent:c,cache:g},Mo(n),Ks(n,oe,g)):((s.lanes&r)!==0&&(Oo(s,n),da(n,null,null,r),ha()),g=s.memoizedState,v=n.memoizedState,g.parent!==c?(g={parent:c,cache:c},n.memoizedState=g,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=g),Ks(n,oe,c)):(c=v.cache,Ks(n,oe,c),c!==g.cache&&wo(n,[oe],r,!0))),me(s,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(i(156,n.tag))}function Ps(s){s.flags|=4}function df(s,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!xg(n)){if(n=is.current,n!==null&&((Lt&4194048)===Lt?ms!==null:(Lt&62914560)!==Lt&&(Lt&536870912)===0||n!==ms))throw ca=No,Kh;s.flags|=8192}}function Xr(s,n){n!==null&&(s.flags|=4),s.flags&16384&&(n=s.tag!==22?Gu():536870912,s.lanes|=n,Ei|=n)}function ba(s,n){if(!_t)switch(s.tailMode){case"hidden":n=s.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?s.tail=null:r.sibling=null;break;case"collapsed":r=s.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?n||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function $t(s){var n=s.alternate!==null&&s.alternate.child===s.child,r=0,c=0;if(n)for(var g=s.child;g!==null;)r|=g.lanes|g.childLanes,c|=g.subtreeFlags&65011712,c|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)r|=g.lanes|g.childLanes,c|=g.subtreeFlags,c|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=c,s.childLanes=r,n}function f0(s,n,r){var c=n.pendingProps;switch(xo(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(n),null;case 1:return $t(n),null;case 3:return r=n.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),n.memoizedState.cache!==c&&(n.flags|=2048),Is(oe),ht(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(s===null||s.child===null)&&(sa(n)?Ps(n):s===null||s.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Gh())),$t(n),null;case 26:return r=n.memoizedState,s===null?(Ps(n),r!==null?($t(n),df(n,r)):($t(n),n.flags&=-16777217)):r?r!==s.memoizedState?(Ps(n),$t(n),df(n,r)):($t(n),n.flags&=-16777217):(s.memoizedProps!==c&&Ps(n),$t(n),n.flags&=-16777217),null;case 27:Rt(n),r=X.current;var g=n.type;if(s!==null&&n.stateNode!=null)s.memoizedProps!==c&&Ps(n);else{if(!c){if(n.stateNode===null)throw Error(i(166));return $t(n),null}s=ot.current,sa(n)?Uh(n):(s=dg(g,c,r),n.stateNode=s,Ps(n))}return $t(n),null;case 5:if(Rt(n),r=n.type,s!==null&&n.stateNode!=null)s.memoizedProps!==c&&Ps(n);else{if(!c){if(n.stateNode===null)throw Error(i(166));return $t(n),null}if(s=ot.current,sa(n))Uh(n);else{switch(g=al(X.current),s){case 1:s=g.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:s=g.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":s=g.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":s=g.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":s=g.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof c.is=="string"?g.createElement("select",{is:c.is}):g.createElement("select"),c.multiple?s.multiple=!0:c.size&&(s.size=c.size);break;default:s=typeof c.is=="string"?g.createElement(r,{is:c.is}):g.createElement(r)}}s[Ee]=n,s[Le]=c;t:for(g=n.child;g!==null;){if(g.tag===5||g.tag===6)s.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===n)break t;for(;g.sibling===null;){if(g.return===null||g.return===n)break t;g=g.return}g.sibling.return=g.return,g=g.sibling}n.stateNode=s;t:switch(ye(s,r,c),r){case"button":case"input":case"select":case"textarea":s=!!c.autoFocus;break t;case"img":s=!0;break t;default:s=!1}s&&Ps(n)}}return $t(n),n.flags&=-16777217,null;case 6:if(s&&n.stateNode!=null)s.memoizedProps!==c&&Ps(n);else{if(typeof c!="string"&&n.stateNode===null)throw Error(i(166));if(s=X.current,sa(n)){if(s=n.stateNode,r=n.memoizedProps,c=null,g=Re,g!==null)switch(g.tag){case 27:case 5:c=g.memoizedProps}s[Ee]=n,s=!!(s.nodeValue===r||c!==null&&c.suppressHydrationWarning===!0||ag(s.nodeValue,r)),s||On(n)}else s=al(s).createTextNode(c),s[Ee]=n,n.stateNode=s}return $t(n),null;case 13:if(c=n.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=sa(n),c!==null&&c.dehydrated!==null){if(s===null){if(!g)throw Error(i(318));if(g=n.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Ee]=n}else na(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;$t(n),g=!1}else g=Gh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return n.flags&256?(_s(n),n):(_s(n),null)}if(_s(n),(n.flags&128)!==0)return n.lanes=r,n;if(r=c!==null,s=s!==null&&s.memoizedState!==null,r){c=n.child,g=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(g=c.alternate.memoizedState.cachePool.pool);var v=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==g&&(c.flags|=2048)}return r!==s&&r&&(n.child.flags|=8192),Xr(n,n.updateQueue),$t(n),null;case 4:return ht(),s===null&&Lc(n.stateNode.containerInfo),$t(n),null;case 10:return Is(n.type),$t(n),null;case 19:if(nt(ce),g=n.memoizedState,g===null)return $t(n),null;if(c=(n.flags&128)!==0,v=g.rendering,v===null)if(c)ba(g,!1);else{if(Qt!==0||s!==null&&(s.flags&128)!==0)for(s=n.child;s!==null;){if(v=Ur(s),v!==null){for(n.flags|=128,ba(g,!1),s=v.updateQueue,n.updateQueue=s,Xr(n,s),n.subtreeFlags=0,s=r,r=n.child;r!==null;)zh(r,s),r=r.sibling;return et(ce,ce.current&1|2),n.child}s=s.sibling}g.tail!==null&&Se()>Wr&&(n.flags|=128,c=!0,ba(g,!1),n.lanes=4194304)}else{if(!c)if(s=Ur(v),s!==null){if(n.flags|=128,c=!0,s=s.updateQueue,n.updateQueue=s,Xr(n,s),ba(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!_t)return $t(n),null}else 2*Se()-g.renderingStartTime>Wr&&r!==536870912&&(n.flags|=128,c=!0,ba(g,!1),n.lanes=4194304);g.isBackwards?(v.sibling=n.child,n.child=v):(s=g.last,s!==null?s.sibling=v:n.child=v,g.last=v)}return g.tail!==null?(n=g.tail,g.rendering=n,g.tail=n.sibling,g.renderingStartTime=Se(),n.sibling=null,s=ce.current,et(ce,c?s&1|2:s&1),n):($t(n),null);case 22:case 23:return _s(n),ko(),c=n.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(n.flags|=8192):c&&(n.flags|=8192),c?(r&536870912)!==0&&(n.flags&128)===0&&($t(n),n.subtreeFlags&6&&(n.flags|=8192)):$t(n),r=n.updateQueue,r!==null&&Xr(n,r.retryQueue),r=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),c=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),c!==r&&(n.flags|=2048),s!==null&&nt(In),null;case 24:return r=null,s!==null&&(r=s.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),Is(oe),$t(n),null;case 25:return null;case 30:return null}throw Error(i(156,n.tag))}function g0(s,n){switch(xo(n),n.tag){case 1:return s=n.flags,s&65536?(n.flags=s&-65537|128,n):null;case 3:return Is(oe),ht(),s=n.flags,(s&65536)!==0&&(s&128)===0?(n.flags=s&-65537|128,n):null;case 26:case 27:case 5:return Rt(n),null;case 13:if(_s(n),s=n.memoizedState,s!==null&&s.dehydrated!==null){if(n.alternate===null)throw Error(i(340));na()}return s=n.flags,s&65536?(n.flags=s&-65537|128,n):null;case 19:return nt(ce),null;case 4:return ht(),null;case 10:return Is(n.type),null;case 22:case 23:return _s(n),ko(),s!==null&&nt(In),s=n.flags,s&65536?(n.flags=s&-65537|128,n):null;case 24:return Is(oe),null;case 25:return null;default:return null}}function ff(s,n){switch(xo(n),n.tag){case 3:Is(oe),ht();break;case 26:case 27:case 5:Rt(n);break;case 4:ht();break;case 13:_s(n);break;case 19:nt(ce);break;case 10:Is(n.type);break;case 22:case 23:_s(n),ko(),s!==null&&nt(In);break;case 24:Is(oe)}}function xa(s,n){try{var r=n.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var g=c.next;r=g;do{if((r.tag&s)===s){c=void 0;var v=r.create,S=r.inst;c=v(),S.destroy=c}r=r.next}while(r!==g)}}catch(N){Ht(n,n.return,N)}}function en(s,n,r){try{var c=n.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var v=g.next;c=v;do{if((c.tag&s)===s){var S=c.inst,N=S.destroy;if(N!==void 0){S.destroy=void 0,g=n;var I=r,U=N;try{U()}catch(W){Ht(g,I,W)}}}c=c.next}while(c!==v)}}catch(W){Ht(n,n.return,W)}}function gf(s){var n=s.updateQueue;if(n!==null){var r=s.stateNode;try{td(n,r)}catch(c){Ht(s,s.return,c)}}}function pf(s,n,r){r.props=_n(s.type,s.memoizedProps),r.state=s.memoizedState;try{r.componentWillUnmount()}catch(c){Ht(s,n,c)}}function Aa(s,n){try{var r=s.ref;if(r!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof r=="function"?s.refCleanup=r(c):r.current=c}}catch(g){Ht(s,n,g)}}function vs(s,n){var r=s.ref,c=s.refCleanup;if(r!==null)if(typeof c=="function")try{c()}catch(g){Ht(s,n,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(g){Ht(s,n,g)}else r.current=null}function mf(s){var n=s.type,r=s.memoizedProps,c=s.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&c.focus();break t;case"img":r.src?c.src=r.src:r.srcSet&&(c.srcset=r.srcSet)}}catch(g){Ht(s,s.return,g)}}function oc(s,n,r){try{var c=s.stateNode;_0(c,s.type,r,n),c[Le]=n}catch(g){Ht(s,s.return,g)}}function vf(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&un(s.type)||s.tag===4}function cc(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||vf(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&un(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function uc(s,n,r){var c=s.tag;if(c===5||c===6)s=s.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(s,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(s),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=il));else if(c!==4&&(c===27&&un(s.type)&&(r=s.stateNode,n=null),s=s.child,s!==null))for(uc(s,n,r),s=s.sibling;s!==null;)uc(s,n,r),s=s.sibling}function $r(s,n,r){var c=s.tag;if(c===5||c===6)s=s.stateNode,n?r.insertBefore(s,n):r.appendChild(s);else if(c!==4&&(c===27&&un(s.type)&&(r=s.stateNode),s=s.child,s!==null))for($r(s,n,r),s=s.sibling;s!==null;)$r(s,n,r),s=s.sibling}function yf(s){var n=s.stateNode,r=s.memoizedProps;try{for(var c=s.type,g=n.attributes;g.length;)n.removeAttributeNode(g[0]);ye(n,c,r),n[Ee]=s,n[Le]=r}catch(v){Ht(s,s.return,v)}}var Bs=!1,Jt=!1,hc=!1,bf=typeof WeakSet=="function"?WeakSet:Set,fe=null;function p0(s,n){if(s=s.containerInfo,_c=hl,s=Mh(s),oo(s)){if("selectionStart"in s)var r={start:s.selectionStart,end:s.selectionEnd};else t:{r=(r=s.ownerDocument)&&r.defaultView||window;var c=r.getSelection&&r.getSelection();if(c&&c.rangeCount!==0){r=c.anchorNode;var g=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{r.nodeType,v.nodeType}catch{r=null;break t}var S=0,N=-1,I=-1,U=0,W=0,q=s,H=null;e:for(;;){for(var V;q!==r||g!==0&&q.nodeType!==3||(N=S+g),q!==v||c!==0&&q.nodeType!==3||(I=S+c),q.nodeType===3&&(S+=q.nodeValue.length),(V=q.firstChild)!==null;)H=q,q=V;for(;;){if(q===s)break e;if(H===r&&++U===g&&(N=S),H===v&&++W===c&&(I=S),(V=q.nextSibling)!==null)break;q=H,H=q.parentNode}q=V}r=N===-1||I===-1?null:{start:N,end:I}}else r=null}r=r||{start:0,end:0}}else r=null;for(jc={focusedElem:s,selectionRange:r},hl=!1,fe=n;fe!==null;)if(n=fe,s=n.child,(n.subtreeFlags&1024)!==0&&s!==null)s.return=n,fe=s;else for(;fe!==null;){switch(n=fe,v=n.alternate,s=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,r=n,g=v.memoizedProps,v=v.memoizedState,c=r.stateNode;try{var bt=_n(r.type,g,r.elementType===r.type);s=c.getSnapshotBeforeUpdate(bt,v),c.__reactInternalSnapshotBeforeUpdate=s}catch(mt){Ht(r,r.return,mt)}}break;case 3:if((s&1024)!==0){if(s=n.stateNode.containerInfo,r=s.nodeType,r===9)zc(s);else if(r===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":zc(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=n.sibling,s!==null){s.return=n.return,fe=s;break}fe=n.return}}function xf(s,n,r){var c=r.flags;switch(r.tag){case 0:case 11:case 15:sn(s,r),c&4&&xa(5,r);break;case 1:if(sn(s,r),c&4)if(s=r.stateNode,n===null)try{s.componentDidMount()}catch(S){Ht(r,r.return,S)}else{var g=_n(r.type,n.memoizedProps);n=n.memoizedState;try{s.componentDidUpdate(g,n,s.__reactInternalSnapshotBeforeUpdate)}catch(S){Ht(r,r.return,S)}}c&64&&gf(r),c&512&&Aa(r,r.return);break;case 3:if(sn(s,r),c&64&&(s=r.updateQueue,s!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{td(s,n)}catch(S){Ht(r,r.return,S)}}break;case 27:n===null&&c&4&&yf(r);case 26:case 5:sn(s,r),n===null&&c&4&&mf(r),c&512&&Aa(r,r.return);break;case 12:sn(s,r);break;case 13:sn(s,r),c&4&&Ef(s,r),c&64&&(s=r.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(r=w0.bind(null,r),H0(s,r))));break;case 22:if(c=r.memoizedState!==null||Bs,!c){n=n!==null&&n.memoizedState!==null||Jt,g=Bs;var v=Jt;Bs=c,(Jt=n)&&!v?nn(s,r,(r.subtreeFlags&8772)!==0):sn(s,r),Bs=g,Jt=v}break;case 30:break;default:sn(s,r)}}function Af(s){var n=s.alternate;n!==null&&(s.alternate=null,Af(n)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(n=s.stateNode,n!==null&&Gl(n)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Vt=null,_e=!1;function zs(s,n,r){for(r=r.child;r!==null;)Sf(s,n,r),r=r.sibling}function Sf(s,n,r){if(Ue&&typeof Ue.onCommitFiberUnmount=="function")try{Ue.onCommitFiberUnmount(Hi,r)}catch{}switch(r.tag){case 26:Jt||vs(r,n),zs(s,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Jt||vs(r,n);var c=Vt,g=_e;un(r.type)&&(Vt=r.stateNode,_e=!1),zs(s,n,r),Oa(r.stateNode),Vt=c,_e=g;break;case 5:Jt||vs(r,n);case 6:if(c=Vt,g=_e,Vt=null,zs(s,n,r),Vt=c,_e=g,Vt!==null)if(_e)try{(Vt.nodeType===9?Vt.body:Vt.nodeName==="HTML"?Vt.ownerDocument.body:Vt).removeChild(r.stateNode)}catch(v){Ht(r,n,v)}else try{Vt.removeChild(r.stateNode)}catch(v){Ht(r,n,v)}break;case 18:Vt!==null&&(_e?(s=Vt,ug(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,r.stateNode),Ba(s)):ug(Vt,r.stateNode));break;case 4:c=Vt,g=_e,Vt=r.stateNode.containerInfo,_e=!0,zs(s,n,r),Vt=c,_e=g;break;case 0:case 11:case 14:case 15:Jt||en(2,r,n),Jt||en(4,r,n),zs(s,n,r);break;case 1:Jt||(vs(r,n),c=r.stateNode,typeof c.componentWillUnmount=="function"&&pf(r,n,c)),zs(s,n,r);break;case 21:zs(s,n,r);break;case 22:Jt=(c=Jt)||r.memoizedState!==null,zs(s,n,r),Jt=c;break;default:zs(s,n,r)}}function Ef(s,n){if(n.memoizedState===null&&(s=n.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Ba(s)}catch(r){Ht(n,n.return,r)}}function m0(s){switch(s.tag){case 13:case 19:var n=s.stateNode;return n===null&&(n=s.stateNode=new bf),n;case 22:return s=s.stateNode,n=s._retryCache,n===null&&(n=s._retryCache=new bf),n;default:throw Error(i(435,s.tag))}}function dc(s,n){var r=m0(s);n.forEach(function(c){var g=T0.bind(null,s,c);r.has(c)||(r.add(c),c.then(g,g))})}function Ye(s,n){var r=n.deletions;if(r!==null)for(var c=0;c<r.length;c++){var g=r[c],v=s,S=n,N=S;t:for(;N!==null;){switch(N.tag){case 27:if(un(N.type)){Vt=N.stateNode,_e=!1;break t}break;case 5:Vt=N.stateNode,_e=!1;break t;case 3:case 4:Vt=N.stateNode.containerInfo,_e=!0;break t}N=N.return}if(Vt===null)throw Error(i(160));Sf(v,S,g),Vt=null,_e=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)wf(n,s),n=n.sibling}var hs=null;function wf(s,n){var r=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ye(n,s),Xe(s),c&4&&(en(3,s,s.return),xa(3,s),en(5,s,s.return));break;case 1:Ye(n,s),Xe(s),c&512&&(Jt||r===null||vs(r,r.return)),c&64&&Bs&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(r=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=r===null?c:r.concat(c))));break;case 26:var g=hs;if(Ye(n,s),Xe(s),c&512&&(Jt||r===null||vs(r,r.return)),c&4){var v=r!==null?r.memoizedState:null;if(c=s.memoizedState,r===null)if(c===null)if(s.stateNode===null){t:{c=s.type,r=s.memoizedProps,g=g.ownerDocument||g;e:switch(c){case"title":v=g.getElementsByTagName("title")[0],(!v||v[Yi]||v[Ee]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(c),g.head.insertBefore(v,g.querySelector("head > title"))),ye(v,c,r),v[Ee]=s,he(v),c=v;break t;case"link":var S=yg("link","href",g).get(c+(r.href||""));if(S){for(var N=0;N<S.length;N++)if(v=S[N],v.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&v.getAttribute("rel")===(r.rel==null?null:r.rel)&&v.getAttribute("title")===(r.title==null?null:r.title)&&v.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){S.splice(N,1);break e}}v=g.createElement(c),ye(v,c,r),g.head.appendChild(v);break;case"meta":if(S=yg("meta","content",g).get(c+(r.content||""))){for(N=0;N<S.length;N++)if(v=S[N],v.getAttribute("content")===(r.content==null?null:""+r.content)&&v.getAttribute("name")===(r.name==null?null:r.name)&&v.getAttribute("property")===(r.property==null?null:r.property)&&v.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&v.getAttribute("charset")===(r.charSet==null?null:r.charSet)){S.splice(N,1);break e}}v=g.createElement(c),ye(v,c,r),g.head.appendChild(v);break;default:throw Error(i(468,c))}v[Ee]=s,he(v),c=v}s.stateNode=c}else bg(g,s.type,s.stateNode);else s.stateNode=vg(g,c,s.memoizedProps);else v!==c?(v===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):v.count--,c===null?bg(g,s.type,s.stateNode):vg(g,c,s.memoizedProps)):c===null&&s.stateNode!==null&&oc(s,s.memoizedProps,r.memoizedProps)}break;case 27:Ye(n,s),Xe(s),c&512&&(Jt||r===null||vs(r,r.return)),r!==null&&c&4&&oc(s,s.memoizedProps,r.memoizedProps);break;case 5:if(Ye(n,s),Xe(s),c&512&&(Jt||r===null||vs(r,r.return)),s.flags&32){g=s.stateNode;try{ei(g,"")}catch(V){Ht(s,s.return,V)}}c&4&&s.stateNode!=null&&(g=s.memoizedProps,oc(s,g,r!==null?r.memoizedProps:g)),c&1024&&(hc=!0);break;case 6:if(Ye(n,s),Xe(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,r=s.stateNode;try{r.nodeValue=c}catch(V){Ht(s,s.return,V)}}break;case 3:if(ol=null,g=hs,hs=rl(n.containerInfo),Ye(n,s),hs=g,Xe(s),c&4&&r!==null&&r.memoizedState.isDehydrated)try{Ba(n.containerInfo)}catch(V){Ht(s,s.return,V)}hc&&(hc=!1,Tf(s));break;case 4:c=hs,hs=rl(s.stateNode.containerInfo),Ye(n,s),Xe(s),hs=c;break;case 12:Ye(n,s),Xe(s);break;case 13:Ye(n,s),Xe(s),s.child.flags&8192&&s.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(yc=Se()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,dc(s,c)));break;case 22:g=s.memoizedState!==null;var I=r!==null&&r.memoizedState!==null,U=Bs,W=Jt;if(Bs=U||g,Jt=W||I,Ye(n,s),Jt=W,Bs=U,Xe(s),c&8192)t:for(n=s.stateNode,n._visibility=g?n._visibility&-2:n._visibility|1,g&&(r===null||I||Bs||Jt||jn(s)),r=null,n=s;;){if(n.tag===5||n.tag===26){if(r===null){I=r=n;try{if(v=I.stateNode,g)S=v.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{N=I.stateNode;var q=I.memoizedProps.style,H=q!=null&&q.hasOwnProperty("display")?q.display:null;N.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(V){Ht(I,I.return,V)}}}else if(n.tag===6){if(r===null){I=n;try{I.stateNode.nodeValue=g?"":I.memoizedProps}catch(V){Ht(I,I.return,V)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===s)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}c&4&&(c=s.updateQueue,c!==null&&(r=c.retryQueue,r!==null&&(c.retryQueue=null,dc(s,r))));break;case 19:Ye(n,s),Xe(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,dc(s,c)));break;case 30:break;case 21:break;default:Ye(n,s),Xe(s)}}function Xe(s){var n=s.flags;if(n&2){try{for(var r,c=s.return;c!==null;){if(vf(c)){r=c;break}c=c.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var g=r.stateNode,v=cc(s);$r(s,v,g);break;case 5:var S=r.stateNode;r.flags&32&&(ei(S,""),r.flags&=-33);var N=cc(s);$r(s,N,S);break;case 3:case 4:var I=r.stateNode.containerInfo,U=cc(s);uc(s,U,I);break;default:throw Error(i(161))}}catch(W){Ht(s,s.return,W)}s.flags&=-3}n&4096&&(s.flags&=-4097)}function Tf(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var n=s;Tf(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),s=s.sibling}}function sn(s,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)xf(s,n.alternate,n),n=n.sibling}function jn(s){for(s=s.child;s!==null;){var n=s;switch(n.tag){case 0:case 11:case 14:case 15:en(4,n,n.return),jn(n);break;case 1:vs(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&pf(n,n.return,r),jn(n);break;case 27:Oa(n.stateNode);case 26:case 5:vs(n,n.return),jn(n);break;case 22:n.memoizedState===null&&jn(n);break;case 30:jn(n);break;default:jn(n)}s=s.sibling}}function nn(s,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var c=n.alternate,g=s,v=n,S=v.flags;switch(v.tag){case 0:case 11:case 15:nn(g,v,r),xa(4,v);break;case 1:if(nn(g,v,r),c=v,g=c.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(U){Ht(c,c.return,U)}if(c=v,g=c.updateQueue,g!==null){var N=c.stateNode;try{var I=g.shared.hiddenCallbacks;if(I!==null)for(g.shared.hiddenCallbacks=null,g=0;g<I.length;g++)Jh(I[g],N)}catch(U){Ht(c,c.return,U)}}r&&S&64&&gf(v),Aa(v,v.return);break;case 27:yf(v);case 26:case 5:nn(g,v,r),r&&c===null&&S&4&&mf(v),Aa(v,v.return);break;case 12:nn(g,v,r);break;case 13:nn(g,v,r),r&&S&4&&Ef(g,v);break;case 22:v.memoizedState===null&&nn(g,v,r),Aa(v,v.return);break;case 30:break;default:nn(g,v,r)}n=n.sibling}}function fc(s,n){var r=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),s=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(s=n.memoizedState.cachePool.pool),s!==r&&(s!=null&&s.refCount++,r!=null&&ra(r))}function gc(s,n){s=null,n.alternate!==null&&(s=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==s&&(n.refCount++,s!=null&&ra(s))}function ys(s,n,r,c){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Cf(s,n,r,c),n=n.sibling}function Cf(s,n,r,c){var g=n.flags;switch(n.tag){case 0:case 11:case 15:ys(s,n,r,c),g&2048&&xa(9,n);break;case 1:ys(s,n,r,c);break;case 3:ys(s,n,r,c),g&2048&&(s=null,n.alternate!==null&&(s=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==s&&(n.refCount++,s!=null&&ra(s)));break;case 12:if(g&2048){ys(s,n,r,c),s=n.stateNode;try{var v=n.memoizedProps,S=v.id,N=v.onPostCommit;typeof N=="function"&&N(S,n.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(I){Ht(n,n.return,I)}}else ys(s,n,r,c);break;case 13:ys(s,n,r,c);break;case 23:break;case 22:v=n.stateNode,S=n.alternate,n.memoizedState!==null?v._visibility&2?ys(s,n,r,c):Sa(s,n):v._visibility&2?ys(s,n,r,c):(v._visibility|=2,xi(s,n,r,c,(n.subtreeFlags&10256)!==0)),g&2048&&fc(S,n);break;case 24:ys(s,n,r,c),g&2048&&gc(n.alternate,n);break;default:ys(s,n,r,c)}}function xi(s,n,r,c,g){for(g=g&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var v=s,S=n,N=r,I=c,U=S.flags;switch(S.tag){case 0:case 11:case 15:xi(v,S,N,I,g),xa(8,S);break;case 23:break;case 22:var W=S.stateNode;S.memoizedState!==null?W._visibility&2?xi(v,S,N,I,g):Sa(v,S):(W._visibility|=2,xi(v,S,N,I,g)),g&&U&2048&&fc(S.alternate,S);break;case 24:xi(v,S,N,I,g),g&&U&2048&&gc(S.alternate,S);break;default:xi(v,S,N,I,g)}n=n.sibling}}function Sa(s,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=s,c=n,g=c.flags;switch(c.tag){case 22:Sa(r,c),g&2048&&fc(c.alternate,c);break;case 24:Sa(r,c),g&2048&&gc(c.alternate,c);break;default:Sa(r,c)}n=n.sibling}}var Ea=8192;function Ai(s){if(s.subtreeFlags&Ea)for(s=s.child;s!==null;)Rf(s),s=s.sibling}function Rf(s){switch(s.tag){case 26:Ai(s),s.flags&Ea&&s.memoizedState!==null&&ev(hs,s.memoizedState,s.memoizedProps);break;case 5:Ai(s);break;case 3:case 4:var n=hs;hs=rl(s.stateNode.containerInfo),Ai(s),hs=n;break;case 22:s.memoizedState===null&&(n=s.alternate,n!==null&&n.memoizedState!==null?(n=Ea,Ea=16777216,Ai(s),Ea=n):Ai(s));break;default:Ai(s)}}function Nf(s){var n=s.alternate;if(n!==null&&(s=n.child,s!==null)){n.child=null;do n=s.sibling,s.sibling=null,s=n;while(s!==null)}}function wa(s){var n=s.deletions;if((s.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var c=n[r];fe=c,Of(c,s)}Nf(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Mf(s),s=s.sibling}function Mf(s){switch(s.tag){case 0:case 11:case 15:wa(s),s.flags&2048&&en(9,s,s.return);break;case 3:wa(s);break;case 12:wa(s);break;case 22:var n=s.stateNode;s.memoizedState!==null&&n._visibility&2&&(s.return===null||s.return.tag!==13)?(n._visibility&=-3,Kr(s)):wa(s);break;default:wa(s)}}function Kr(s){var n=s.deletions;if((s.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var c=n[r];fe=c,Of(c,s)}Nf(s)}for(s=s.child;s!==null;){switch(n=s,n.tag){case 0:case 11:case 15:en(8,n,n.return),Kr(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,Kr(n));break;default:Kr(n)}s=s.sibling}}function Of(s,n){for(;fe!==null;){var r=fe;switch(r.tag){case 0:case 11:case 15:en(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var c=r.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:ra(r.memoizedState.cache)}if(c=r.child,c!==null)c.return=r,fe=c;else t:for(r=s;fe!==null;){c=fe;var g=c.sibling,v=c.return;if(Af(c),c===r){fe=null;break t}if(g!==null){g.return=v,fe=g;break t}fe=v}}}var v0={getCacheForType:function(s){var n=we(oe),r=n.data.get(s);return r===void 0&&(r=s(),n.data.set(s,r)),r}},y0=typeof WeakMap=="function"?WeakMap:Map,jt=0,Gt=null,Nt=null,Lt=0,Pt=0,$e=null,an=!1,Si=!1,pc=!1,Fs=0,Qt=0,rn=0,Pn=0,mc=0,as=0,Ei=0,Ta=null,je=null,vc=!1,yc=0,Wr=1/0,Qr=null,ln=null,ve=0,on=null,wi=null,Ti=0,bc=0,xc=null,Df=null,Ca=0,Ac=null;function Ke(){if((jt&2)!==0&&Lt!==0)return Lt&-Lt;if(D.T!==null){var s=di;return s!==0?s:Nc()}return Xu()}function Lf(){as===0&&(as=(Lt&536870912)===0||_t?Hu():536870912);var s=is.current;return s!==null&&(s.flags|=32),as}function We(s,n,r){(s===Gt&&(Pt===2||Pt===9)||s.cancelPendingCommit!==null)&&(Ci(s,0),cn(s,Lt,as,!1)),Vi(s,r),((jt&2)===0||s!==Gt)&&(s===Gt&&((jt&2)===0&&(Pn|=r),Qt===4&&cn(s,Lt,as,!1)),bs(s))}function If(s,n,r){if((jt&6)!==0)throw Error(i(327));var c=!r&&(n&124)===0&&(n&s.expiredLanes)===0||Gi(s,n),g=c?A0(s,n):wc(s,n,!0),v=c;do{if(g===0){Si&&!c&&cn(s,n,0,!1);break}else{if(r=s.current.alternate,v&&!b0(r)){g=wc(s,n,!1),v=!1;continue}if(g===2){if(v=n,s.errorRecoveryDisabledLanes&v)var S=0;else S=s.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){n=S;t:{var N=s;g=Ta;var I=N.current.memoizedState.isDehydrated;if(I&&(Ci(N,S).flags|=256),S=wc(N,S,!1),S!==2){if(pc&&!I){N.errorRecoveryDisabledLanes|=v,Pn|=v,g=4;break t}v=je,je=g,v!==null&&(je===null?je=v:je.push.apply(je,v))}g=S}if(v=!1,g!==2)continue}}if(g===1){Ci(s,0),cn(s,n,0,!0);break}t:{switch(c=s,v=g,v){case 0:case 1:throw Error(i(345));case 4:if((n&4194048)!==n)break;case 6:cn(c,n,as,!an);break t;case 2:je=null;break;case 3:case 5:break;default:throw Error(i(329))}if((n&62914560)===n&&(g=yc+300-Se(),10<g)){if(cn(c,n,as,!an),lr(c,0,!0)!==0)break t;c.timeoutHandle=og(kf.bind(null,c,r,je,Qr,vc,n,as,Pn,Ei,an,v,2,-0,0),g);break t}kf(c,r,je,Qr,vc,n,as,Pn,Ei,an,v,0,-0,0)}}break}while(!0);bs(s)}function kf(s,n,r,c,g,v,S,N,I,U,W,q,H,V){if(s.timeoutHandle=-1,q=n.subtreeFlags,(q&8192||(q&16785408)===16785408)&&(Ia={stylesheets:null,count:0,unsuspend:tv},Rf(n),q=sv(),q!==null)){s.cancelPendingCommit=q(Uf.bind(null,s,n,v,r,c,g,S,N,I,W,1,H,V)),cn(s,v,S,!U);return}Uf(s,n,v,r,c,g,S,N,I)}function b0(s){for(var n=s;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var c=0;c<r.length;c++){var g=r[c],v=g.getSnapshot;g=g.value;try{if(!Ge(v(),g))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===s)break;for(;n.sibling===null;){if(n.return===null||n.return===s)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function cn(s,n,r,c){n&=~mc,n&=~Pn,s.suspendedLanes|=n,s.pingedLanes&=~n,c&&(s.warmLanes|=n),c=s.expirationTimes;for(var g=n;0<g;){var v=31-He(g),S=1<<v;c[v]=-1,g&=~S}r!==0&&Vu(s,r,n)}function Zr(){return(jt&6)===0?(Ra(0),!1):!0}function Sc(){if(Nt!==null){if(Pt===0)var s=Nt.return;else s=Nt,Ls=Dn=null,zo(s),yi=null,va=0,s=Nt;for(;s!==null;)ff(s.alternate,s),s=s.return;Nt=null}}function Ci(s,n){var r=s.timeoutHandle;r!==-1&&(s.timeoutHandle=-1,P0(r)),r=s.cancelPendingCommit,r!==null&&(s.cancelPendingCommit=null,r()),Sc(),Gt=s,Nt=r=Ms(s.current,null),Lt=n,Pt=0,$e=null,an=!1,Si=Gi(s,n),pc=!1,Ei=as=mc=Pn=rn=Qt=0,je=Ta=null,vc=!1,(n&8)!==0&&(n|=n&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=n;0<c;){var g=31-He(c),v=1<<g;n|=s[g],c&=~v}return Fs=n,br(),r}function _f(s,n){Tt=null,D.H=Br,n===oa||n===Nr?(n=Zh(),Pt=3):n===Kh?(n=Zh(),Pt=4):Pt=n===qd?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,$e=n,Nt===null&&(Qt=1,Gr(s,ts(n,s.current)))}function jf(){var s=D.H;return D.H=Br,s===null?Br:s}function Pf(){var s=D.A;return D.A=v0,s}function Ec(){Qt=4,an||(Lt&4194048)!==Lt&&is.current!==null||(Si=!0),(rn&134217727)===0&&(Pn&134217727)===0||Gt===null||cn(Gt,Lt,as,!1)}function wc(s,n,r){var c=jt;jt|=2;var g=jf(),v=Pf();(Gt!==s||Lt!==n)&&(Qr=null,Ci(s,n)),n=!1;var S=Qt;t:do try{if(Pt!==0&&Nt!==null){var N=Nt,I=$e;switch(Pt){case 8:Sc(),S=6;break t;case 3:case 2:case 9:case 6:is.current===null&&(n=!0);var U=Pt;if(Pt=0,$e=null,Ri(s,N,I,U),r&&Si){S=0;break t}break;default:U=Pt,Pt=0,$e=null,Ri(s,N,I,U)}}x0(),S=Qt;break}catch(W){_f(s,W)}while(!0);return n&&s.shellSuspendCounter++,Ls=Dn=null,jt=c,D.H=g,D.A=v,Nt===null&&(Gt=null,Lt=0,br()),S}function x0(){for(;Nt!==null;)Bf(Nt)}function A0(s,n){var r=jt;jt|=2;var c=jf(),g=Pf();Gt!==s||Lt!==n?(Qr=null,Wr=Se()+500,Ci(s,n)):Si=Gi(s,n);t:do try{if(Pt!==0&&Nt!==null){n=Nt;var v=$e;e:switch(Pt){case 1:Pt=0,$e=null,Ri(s,n,v,1);break;case 2:case 9:if(Wh(v)){Pt=0,$e=null,zf(n);break}n=function(){Pt!==2&&Pt!==9||Gt!==s||(Pt=7),bs(s)},v.then(n,n);break t;case 3:Pt=7;break t;case 4:Pt=5;break t;case 7:Wh(v)?(Pt=0,$e=null,zf(n)):(Pt=0,$e=null,Ri(s,n,v,7));break;case 5:var S=null;switch(Nt.tag){case 26:S=Nt.memoizedState;case 5:case 27:var N=Nt;if(!S||xg(S)){Pt=0,$e=null;var I=N.sibling;if(I!==null)Nt=I;else{var U=N.return;U!==null?(Nt=U,qr(U)):Nt=null}break e}}Pt=0,$e=null,Ri(s,n,v,5);break;case 6:Pt=0,$e=null,Ri(s,n,v,6);break;case 8:Sc(),Qt=6;break t;default:throw Error(i(462))}}S0();break}catch(W){_f(s,W)}while(!0);return Ls=Dn=null,D.H=c,D.A=g,jt=r,Nt!==null?0:(Gt=null,Lt=0,br(),Qt)}function S0(){for(;Nt!==null&&!$n();)Bf(Nt)}function Bf(s){var n=hf(s.alternate,s,Fs);s.memoizedProps=s.pendingProps,n===null?qr(s):Nt=n}function zf(s){var n=s,r=n.alternate;switch(n.tag){case 15:case 0:n=af(r,n,n.pendingProps,n.type,void 0,Lt);break;case 11:n=af(r,n,n.pendingProps,n.type.render,n.ref,Lt);break;case 5:zo(n);default:ff(r,n),n=Nt=zh(n,Fs),n=hf(r,n,Fs)}s.memoizedProps=s.pendingProps,n===null?qr(s):Nt=n}function Ri(s,n,r,c){Ls=Dn=null,zo(n),yi=null,va=0;var g=n.return;try{if(h0(s,g,n,r,Lt)){Qt=1,Gr(s,ts(r,s.current)),Nt=null;return}}catch(v){if(g!==null)throw Nt=g,v;Qt=1,Gr(s,ts(r,s.current)),Nt=null;return}n.flags&32768?(_t||c===1?s=!0:Si||(Lt&536870912)!==0?s=!1:(an=s=!0,(c===2||c===9||c===3||c===6)&&(c=is.current,c!==null&&c.tag===13&&(c.flags|=16384))),Ff(n,s)):qr(n)}function qr(s){var n=s;do{if((n.flags&32768)!==0){Ff(n,an);return}s=n.return;var r=f0(n.alternate,n,Fs);if(r!==null){Nt=r;return}if(n=n.sibling,n!==null){Nt=n;return}Nt=n=s}while(n!==null);Qt===0&&(Qt=5)}function Ff(s,n){do{var r=g0(s.alternate,s);if(r!==null){r.flags&=32767,Nt=r;return}if(r=s.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(s=s.sibling,s!==null)){Nt=s;return}Nt=s=r}while(s!==null);Qt=6,Nt=null}function Uf(s,n,r,c,g,v,S,N,I){s.cancelPendingCommit=null;do Jr();while(ve!==0);if((jt&6)!==0)throw Error(i(327));if(n!==null){if(n===s.current)throw Error(i(177));if(v=n.lanes|n.childLanes,v|=go,tm(s,r,v,S,N,I),s===Gt&&(Nt=Gt=null,Lt=0),wi=n,on=s,Ti=r,bc=v,xc=g,Df=c,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,C0(ir,function(){return Xf(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||c){c=D.T,D.T=null,g=j.p,j.p=2,S=jt,jt|=4;try{p0(s,n,r)}finally{jt=S,j.p=g,D.T=c}}ve=1,Hf(),Gf(),Vf()}}function Hf(){if(ve===1){ve=0;var s=on,n=wi,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=D.T,D.T=null;var c=j.p;j.p=2;var g=jt;jt|=4;try{wf(n,s);var v=jc,S=Mh(s.containerInfo),N=v.focusedElem,I=v.selectionRange;if(S!==N&&N&&N.ownerDocument&&Nh(N.ownerDocument.documentElement,N)){if(I!==null&&oo(N)){var U=I.start,W=I.end;if(W===void 0&&(W=U),"selectionStart"in N)N.selectionStart=U,N.selectionEnd=Math.min(W,N.value.length);else{var q=N.ownerDocument||document,H=q&&q.defaultView||window;if(H.getSelection){var V=H.getSelection(),bt=N.textContent.length,mt=Math.min(I.start,bt),Ft=I.end===void 0?mt:Math.min(I.end,bt);!V.extend&&mt>Ft&&(S=Ft,Ft=mt,mt=S);var B=Rh(N,mt),P=Rh(N,Ft);if(B&&P&&(V.rangeCount!==1||V.anchorNode!==B.node||V.anchorOffset!==B.offset||V.focusNode!==P.node||V.focusOffset!==P.offset)){var F=q.createRange();F.setStart(B.node,B.offset),V.removeAllRanges(),mt>Ft?(V.addRange(F),V.extend(P.node,P.offset)):(F.setEnd(P.node,P.offset),V.addRange(F))}}}}for(q=[],V=N;V=V.parentNode;)V.nodeType===1&&q.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<q.length;N++){var Z=q[N];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}hl=!!_c,jc=_c=null}finally{jt=g,j.p=c,D.T=r}}s.current=n,ve=2}}function Gf(){if(ve===2){ve=0;var s=on,n=wi,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=D.T,D.T=null;var c=j.p;j.p=2;var g=jt;jt|=4;try{xf(s,n.alternate,n)}finally{jt=g,j.p=c,D.T=r}}ve=3}}function Vf(){if(ve===4||ve===3){ve=0,Fe();var s=on,n=wi,r=Ti,c=Df;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?ve=5:(ve=0,wi=on=null,Yf(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(ln=null),Ul(r),n=n.stateNode,Ue&&typeof Ue.onCommitFiberRoot=="function")try{Ue.onCommitFiberRoot(Hi,n,void 0,(n.current.flags&128)===128)}catch{}if(c!==null){n=D.T,g=j.p,j.p=2,D.T=null;try{for(var v=s.onRecoverableError,S=0;S<c.length;S++){var N=c[S];v(N.value,{componentStack:N.stack})}}finally{D.T=n,j.p=g}}(Ti&3)!==0&&Jr(),bs(s),g=s.pendingLanes,(r&4194090)!==0&&(g&42)!==0?s===Ac?Ca++:(Ca=0,Ac=s):Ca=0,Ra(0)}}function Yf(s,n){(s.pooledCacheLanes&=n)===0&&(n=s.pooledCache,n!=null&&(s.pooledCache=null,ra(n)))}function Jr(s){return Hf(),Gf(),Vf(),Xf()}function Xf(){if(ve!==5)return!1;var s=on,n=bc;bc=0;var r=Ul(Ti),c=D.T,g=j.p;try{j.p=32>r?32:r,D.T=null,r=xc,xc=null;var v=on,S=Ti;if(ve=0,wi=on=null,Ti=0,(jt&6)!==0)throw Error(i(331));var N=jt;if(jt|=4,Mf(v.current),Cf(v,v.current,S,r),jt=N,Ra(0,!1),Ue&&typeof Ue.onPostCommitFiberRoot=="function")try{Ue.onPostCommitFiberRoot(Hi,v)}catch{}return!0}finally{j.p=g,D.T=c,Yf(s,n)}}function $f(s,n,r){n=ts(r,n),n=Jo(s.stateNode,n,2),s=Zs(s,n,2),s!==null&&(Vi(s,2),bs(s))}function Ht(s,n,r){if(s.tag===3)$f(s,s,r);else for(;n!==null;){if(n.tag===3){$f(n,s,r);break}else if(n.tag===1){var c=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ln===null||!ln.has(c))){s=ts(r,s),r=Qd(2),c=Zs(n,r,2),c!==null&&(Zd(r,c,n,s),Vi(c,2),bs(c));break}}n=n.return}}function Tc(s,n,r){var c=s.pingCache;if(c===null){c=s.pingCache=new y0;var g=new Set;c.set(n,g)}else g=c.get(n),g===void 0&&(g=new Set,c.set(n,g));g.has(r)||(pc=!0,g.add(r),s=E0.bind(null,s,n,r),n.then(s,s))}function E0(s,n,r){var c=s.pingCache;c!==null&&c.delete(n),s.pingedLanes|=s.suspendedLanes&r,s.warmLanes&=~r,Gt===s&&(Lt&r)===r&&(Qt===4||Qt===3&&(Lt&62914560)===Lt&&300>Se()-yc?(jt&2)===0&&Ci(s,0):mc|=r,Ei===Lt&&(Ei=0)),bs(s)}function Kf(s,n){n===0&&(n=Gu()),s=oi(s,n),s!==null&&(Vi(s,n),bs(s))}function w0(s){var n=s.memoizedState,r=0;n!==null&&(r=n.retryLane),Kf(s,r)}function T0(s,n){var r=0;switch(s.tag){case 13:var c=s.stateNode,g=s.memoizedState;g!==null&&(r=g.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(n),Kf(s,r)}function C0(s,n){return pe(s,n)}var tl=null,Ni=null,Cc=!1,el=!1,Rc=!1,Bn=0;function bs(s){s!==Ni&&s.next===null&&(Ni===null?tl=Ni=s:Ni=Ni.next=s),el=!0,Cc||(Cc=!0,N0())}function Ra(s,n){if(!Rc&&el){Rc=!0;do for(var r=!1,c=tl;c!==null;){if(s!==0){var g=c.pendingLanes;if(g===0)var v=0;else{var S=c.suspendedLanes,N=c.pingedLanes;v=(1<<31-He(42|s)+1)-1,v&=g&~(S&~N),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(r=!0,qf(c,v))}else v=Lt,v=lr(c,c===Gt?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||Gi(c,v)||(r=!0,qf(c,v));c=c.next}while(r);Rc=!1}}function R0(){Wf()}function Wf(){el=Cc=!1;var s=0;Bn!==0&&(j0()&&(s=Bn),Bn=0);for(var n=Se(),r=null,c=tl;c!==null;){var g=c.next,v=Qf(c,n);v===0?(c.next=null,r===null?tl=g:r.next=g,g===null&&(Ni=r)):(r=c,(s!==0||(v&3)!==0)&&(el=!0)),c=g}Ra(s)}function Qf(s,n){for(var r=s.suspendedLanes,c=s.pingedLanes,g=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var S=31-He(v),N=1<<S,I=g[S];I===-1?((N&r)===0||(N&c)!==0)&&(g[S]=Jp(N,n)):I<=n&&(s.expiredLanes|=N),v&=~N}if(n=Gt,r=Lt,r=lr(s,s===n?r:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,r===0||s===n&&(Pt===2||Pt===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&cs(c),s.callbackNode=null,s.callbackPriority=0;if((r&3)===0||Gi(s,r)){if(n=r&-r,n===s.callbackPriority)return n;switch(c!==null&&cs(c),Ul(r)){case 2:case 8:r=Fu;break;case 32:r=ir;break;case 268435456:r=Uu;break;default:r=ir}return c=Zf.bind(null,s),r=pe(r,c),s.callbackPriority=n,s.callbackNode=r,n}return c!==null&&c!==null&&cs(c),s.callbackPriority=2,s.callbackNode=null,2}function Zf(s,n){if(ve!==0&&ve!==5)return s.callbackNode=null,s.callbackPriority=0,null;var r=s.callbackNode;if(Jr()&&s.callbackNode!==r)return null;var c=Lt;return c=lr(s,s===Gt?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(If(s,c,n),Qf(s,Se()),s.callbackNode!=null&&s.callbackNode===r?Zf.bind(null,s):null)}function qf(s,n){if(Jr())return null;If(s,n,!0)}function N0(){B0(function(){(jt&6)!==0?pe(xn,R0):Wf()})}function Nc(){return Bn===0&&(Bn=Hu()),Bn}function Jf(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:dr(""+s)}function tg(s,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,s.id&&r.setAttribute("form",s.id),n.parentNode.insertBefore(r,n),s=new FormData(s),r.parentNode.removeChild(r),s}function M0(s,n,r,c,g){if(n==="submit"&&r&&r.stateNode===g){var v=Jf((g[Le]||null).action),S=c.submitter;S&&(n=(n=S[Le]||null)?Jf(n.formAction):S.getAttribute("formAction"),n!==null&&(v=n,S=null));var N=new mr("action","action",null,c,g);s.push({event:N,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Bn!==0){var I=S?tg(g,S):new FormData(g);Ko(r,{pending:!0,data:I,method:g.method,action:v},null,I)}}else typeof v=="function"&&(N.preventDefault(),I=S?tg(g,S):new FormData(g),Ko(r,{pending:!0,data:I,method:g.method,action:v},v,I))},currentTarget:g}]})}}for(var Mc=0;Mc<fo.length;Mc++){var Oc=fo[Mc],O0=Oc.toLowerCase(),D0=Oc[0].toUpperCase()+Oc.slice(1);us(O0,"on"+D0)}us(Lh,"onAnimationEnd"),us(Ih,"onAnimationIteration"),us(kh,"onAnimationStart"),us("dblclick","onDoubleClick"),us("focusin","onFocus"),us("focusout","onBlur"),us(Km,"onTransitionRun"),us(Wm,"onTransitionStart"),us(Qm,"onTransitionCancel"),us(_h,"onTransitionEnd"),qn("onMouseEnter",["mouseout","mouseover"]),qn("onMouseLeave",["mouseout","mouseover"]),qn("onPointerEnter",["pointerout","pointerover"]),qn("onPointerLeave",["pointerout","pointerover"]),Sn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Sn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Sn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Sn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Sn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Sn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Na="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),L0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Na));function eg(s,n){n=(n&4)!==0;for(var r=0;r<s.length;r++){var c=s[r],g=c.event;c=c.listeners;t:{var v=void 0;if(n)for(var S=c.length-1;0<=S;S--){var N=c[S],I=N.instance,U=N.currentTarget;if(N=N.listener,I!==v&&g.isPropagationStopped())break t;v=N,g.currentTarget=U;try{v(g)}catch(W){Hr(W)}g.currentTarget=null,v=I}else for(S=0;S<c.length;S++){if(N=c[S],I=N.instance,U=N.currentTarget,N=N.listener,I!==v&&g.isPropagationStopped())break t;v=N,g.currentTarget=U;try{v(g)}catch(W){Hr(W)}g.currentTarget=null,v=I}}}}function Mt(s,n){var r=n[Hl];r===void 0&&(r=n[Hl]=new Set);var c=s+"__bubble";r.has(c)||(sg(n,s,2,!1),r.add(c))}function Dc(s,n,r){var c=0;n&&(c|=4),sg(r,s,c,n)}var sl="_reactListening"+Math.random().toString(36).slice(2);function Lc(s){if(!s[sl]){s[sl]=!0,Ku.forEach(function(r){r!=="selectionchange"&&(L0.has(r)||Dc(r,!1,s),Dc(r,!0,s))});var n=s.nodeType===9?s:s.ownerDocument;n===null||n[sl]||(n[sl]=!0,Dc("selectionchange",!1,n))}}function sg(s,n,r,c){switch(Cg(n)){case 2:var g=av;break;case 8:g=rv;break;default:g=Xc}r=g.bind(null,n,r,s),g=void 0,!Jl||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(g=!0),c?g!==void 0?s.addEventListener(n,r,{capture:!0,passive:g}):s.addEventListener(n,r,!0):g!==void 0?s.addEventListener(n,r,{passive:g}):s.addEventListener(n,r,!1)}function Ic(s,n,r,c,g){var v=c;if((n&1)===0&&(n&2)===0&&c!==null)t:for(;;){if(c===null)return;var S=c.tag;if(S===3||S===4){var N=c.stateNode.containerInfo;if(N===g)break;if(S===4)for(S=c.return;S!==null;){var I=S.tag;if((I===3||I===4)&&S.stateNode.containerInfo===g)return;S=S.return}for(;N!==null;){if(S=Wn(N),S===null)return;if(I=S.tag,I===5||I===6||I===26||I===27){c=v=S;continue t}N=N.parentNode}}c=c.return}oh(function(){var U=v,W=Zl(r),q=[];t:{var H=jh.get(s);if(H!==void 0){var V=mr,bt=s;switch(s){case"keypress":if(gr(r)===0)break t;case"keydown":case"keyup":V=Cm;break;case"focusin":bt="focus",V=no;break;case"focusout":bt="blur",V=no;break;case"beforeblur":case"afterblur":V=no;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=hh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=gm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=Mm;break;case Lh:case Ih:case kh:V=vm;break;case _h:V=Dm;break;case"scroll":case"scrollend":V=dm;break;case"wheel":V=Im;break;case"copy":case"cut":case"paste":V=bm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=fh;break;case"toggle":case"beforetoggle":V=_m}var mt=(n&4)!==0,Ft=!mt&&(s==="scroll"||s==="scrollend"),B=mt?H!==null?H+"Capture":null:H;mt=[];for(var P=U,F;P!==null;){var Z=P;if(F=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||F===null||B===null||(Z=$i(P,B),Z!=null&&mt.push(Ma(P,Z,F))),Ft)break;P=P.return}0<mt.length&&(H=new V(H,bt,null,r,W),q.push({event:H,listeners:mt}))}}if((n&7)===0){t:{if(H=s==="mouseover"||s==="pointerover",V=s==="mouseout"||s==="pointerout",H&&r!==Ql&&(bt=r.relatedTarget||r.fromElement)&&(Wn(bt)||bt[Kn]))break t;if((V||H)&&(H=W.window===W?W:(H=W.ownerDocument)?H.defaultView||H.parentWindow:window,V?(bt=r.relatedTarget||r.toElement,V=U,bt=bt?Wn(bt):null,bt!==null&&(Ft=l(bt),mt=bt.tag,bt!==Ft||mt!==5&&mt!==27&&mt!==6)&&(bt=null)):(V=null,bt=U),V!==bt)){if(mt=hh,Z="onMouseLeave",B="onMouseEnter",P="mouse",(s==="pointerout"||s==="pointerover")&&(mt=fh,Z="onPointerLeave",B="onPointerEnter",P="pointer"),Ft=V==null?H:Xi(V),F=bt==null?H:Xi(bt),H=new mt(Z,P+"leave",V,r,W),H.target=Ft,H.relatedTarget=F,Z=null,Wn(W)===U&&(mt=new mt(B,P+"enter",bt,r,W),mt.target=F,mt.relatedTarget=Ft,Z=mt),Ft=Z,V&&bt)e:{for(mt=V,B=bt,P=0,F=mt;F;F=Mi(F))P++;for(F=0,Z=B;Z;Z=Mi(Z))F++;for(;0<P-F;)mt=Mi(mt),P--;for(;0<F-P;)B=Mi(B),F--;for(;P--;){if(mt===B||B!==null&&mt===B.alternate)break e;mt=Mi(mt),B=Mi(B)}mt=null}else mt=null;V!==null&&ng(q,H,V,mt,!1),bt!==null&&Ft!==null&&ng(q,Ft,bt,mt,!0)}}t:{if(H=U?Xi(U):window,V=H.nodeName&&H.nodeName.toLowerCase(),V==="select"||V==="input"&&H.type==="file")var ut=Ah;else if(bh(H))if(Sh)ut=Ym;else{ut=Gm;var Ct=Hm}else V=H.nodeName,!V||V.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?U&&Wl(U.elementType)&&(ut=Ah):ut=Vm;if(ut&&(ut=ut(s,U))){xh(q,ut,r,W);break t}Ct&&Ct(s,H,U),s==="focusout"&&U&&H.type==="number"&&U.memoizedProps.value!=null&&Kl(H,"number",H.value)}switch(Ct=U?Xi(U):window,s){case"focusin":(bh(Ct)||Ct.contentEditable==="true")&&(ai=Ct,co=U,ea=null);break;case"focusout":ea=co=ai=null;break;case"mousedown":uo=!0;break;case"contextmenu":case"mouseup":case"dragend":uo=!1,Oh(q,r,W);break;case"selectionchange":if($m)break;case"keydown":case"keyup":Oh(q,r,W)}var dt;if(ao)t:{switch(s){case"compositionstart":var vt="onCompositionStart";break t;case"compositionend":vt="onCompositionEnd";break t;case"compositionupdate":vt="onCompositionUpdate";break t}vt=void 0}else ii?vh(s,r)&&(vt="onCompositionEnd"):s==="keydown"&&r.keyCode===229&&(vt="onCompositionStart");vt&&(gh&&r.locale!=="ko"&&(ii||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&ii&&(dt=ch()):($s=W,to="value"in $s?$s.value:$s.textContent,ii=!0)),Ct=nl(U,vt),0<Ct.length&&(vt=new dh(vt,s,null,r,W),q.push({event:vt,listeners:Ct}),dt?vt.data=dt:(dt=yh(r),dt!==null&&(vt.data=dt)))),(dt=Pm?Bm(s,r):zm(s,r))&&(vt=nl(U,"onBeforeInput"),0<vt.length&&(Ct=new dh("onBeforeInput","beforeinput",null,r,W),q.push({event:Ct,listeners:vt}),Ct.data=dt)),M0(q,s,U,r,W)}eg(q,n)})}function Ma(s,n,r){return{instance:s,listener:n,currentTarget:r}}function nl(s,n){for(var r=n+"Capture",c=[];s!==null;){var g=s,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=$i(s,r),g!=null&&c.unshift(Ma(s,g,v)),g=$i(s,n),g!=null&&c.push(Ma(s,g,v))),s.tag===3)return c;s=s.return}return[]}function Mi(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function ng(s,n,r,c,g){for(var v=n._reactName,S=[];r!==null&&r!==c;){var N=r,I=N.alternate,U=N.stateNode;if(N=N.tag,I!==null&&I===c)break;N!==5&&N!==26&&N!==27||U===null||(I=U,g?(U=$i(r,v),U!=null&&S.unshift(Ma(r,U,I))):g||(U=$i(r,v),U!=null&&S.push(Ma(r,U,I)))),r=r.return}S.length!==0&&s.push({event:n,listeners:S})}var I0=/\r\n?/g,k0=/\u0000|\uFFFD/g;function ig(s){return(typeof s=="string"?s:""+s).replace(I0,`
`).replace(k0,"")}function ag(s,n){return n=ig(n),ig(s)===n}function il(){}function zt(s,n,r,c,g,v){switch(r){case"children":typeof c=="string"?n==="body"||n==="textarea"&&c===""||ei(s,c):(typeof c=="number"||typeof c=="bigint")&&n!=="body"&&ei(s,""+c);break;case"className":cr(s,"class",c);break;case"tabIndex":cr(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":cr(s,r,c);break;case"style":rh(s,c,v);break;case"data":if(n!=="object"){cr(s,"data",c);break}case"src":case"href":if(c===""&&(n!=="a"||r!=="href")){s.removeAttribute(r);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(r);break}c=dr(""+c),s.setAttribute(r,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(r==="formAction"?(n!=="input"&&zt(s,n,"name",g.name,g,null),zt(s,n,"formEncType",g.formEncType,g,null),zt(s,n,"formMethod",g.formMethod,g,null),zt(s,n,"formTarget",g.formTarget,g,null)):(zt(s,n,"encType",g.encType,g,null),zt(s,n,"method",g.method,g,null),zt(s,n,"target",g.target,g,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(r);break}c=dr(""+c),s.setAttribute(r,c);break;case"onClick":c!=null&&(s.onclick=il);break;case"onScroll":c!=null&&Mt("scroll",s);break;case"onScrollEnd":c!=null&&Mt("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(r=c.__html,r!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=r}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}r=dr(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(r,""+c):s.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(r,""):s.removeAttribute(r);break;case"capture":case"download":c===!0?s.setAttribute(r,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(r,c):s.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(r,c):s.removeAttribute(r);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(r):s.setAttribute(r,c);break;case"popover":Mt("beforetoggle",s),Mt("toggle",s),or(s,"popover",c);break;case"xlinkActuate":Rs(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Rs(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Rs(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Rs(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Rs(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Rs(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Rs(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Rs(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Rs(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":or(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=um.get(r)||r,or(s,r,c))}}function kc(s,n,r,c,g,v){switch(r){case"style":rh(s,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(r=c.__html,r!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=r}}break;case"children":typeof c=="string"?ei(s,c):(typeof c=="number"||typeof c=="bigint")&&ei(s,""+c);break;case"onScroll":c!=null&&Mt("scroll",s);break;case"onScrollEnd":c!=null&&Mt("scrollend",s);break;case"onClick":c!=null&&(s.onclick=il);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wu.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(g=r.endsWith("Capture"),n=r.slice(2,g?r.length-7:void 0),v=s[Le]||null,v=v!=null?v[r]:null,typeof v=="function"&&s.removeEventListener(n,v,g),typeof c=="function")){typeof v!="function"&&v!==null&&(r in s?s[r]=null:s.hasAttribute(r)&&s.removeAttribute(r)),s.addEventListener(n,c,g);break t}r in s?s[r]=c:c===!0?s.setAttribute(r,""):or(s,r,c)}}}function ye(s,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mt("error",s),Mt("load",s);var c=!1,g=!1,v;for(v in r)if(r.hasOwnProperty(v)){var S=r[v];if(S!=null)switch(v){case"src":c=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:zt(s,n,v,S,r,null)}}g&&zt(s,n,"srcSet",r.srcSet,r,null),c&&zt(s,n,"src",r.src,r,null);return;case"input":Mt("invalid",s);var N=v=S=g=null,I=null,U=null;for(c in r)if(r.hasOwnProperty(c)){var W=r[c];if(W!=null)switch(c){case"name":g=W;break;case"type":S=W;break;case"checked":I=W;break;case"defaultChecked":U=W;break;case"value":v=W;break;case"defaultValue":N=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,n));break;default:zt(s,n,c,W,r,null)}}sh(s,v,N,I,U,S,g,!1),ur(s);return;case"select":Mt("invalid",s),c=S=v=null;for(g in r)if(r.hasOwnProperty(g)&&(N=r[g],N!=null))switch(g){case"value":v=N;break;case"defaultValue":S=N;break;case"multiple":c=N;default:zt(s,n,g,N,r,null)}n=v,r=S,s.multiple=!!c,n!=null?ti(s,!!c,n,!1):r!=null&&ti(s,!!c,r,!0);return;case"textarea":Mt("invalid",s),v=g=c=null;for(S in r)if(r.hasOwnProperty(S)&&(N=r[S],N!=null))switch(S){case"value":c=N;break;case"defaultValue":g=N;break;case"children":v=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(i(91));break;default:zt(s,n,S,N,r,null)}ih(s,c,g,v),ur(s);return;case"option":for(I in r)if(r.hasOwnProperty(I)&&(c=r[I],c!=null))switch(I){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:zt(s,n,I,c,r,null)}return;case"dialog":Mt("beforetoggle",s),Mt("toggle",s),Mt("cancel",s),Mt("close",s);break;case"iframe":case"object":Mt("load",s);break;case"video":case"audio":for(c=0;c<Na.length;c++)Mt(Na[c],s);break;case"image":Mt("error",s),Mt("load",s);break;case"details":Mt("toggle",s);break;case"embed":case"source":case"link":Mt("error",s),Mt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in r)if(r.hasOwnProperty(U)&&(c=r[U],c!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:zt(s,n,U,c,r,null)}return;default:if(Wl(n)){for(W in r)r.hasOwnProperty(W)&&(c=r[W],c!==void 0&&kc(s,n,W,c,r,void 0));return}}for(N in r)r.hasOwnProperty(N)&&(c=r[N],c!=null&&zt(s,n,N,c,r,null))}function _0(s,n,r,c){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,S=null,N=null,I=null,U=null,W=null;for(V in r){var q=r[V];if(r.hasOwnProperty(V)&&q!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":I=q;default:c.hasOwnProperty(V)||zt(s,n,V,null,c,q)}}for(var H in c){var V=c[H];if(q=r[H],c.hasOwnProperty(H)&&(V!=null||q!=null))switch(H){case"type":v=V;break;case"name":g=V;break;case"checked":U=V;break;case"defaultChecked":W=V;break;case"value":S=V;break;case"defaultValue":N=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(i(137,n));break;default:V!==q&&zt(s,n,H,V,c,q)}}$l(s,S,N,I,U,W,v,g);return;case"select":V=S=N=H=null;for(v in r)if(I=r[v],r.hasOwnProperty(v)&&I!=null)switch(v){case"value":break;case"multiple":V=I;default:c.hasOwnProperty(v)||zt(s,n,v,null,c,I)}for(g in c)if(v=c[g],I=r[g],c.hasOwnProperty(g)&&(v!=null||I!=null))switch(g){case"value":H=v;break;case"defaultValue":N=v;break;case"multiple":S=v;default:v!==I&&zt(s,n,g,v,c,I)}n=N,r=S,c=V,H!=null?ti(s,!!r,H,!1):!!c!=!!r&&(n!=null?ti(s,!!r,n,!0):ti(s,!!r,r?[]:"",!1));return;case"textarea":V=H=null;for(N in r)if(g=r[N],r.hasOwnProperty(N)&&g!=null&&!c.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:zt(s,n,N,null,c,g)}for(S in c)if(g=c[S],v=r[S],c.hasOwnProperty(S)&&(g!=null||v!=null))switch(S){case"value":H=g;break;case"defaultValue":V=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==v&&zt(s,n,S,g,c,v)}nh(s,H,V);return;case"option":for(var bt in r)if(H=r[bt],r.hasOwnProperty(bt)&&H!=null&&!c.hasOwnProperty(bt))switch(bt){case"selected":s.selected=!1;break;default:zt(s,n,bt,null,c,H)}for(I in c)if(H=c[I],V=r[I],c.hasOwnProperty(I)&&H!==V&&(H!=null||V!=null))switch(I){case"selected":s.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:zt(s,n,I,H,c,V)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var mt in r)H=r[mt],r.hasOwnProperty(mt)&&H!=null&&!c.hasOwnProperty(mt)&&zt(s,n,mt,null,c,H);for(U in c)if(H=c[U],V=r[U],c.hasOwnProperty(U)&&H!==V&&(H!=null||V!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(137,n));break;default:zt(s,n,U,H,c,V)}return;default:if(Wl(n)){for(var Ft in r)H=r[Ft],r.hasOwnProperty(Ft)&&H!==void 0&&!c.hasOwnProperty(Ft)&&kc(s,n,Ft,void 0,c,H);for(W in c)H=c[W],V=r[W],!c.hasOwnProperty(W)||H===V||H===void 0&&V===void 0||kc(s,n,W,H,c,V);return}}for(var B in r)H=r[B],r.hasOwnProperty(B)&&H!=null&&!c.hasOwnProperty(B)&&zt(s,n,B,null,c,H);for(q in c)H=c[q],V=r[q],!c.hasOwnProperty(q)||H===V||H==null&&V==null||zt(s,n,q,H,c,V)}var _c=null,jc=null;function al(s){return s.nodeType===9?s:s.ownerDocument}function rg(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lg(s,n){if(s===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&n==="foreignObject"?0:s}function Pc(s,n){return s==="textarea"||s==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Bc=null;function j0(){var s=window.event;return s&&s.type==="popstate"?s===Bc?!1:(Bc=s,!0):(Bc=null,!1)}var og=typeof setTimeout=="function"?setTimeout:void 0,P0=typeof clearTimeout=="function"?clearTimeout:void 0,cg=typeof Promise=="function"?Promise:void 0,B0=typeof queueMicrotask=="function"?queueMicrotask:typeof cg<"u"?function(s){return cg.resolve(null).then(s).catch(z0)}:og;function z0(s){setTimeout(function(){throw s})}function un(s){return s==="head"}function ug(s,n){var r=n,c=0,g=0;do{var v=r.nextSibling;if(s.removeChild(r),v&&v.nodeType===8)if(r=v.data,r==="/$"){if(0<c&&8>c){r=c;var S=s.ownerDocument;if(r&1&&Oa(S.documentElement),r&2&&Oa(S.body),r&4)for(r=S.head,Oa(r),S=r.firstChild;S;){var N=S.nextSibling,I=S.nodeName;S[Yi]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&S.rel.toLowerCase()==="stylesheet"||r.removeChild(S),S=N}}if(g===0){s.removeChild(v),Ba(n);return}g--}else r==="$"||r==="$?"||r==="$!"?g++:c=r.charCodeAt(0)-48;else c=0;r=v}while(r);Ba(n)}function zc(s){var n=s.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":zc(r),Gl(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}s.removeChild(r)}}function F0(s,n,r,c){for(;s.nodeType===1;){var g=r;if(s.nodeName.toLowerCase()!==n.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[Yi])switch(n){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(n==="input"&&s.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=ds(s.nextSibling),s===null)break}return null}function U0(s,n,r){if(n==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=ds(s.nextSibling),s===null))return null;return s}function Fc(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function H0(s,n){var r=s.ownerDocument;if(s.data!=="$?"||r.readyState==="complete")n();else{var c=function(){n(),r.removeEventListener("DOMContentLoaded",c)};r.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function ds(s){for(;s!=null;s=s.nextSibling){var n=s.nodeType;if(n===1||n===3)break;if(n===8){if(n=s.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return s}var Uc=null;function hg(s){s=s.previousSibling;for(var n=0;s;){if(s.nodeType===8){var r=s.data;if(r==="$"||r==="$!"||r==="$?"){if(n===0)return s;n--}else r==="/$"&&n++}s=s.previousSibling}return null}function dg(s,n,r){switch(n=al(r),s){case"html":if(s=n.documentElement,!s)throw Error(i(452));return s;case"head":if(s=n.head,!s)throw Error(i(453));return s;case"body":if(s=n.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Oa(s){for(var n=s.attributes;n.length;)s.removeAttributeNode(n[0]);Gl(s)}var rs=new Map,fg=new Set;function rl(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Us=j.d;j.d={f:G0,r:V0,D:Y0,C:X0,L:$0,m:K0,X:Q0,S:W0,M:Z0};function G0(){var s=Us.f(),n=Zr();return s||n}function V0(s){var n=Qn(s);n!==null&&n.tag===5&&n.type==="form"?Ld(n):Us.r(s)}var Oi=typeof document>"u"?null:document;function gg(s,n,r){var c=Oi;if(c&&typeof n=="string"&&n){var g=Je(n);g='link[rel="'+s+'"][href="'+g+'"]',typeof r=="string"&&(g+='[crossorigin="'+r+'"]'),fg.has(g)||(fg.add(g),s={rel:s,crossOrigin:r,href:n},c.querySelector(g)===null&&(n=c.createElement("link"),ye(n,"link",s),he(n),c.head.appendChild(n)))}}function Y0(s){Us.D(s),gg("dns-prefetch",s,null)}function X0(s,n){Us.C(s,n),gg("preconnect",s,n)}function $0(s,n,r){Us.L(s,n,r);var c=Oi;if(c&&s&&n){var g='link[rel="preload"][as="'+Je(n)+'"]';n==="image"&&r&&r.imageSrcSet?(g+='[imagesrcset="'+Je(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(g+='[imagesizes="'+Je(r.imageSizes)+'"]')):g+='[href="'+Je(s)+'"]';var v=g;switch(n){case"style":v=Di(s);break;case"script":v=Li(s)}rs.has(v)||(s=f({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:s,as:n},r),rs.set(v,s),c.querySelector(g)!==null||n==="style"&&c.querySelector(Da(v))||n==="script"&&c.querySelector(La(v))||(n=c.createElement("link"),ye(n,"link",s),he(n),c.head.appendChild(n)))}}function K0(s,n){Us.m(s,n);var r=Oi;if(r&&s){var c=n&&typeof n.as=="string"?n.as:"script",g='link[rel="modulepreload"][as="'+Je(c)+'"][href="'+Je(s)+'"]',v=g;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Li(s)}if(!rs.has(v)&&(s=f({rel:"modulepreload",href:s},n),rs.set(v,s),r.querySelector(g)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(La(v)))return}c=r.createElement("link"),ye(c,"link",s),he(c),r.head.appendChild(c)}}}function W0(s,n,r){Us.S(s,n,r);var c=Oi;if(c&&s){var g=Zn(c).hoistableStyles,v=Di(s);n=n||"default";var S=g.get(v);if(!S){var N={loading:0,preload:null};if(S=c.querySelector(Da(v)))N.loading=5;else{s=f({rel:"stylesheet",href:s,"data-precedence":n},r),(r=rs.get(v))&&Hc(s,r);var I=S=c.createElement("link");he(I),ye(I,"link",s),I._p=new Promise(function(U,W){I.onload=U,I.onerror=W}),I.addEventListener("load",function(){N.loading|=1}),I.addEventListener("error",function(){N.loading|=2}),N.loading|=4,ll(S,n,c)}S={type:"stylesheet",instance:S,count:1,state:N},g.set(v,S)}}}function Q0(s,n){Us.X(s,n);var r=Oi;if(r&&s){var c=Zn(r).hoistableScripts,g=Li(s),v=c.get(g);v||(v=r.querySelector(La(g)),v||(s=f({src:s,async:!0},n),(n=rs.get(g))&&Gc(s,n),v=r.createElement("script"),he(v),ye(v,"link",s),r.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(g,v))}}function Z0(s,n){Us.M(s,n);var r=Oi;if(r&&s){var c=Zn(r).hoistableScripts,g=Li(s),v=c.get(g);v||(v=r.querySelector(La(g)),v||(s=f({src:s,async:!0,type:"module"},n),(n=rs.get(g))&&Gc(s,n),v=r.createElement("script"),he(v),ye(v,"link",s),r.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(g,v))}}function pg(s,n,r,c){var g=(g=X.current)?rl(g):null;if(!g)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=Di(r.href),r=Zn(g).hoistableStyles,c=r.get(n),c||(c={type:"style",instance:null,count:0,state:null},r.set(n,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){s=Di(r.href);var v=Zn(g).hoistableStyles,S=v.get(s);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,S),(v=g.querySelector(Da(s)))&&!v._p&&(S.instance=v,S.state.loading=5),rs.has(s)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},rs.set(s,r),v||q0(g,s,r,S.state))),n&&c===null)throw Error(i(528,""));return S}if(n&&c!==null)throw Error(i(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Li(r),r=Zn(g).hoistableScripts,c=r.get(n),c||(c={type:"script",instance:null,count:0,state:null},r.set(n,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Di(s){return'href="'+Je(s)+'"'}function Da(s){return'link[rel="stylesheet"]['+s+"]"}function mg(s){return f({},s,{"data-precedence":s.precedence,precedence:null})}function q0(s,n,r,c){s.querySelector('link[rel="preload"][as="style"]['+n+"]")?c.loading=1:(n=s.createElement("link"),c.preload=n,n.addEventListener("load",function(){return c.loading|=1}),n.addEventListener("error",function(){return c.loading|=2}),ye(n,"link",r),he(n),s.head.appendChild(n))}function Li(s){return'[src="'+Je(s)+'"]'}function La(s){return"script[async]"+s}function vg(s,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var c=s.querySelector('style[data-href~="'+Je(r.href)+'"]');if(c)return n.instance=c,he(c),c;var g=f({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),he(c),ye(c,"style",g),ll(c,r.precedence,s),n.instance=c;case"stylesheet":g=Di(r.href);var v=s.querySelector(Da(g));if(v)return n.state.loading|=4,n.instance=v,he(v),v;c=mg(r),(g=rs.get(g))&&Hc(c,g),v=(s.ownerDocument||s).createElement("link"),he(v);var S=v;return S._p=new Promise(function(N,I){S.onload=N,S.onerror=I}),ye(v,"link",c),n.state.loading|=4,ll(v,r.precedence,s),n.instance=v;case"script":return v=Li(r.src),(g=s.querySelector(La(v)))?(n.instance=g,he(g),g):(c=r,(g=rs.get(v))&&(c=f({},r),Gc(c,g)),s=s.ownerDocument||s,g=s.createElement("script"),he(g),ye(g,"link",c),s.head.appendChild(g),n.instance=g);case"void":return null;default:throw Error(i(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(c=n.instance,n.state.loading|=4,ll(c,r.precedence,s));return n.instance}function ll(s,n,r){for(var c=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=c.length?c[c.length-1]:null,v=g,S=0;S<c.length;S++){var N=c[S];if(N.dataset.precedence===n)v=N;else if(v!==g)break}v?v.parentNode.insertBefore(s,v.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(s,n.firstChild))}function Hc(s,n){s.crossOrigin==null&&(s.crossOrigin=n.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=n.referrerPolicy),s.title==null&&(s.title=n.title)}function Gc(s,n){s.crossOrigin==null&&(s.crossOrigin=n.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=n.referrerPolicy),s.integrity==null&&(s.integrity=n.integrity)}var ol=null;function yg(s,n,r){if(ol===null){var c=new Map,g=ol=new Map;g.set(r,c)}else g=ol,c=g.get(r),c||(c=new Map,g.set(r,c));if(c.has(s))return c;for(c.set(s,null),r=r.getElementsByTagName(s),g=0;g<r.length;g++){var v=r[g];if(!(v[Yi]||v[Ee]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var S=v.getAttribute(n)||"";S=s+S;var N=c.get(S);N?N.push(v):c.set(S,[v])}}return c}function bg(s,n,r){s=s.ownerDocument||s,s.head.insertBefore(r,n==="title"?s.querySelector("head > title"):null)}function J0(s,n,r){if(r===1||n.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return s=n.disabled,typeof n.precedence=="string"&&s==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function xg(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Ia=null;function tv(){}function ev(s,n,r){if(Ia===null)throw Error(i(475));var c=Ia;if(n.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var g=Di(r.href),v=s.querySelector(Da(g));if(v){s=v._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(c.count++,c=cl.bind(c),s.then(c,c)),n.state.loading|=4,n.instance=v,he(v);return}v=s.ownerDocument||s,r=mg(r),(g=rs.get(g))&&Hc(r,g),v=v.createElement("link"),he(v);var S=v;S._p=new Promise(function(N,I){S.onload=N,S.onerror=I}),ye(v,"link",r),n.instance=v}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(n,s),(s=n.state.preload)&&(n.state.loading&3)===0&&(c.count++,n=cl.bind(c),s.addEventListener("load",n),s.addEventListener("error",n))}}function sv(){if(Ia===null)throw Error(i(475));var s=Ia;return s.stylesheets&&s.count===0&&Vc(s,s.stylesheets),0<s.count?function(n){var r=setTimeout(function(){if(s.stylesheets&&Vc(s,s.stylesheets),s.unsuspend){var c=s.unsuspend;s.unsuspend=null,c()}},6e4);return s.unsuspend=n,function(){s.unsuspend=null,clearTimeout(r)}}:null}function cl(){if(this.count--,this.count===0){if(this.stylesheets)Vc(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var ul=null;function Vc(s,n){s.stylesheets=null,s.unsuspend!==null&&(s.count++,ul=new Map,n.forEach(nv,s),ul=null,cl.call(s))}function nv(s,n){if(!(n.state.loading&4)){var r=ul.get(s);if(r)var c=r.get(null);else{r=new Map,ul.set(s,r);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var S=g[v];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(r.set(S.dataset.precedence,S),c=S)}c&&r.set(null,c)}g=n.instance,S=g.getAttribute("data-precedence"),v=r.get(S)||c,v===c&&r.set(null,g),r.set(S,g),this.count++,c=cl.bind(this),g.addEventListener("load",c),g.addEventListener("error",c),v?v.parentNode.insertBefore(g,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),n.state.loading|=4}}var ka={$$typeof:R,Provider:null,Consumer:null,_currentValue:st,_currentValue2:st,_threadCount:0};function iv(s,n,r,c,g,v,S,N){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zl(0),this.hiddenUpdates=zl(null),this.identifierPrefix=c,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function Ag(s,n,r,c,g,v,S,N,I,U,W,q){return s=new iv(s,n,r,S,N,I,U,q),n=1,v===!0&&(n|=24),v=Ve(3,null,null,n),s.current=v,v.stateNode=s,n=To(),n.refCount++,s.pooledCache=n,n.refCount++,v.memoizedState={element:c,isDehydrated:r,cache:n},Mo(v),s}function Sg(s){return s?(s=ci,s):ci}function Eg(s,n,r,c,g,v){g=Sg(g),c.context===null?c.context=g:c.pendingContext=g,c=Qs(n),c.payload={element:r},v=v===void 0?null:v,v!==null&&(c.callback=v),r=Zs(s,c,n),r!==null&&(We(r,s,n),ua(r,s,n))}function wg(s,n){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var r=s.retryLane;s.retryLane=r!==0&&r<n?r:n}}function Yc(s,n){wg(s,n),(s=s.alternate)&&wg(s,n)}function Tg(s){if(s.tag===13){var n=oi(s,67108864);n!==null&&We(n,s,67108864),Yc(s,67108864)}}var hl=!0;function av(s,n,r,c){var g=D.T;D.T=null;var v=j.p;try{j.p=2,Xc(s,n,r,c)}finally{j.p=v,D.T=g}}function rv(s,n,r,c){var g=D.T;D.T=null;var v=j.p;try{j.p=8,Xc(s,n,r,c)}finally{j.p=v,D.T=g}}function Xc(s,n,r,c){if(hl){var g=$c(c);if(g===null)Ic(s,n,c,dl,r),Rg(s,c);else if(ov(g,s,n,r,c))c.stopPropagation();else if(Rg(s,c),n&4&&-1<lv.indexOf(s)){for(;g!==null;){var v=Qn(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var S=An(v.pendingLanes);if(S!==0){var N=v;for(N.pendingLanes|=2,N.entangledLanes|=2;S;){var I=1<<31-He(S);N.entanglements[1]|=I,S&=~I}bs(v),(jt&6)===0&&(Wr=Se()+500,Ra(0))}}break;case 13:N=oi(v,2),N!==null&&We(N,v,2),Zr(),Yc(v,2)}if(v=$c(c),v===null&&Ic(s,n,c,dl,r),v===g)break;g=v}g!==null&&c.stopPropagation()}else Ic(s,n,c,null,r)}}function $c(s){return s=Zl(s),Kc(s)}var dl=null;function Kc(s){if(dl=null,s=Wn(s),s!==null){var n=l(s);if(n===null)s=null;else{var r=n.tag;if(r===13){if(s=o(n),s!==null)return s;s=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;s=null}else n!==s&&(s=null)}}return dl=s,null}function Cg(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nr()){case xn:return 2;case Fu:return 8;case ir:case $p:return 32;case Uu:return 268435456;default:return 32}default:return 32}}var Wc=!1,hn=null,dn=null,fn=null,_a=new Map,ja=new Map,gn=[],lv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rg(s,n){switch(s){case"focusin":case"focusout":hn=null;break;case"dragenter":case"dragleave":dn=null;break;case"mouseover":case"mouseout":fn=null;break;case"pointerover":case"pointerout":_a.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ja.delete(n.pointerId)}}function Pa(s,n,r,c,g,v){return s===null||s.nativeEvent!==v?(s={blockedOn:n,domEventName:r,eventSystemFlags:c,nativeEvent:v,targetContainers:[g]},n!==null&&(n=Qn(n),n!==null&&Tg(n)),s):(s.eventSystemFlags|=c,n=s.targetContainers,g!==null&&n.indexOf(g)===-1&&n.push(g),s)}function ov(s,n,r,c,g){switch(n){case"focusin":return hn=Pa(hn,s,n,r,c,g),!0;case"dragenter":return dn=Pa(dn,s,n,r,c,g),!0;case"mouseover":return fn=Pa(fn,s,n,r,c,g),!0;case"pointerover":var v=g.pointerId;return _a.set(v,Pa(_a.get(v)||null,s,n,r,c,g)),!0;case"gotpointercapture":return v=g.pointerId,ja.set(v,Pa(ja.get(v)||null,s,n,r,c,g)),!0}return!1}function Ng(s){var n=Wn(s.target);if(n!==null){var r=l(n);if(r!==null){if(n=r.tag,n===13){if(n=o(r),n!==null){s.blockedOn=n,em(s.priority,function(){if(r.tag===13){var c=Ke();c=Fl(c);var g=oi(r,c);g!==null&&We(g,r,c),Yc(r,c)}});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){s.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}s.blockedOn=null}function fl(s){if(s.blockedOn!==null)return!1;for(var n=s.targetContainers;0<n.length;){var r=$c(s.nativeEvent);if(r===null){r=s.nativeEvent;var c=new r.constructor(r.type,r);Ql=c,r.target.dispatchEvent(c),Ql=null}else return n=Qn(r),n!==null&&Tg(n),s.blockedOn=r,!1;n.shift()}return!0}function Mg(s,n,r){fl(s)&&r.delete(n)}function cv(){Wc=!1,hn!==null&&fl(hn)&&(hn=null),dn!==null&&fl(dn)&&(dn=null),fn!==null&&fl(fn)&&(fn=null),_a.forEach(Mg),ja.forEach(Mg)}function gl(s,n){s.blockedOn===n&&(s.blockedOn=null,Wc||(Wc=!0,p.unstable_scheduleCallback(p.unstable_NormalPriority,cv)))}var pl=null;function Og(s){pl!==s&&(pl=s,p.unstable_scheduleCallback(p.unstable_NormalPriority,function(){pl===s&&(pl=null);for(var n=0;n<s.length;n+=3){var r=s[n],c=s[n+1],g=s[n+2];if(typeof c!="function"){if(Kc(c||r)===null)continue;break}var v=Qn(r);v!==null&&(s.splice(n,3),n-=3,Ko(v,{pending:!0,data:g,method:r.method,action:c},c,g))}}))}function Ba(s){function n(I){return gl(I,s)}hn!==null&&gl(hn,s),dn!==null&&gl(dn,s),fn!==null&&gl(fn,s),_a.forEach(n),ja.forEach(n);for(var r=0;r<gn.length;r++){var c=gn[r];c.blockedOn===s&&(c.blockedOn=null)}for(;0<gn.length&&(r=gn[0],r.blockedOn===null);)Ng(r),r.blockedOn===null&&gn.shift();if(r=(s.ownerDocument||s).$$reactFormReplay,r!=null)for(c=0;c<r.length;c+=3){var g=r[c],v=r[c+1],S=g[Le]||null;if(typeof v=="function")S||Og(r);else if(S){var N=null;if(v&&v.hasAttribute("formAction")){if(g=v,S=v[Le]||null)N=S.formAction;else if(Kc(g)!==null)continue}else N=S.action;typeof N=="function"?r[c+1]=N:(r.splice(c,3),c-=3),Og(r)}}}function Qc(s){this._internalRoot=s}ml.prototype.render=Qc.prototype.render=function(s){var n=this._internalRoot;if(n===null)throw Error(i(409));var r=n.current,c=Ke();Eg(r,c,s,n,null,null)},ml.prototype.unmount=Qc.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var n=s.containerInfo;Eg(s.current,2,null,s,null,null),Zr(),n[Kn]=null}};function ml(s){this._internalRoot=s}ml.prototype.unstable_scheduleHydration=function(s){if(s){var n=Xu();s={blockedOn:null,target:s,priority:n};for(var r=0;r<gn.length&&n!==0&&n<gn[r].priority;r++);gn.splice(r,0,s),r===0&&Ng(s)}};var Dg=t.version;if(Dg!=="19.1.0")throw Error(i(527,Dg,"19.1.0"));j.findDOMNode=function(s){var n=s._reactInternals;if(n===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=h(n),s=s!==null?d(s):null,s=s===null?null:s.stateNode,s};var uv={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{Hi=vl.inject(uv),Ue=vl}catch{}}return Fa.createRoot=function(s,n){if(!a(s))throw Error(i(299));var r=!1,c="",g=Xd,v=$d,S=Kd,N=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(g=n.onUncaughtError),n.onCaughtError!==void 0&&(v=n.onCaughtError),n.onRecoverableError!==void 0&&(S=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(N=n.unstable_transitionCallbacks)),n=Ag(s,1,!1,null,null,r,c,g,v,S,N,null),s[Kn]=n.current,Lc(s),new Qc(n)},Fa.hydrateRoot=function(s,n,r){if(!a(s))throw Error(i(299));var c=!1,g="",v=Xd,S=$d,N=Kd,I=null,U=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(g=r.identifierPrefix),r.onUncaughtError!==void 0&&(v=r.onUncaughtError),r.onCaughtError!==void 0&&(S=r.onCaughtError),r.onRecoverableError!==void 0&&(N=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(I=r.unstable_transitionCallbacks),r.formState!==void 0&&(U=r.formState)),n=Ag(s,1,!0,n,r??null,c,g,v,S,N,I,U),n.context=Sg(null),r=n.current,c=Ke(),c=Fl(c),g=Qs(c),g.callback=null,Zs(r,g,c),r=c,n.current.lanes=r,Vi(n,r),bs(n),s[Kn]=n.current,Lc(s),new ml(n)},Fa.version="19.1.0",Fa}var Gg;function xv(){if(Gg)return tu.exports;Gg=1;function p(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(p)}catch(t){console.error(t)}}return p(),tu.exports=bv(),tu.exports}var Av=xv();function Sv({onGetStarted:p,darkMode:t,toggleDarkMode:e}){const[i,a]=Et.useState(!0),l=[{icon:"📁",title:"PDF File Support",description:"Upload your course schedule PDF files with ease"},{icon:"🌙",title:"Dark Mode Toggle",description:"Switch between light and dark themes"},{icon:"📱",title:"Mobile Responsive",description:"Works perfectly on all devices"},{icon:"🤖",title:"AI-Powered",description:"Smart routine generation with AI assistance"},{icon:"🔍",title:"Smart Search",description:"Find courses and faculty quickly"},{icon:"⚡",title:"Fast Processing",description:"Generate routines in seconds"}],o=[{icon:"🔝",text:"Back to Top",action:()=>window.scrollTo({top:0,behavior:"smooth"})},{icon:"📁",text:"Source Code",link:"https://github.com/your-username/course-routine-planner"},{icon:"❓",text:"Help & Support",action:()=>alert("Help section coming soon!")},{icon:"ℹ️",text:"About",action:()=>alert("About section coming soon!")}],u=[{name:"React",color:"bg-blue-500"},{name:"Tailwind CSS",color:"bg-cyan-500"},{name:"JavaScript",color:"bg-yellow-500"},{name:"PDF.js",color:"bg-red-500"},{name:"Vite",color:"bg-purple-500"}];return E.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 transition-all duration-500",children:[E.jsx("div",{className:"fixed top-4 right-4 z-50",children:E.jsx("button",{onClick:e,className:"p-2 rounded-full bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:t?E.jsx("svg",{className:"w-5 h-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:E.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}):E.jsx("svg",{className:"w-5 h-5 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:E.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})})}),E.jsxs("header",{className:"relative overflow-hidden",children:[E.jsx("div",{className:"max-w-4xl mx-auto px-4 py-12",children:E.jsx("div",{className:"text-center",children:E.jsxs("div",{className:"animate-fadeInUp",children:[E.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 dark:from-blue-400 dark:via-purple-400 dark:to-indigo-400 bg-clip-text text-transparent mb-4 leading-tight",children:"📅 Course Routine Planner"}),E.jsx("p",{className:"text-lg md:text-xl text-gray-600 dark:text-gray-300 mb-6 max-w-2xl mx-auto leading-relaxed",children:"Create personalized course schedules from PDF files with ease."}),E.jsxs("button",{onClick:p,className:"group relative inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-medium rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300",children:[E.jsx("span",{className:"mr-2 text-lg",children:"🚀"}),"Get Started",E.jsx("svg",{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})})}),E.jsxs("div",{className:"absolute inset-0 -z-10 overflow-hidden",children:[E.jsx("div",{className:"absolute -top-32 -right-32 w-64 h-64 bg-purple-300 dark:bg-purple-700 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-xl opacity-70 animate-blob"}),E.jsx("div",{className:"absolute -bottom-32 -left-32 w-64 h-64 bg-yellow-300 dark:bg-yellow-700 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-xl opacity-70 animate-blob animation-delay-2000"}),E.jsx("div",{className:"absolute -top-32 left-32 w-64 h-64 bg-pink-300 dark:bg-pink-700 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-xl opacity-70 animate-blob animation-delay-4000"})]})]}),E.jsx("section",{className:"py-12 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm",children:E.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[E.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-center text-gray-900 dark:text-white mb-8",children:"✨ Features"}),E.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 mt-8",children:l.map((h,d)=>E.jsxs("div",{className:"group p-4 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 border border-gray-200 dark:border-gray-700",children:[E.jsx("div",{className:"text-2xl mb-3 transform group-hover:scale-110 transition-transform duration-300",children:h.icon}),E.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:h.title}),E.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:h.description})]},d))})]})}),E.jsx("section",{className:"py-12",children:E.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[E.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-center text-gray-900 dark:text-white mb-8",children:"🔗 Quick Links"}),E.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:o.map((h,d)=>E.jsxs("button",{onClick:h.action,className:"group p-4 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 border border-gray-200 dark:border-gray-700",children:[E.jsx("div",{className:"text-2xl mb-2 transform group-hover:scale-110 transition-transform duration-300",children:h.icon}),E.jsx("p",{className:"text-sm text-gray-900 dark:text-white font-medium",children:h.text})]},d))})]})}),E.jsx("section",{className:"py-12 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm",children:E.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[E.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-center text-gray-900 dark:text-white mb-8",children:"🛠️ Tech Stack"}),E.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:u.map((h,d)=>E.jsx("div",{className:"group px-4 py-2 bg-white dark:bg-gray-800 rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 border border-gray-200 dark:border-gray-700",children:E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx("div",{className:`w-2 h-2 rounded-full ${h.color} group-hover:animate-pulse`}),E.jsx("span",{className:"text-sm text-gray-900 dark:text-white font-medium",children:h.name})]})},d))})]})}),E.jsx("footer",{className:"py-8 bg-gray-900 dark:bg-gray-950",children:E.jsxs("div",{className:"max-w-4xl mx-auto px-4 text-center",children:[i&&E.jsx("div",{className:"flex justify-center mb-4",children:E.jsx("img",{src:"https://api.visitorbadge.io/api/visitors?path=Course-Routine-Planner&label=Site%20Visits&countColor=%23263759",alt:"Site Visits",className:"animate-pulse h-5"})}),E.jsxs("p",{className:"text-gray-400 mb-3 text-sm",children:["© 2025 Course Routine Planner. Made by ",E.jsx("a",{href:"https://www.github.com/No-man1234",className:"text-blue-400 hover:underline",children:"Abdullah Al Noman"})]}),E.jsxs("div",{className:"flex justify-center space-x-4 text-xs text-gray-500",children:[E.jsx("span",{children:"Last updated: July 2025"}),E.jsx("span",{children:"|"}),E.jsx("span",{children:"⚡ Powered by Vite + React"})]})]})})]})}var Ev={34:(p,t,e)=>{var i=e(4901);p.exports=function(a){return typeof a=="object"?a!==null:i(a)}},81:(p,t,e)=>{var i=e(9565),a=e(9306),l=e(8551),o=e(6823),u=e(851),h=TypeError;p.exports=function(d,f){var m=arguments.length<2?u(d):f;if(a(m))return l(i(m,d));throw new h(o(d)+" is not iterable")}},283:(p,t,e)=>{var i=e(9504),a=e(9039),l=e(4901),o=e(9297),u=e(3724),h=e(350).CONFIGURABLE,d=e(3706),f=e(1181),m=f.enforce,y=f.get,b=String,A=Object.defineProperty,x=i("".slice),w=i("".replace),T=i([].join),O=u&&!a(function(){return A(function(){},"length",{value:8}).length!==8}),R=String(String).split("String"),M=p.exports=function(C,L,_){x(b(L),0,7)==="Symbol("&&(L="["+w(b(L),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),_&&_.getter&&(L="get "+L),_&&_.setter&&(L="set "+L),(!o(C,"name")||h&&C.name!==L)&&(u?A(C,"name",{value:L,configurable:!0}):C.name=L),O&&_&&o(_,"arity")&&C.length!==_.arity&&A(C,"length",{value:_.arity});try{_&&o(_,"constructor")&&_.constructor?u&&A(C,"prototype",{writable:!1}):C.prototype&&(C.prototype=void 0)}catch{}var z=m(C);return o(z,"source")||(z.source=T(R,typeof L=="string"?L:"")),C};Function.prototype.toString=M(function(){return l(this)&&y(this).source||d(this)},"toString")},350:(p,t,e)=>{var i=e(3724),a=e(9297),l=Function.prototype,o=i&&Object.getOwnPropertyDescriptor,u=a(l,"name"),h=u&&(function(){}).name==="something",d=u&&(!i||i&&o(l,"name").configurable);p.exports={EXISTS:u,PROPER:h,CONFIGURABLE:d}},397:(p,t,e)=>{var i=e(7751);p.exports=i("document","documentElement")},421:p=>{p.exports={}},507:(p,t,e)=>{var i=e(9565);p.exports=function(a,l,o){for(var u=o?a:a.iterator,h=a.next,d,f;!(d=i(h,u)).done;)if(f=l(d.value),f!==void 0)return f}},531:(p,t,e)=>{var i=e(6518),a=e(9565),l=e(9306),o=e(8551),u=e(1767),h=e(8646),d=e(9462),f=e(9539),m=e(6395),y=e(684),b=e(4549),A=!m&&!y("flatMap",function(){}),x=!m&&!A&&b("flatMap",TypeError),w=m||A||x,T=d(function(){for(var O=this.iterator,R=this.mapper,M,C;;){if(C=this.inner)try{if(M=o(a(C.next,C.iterator)),!M.done)return M.value;this.inner=null}catch(L){f(O,"throw",L)}if(M=o(a(this.next,O)),this.done=!!M.done)return;try{this.inner=h(R(M.value,this.counter++),!1)}catch(L){f(O,"throw",L)}}});i({target:"Iterator",proto:!0,real:!0,forced:w},{flatMap:function(R){o(this);try{l(R)}catch(M){f(this,"throw",M)}return x?a(x,this,R):new T(u(this),{mapper:R,inner:null})}})},616:(p,t,e)=>{var i=e(9039);p.exports=!i(function(){var a=(function(){}).bind();return typeof a!="function"||a.hasOwnProperty("prototype")})},655:(p,t,e)=>{var i=e(6955),a=String;p.exports=function(l){if(i(l)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return a(l)}},679:(p,t,e)=>{var i=e(1625),a=TypeError;p.exports=function(l,o){if(i(o,l))return l;throw new a("Incorrect invocation")}},684:p=>{p.exports=function(t,e){var i=typeof Iterator=="function"&&Iterator.prototype[t];if(i)try{i.call({next:null},e).next()}catch{return!0}}},741:p=>{var t=Math.ceil,e=Math.floor;p.exports=Math.trunc||function(a){var l=+a;return(l>0?e:t)(l)}},757:(p,t,e)=>{var i=e(7751),a=e(4901),l=e(1625),o=e(7040),u=Object;p.exports=o?function(h){return typeof h=="symbol"}:function(h){var d=i("Symbol");return a(d)&&l(d.prototype,u(h))}},851:(p,t,e)=>{var i=e(6955),a=e(5966),l=e(4117),o=e(6269),u=e(8227),h=u("iterator");p.exports=function(d){if(!l(d))return a(d,h)||a(d,"@@iterator")||o[i(d)]}},944:p=>{var t=TypeError;p.exports=function(e){var i=e&&e.alphabet;if(i===void 0||i==="base64"||i==="base64url")return i||"base64";throw new t("Incorrect `alphabet` option")}},1072:(p,t,e)=>{var i=e(1828),a=e(8727);p.exports=Object.keys||function(o){return i(o,a)}},1103:p=>{p.exports=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}}},1148:(p,t,e)=>{var i=e(6518),a=e(9565),l=e(2652),o=e(9306),u=e(8551),h=e(1767),d=e(9539),f=e(4549),m=f("every",TypeError);i({target:"Iterator",proto:!0,real:!0,forced:m},{every:function(b){u(this);try{o(b)}catch(w){d(this,"throw",w)}if(m)return a(m,this,b);var A=h(this),x=0;return!l(A,function(w,T){if(!b(w,x++))return T()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},1181:(p,t,e)=>{var i=e(8622),a=e(4576),l=e(34),o=e(6699),u=e(9297),h=e(7629),d=e(6119),f=e(421),m="Object already initialized",y=a.TypeError,b=a.WeakMap,A,x,w,T=function(C){return w(C)?x(C):A(C,{})},O=function(C){return function(L){var _;if(!l(L)||(_=x(L)).type!==C)throw new y("Incompatible receiver, "+C+" required");return _}};if(i||h.state){var R=h.state||(h.state=new b);R.get=R.get,R.has=R.has,R.set=R.set,A=function(C,L){if(R.has(C))throw new y(m);return L.facade=C,R.set(C,L),L},x=function(C){return R.get(C)||{}},w=function(C){return R.has(C)}}else{var M=d("state");f[M]=!0,A=function(C,L){if(u(C,M))throw new y(m);return L.facade=C,o(C,M,L),L},x=function(C){return u(C,M)?C[M]:{}},w=function(C){return u(C,M)}}p.exports={set:A,get:x,has:w,enforce:T,getterFor:O}},1291:(p,t,e)=>{var i=e(741);p.exports=function(a){var l=+a;return l!==l||l===0?0:i(l)}},1385:(p,t,e)=>{var i=e(9539);p.exports=function(a,l,o){for(var u=a.length-1;u>=0;u--)if(a[u]!==void 0)try{o=i(a[u].iterator,l,o)}catch(h){l="throw",o=h}if(l==="throw")throw o;return o}},1548:(p,t,e)=>{var i=e(4576),a=e(9039),l=e(9519),o=e(4215),u=i.structuredClone;p.exports=!!u&&!a(function(){if(o==="DENO"&&l>92||o==="NODE"&&l>94||o==="BROWSER"&&l>97)return!1;var h=new ArrayBuffer(8),d=u(h,{transfer:[h]});return h.byteLength!==0||d.byteLength!==8})},1549:(p,t,e)=>{var i=e(6518),a=e(4576),l=e(9143),o=e(4154),u=a.Uint8Array,h=!u||!u.prototype.setFromBase64||!function(){var d=new u([255,255,255,255,255]);try{d.setFromBase64("MjYyZg===")}catch{return d[0]===50&&d[1]===54&&d[2]===50&&d[3]===255&&d[4]===255}}();u&&i({target:"Uint8Array",proto:!0,forced:h},{setFromBase64:function(f){o(this);var m=l(f,arguments.length>1?arguments[1]:void 0,this,this.length);return{read:m.read,written:m.written}}})},1625:(p,t,e)=>{var i=e(9504);p.exports=i({}.isPrototypeOf)},1689:(p,t,e)=>{var i=e(6518),a=e(4576),l=e(8745),o=e(7680),u=e(6043),h=e(9306),d=e(1103),f=a.Promise,m=!1,y=!f||!f.try||d(function(){f.try(function(b){m=b===8},8)}).error||!m;i({target:"Promise",stat:!0,forced:y},{try:function(b){var A=arguments.length>1?o(arguments,1):[],x=u.f(this),w=d(function(){return l(h(b),void 0,A)});return(w.error?x.reject:x.resolve)(w.value),x.promise}})},1698:(p,t,e)=>{var i=e(6518),a=e(4204),l=e(9835),o=e(4916),u=!o("union")||!l("union");i({target:"Set",proto:!0,real:!0,forced:u},{union:a})},1701:(p,t,e)=>{var i=e(6518),a=e(9565),l=e(9306),o=e(8551),u=e(1767),h=e(9462),d=e(6319),f=e(9539),m=e(684),y=e(4549),b=e(6395),A=!b&&!m("map",function(){}),x=!b&&!A&&y("map",TypeError),w=b||A||x,T=h(function(){var O=this.iterator,R=o(a(this.next,O)),M=this.done=!!R.done;if(!M)return d(O,this.mapper,[R.value,this.counter++],!0)});i({target:"Iterator",proto:!0,real:!0,forced:w},{map:function(R){o(this);try{l(R)}catch(M){f(this,"throw",M)}return x?a(x,this,R):new T(u(this),{mapper:R})}})},1767:p=>{p.exports=function(t){return{iterator:t,next:t.next,done:!1}}},1828:(p,t,e)=>{var i=e(9504),a=e(9297),l=e(5397),o=e(9617).indexOf,u=e(421),h=i([].push);p.exports=function(d,f){var m=l(d),y=0,b=[],A;for(A in m)!a(u,A)&&a(m,A)&&h(b,A);for(;f.length>y;)a(m,A=f[y++])&&(~o(b,A)||h(b,A));return b}},2106:(p,t,e)=>{var i=e(283),a=e(4913);p.exports=function(l,o,u){return u.get&&i(u.get,o,{getter:!0}),u.set&&i(u.set,o,{setter:!0}),a.f(l,o,u)}},2140:(p,t,e)=>{var i=e(8227),a=i("toStringTag"),l={};l[a]="z",p.exports=String(l)==="[object z]"},2195:(p,t,e)=>{var i=e(9504),a=i({}.toString),l=i("".slice);p.exports=function(o){return l(a(o),8,-1)}},2211:(p,t,e)=>{var i=e(9039);p.exports=!i(function(){function a(){}return a.prototype.constructor=null,Object.getPrototypeOf(new a)!==a.prototype})},2303:(p,t,e)=>{var i=e(4576),a=e(9504),l=i.Uint8Array,o=i.SyntaxError,u=i.parseInt,h=Math.min,d=/[^\da-f]/i,f=a(d.exec),m=a("".slice);p.exports=function(y,b){var A=y.length;if(A%2!==0)throw new o("String should be an even number of characters");for(var x=b?h(b.length,A/2):A/2,w=b||new l(x),T=0,O=0;O<x;){var R=m(y,T,T+=2);if(f(d,R))throw new o("String should only contain hex characters");w[O++]=u(R,16)}return{bytes:w,read:T}}},2360:(p,t,e)=>{var i=e(8551),a=e(6801),l=e(8727),o=e(421),u=e(397),h=e(4055),d=e(6119),f=">",m="<",y="prototype",b="script",A=d("IE_PROTO"),x=function(){},w=function(C){return m+b+f+C+m+"/"+b+f},T=function(C){C.write(w("")),C.close();var L=C.parentWindow.Object;return C=null,L},O=function(){var C=h("iframe"),L="java"+b+":",_;return C.style.display="none",u.appendChild(C),C.src=String(L),_=C.contentWindow.document,_.open(),_.write(w("document.F=Object")),_.close(),_.F},R,M=function(){try{R=new ActiveXObject("htmlfile")}catch{}M=typeof document<"u"?document.domain&&R?T(R):O():T(R);for(var C=l.length;C--;)delete M[y][l[C]];return M()};o[A]=!0,p.exports=Object.create||function(L,_){var z;return L!==null?(x[y]=i(L),z=new x,x[y]=null,z[A]=L):z=M(),_===void 0?z:a.f(z,_)}},2475:(p,t,e)=>{var i=e(6518),a=e(8527),l=e(4916),o=!l("isSupersetOf",function(u){return!u});i({target:"Set",proto:!0,real:!0,forced:o},{isSupersetOf:a})},2489:(p,t,e)=>{var i=e(6518),a=e(9565),l=e(9306),o=e(8551),u=e(1767),h=e(9462),d=e(6319),f=e(6395),m=e(9539),y=e(684),b=e(4549),A=!f&&!y("filter",function(){}),x=!f&&!A&&b("filter",TypeError),w=f||A||x,T=h(function(){for(var O=this.iterator,R=this.predicate,M=this.next,C,L,_;;){if(C=o(a(M,O)),L=this.done=!!C.done,L)return;if(_=C.value,d(O,R,[_,this.counter++],!0))return _}});i({target:"Iterator",proto:!0,real:!0,forced:w},{filter:function(R){o(this);try{l(R)}catch(M){m(this,"throw",M)}return x?a(x,this,R):new T(u(this),{predicate:R})}})},2529:p=>{p.exports=function(t,e){return{value:t,done:e}}},2603:(p,t,e)=>{var i=e(655);p.exports=function(a,l){return a===void 0?arguments.length<2?"":l:i(a)}},2652:(p,t,e)=>{var i=e(6080),a=e(9565),l=e(8551),o=e(6823),u=e(4209),h=e(6198),d=e(1625),f=e(81),m=e(851),y=e(9539),b=TypeError,A=function(w,T){this.stopped=w,this.result=T},x=A.prototype;p.exports=function(w,T,O){var R=O&&O.that,M=!!(O&&O.AS_ENTRIES),C=!!(O&&O.IS_RECORD),L=!!(O&&O.IS_ITERATOR),_=!!(O&&O.INTERRUPTED),z=i(T,R),G,Q,J,at,Y,it,lt,D=function(st){return G&&y(G,"normal"),new A(!0,st)},j=function(st){return M?(l(st),_?z(st[0],st[1],D):z(st[0],st[1])):_?z(st,D):z(st)};if(C)G=w.iterator;else if(L)G=w;else{if(Q=m(w),!Q)throw new b(o(w)+" is not iterable");if(u(Q)){for(J=0,at=h(w);at>J;J++)if(Y=j(w[J]),Y&&d(x,Y))return Y;return new A(!1)}G=f(w,Q)}for(it=C?w.next:G.next;!(lt=a(it,G)).done;){try{Y=j(lt.value)}catch(st){y(G,"throw",st)}if(typeof Y=="object"&&Y&&d(x,Y))return Y}return new A(!1)}},2777:(p,t,e)=>{var i=e(9565),a=e(34),l=e(757),o=e(5966),u=e(4270),h=e(8227),d=TypeError,f=h("toPrimitive");p.exports=function(m,y){if(!a(m)||l(m))return m;var b=o(m,f),A;if(b){if(y===void 0&&(y="default"),A=i(b,m,y),!a(A)||l(A))return A;throw new d("Can't convert object to primitive value")}return y===void 0&&(y="number"),u(m,y)}},2787:(p,t,e)=>{var i=e(9297),a=e(4901),l=e(8981),o=e(6119),u=e(2211),h=o("IE_PROTO"),d=Object,f=d.prototype;p.exports=u?d.getPrototypeOf:function(m){var y=l(m);if(i(y,h))return y[h];var b=y.constructor;return a(b)&&y instanceof b?b.prototype:y instanceof d?f:null}},2796:(p,t,e)=>{var i=e(9039),a=e(4901),l=/#|\.prototype\./,o=function(m,y){var b=h[u(m)];return b===f?!0:b===d?!1:a(y)?i(y):!!y},u=o.normalize=function(m){return String(m).replace(l,".").toLowerCase()},h=o.data={},d=o.NATIVE="N",f=o.POLYFILL="P";p.exports=o},2804:p=>{var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=t+"+/",i=t+"-_",a=function(l){for(var o={},u=0;u<64;u++)o[l.charAt(u)]=u;return o};p.exports={i2c:e,c2i:a(e),i2cUrl:i,c2iUrl:a(i)}},2812:p=>{var t=TypeError;p.exports=function(e,i){if(e<i)throw new t("Not enough arguments");return e}},2839:(p,t,e)=>{var i=e(4576),a=i.navigator,l=a&&a.userAgent;p.exports=l?String(l):""},2967:(p,t,e)=>{var i=e(6706),a=e(34),l=e(7750),o=e(3506);p.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var u=!1,h={},d;try{d=i(Object.prototype,"__proto__","set"),d(h,[]),u=h instanceof Array}catch{}return function(m,y){return l(m),o(y),a(m)&&(u?d(m,y):m.__proto__=y),m}}():void 0)},3167:(p,t,e)=>{var i=e(4901),a=e(34),l=e(2967);p.exports=function(o,u,h){var d,f;return l&&i(d=u.constructor)&&d!==h&&a(f=d.prototype)&&f!==h.prototype&&l(o,f),o}},3238:(p,t,e)=>{var i=e(4576),a=e(7811),l=e(7394),o=i.DataView;p.exports=function(u){if(!a||l(u)!==0)return!1;try{return new o(u),!1}catch{return!0}}},3392:(p,t,e)=>{var i=e(9504),a=0,l=Math.random(),o=i(1.1.toString);p.exports=function(u){return"Symbol("+(u===void 0?"":u)+")_"+o(++a+l,36)}},3440:(p,t,e)=>{var i=e(7080),a=e(4402),l=e(9286),o=e(5170),u=e(3789),h=e(8469),d=e(507),f=a.has,m=a.remove;p.exports=function(b){var A=i(this),x=u(b),w=l(A);return o(A)<=x.size?h(A,function(T){x.includes(T)&&m(w,T)}):d(x.getIterator(),function(T){f(w,T)&&m(w,T)}),w}},3463:p=>{var t=TypeError;p.exports=function(e){if(typeof e=="string")return e;throw new t("Argument is not a string")}},3506:(p,t,e)=>{var i=e(3925),a=String,l=TypeError;p.exports=function(o){if(i(o))return o;throw new l("Can't set "+a(o)+" as a prototype")}},3579:(p,t,e)=>{var i=e(6518),a=e(9565),l=e(2652),o=e(9306),u=e(8551),h=e(1767),d=e(9539),f=e(4549),m=f("some",TypeError);i({target:"Iterator",proto:!0,real:!0,forced:m},{some:function(b){u(this);try{o(b)}catch(w){d(this,"throw",w)}if(m)return a(m,this,b);var A=h(this),x=0;return l(A,function(w,T){if(b(w,x++))return T()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},3650:(p,t,e)=>{var i=e(7080),a=e(4402),l=e(9286),o=e(3789),u=e(507),h=a.add,d=a.has,f=a.remove;p.exports=function(y){var b=i(this),A=o(y).getIterator(),x=l(b);return u(A,function(w){d(b,w)?f(x,w):h(x,w)}),x}},3706:(p,t,e)=>{var i=e(9504),a=e(4901),l=e(7629),o=i(Function.toString);a(l.inspectSource)||(l.inspectSource=function(u){return o(u)}),p.exports=l.inspectSource},3717:(p,t)=>{t.f=Object.getOwnPropertySymbols},3724:(p,t,e)=>{var i=e(9039);p.exports=!i(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},3789:(p,t,e)=>{var i=e(9306),a=e(8551),l=e(9565),o=e(1291),u=e(1767),h="Invalid size",d=RangeError,f=TypeError,m=Math.max,y=function(b,A){this.set=b,this.size=m(A,0),this.has=i(b.has),this.keys=i(b.keys)};y.prototype={getIterator:function(){return u(a(l(this.keys,this.set)))},includes:function(b){return l(this.has,this.set,b)}},p.exports=function(b){a(b);var A=+b.size;if(A!==A)throw new f(h);var x=o(A);if(x<0)throw new d(h);return new y(b,x)}},3838:(p,t,e)=>{var i=e(7080),a=e(5170),l=e(8469),o=e(3789);p.exports=function(h){var d=i(this),f=o(h);return a(d)>f.size?!1:l(d,function(m){if(!f.includes(m))return!1},!0)!==!1}},3853:(p,t,e)=>{var i=e(6518),a=e(4449),l=e(4916),o=!l("isDisjointFrom",function(u){return!u});i({target:"Set",proto:!0,real:!0,forced:o},{isDisjointFrom:a})},3925:(p,t,e)=>{var i=e(34);p.exports=function(a){return i(a)||a===null}},3972:(p,t,e)=>{var i=e(34),a=String,l=TypeError;p.exports=function(o){if(o===void 0||i(o))return o;throw new l(a(o)+" is not an object or undefined")}},4055:(p,t,e)=>{var i=e(4576),a=e(34),l=i.document,o=a(l)&&a(l.createElement);p.exports=function(u){return o?l.createElement(u):{}}},4114:(p,t,e)=>{var i=e(6518),a=e(8981),l=e(6198),o=e(4527),u=e(6837),h=e(9039),d=h(function(){return[].push.call({length:4294967296},1)!==4294967297}),f=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(y){return y instanceof TypeError}},m=d||!f();i({target:"Array",proto:!0,arity:1,forced:m},{push:function(b){var A=a(this),x=l(A),w=arguments.length;u(x+w);for(var T=0;T<w;T++)A[x]=arguments[T],x++;return o(A,x),x}})},4117:p=>{p.exports=function(t){return t==null}},4149:p=>{var t=RangeError;p.exports=function(e){if(e===e)return e;throw new t("NaN is not allowed")}},4154:(p,t,e)=>{var i=e(6955),a=TypeError;p.exports=function(l){if(i(l)==="Uint8Array")return l;throw new a("Argument is not an Uint8Array")}},4204:(p,t,e)=>{var i=e(7080),a=e(4402).add,l=e(9286),o=e(3789),u=e(507);p.exports=function(d){var f=i(this),m=o(d).getIterator(),y=l(f);return u(m,function(b){a(y,b)}),y}},4209:(p,t,e)=>{var i=e(8227),a=e(6269),l=i("iterator"),o=Array.prototype;p.exports=function(u){return u!==void 0&&(a.Array===u||o[l]===u)}},4215:(p,t,e)=>{var i=e(4576),a=e(2839),l=e(2195),o=function(u){return a.slice(0,u.length)===u};p.exports=function(){return o("Bun/")?"BUN":o("Cloudflare-Workers")?"CLOUDFLARE":o("Deno/")?"DENO":o("Node.js/")?"NODE":i.Bun&&typeof Bun.version=="string"?"BUN":i.Deno&&typeof Deno.version=="object"?"DENO":l(i.process)==="process"?"NODE":i.window&&i.document?"BROWSER":"REST"}()},4270:(p,t,e)=>{var i=e(9565),a=e(4901),l=e(34),o=TypeError;p.exports=function(u,h){var d,f;if(h==="string"&&a(d=u.toString)&&!l(f=i(d,u))||a(d=u.valueOf)&&!l(f=i(d,u))||h!=="string"&&a(d=u.toString)&&!l(f=i(d,u)))return f;throw new o("Can't convert object to primitive value")}},4376:(p,t,e)=>{var i=e(2195);p.exports=Array.isArray||function(l){return i(l)==="Array"}},4402:(p,t,e)=>{var i=e(9504),a=Set.prototype;p.exports={Set,add:i(a.add),has:i(a.has),remove:i(a.delete),proto:a}},4449:(p,t,e)=>{var i=e(7080),a=e(4402).has,l=e(5170),o=e(3789),u=e(8469),h=e(507),d=e(9539);p.exports=function(m){var y=i(this),b=o(m);if(l(y)<=b.size)return u(y,function(x){if(b.includes(x))return!1},!0)!==!1;var A=b.getIterator();return h(A,function(x){if(a(y,x))return d(A,"normal",!1)})!==!1}},4483:(p,t,e)=>{var i=e(4576),a=e(9429),l=e(1548),o=i.structuredClone,u=i.ArrayBuffer,h=i.MessageChannel,d=!1,f,m,y,b;if(l)d=function(A){o(A,{transfer:[A]})};else if(u)try{h||(f=a("worker_threads"),f&&(h=f.MessageChannel)),h&&(m=new h,y=new u(2),b=function(A){m.port1.postMessage(null,[A])},y.byteLength===2&&(b(y),y.byteLength===0&&(d=b)))}catch{}p.exports=d},4495:(p,t,e)=>{var i=e(9519),a=e(9039),l=e(4576),o=l.String;p.exports=!!Object.getOwnPropertySymbols&&!a(function(){var u=Symbol("symbol detection");return!o(u)||!(Object(u)instanceof Symbol)||!Symbol.sham&&i&&i<41})},4527:(p,t,e)=>{var i=e(3724),a=e(4376),l=TypeError,o=Object.getOwnPropertyDescriptor,u=i&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(h){return h instanceof TypeError}}();p.exports=u?function(h,d){if(a(h)&&!o(h,"length").writable)throw new l("Cannot set read only .length");return h.length=d}:function(h,d){return h.length=d}},4549:(p,t,e)=>{var i=e(4576);p.exports=function(a,l){var o=i.Iterator,u=o&&o.prototype,h=u&&u[a],d=!1;if(h)try{h.call({next:function(){return{done:!0}},return:function(){d=!0}},-1)}catch(f){f instanceof l||(d=!1)}if(!d)return h}},4576:function(p){var t=function(e){return e&&e.Math===Math&&e};p.exports=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof global=="object"&&global)||t(typeof this=="object"&&this)||function(){return this}()||Function("return this")()},4603:(p,t,e)=>{var i=e(6840),a=e(9504),l=e(655),o=e(2812),u=URLSearchParams,h=u.prototype,d=a(h.append),f=a(h.delete),m=a(h.forEach),y=a([].push),b=new u("a=1&a=2&b=3");b.delete("a",1),b.delete("b",void 0),b+""!="a=2"&&i(h,"delete",function(A){var x=arguments.length,w=x<2?void 0:arguments[1];if(x&&w===void 0)return f(this,A);var T=[];m(this,function(G,Q){y(T,{key:Q,value:G})}),o(x,1);for(var O=l(A),R=l(w),M=0,C=0,L=!1,_=T.length,z;M<_;)z=T[M++],L||z.key===O?(L=!0,f(this,z.key)):C++;for(;C<_;)z=T[C++],z.key===O&&z.value===R||d(this,z.key,z.value)},{enumerable:!0,unsafe:!0})},4628:(p,t,e)=>{var i=e(6518),a=e(6043);i({target:"Promise",stat:!0},{withResolvers:function(){var o=a.f(this);return{promise:o.promise,resolve:o.resolve,reject:o.reject}}})},4659:(p,t,e)=>{var i=e(3724),a=e(4913),l=e(6980);p.exports=function(o,u,h){i?a.f(o,u,l(0,h)):o[u]=h}},4901:p=>{var t=typeof document=="object"&&document.all;p.exports=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"}},4913:(p,t,e)=>{var i=e(3724),a=e(5917),l=e(8686),o=e(8551),u=e(6969),h=TypeError,d=Object.defineProperty,f=Object.getOwnPropertyDescriptor,m="enumerable",y="configurable",b="writable";t.f=i?l?function(x,w,T){if(o(x),w=u(w),o(T),typeof x=="function"&&w==="prototype"&&"value"in T&&b in T&&!T[b]){var O=f(x,w);O&&O[b]&&(x[w]=T.value,T={configurable:y in T?T[y]:O[y],enumerable:m in T?T[m]:O[m],writable:!1})}return d(x,w,T)}:d:function(x,w,T){if(o(x),w=u(w),o(T),a)try{return d(x,w,T)}catch{}if("get"in T||"set"in T)throw new h("Accessors not supported");return"value"in T&&(x[w]=T.value),x}},4916:(p,t,e)=>{var i=e(7751),a=function(o){return{size:o,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},l=function(o){return{size:o,has:function(){return!0},keys:function(){throw new Error("e")}}};p.exports=function(o,u){var h=i("Set");try{new h()[o](a(0));try{return new h()[o](a(-1)),!1}catch{if(!u)return!0;try{return new h()[o](l(-1/0)),!1}catch{var d=new h;return d.add(1),d.add(2),u(d[o](l(1/0)))}}}catch{return!1}}},4979:(p,t,e)=>{var i=e(6518),a=e(4576),l=e(7751),o=e(6980),u=e(4913).f,h=e(9297),d=e(679),f=e(3167),m=e(2603),y=e(5002),b=e(8574),A=e(3724),x=e(6395),w="DOMException",T=l("Error"),O=l(w),R=function(){d(this,M);var D=arguments.length,j=m(D<1?void 0:arguments[0]),st=m(D<2?void 0:arguments[1],"Error"),gt=new O(j,st),k=new T(j);return k.name=w,u(gt,"stack",o(1,b(k.stack,1))),f(gt,this,R),gt},M=R.prototype=O.prototype,C="stack"in new T(w),L="stack"in new O(1,2),_=O&&A&&Object.getOwnPropertyDescriptor(a,w),z=!!_&&!(_.writable&&_.configurable),G=C&&!z&&!L;i({global:!0,constructor:!0,forced:x||G},{DOMException:G?R:O});var Q=l(w),J=Q.prototype;if(J.constructor!==Q){x||u(J,"constructor",o(1,Q));for(var at in y)if(h(y,at)){var Y=y[at],it=Y.s;h(Q,it)||u(Q,it,o(6,Y.c))}}},5002:p=>{p.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},5024:(p,t,e)=>{var i=e(6518),a=e(3650),l=e(9835),o=e(4916),u=!o("symmetricDifference")||!l("symmetricDifference");i({target:"Set",proto:!0,real:!0,forced:u},{symmetricDifference:a})},5031:(p,t,e)=>{var i=e(7751),a=e(9504),l=e(8480),o=e(3717),u=e(8551),h=a([].concat);p.exports=i("Reflect","ownKeys")||function(f){var m=l.f(u(f)),y=o.f;return y?h(m,y(f)):m}},5169:(p,t,e)=>{var i=e(3238),a=TypeError;p.exports=function(l){if(i(l))throw new a("ArrayBuffer is detached");return l}},5170:(p,t,e)=>{var i=e(6706),a=e(4402);p.exports=i(a.proto,"size","get")||function(l){return l.size}},5370:(p,t,e)=>{var i=e(6198);p.exports=function(a,l,o){for(var u=0,h=arguments.length>2?o:i(l),d=new a(h);h>u;)d[u]=l[u++];return d}},5397:(p,t,e)=>{var i=e(7055),a=e(7750);p.exports=function(l){return i(a(l))}},5610:(p,t,e)=>{var i=e(1291),a=Math.max,l=Math.min;p.exports=function(o,u){var h=i(o);return h<0?a(h+u,0):l(h,u)}},5623:(p,t,e)=>{var i=e(6518),a=e(4576),l=e(9504),o=e(4154),u=e(5169),h=l(1.1.toString);a.Uint8Array&&i({target:"Uint8Array",proto:!0},{toHex:function(){o(this),u(this.buffer);for(var f="",m=0,y=this.length;m<y;m++){var b=h(this[m],16);f+=b.length===1?"0"+b:b}return f}})},5636:(p,t,e)=>{var i=e(4576),a=e(9504),l=e(6706),o=e(7696),u=e(5169),h=e(7394),d=e(4483),f=e(1548),m=i.structuredClone,y=i.ArrayBuffer,b=i.DataView,A=Math.min,x=y.prototype,w=b.prototype,T=a(x.slice),O=l(x,"resizable","get"),R=l(x,"maxByteLength","get"),M=a(w.getInt8),C=a(w.setInt8);p.exports=(f||d)&&function(L,_,z){var G=h(L),Q=_===void 0?G:o(_),J=!O||!O(L),at;if(u(L),f&&(L=m(L,{transfer:[L]}),G===Q&&(z||J)))return L;if(G>=Q&&(!z||J))at=T(L,0,Q);else{var Y=z&&!J&&R?{maxByteLength:R(L)}:void 0;at=new y(Q,Y);for(var it=new b(L),lt=new b(at),D=A(Q,G),j=0;j<D;j++)C(lt,j,M(it,j))}return f||d(L),at}},5745:(p,t,e)=>{var i=e(7629);p.exports=function(a,l){return i[a]||(i[a]=l||{})}},5781:(p,t,e)=>{var i=e(6518),a=e(7751),l=e(2812),o=e(655),u=e(7416),h=a("URL");i({target:"URL",stat:!0,forced:!u},{parse:function(f){var m=l(arguments.length,1),y=o(f),b=m<2||arguments[1]===void 0?void 0:o(arguments[1]);try{return new h(y,b)}catch{return null}}})},5876:(p,t,e)=>{var i=e(6518),a=e(3838),l=e(4916),o=!l("isSubsetOf",function(u){return u});i({target:"Set",proto:!0,real:!0,forced:o},{isSubsetOf:a})},5917:(p,t,e)=>{var i=e(3724),a=e(9039),l=e(4055);p.exports=!i&&!a(function(){return Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a!==7})},5966:(p,t,e)=>{var i=e(9306),a=e(4117);p.exports=function(l,o){var u=l[o];return a(u)?void 0:i(u)}},6043:(p,t,e)=>{var i=e(9306),a=TypeError,l=function(o){var u,h;this.promise=new o(function(d,f){if(u!==void 0||h!==void 0)throw new a("Bad Promise constructor");u=d,h=f}),this.resolve=i(u),this.reject=i(h)};p.exports.f=function(o){return new l(o)}},6080:(p,t,e)=>{var i=e(7476),a=e(9306),l=e(616),o=i(i.bind);p.exports=function(u,h){return a(u),h===void 0?u:l?o(u,h):function(){return u.apply(h,arguments)}}},6119:(p,t,e)=>{var i=e(5745),a=e(3392),l=i("keys");p.exports=function(o){return l[o]||(l[o]=a(o))}},6193:(p,t,e)=>{var i=e(4215);p.exports=i==="NODE"},6198:(p,t,e)=>{var i=e(8014);p.exports=function(a){return i(a.length)}},6269:p=>{p.exports={}},6279:(p,t,e)=>{var i=e(6840);p.exports=function(a,l,o){for(var u in l)i(a,u,l[u],o);return a}},6319:(p,t,e)=>{var i=e(8551),a=e(9539);p.exports=function(l,o,u,h){try{return h?o(i(u)[0],u[1]):o(u)}catch(d){a(l,"throw",d)}}},6395:p=>{p.exports=!1},6518:(p,t,e)=>{var i=e(4576),a=e(7347).f,l=e(6699),o=e(6840),u=e(9433),h=e(7740),d=e(2796);p.exports=function(f,m){var y=f.target,b=f.global,A=f.stat,x,w,T,O,R,M;if(b?w=i:A?w=i[y]||u(y,{}):w=i[y]&&i[y].prototype,w)for(T in m){if(R=m[T],f.dontCallGetSet?(M=a(w,T),O=M&&M.value):O=w[T],x=d(b?T:y+(A?".":"#")+T,f.forced),!x&&O!==void 0){if(typeof R==typeof O)continue;h(R,O)}(f.sham||O&&O.sham)&&l(R,"sham",!0),o(w,T,R,f)}}},6573:(p,t,e)=>{var i=e(3724),a=e(2106),l=e(3238),o=ArrayBuffer.prototype;i&&!("detached"in o)&&a(o,"detached",{configurable:!0,get:function(){return l(this)}})},6699:(p,t,e)=>{var i=e(3724),a=e(4913),l=e(6980);p.exports=i?function(o,u,h){return a.f(o,u,l(1,h))}:function(o,u,h){return o[u]=h,o}},6706:(p,t,e)=>{var i=e(9504),a=e(9306);p.exports=function(l,o,u){try{return i(a(Object.getOwnPropertyDescriptor(l,o)[u]))}catch{}}},6801:(p,t,e)=>{var i=e(3724),a=e(8686),l=e(4913),o=e(8551),u=e(5397),h=e(1072);t.f=i&&!a?Object.defineProperties:function(f,m){o(f);for(var y=u(m),b=h(m),A=b.length,x=0,w;A>x;)l.f(f,w=b[x++],y[w]);return f}},6823:p=>{var t=String;p.exports=function(e){try{return t(e)}catch{return"Object"}}},6837:p=>{var t=TypeError,e=9007199254740991;p.exports=function(i){if(i>e)throw t("Maximum allowed index exceeded");return i}},6840:(p,t,e)=>{var i=e(4901),a=e(4913),l=e(283),o=e(9433);p.exports=function(u,h,d,f){f||(f={});var m=f.enumerable,y=f.name!==void 0?f.name:h;if(i(d)&&l(d,y,f),f.global)m?u[h]=d:o(h,d);else{try{f.unsafe?u[h]&&(m=!0):delete u[h]}catch{}m?u[h]=d:a.f(u,h,{value:d,enumerable:!1,configurable:!f.nonConfigurable,writable:!f.nonWritable})}return u}},6955:(p,t,e)=>{var i=e(2140),a=e(4901),l=e(2195),o=e(8227),u=o("toStringTag"),h=Object,d=l(function(){return arguments}())==="Arguments",f=function(m,y){try{return m[y]}catch{}};p.exports=i?l:function(m){var y,b,A;return m===void 0?"Undefined":m===null?"Null":typeof(b=f(y=h(m),u))=="string"?b:d?l(y):(A=l(y))==="Object"&&a(y.callee)?"Arguments":A}},6969:(p,t,e)=>{var i=e(2777),a=e(757);p.exports=function(l){var o=i(l,"string");return a(o)?o:o+""}},6980:p=>{p.exports=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}},7040:(p,t,e)=>{var i=e(4495);p.exports=i&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},7055:(p,t,e)=>{var i=e(9504),a=e(9039),l=e(2195),o=Object,u=i("".split);p.exports=a(function(){return!o("z").propertyIsEnumerable(0)})?function(h){return l(h)==="String"?u(h,""):o(h)}:o},7080:(p,t,e)=>{var i=e(4402).has;p.exports=function(a){return i(a),a}},7347:(p,t,e)=>{var i=e(3724),a=e(9565),l=e(8773),o=e(6980),u=e(5397),h=e(6969),d=e(9297),f=e(5917),m=Object.getOwnPropertyDescriptor;t.f=i?m:function(b,A){if(b=u(b),A=h(A),f)try{return m(b,A)}catch{}if(d(b,A))return o(!a(l.f,b,A),b[A])}},7394:(p,t,e)=>{var i=e(4576),a=e(6706),l=e(2195),o=i.ArrayBuffer,u=i.TypeError;p.exports=o&&a(o.prototype,"byteLength","get")||function(h){if(l(h)!=="ArrayBuffer")throw new u("ArrayBuffer expected");return h.byteLength}},7416:(p,t,e)=>{var i=e(9039),a=e(8227),l=e(3724),o=e(6395),u=a("iterator");p.exports=!i(function(){var h=new URL("b?a=1&b=2&c=3","https://a"),d=h.searchParams,f=new URLSearchParams("a=1&a=2&b=3"),m="";return h.pathname="c%20d",d.forEach(function(y,b){d.delete("b"),m+=b+y}),f.delete("a",2),f.delete("b",void 0),o&&(!h.toJSON||!f.has("a",1)||f.has("a",2)||!f.has("a",void 0)||f.has("b"))||!d.size&&(o||!l)||!d.sort||h.href!=="https://a/c%20d?a=1&c=3"||d.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!d[u]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://тест").host!=="xn--e1aybc"||new URL("https://a#б").hash!=="#%D0%B1"||m!=="a1c3"||new URL("https://x",void 0).host!=="x"})},7476:(p,t,e)=>{var i=e(2195),a=e(9504);p.exports=function(l){if(i(l)==="Function")return a(l)}},7566:(p,t,e)=>{var i=e(6840),a=e(9504),l=e(655),o=e(2812),u=URLSearchParams,h=u.prototype,d=a(h.getAll),f=a(h.has),m=new u("a=1");(m.has("a",2)||!m.has("a",void 0))&&i(h,"has",function(b){var A=arguments.length,x=A<2?void 0:arguments[1];if(A&&x===void 0)return f(this,b);var w=d(this,b);o(A,1);for(var T=l(x),O=0;O<w.length;)if(w[O++]===T)return!0;return!1},{enumerable:!0,unsafe:!0})},7629:(p,t,e)=>{var i=e(6395),a=e(4576),l=e(9433),o="__core-js_shared__",u=p.exports=a[o]||l(o,{});(u.versions||(u.versions=[])).push({version:"3.43.0",mode:i?"pure":"global",copyright:"© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.43.0/LICENSE",source:"https://github.com/zloirock/core-js"})},7642:(p,t,e)=>{var i=e(6518),a=e(3440),l=e(9039),o=e(4916),u=!o("difference",function(d){return d.size===0}),h=u||l(function(){var d={size:1,has:function(){return!0},keys:function(){var m=0;return{next:function(){var y=m++>1;return f.has(1)&&f.clear(),{done:y,value:2}}}}},f=new Set([1,2,3,4]);return f.difference(d).size!==3});i({target:"Set",proto:!0,real:!0,forced:h},{difference:a})},7657:(p,t,e)=>{var i=e(9039),a=e(4901),l=e(34),o=e(2360),u=e(2787),h=e(6840),d=e(8227),f=e(6395),m=d("iterator"),y=!1,b,A,x;[].keys&&(x=[].keys(),"next"in x?(A=u(u(x)),A!==Object.prototype&&(b=A)):y=!0);var w=!l(b)||i(function(){var T={};return b[m].call(T)!==T});w?b={}:f&&(b=o(b)),a(b[m])||h(b,m,function(){return this}),p.exports={IteratorPrototype:b,BUGGY_SAFARI_ITERATORS:y}},7680:(p,t,e)=>{var i=e(9504);p.exports=i([].slice)},7696:(p,t,e)=>{var i=e(1291),a=e(8014),l=RangeError;p.exports=function(o){if(o===void 0)return 0;var u=i(o),h=a(u);if(u!==h)throw new l("Wrong length or index");return h}},7740:(p,t,e)=>{var i=e(9297),a=e(5031),l=e(7347),o=e(4913);p.exports=function(u,h,d){for(var f=a(h),m=o.f,y=l.f,b=0;b<f.length;b++){var A=f[b];!i(u,A)&&!(d&&i(d,A))&&m(u,A,y(h,A))}}},7750:(p,t,e)=>{var i=e(4117),a=TypeError;p.exports=function(l){if(i(l))throw new a("Can't call method on "+l);return l}},7751:(p,t,e)=>{var i=e(4576),a=e(4901),l=function(o){return a(o)?o:void 0};p.exports=function(o,u){return arguments.length<2?l(i[o]):i[o]&&i[o][u]}},7811:p=>{p.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},7936:(p,t,e)=>{var i=e(6518),a=e(5636);a&&i({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return a(this,arguments.length?arguments[0]:void 0,!1)}})},8004:(p,t,e)=>{var i=e(6518),a=e(9039),l=e(8750),o=e(4916),u=!o("intersection",function(h){return h.size===2&&h.has(1)&&h.has(2)})||a(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});i({target:"Set",proto:!0,real:!0,forced:u},{intersection:l})},8014:(p,t,e)=>{var i=e(1291),a=Math.min;p.exports=function(l){var o=i(l);return o>0?a(o,9007199254740991):0}},8100:(p,t,e)=>{var i=e(6518),a=e(5636);a&&i({target:"ArrayBuffer",proto:!0},{transfer:function(){return a(this,arguments.length?arguments[0]:void 0,!0)}})},8111:(p,t,e)=>{var i=e(6518),a=e(4576),l=e(679),o=e(8551),u=e(4901),h=e(2787),d=e(2106),f=e(4659),m=e(9039),y=e(9297),b=e(8227),A=e(7657).IteratorPrototype,x=e(3724),w=e(6395),T="constructor",O="Iterator",R=b("toStringTag"),M=TypeError,C=a[O],L=w||!u(C)||C.prototype!==A||!m(function(){C({})}),_=function(){if(l(this,A),h(this)===A)throw new M("Abstract class Iterator not directly constructable")},z=function(G,Q){x?d(A,G,{configurable:!0,get:function(){return Q},set:function(J){if(o(this),this===A)throw new M("You can't redefine this property");y(this,G)?this[G]=J:f(this,G,J)}}):A[G]=Q};y(A,R)||z(R,O),(L||!y(A,T)||A[T]===Object)&&z(T,_),_.prototype=A,i({global:!0,constructor:!0,forced:L},{Iterator:_})},8227:(p,t,e)=>{var i=e(4576),a=e(5745),l=e(9297),o=e(3392),u=e(4495),h=e(7040),d=i.Symbol,f=a("wks"),m=h?d.for||d:d&&d.withoutSetter||o;p.exports=function(y){return l(f,y)||(f[y]=u&&l(d,y)?d[y]:m("Symbol."+y)),f[y]}},8235:(p,t,e)=>{var i=e(9504),a=e(9297),l=SyntaxError,o=parseInt,u=String.fromCharCode,h=i("".charAt),d=i("".slice),f=i(/./.exec),m={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	"},y=/^[\da-f]{4}$/i,b=/^[\u0000-\u001F]$/;p.exports=function(A,x){for(var w=!0,T="";x<A.length;){var O=h(A,x);if(O==="\\"){var R=d(A,x,x+2);if(a(m,R))T+=m[R],x+=2;else if(R==="\\u"){x+=2;var M=d(A,x,x+4);if(!f(y,M))throw new l("Bad Unicode escape at: "+x);T+=u(o(M,16)),x+=4}else throw new l('Unknown escape sequence: "'+R+'"')}else if(O==='"'){w=!1,x++;break}else{if(f(b,O))throw new l("Bad control character in string literal at: "+x);T+=O,x++}}if(w)throw new l("Unterminated string at: "+x);return{value:T,end:x}}},8237:(p,t,e)=>{var i=e(6518),a=e(2652),l=e(9306),o=e(8551),u=e(1767),h=e(9539),d=e(4549),f=e(8745),m=e(9039),y=TypeError,b=m(function(){[].keys().reduce(function(){},void 0)}),A=!b&&d("reduce",y);i({target:"Iterator",proto:!0,real:!0,forced:b||A},{reduce:function(w){o(this);try{l(w)}catch(C){h(this,"throw",C)}var T=arguments.length<2,O=T?void 0:arguments[1];if(A)return f(A,this,T?[w]:[w,O]);var R=u(this),M=0;if(a(R,function(C){T?(T=!1,O=C):O=w(O,C,M),M++},{IS_RECORD:!0}),T)throw new y("Reduce of empty iterator with no initial value");return O}})},8335:(p,t,e)=>{var i=e(6518),a=e(3724),l=e(4576),o=e(7751),u=e(9504),h=e(9565),d=e(4901),f=e(34),m=e(4376),y=e(9297),b=e(655),A=e(6198),x=e(4659),w=e(9039),T=e(8235),O=e(4495),R=l.JSON,M=l.Number,C=l.SyntaxError,L=R&&R.parse,_=o("Object","keys"),z=Object.getOwnPropertyDescriptor,G=u("".charAt),Q=u("".slice),J=u(/./.exec),at=u([].push),Y=/^\d$/,it=/^[1-9]$/,lt=/^[\d-]$/,D=/^[\t\n\r ]$/,j=0,st=1,gt=function(X,$){X=b(X);var tt=new et(X,0),ht=tt.parse(),At=ht.value,Rt=tt.skip(D,ht.end);if(Rt<X.length)throw new C('Unexpected extra character: "'+G(X,Rt)+'" after the parsed data at: '+Rt);return d($)?k({"":At},"",$,ht):At},k=function(X,$,tt,ht){var At=X[$],Rt=ht&&At===ht.value,Zt=Rt&&typeof ht.source=="string"?{source:ht.source}:{},pe,cs,$n,Fe,Se;if(f(At)){var nr=m(At),xn=Rt?ht.nodes:nr?[]:{};if(nr)for(pe=xn.length,$n=A(At),Fe=0;Fe<$n;Fe++)K(At,Fe,k(At,""+Fe,tt,Fe<pe?xn[Fe]:void 0));else for(cs=_(At),$n=A(cs),Fe=0;Fe<$n;Fe++)Se=cs[Fe],K(At,Se,k(At,Se,tt,y(xn,Se)?xn[Se]:void 0))}return h(tt,X,$,At,Zt)},K=function(X,$,tt){if(a){var ht=z(X,$);if(ht&&!ht.configurable)return}tt===void 0?delete X[$]:x(X,$,tt)},nt=function(X,$,tt,ht){this.value=X,this.end=$,this.source=tt,this.nodes=ht},et=function(X,$){this.source=X,this.index=$};et.prototype={fork:function(X){return new et(this.source,X)},parse:function(){var X=this.source,$=this.skip(D,this.index),tt=this.fork($),ht=G(X,$);if(J(lt,ht))return tt.number();switch(ht){case"{":return tt.object();case"[":return tt.array();case'"':return tt.string();case"t":return tt.keyword(!0);case"f":return tt.keyword(!1);case"n":return tt.keyword(null)}throw new C('Unexpected character: "'+ht+'" at: '+$)},node:function(X,$,tt,ht,At){return new nt($,ht,X?null:Q(this.source,tt,ht),At)},object:function(){for(var X=this.source,$=this.index+1,tt=!1,ht={},At={};$<X.length;){if($=this.until(['"',"}"],$),G(X,$)==="}"&&!tt){$++;break}var Rt=this.fork($).string(),Zt=Rt.value;$=Rt.end,$=this.until([":"],$)+1,$=this.skip(D,$),Rt=this.fork($).parse(),x(At,Zt,Rt),x(ht,Zt,Rt.value),$=this.until([",","}"],Rt.end);var pe=G(X,$);if(pe===",")tt=!0,$++;else if(pe==="}"){$++;break}}return this.node(st,ht,this.index,$,At)},array:function(){for(var X=this.source,$=this.index+1,tt=!1,ht=[],At=[];$<X.length;){if($=this.skip(D,$),G(X,$)==="]"&&!tt){$++;break}var Rt=this.fork($).parse();if(at(At,Rt),at(ht,Rt.value),$=this.until([",","]"],Rt.end),G(X,$)===",")tt=!0,$++;else if(G(X,$)==="]"){$++;break}}return this.node(st,ht,this.index,$,At)},string:function(){var X=this.index,$=T(this.source,this.index+1);return this.node(j,$.value,X,$.end)},number:function(){var X=this.source,$=this.index,tt=$;if(G(X,tt)==="-"&&tt++,G(X,tt)==="0")tt++;else if(J(it,G(X,tt)))tt=this.skip(Y,tt+1);else throw new C("Failed to parse number at: "+tt);if(G(X,tt)==="."&&(tt=this.skip(Y,tt+1)),G(X,tt)==="e"||G(X,tt)==="E"){tt++,(G(X,tt)==="+"||G(X,tt)==="-")&&tt++;var ht=tt;if(tt=this.skip(Y,tt),ht===tt)throw new C("Failed to parse number's exponent value at: "+tt)}return this.node(j,M(Q(X,$,tt)),$,tt)},keyword:function(X){var $=""+X,tt=this.index,ht=tt+$.length;if(Q(this.source,tt,ht)!==$)throw new C("Failed to parse value at: "+tt);return this.node(j,X,tt,ht)},skip:function(X,$){for(var tt=this.source;$<tt.length&&J(X,G(tt,$));$++);return $},until:function(X,$){$=this.skip(D,$);for(var tt=G(this.source,$),ht=0;ht<X.length;ht++)if(X[ht]===tt)return $;throw new C('Unexpected character: "'+tt+'" at: '+$)}};var ot=w(function(){var X="9007199254740993",$;return L(X,function(tt,ht,At){$=At.source}),$!==X}),rt=O&&!w(function(){return 1/L("-0 	")!==-1/0});i({target:"JSON",stat:!0,forced:ot},{parse:function($,tt){return rt&&!d(tt)?L($):gt($,tt)}})},8469:(p,t,e)=>{var i=e(9504),a=e(507),l=e(4402),o=l.Set,u=l.proto,h=i(u.forEach),d=i(u.keys),f=d(new o).next;p.exports=function(m,y,b){return b?a({iterator:d(m),next:f},y):h(m,y)}},8480:(p,t,e)=>{var i=e(1828),a=e(8727),l=a.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(u){return i(u,l)}},8527:(p,t,e)=>{var i=e(7080),a=e(4402).has,l=e(5170),o=e(3789),u=e(507),h=e(9539);p.exports=function(f){var m=i(this),y=o(f);if(l(m)<y.size)return!1;var b=y.getIterator();return u(b,function(A){if(!a(m,A))return h(b,"normal",!1)})!==!1}},8551:(p,t,e)=>{var i=e(34),a=String,l=TypeError;p.exports=function(o){if(i(o))return o;throw new l(a(o)+" is not an object")}},8574:(p,t,e)=>{var i=e(9504),a=Error,l=i("".replace),o=function(d){return String(new a(d).stack)}("zxcasd"),u=/\n\s*at [^:]*:[^\n]*/,h=u.test(o);p.exports=function(d,f){if(h&&typeof d=="string"&&!a.prepareStackTrace)for(;f--;)d=l(d,u,"");return d}},8622:(p,t,e)=>{var i=e(4576),a=e(4901),l=i.WeakMap;p.exports=a(l)&&/native code/.test(String(l))},8646:(p,t,e)=>{var i=e(9565),a=e(8551),l=e(1767),o=e(851);p.exports=function(u,h){(!h||typeof u!="string")&&a(u);var d=o(u);return l(a(d!==void 0?i(d,u):u))}},8686:(p,t,e)=>{var i=e(3724),a=e(9039);p.exports=i&&a(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},8721:(p,t,e)=>{var i=e(3724),a=e(9504),l=e(2106),o=URLSearchParams.prototype,u=a(o.forEach);i&&!("size"in o)&&l(o,"size",{get:function(){var d=0;return u(this,function(){d++}),d},configurable:!0,enumerable:!0})},8727:p=>{p.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8745:(p,t,e)=>{var i=e(616),a=Function.prototype,l=a.apply,o=a.call;p.exports=typeof Reflect=="object"&&Reflect.apply||(i?o.bind(l):function(){return o.apply(l,arguments)})},8750:(p,t,e)=>{var i=e(7080),a=e(4402),l=e(5170),o=e(3789),u=e(8469),h=e(507),d=a.Set,f=a.add,m=a.has;p.exports=function(b){var A=i(this),x=o(b),w=new d;return l(A)>x.size?h(x.getIterator(),function(T){m(A,T)&&f(w,T)}):u(A,function(T){x.includes(T)&&f(w,T)}),w}},8773:(p,t)=>{var e={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,a=i&&!e.call({1:2},1);t.f=a?function(o){var u=i(this,o);return!!u&&u.enumerable}:e},8981:(p,t,e)=>{var i=e(7750),a=Object;p.exports=function(l){return a(i(l))}},9039:p=>{p.exports=function(t){try{return!!t()}catch{return!0}}},9143:(p,t,e)=>{var i=e(4576),a=e(9504),l=e(3972),o=e(3463),u=e(9297),h=e(2804),d=e(944),f=e(5169),m=h.c2i,y=h.c2iUrl,b=i.SyntaxError,A=i.TypeError,x=a("".charAt),w=function(R,M){for(var C=R.length;M<C;M++){var L=x(R,M);if(L!==" "&&L!=="	"&&L!==`
`&&L!=="\f"&&L!=="\r")break}return M},T=function(R,M,C){var L=R.length;L<4&&(R+=L===2?"AA":"A");var _=(M[x(R,0)]<<18)+(M[x(R,1)]<<12)+(M[x(R,2)]<<6)+M[x(R,3)],z=[_>>16&255,_>>8&255,_&255];if(L===2){if(C&&z[1]!==0)throw new b("Extra bits");return[z[0]]}if(L===3){if(C&&z[2]!==0)throw new b("Extra bits");return[z[0],z[1]]}return z},O=function(R,M,C){for(var L=M.length,_=0;_<L;_++)R[C+_]=M[_];return C+L};p.exports=function(R,M,C,L){o(R),l(M);var _=d(M)==="base64"?m:y,z=M?M.lastChunkHandling:void 0;if(z===void 0&&(z="loose"),z!=="loose"&&z!=="strict"&&z!=="stop-before-partial")throw new A("Incorrect `lastChunkHandling` option");C&&f(C.buffer);var G=C||[],Q=0,J=0,at="",Y=0;if(L)for(;;){if(Y=w(R,Y),Y===R.length){if(at.length>0){if(z==="stop-before-partial")break;if(z==="loose"){if(at.length===1)throw new b("Malformed padding: exactly one additional character");Q=O(G,T(at,_,!1),Q)}else throw new b("Missing padding")}J=R.length;break}var it=x(R,Y);if(++Y,it==="="){if(at.length<2)throw new b("Padding is too early");if(Y=w(R,Y),at.length===2){if(Y===R.length){if(z==="stop-before-partial")break;throw new b("Malformed padding: only one =")}x(R,Y)==="="&&(++Y,Y=w(R,Y))}if(Y<R.length)throw new b("Unexpected character after padding");Q=O(G,T(at,_,z==="strict"),Q),J=R.length;break}if(!u(_,it))throw new b("Unexpected character");var lt=L-Q;if(lt===1&&at.length===2||lt===2&&at.length===3||(at+=it,at.length===4&&(Q=O(G,T(at,_,!1),Q),at="",J=Y,Q===L)))break}return{bytes:G,read:J,written:Q}}},9286:(p,t,e)=>{var i=e(4402),a=e(8469),l=i.Set,o=i.add;p.exports=function(u){var h=new l;return a(u,function(d){o(h,d)}),h}},9297:(p,t,e)=>{var i=e(9504),a=e(8981),l=i({}.hasOwnProperty);p.exports=Object.hasOwn||function(u,h){return l(a(u),h)}},9306:(p,t,e)=>{var i=e(4901),a=e(6823),l=TypeError;p.exports=function(o){if(i(o))return o;throw new l(a(o)+" is not a function")}},9314:(p,t,e)=>{var i=e(6518),a=e(9565),l=e(8551),o=e(1767),u=e(4149),h=e(9590),d=e(9539),f=e(9462),m=e(684),y=e(4549),b=e(6395),A=!b&&!m("drop",0),x=!b&&!A&&y("drop",RangeError),w=b||A||x,T=f(function(){for(var O=this.iterator,R=this.next,M,C;this.remaining;)if(this.remaining--,M=l(a(R,O)),C=this.done=!!M.done,C)return;if(M=l(a(R,O)),C=this.done=!!M.done,!C)return M.value});i({target:"Iterator",proto:!0,real:!0,forced:w},{drop:function(R){l(this);var M;try{M=h(u(+R))}catch(C){d(this,"throw",C)}return x?a(x,this,M):new T(o(this),{remaining:M})}})},9429:(p,t,e)=>{var i=e(4576),a=e(6193);p.exports=function(l){if(a){try{return i.process.getBuiltinModule(l)}catch{}try{return Function('return require("'+l+'")')()}catch{}}}},9432:(p,t,e)=>{var i=e(6518),a=e(4576),l=e(5370),o=e(9143),u=a.Uint8Array;u&&i({target:"Uint8Array",stat:!0},{fromBase64:function(d){var f=o(d,arguments.length>1?arguments[1]:void 0,null,9007199254740991);return l(u,f.bytes)}})},9433:(p,t,e)=>{var i=e(4576),a=Object.defineProperty;p.exports=function(l,o){try{a(i,l,{value:o,configurable:!0,writable:!0})}catch{i[l]=o}return o}},9462:(p,t,e)=>{var i=e(9565),a=e(2360),l=e(6699),o=e(6279),u=e(8227),h=e(1181),d=e(5966),f=e(7657).IteratorPrototype,m=e(2529),y=e(9539),b=e(1385),A=u("toStringTag"),x="IteratorHelper",w="WrapForValidIterator",T="normal",O="throw",R=h.set,M=function(_){var z=h.getterFor(_?w:x);return o(a(f),{next:function(){var Q=z(this);if(_)return Q.nextHandler();if(Q.done)return m(void 0,!0);try{var J=Q.nextHandler();return Q.returnHandlerResult?J:m(J,Q.done)}catch(at){throw Q.done=!0,at}},return:function(){var G=z(this),Q=G.iterator;if(G.done=!0,_){var J=d(Q,"return");return J?i(J,Q):m(void 0,!0)}if(G.inner)try{y(G.inner.iterator,T)}catch(at){return y(Q,O,at)}if(G.openIters)try{b(G.openIters,T)}catch(at){return y(Q,O,at)}return Q&&y(Q,T),m(void 0,!0)}})},C=M(!0),L=M(!1);l(L,A,"Iterator Helper"),p.exports=function(_,z,G){var Q=function(at,Y){Y?(Y.iterator=at.iterator,Y.next=at.next):Y=at,Y.type=z?w:x,Y.returnHandlerResult=!!G,Y.nextHandler=_,Y.counter=0,Y.done=!1,R(this,Y)};return Q.prototype=z?C:L,Q}},9504:(p,t,e)=>{var i=e(616),a=Function.prototype,l=a.call,o=i&&a.bind.bind(l,l);p.exports=i?o:function(u){return function(){return l.apply(u,arguments)}}},9519:(p,t,e)=>{var i=e(4576),a=e(2839),l=i.process,o=i.Deno,u=l&&l.versions||o&&o.version,h=u&&u.v8,d,f;h&&(d=h.split("."),f=d[0]>0&&d[0]<4?1:+(d[0]+d[1])),!f&&a&&(d=a.match(/Edge\/(\d+)/),(!d||d[1]>=74)&&(d=a.match(/Chrome\/(\d+)/),d&&(f=+d[1]))),p.exports=f},9539:(p,t,e)=>{var i=e(9565),a=e(8551),l=e(5966);p.exports=function(o,u,h){var d,f;a(o);try{if(d=l(o,"return"),!d){if(u==="throw")throw h;return h}d=i(d,o)}catch(m){f=!0,d=m}if(u==="throw")throw h;if(f)throw d;return a(d),h}},9565:(p,t,e)=>{var i=e(616),a=Function.prototype.call;p.exports=i?a.bind(a):function(){return a.apply(a,arguments)}},9590:(p,t,e)=>{var i=e(1291),a=RangeError;p.exports=function(l){var o=i(l);if(o<0)throw new a("The argument can't be less than 0");return o}},9617:(p,t,e)=>{var i=e(5397),a=e(5610),l=e(6198),o=function(u){return function(h,d,f){var m=i(h),y=l(m);if(y===0)return!u&&-1;var b=a(f,y),A;if(u&&d!==d){for(;y>b;)if(A=m[b++],A!==A)return!0}else for(;y>b;b++)if((u||b in m)&&m[b]===d)return u||b||0;return!u&&-1}};p.exports={includes:o(!0),indexOf:o(!1)}},9631:(p,t,e)=>{var i=e(6518),a=e(4576),l=e(9504),o=e(3972),u=e(4154),h=e(5169),d=e(2804),f=e(944),m=d.i2c,y=d.i2cUrl,b=l("".charAt);a.Uint8Array&&i({target:"Uint8Array",proto:!0},{toBase64:function(){var x=u(this),w=arguments.length?o(arguments[0]):void 0,T=f(w)==="base64"?m:y,O=!!w&&!!w.omitPadding;h(this.buffer);for(var R="",M=0,C=x.length,L,_=function(z){return b(T,L>>6*z&63)};M+2<C;M+=3)L=(x[M]<<16)+(x[M+1]<<8)+x[M+2],R+=_(3)+_(2)+_(1)+_(0);return M+2===C?(L=(x[M]<<16)+(x[M+1]<<8),R+=_(3)+_(2)+_(1)+(O?"":"=")):M+1===C&&(L=x[M]<<16,R+=_(3)+_(2)+(O?"":"==")),R}})},9797:(p,t,e)=>{var i=e(6518),a=e(4576),l=e(3463),o=e(4154),u=e(5169),h=e(2303);a.Uint8Array&&i({target:"Uint8Array",proto:!0},{setFromHex:function(f){o(this),l(f),u(this.buffer);var m=h(f,this).read;return{read:m,written:m/2}}})},9835:p=>{p.exports=function(t){try{var e=new Set,i={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},a=e[t](i);return a.size!==1||a.values().next().value!==4}catch{return!1}}}},Vg={};function It(p){var t=Vg[p];if(t!==void 0)return t.exports;var e=Vg[p]={exports:{}};return Ev[p].call(e.exports,e,e.exports,It),e.exports}It(4114);It(6573);It(8100);It(7936);It(8111);It(8237);It(1689);It(9432);It(1549);It(9797);It(9631);It(5623);It(4979);It(5781);const Me=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),fu=[.001,0,0,.001,0,0],iu=1.35,Qe={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},mn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},dp="pdfjs_internal_editor_",St={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},Dt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},wv={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ce={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Tl={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ae={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Ii={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Ll={ERRORS:0,WARNINGS:1,INFOS:5},Nl={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},yl={moveTo:0,lineTo:1,curveTo:2,closePath:3},Tv={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Il=Ll.WARNINGS;function Cv(p){Number.isInteger(p)&&(Il=p)}function Rv(){return Il}function kl(p){Il>=Ll.INFOS&&console.log(`Info: ${p}`)}function xt(p){Il>=Ll.WARNINGS&&console.log(`Warning: ${p}`)}function Ut(p){throw new Error(p)}function le(p,t){p||Ut(t)}function Nv(p){switch(p?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function fp(p,t=null,e=null){if(!p)return null;if(e&&typeof p=="string"&&(e.addDefaultProtocol&&p.startsWith("www.")&&p.match(/\./g)?.length>=2&&(p=`http://${p}`),e.tryConvertEncoding))try{p=Iv(p)}catch{}const i=t?URL.parse(p,t):URL.parse(p);return Nv(i)?i:null}function gp(p,t,e=!1){const i=URL.parse(p);return i?(i.hash=t,i.href):e&&fp(p,"http://example.com")?p.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Ot(p,t,e,i=!1){return Object.defineProperty(p,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const Yn=function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();class Yg extends Yn{constructor(t,e){super(t,"PasswordException"),this.code=e}}class au extends Yn{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class gu extends Yn{constructor(t){super(t,"InvalidPDFException")}}class Ml extends Yn{constructor(t,e,i){super(t,"ResponseException"),this.status=e,this.missing=i}}class Mv extends Yn{constructor(t){super(t,"FormatError")}}class yn extends Yn{constructor(t){super(t,"AbortException")}}function pp(p){(typeof p!="object"||p?.length===void 0)&&Ut("Invalid argument for bytesToString");const t=p.length,e=8192;if(t<e)return String.fromCharCode.apply(null,p);const i=[];for(let a=0;a<t;a+=e){const l=Math.min(a+e,t),o=p.subarray(a,l);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function Za(p){typeof p!="string"&&Ut("Invalid argument for stringToBytes");const t=p.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=p.charCodeAt(i)&255;return e}function Ov(p){return String.fromCharCode(p>>24&255,p>>16&255,p>>8&255,p&255)}function Dv(){const p=new Uint8Array(4);return p[0]=1,new Uint32Array(p.buffer,0,1)[0]===1}function Lv(){try{return new Function(""),!0}catch{return!1}}class Ae{static get isLittleEndian(){return Ot(this,"isLittleEndian",Dv())}static get isEvalSupported(){return Ot(this,"isEvalSupported",Lv())}static get isOffscreenCanvasSupported(){return Ot(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Ot(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Ot(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return Ot(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const ru=Array.from(Array(256).keys(),p=>p.toString(16).padStart(2,"0"));class ft{static makeHexColor(t,e,i){return`#${ru[t]}${ru[e]}${ru[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e,i=0){const a=t[i],l=t[i+1];t[i]=a*e[0]+l*e[2]+e[4],t[i+1]=a*e[1]+l*e[3]+e[5]}static applyTransformToBezier(t,e,i=0){const a=e[0],l=e[1],o=e[2],u=e[3],h=e[4],d=e[5];for(let f=0;f<6;f+=2){const m=t[i+f],y=t[i+f+1];t[i+f]=m*a+y*o+h,t[i+f+1]=m*l+y*u+d}}static applyInverseTransform(t,e){const i=t[0],a=t[1],l=e[0]*e[3]-e[1]*e[2];t[0]=(i*e[3]-a*e[2]+e[2]*e[5]-e[4]*e[3])/l,t[1]=(-i*e[1]+a*e[0]+e[4]*e[1]-e[5]*e[0])/l}static axialAlignedBoundingBox(t,e,i){const a=e[0],l=e[1],o=e[2],u=e[3],h=e[4],d=e[5],f=t[0],m=t[1],y=t[2],b=t[3];let A=a*f+h,x=A,w=a*y+h,T=w,O=u*m+d,R=O,M=u*b+d,C=M;if(l!==0||o!==0){const L=l*f,_=l*y,z=o*m,G=o*b;A+=z,T+=z,w+=G,x+=G,O+=L,C+=L,M+=_,R+=_}i[0]=Math.min(i[0],A,w,x,T),i[1]=Math.min(i[1],O,M,R,C),i[2]=Math.max(i[2],A,w,x,T),i[3]=Math.max(i[3],O,M,R,C)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const i=t[0],a=t[1],l=t[2],o=t[3],u=i**2+a**2,h=i*l+a*o,d=l**2+o**2,f=(u+d)/2,m=Math.sqrt(f**2-(u*d-h**2));e[0]=Math.sqrt(f+m||1),e[1]=Math.sqrt(f-m||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>a)return null;const l=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return l>o?null:[i,l,a,o]}static pointBoundingBox(t,e,i){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}static rectBoundingBox(t,e,i,a,l){l[0]=Math.min(l[0],t,i),l[1]=Math.min(l[1],e,a),l[2]=Math.max(l[2],t,i),l[3]=Math.max(l[3],e,a)}static#t(t,e,i,a,l,o,u,h,d,f){if(d<=0||d>=1)return;const m=1-d,y=d*d,b=y*d,A=m*(m*(m*t+3*d*e)+3*y*i)+b*a,x=m*(m*(m*l+3*d*o)+3*y*u)+b*h;f[0]=Math.min(f[0],A),f[1]=Math.min(f[1],x),f[2]=Math.max(f[2],A),f[3]=Math.max(f[3],x)}static#e(t,e,i,a,l,o,u,h,d,f,m,y){if(Math.abs(d)<1e-12){Math.abs(f)>=1e-12&&this.#t(t,e,i,a,l,o,u,h,-m/f,y);return}const b=f**2-4*m*d;if(b<0)return;const A=Math.sqrt(b),x=2*d;this.#t(t,e,i,a,l,o,u,h,(-f+A)/x,y),this.#t(t,e,i,a,l,o,u,h,(-f-A)/x,y)}static bezierBoundingBox(t,e,i,a,l,o,u,h,d){d[0]=Math.min(d[0],t,u),d[1]=Math.min(d[1],e,h),d[2]=Math.max(d[2],t,u),d[3]=Math.max(d[3],e,h),this.#e(t,i,l,u,e,a,o,h,3*(-t+3*(i-l)+u),6*(t-2*i+l),3*(i-t),d),this.#e(t,i,l,u,e,a,o,h,3*(-e+3*(a-o)+h),6*(e-2*a+o),3*(a-e),d)}}function Iv(p){return decodeURIComponent(escape(p))}let lu=null,Xg=null;function kv(p){return lu||(lu=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Xg=new Map([["ﬅ","ſt"]])),p.replaceAll(lu,(t,e,i)=>e?e.normalize("NFKC"):Xg.get(i))}function mp(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const p=new Uint8Array(32);return crypto.getRandomValues(p),pp(p)}const wu="pdfjs_internal_id_";function _v(p,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[i,a,...l]=e;if(!p(i)&&!Number.isInteger(i)||!t(a))return!1;const o=l.length;let u=!0;switch(a.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;u=!1;break;default:return!1}for(const h of l)if(!(typeof h=="number"||u&&h===null))return!1;return!0}function Oe(p,t,e){return Math.min(Math.max(p,t),e)}function vp(p){return Uint8Array.prototype.toBase64?p.toBase64():btoa(pp(p))}function jv(p){return Uint8Array.fromBase64?Uint8Array.fromBase64(p):Za(atob(p))}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(p){return p.reduce((t,e)=>t+e,0)});typeof AbortSignal.any!="function"&&(AbortSignal.any=function(p){const t=new AbortController,{signal:e}=t;for(const i of p)if(i.aborted)return t.abort(i.reason),e;for(const i of p)i.addEventListener("abort",()=>{t.abort(i.reason)},{signal:e});return e});It(1701);It(4628);It(7642);It(8004);It(3853);It(5876);It(2475);It(5024);It(1698);It(4603);It(7566);It(8721);It(9314);It(1148);It(3579);It(8335);const Hs="http://www.w3.org/2000/svg";class Ui{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function qa(p,t="text"){if(Ya(p,document.baseURI)){const e=await fetch(p);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const a=new XMLHttpRequest;a.open("GET",p,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(a.response);return}e(a.responseText);return}i(new Error(a.statusText))}},a.send(null)})}class Ja{constructor({viewBox:t,userUnit:e,scale:i,rotation:a,offsetX:l=0,offsetY:o=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=a,this.offsetX=l,this.offsetY=o,i*=e;const h=(t[2]+t[0])/2,d=(t[3]+t[1])/2;let f,m,y,b;switch(a%=360,a<0&&(a+=360),a){case 180:f=-1,m=0,y=0,b=1;break;case 90:f=0,m=1,y=1,b=0;break;case 270:f=0,m=-1,y=-1,b=0;break;case 0:f=1,m=0,y=0,b=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(y=-y,b=-b);let A,x,w,T;f===0?(A=Math.abs(d-t[1])*i+l,x=Math.abs(h-t[0])*i+o,w=(t[3]-t[1])*i,T=(t[2]-t[0])*i):(A=Math.abs(h-t[0])*i+l,x=Math.abs(d-t[1])*i+o,w=(t[2]-t[0])*i,T=(t[3]-t[1])*i),this.transform=[f*i,m*i,y*i,b*i,A-f*i*h-y*i*d,x-m*i*h-b*i*d],this.width=w,this.height=T}get rawDims(){const t=this.viewBox;return Ot(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:a=this.offsetY,dontFlip:l=!1}={}){return new Ja({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:a,dontFlip:l})}convertToViewportPoint(t,e){const i=[t,e];return ft.applyTransform(i,this.transform),i}convertToViewportRectangle(t){const e=[t[0],t[1]];ft.applyTransform(e,this.transform);const i=[t[2],t[3]];return ft.applyTransform(i,this.transform),[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){const i=[t,e];return ft.applyInverseTransform(i,this.transform),i}}class Tu extends Yn{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function _l(p){const t=p.length;let e=0;for(;e<t&&p[e].trim()==="";)e++;return p.substring(e,e+5).toLowerCase()==="data:"}function Cu(p){return typeof p=="string"&&/\.pdf$/i.test(p)}function Pv(p){return[p]=p.split(/[#?]/,1),p.substring(p.lastIndexOf("/")+1)}function Bv(p,t="document.pdf"){if(typeof p!="string")return t;if(_l(p))return xt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const i=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(p);if(!i)return t;const a=u=>{try{let h=decodeURIComponent(u);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:u):h}catch{return u}},l=/\.pdf$/i,o=i.pathname.split("/").at(-1);if(l.test(o))return a(o);if(i.searchParams.size>0){const u=Array.from(i.searchParams.values()).reverse();for(const d of u)if(l.test(d))return a(d);const h=Array.from(i.searchParams.keys()).reverse();for(const d of h)if(l.test(d))return a(d)}if(i.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(h)return a(h[0])}return t}class $g{started=Object.create(null);times=[];time(t){t in this.started&&xt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||xt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:a,end:l}of this.times)t.push(`${i.padEnd(e)} ${l-a}ms
`);return t.join("")}}function Ya(p,t){const e=t?URL.parse(p,t):URL.parse(p);return e?.protocol==="http:"||e?.protocol==="https:"}function gs(p){p.preventDefault()}function re(p){p.preventDefault(),p.stopPropagation()}function zv(p){console.log("Deprecated API usage: "+p)}class yp{static#t;static toDateObject(t){if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const i=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let l=parseInt(e[3],10);l=l>=1&&l<=31?l:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(e[6],10);h=h>=0&&h<=59?h:0;const d=e[7]||"Z";let f=parseInt(e[8],10);f=f>=0&&f<=23?f:0;let m=parseInt(e[9],10)||0;return m=m>=0&&m<=59?m:0,d==="-"?(o+=f,u+=m):d==="+"&&(o-=f,u-=m),new Date(Date.UTC(i,a,l,o,u,h))}}function Fv(p,{scale:t=1,rotation:e=0}){const{width:i,height:a}=p.attributes.style,l=[0,0,parseInt(i),parseInt(a)];return new Ja({viewBox:l,userUnit:1,scale:t,rotation:e})}function Ru(p){if(p.startsWith("#")){const t=parseInt(p.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return p.startsWith("rgb(")?p.slice(4,-1).split(",").map(t=>parseInt(t)):p.startsWith("rgba(")?p.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(xt(`Not a valid color format: "${p}"`),[0,0,0])}function Uv(p){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of p.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;p.set(e,Ru(i))}t.remove()}function Kt(p){const{a:t,b:e,c:i,d:a,e:l,f:o}=p.getTransform();return[t,e,i,a,l,o]}function Ss(p){const{a:t,b:e,c:i,d:a,e:l,f:o}=p.getTransform().invertSelf();return[t,e,i,a,l,o]}function Gn(p,t,e=!1,i=!0){if(t instanceof Ja){const{pageWidth:a,pageHeight:l}=t.rawDims,{style:o}=p,u=Ae.isCSSRoundSupported,h=`var(--total-scale-factor) * ${a}px`,d=`var(--total-scale-factor) * ${l}px`,f=u?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,m=u?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!e||t.rotation%180===0?(o.width=f,o.height=m):(o.width=m,o.height=f)}i&&p.setAttribute("data-main-rotation",t.rotation)}class Cs{constructor(){const{pixelRatio:t}=Cs;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,i,a,l=-1){let o=1/0,u=1/0,h=1/0;i=Cs.capPixels(i,l),i>0&&(o=Math.sqrt(i/(t*e))),a!==-1&&(u=a/t,h=a/e);const d=Math.min(o,u,h);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,i):i}return t}}const pu=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class Ka{#t=null;#e=null;#s;#n=null;#a=null;#i=null;static#l=null;constructor(t){this.#s=t,Ka.#l||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#s._uiManager._signal;t.addEventListener("contextmenu",gs,{signal:e}),t.addEventListener("pointerdown",Ka.#r,{signal:e});const i=this.#n=document.createElement("div");i.className="buttons",t.append(i);const a=this.#s.toolbarPosition;if(a){const{style:l}=t,o=this.#s._uiManager.direction==="ltr"?1-a[0]:a[0];l.insetInlineEnd=`${100*o}%`,l.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#r(t){t.stopPropagation()}#h(t){this.#s._focusEventsAllowed=!1,re(t)}#o(t){this.#s._focusEventsAllowed=!0,re(t)}#d(t){const e=this.#s._uiManager._signal;t.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#o.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",gs,{signal:e})}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#a?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#s,i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",Ka.#l[t]),this.#d(i),i.addEventListener("click",a=>{e.delete()},{signal:e._signal}),this.#n.append(i)}get#u(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#d(e),this.#n.append(e,this.#u),this.#a=t}addColorPicker(t){this.#e=t;const e=t.renderButton();this.#d(e),this.#n.append(e,this.#u)}async addEditSignatureButton(t){const e=this.#i=await t.renderEditButton(this.#s);this.#d(e),this.#n.append(e,this.#u)}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break}}updateEditSignatureButton(t){this.#i&&(this.#i.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class Hv{#t=null;#e=null;#s;constructor(t){this.#s=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",gs,{signal:this.#s._signal});const e=this.#t=document.createElement("div");return e.className="buttons",t.append(e),this.#i(),t}#a(t,e){let i=0,a=0;for(const l of t){const o=l.y+l.height;if(o<i)continue;const u=l.x+(e?l.width:0);if(o>i){a=u,i=o;continue}e?u>a&&(a=u):u<a&&(a=u)}return[e?1-a:a,i]}show(t,e,i){const[a,l]=this.#a(e,i),{style:o}=this.#e||=this.#n();t.append(this.#e),o.insetInlineEnd=`${100*a}%`,o.top=`calc(${100*l}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#i(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=this.#s._signal;t.addEventListener("contextmenu",gs,{signal:i}),t.addEventListener("click",()=>{this.#s.highlightSelection("floating_button")},{signal:i}),this.#t.append(t)}}function bp(p,t,e){for(const i of e)t.addEventListener(i,p[i].bind(p))}class Gv{#t=0;get id(){return`${dp}${this.#t++}`}}class Nu{#t=mp();#e=0;#s=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const l=a.decode().then(()=>(i.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return Ot(this,"_isSVGFittingCanvas",l)}async#n(t,e){this.#s||=new Map;let i=this.#s.get(t);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let a;if(typeof e=="string"?(i.url=e,a=await qa(e,"blob")):e instanceof File?a=i.file=e:e instanceof Blob&&(a=e),a.type==="image/svg+xml"){const l=Nu._isSVGFittingCanvas,o=new FileReader,u=new Image,h=new Promise((d,f)=>{u.onload=()=>{i.bitmap=u,i.isSvg=!0,d()},o.onload=async()=>{const m=i.svgUrl=o.result;u.src=await l?`${m}#svgView(preserveAspectRatio(none))`:m},u.onerror=o.onerror=f});o.readAsDataURL(a),await h}else i.bitmap=await createImageBitmap(a);i.refCounter=1}catch(a){xt(a),i=null}return this.#s.set(t,i),i&&this.#s.set(i.id,i),i}async getFromFile(t){const{lastModified:e,name:i,size:a,type:l}=t;return this.#n(`${e}_${i}_${a}_${l}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,e){const i=await e;return this.#n(t,i)}async getFromId(t){this.#s||=new Map;const e=this.#s.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#s||=new Map;let i=this.#s.get(t);if(i?.bitmap)return i.refCounter+=1,i;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),i={bitmap:a.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#s.set(t,i),this.#s.set(i.id,i),i}getSvgUrl(t){const e=this.#s.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#s||=new Map;const e=this.#s.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const a=new OffscreenCanvas(i.width,i.height);a.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=a.convertToBlob()}i.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class Vv{#t=[];#e=!1;#s;#n=-1;constructor(t=128){this.#s=t}add({cmd:t,undo:e,post:i,mustExec:a,type:l=NaN,overwriteIfSameType:o=!1,keepUndo:u=!1}){if(a&&t(),this.#e)return;const h={cmd:t,undo:e,post:i,type:l};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(h);return}if(o&&this.#t[this.#n].type===l){u&&(h.undo=this.#t[this.#n].undo),this.#t[this.#n]=h;return}const d=this.#n+1;d===this.#s?this.#t.splice(0,1):(this.#n=d,d<this.#t.length&&this.#t.splice(d)),this.#t.push(h)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let e=this.#n;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#n-e),this.#n=e;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}}class tr{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Ae.platform;for(const[i,a,l={}]of t)for(const o of i){const u=o.startsWith("mac+");e&&u?(this.callbacks.set(o.slice(4),{callback:a,options:l}),this.allKeys.add(o.split("+").at(-1))):!e&&!u&&(this.callbacks.set(o,{callback:a,options:l}),this.allKeys.add(o.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(this.#t(e));if(!i)return;const{callback:a,options:{bubbles:l=!1,args:o=[],checker:u=null}}=i;u&&!u(t,e)||(a.bind(t,...o,e)(),l||re(e))}}class Mu{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return Uv(t),Ot(this,"_colors",t)}convert(t){const e=Ru(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,a]of this._colors)if(a.every((l,o)=>l===e[o]))return Mu._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?ft.makeHexColor(...e):t}}class bn{#t=new AbortController;#e=null;#s=new Map;#n=new Map;#a=null;#i=null;#l=null;#r=new Vv;#h=null;#o=null;#d=0;#u=new Set;#f=null;#g=null;#p=new Set;_editorUndoBar=null;#c=!1;#m=!1;#v=!1;#y=null;#x=null;#A=null;#S=null;#T=!1;#R=null;#M=new Gv;#E=!1;#N=!1;#C=null;#D=null;#L=null;#I=null;#F=null;#w=St.NONE;#b=new Set;#P=null;#B=null;#G=null;#V=null;#Y={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#U=[0,0];#k=null;#_=null;#H=null;#W=null;#j=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=bn.prototype,e=o=>o.#_.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),i=(o,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},a=this.TRANSLATE_SMALL,l=this.TRANSLATE_BIG;return Ot(this,"_keyboardManager",new tr([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:u})=>!(u instanceof HTMLButtonElement)&&o.#_.contains(u)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:u})=>!(u instanceof HTMLButtonElement)&&o.#_.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-l,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[l,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-l],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,l],checker:e}]]))}constructor(t,e,i,a,l,o,u,h,d,f,m,y,b,A,x){const w=this._signal=this.#t.signal;this.#_=t,this.#H=e,this.#W=i,this.#a=a,this.#B=l,this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:w}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:w}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:w}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:w}),o._on("setpreference",this.onSetPreference.bind(this),{signal:w}),o._on("switchannotationeditorparams",T=>this.updateParams(T.type,T.value),{signal:w}),this.#it(),this.#ot(),this.#Z(),this.#i=u.annotationStorage,this.#y=u.filterFactory,this.#G=h,this.#S=d||null,this.#c=f,this.#m=m,this.#v=y,this.#F=b||null,this.viewParameters={realScale:Ui.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=A||null,this._supportsPinchToZoom=x!==!1}destroy(){this.#j?.resolve(),this.#j=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#n.values())t.destroy();this.#n.clear(),this.#s.clear(),this.#p.clear(),this.#I?.clear(),this.#e=null,this.#b.clear(),this.#r.destroy(),this.#a?.destroy(),this.#B?.destroy(),this.#R?.hide(),this.#R=null,this.#L?.destroy(),this.#L=null,this.#x&&(clearTimeout(this.#x),this.#x=null),this.#k&&(clearTimeout(this.#k),this.#k=null),this._editorUndoBar?.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#F}get useNewAltTextFlow(){return this.#m}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return Ot(this,"hcmFilter",this.#G?this.#y.addHCMFilter(this.#G.foreground,this.#G.background):"none")}get direction(){return Ot(this,"direction",getComputedStyle(this.#_).direction)}get highlightColors(){return Ot(this,"highlightColors",this.#S?new Map(this.#S.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColorNames(){return Ot(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#o=t}setMainHighlightColorPicker(t){this.#L=t}editAltText(t,e=!1){this.#a?.editAltText(this,t,e)}getSignature(t){this.#B?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#B}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":this.#v=e;break}}onPageChanging({pageNumber:t}){this.#d=t-1}focusMainContainer(){this.#_.focus()}findParent(t,e){for(const i of this.#n.values()){const{x:a,y:l,width:o,height:u}=i.div.getBoundingClientRect();if(t>=a&&t<=a+o&&e>=l&&e<=l+u)return i}return null}disableUserSelect(t=!1){this.#H.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Ui.PDF_TO_CSS_UNITS;for(const e of this.#p)e.onScaleChanging();this.#o?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#$({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#Q(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of this.#n.values())if(i.hasTextLayer(t))return i;return null}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:i,anchorOffset:a,focusNode:l,focusOffset:o}=e,u=e.toString(),d=this.#$(e).closest(".textLayer"),f=this.getSelectionBoxes(d);if(!f)return;e.empty();const m=this.#Q(d),y=this.#w===St.NONE,b=()=>{m?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:f,anchorNode:i,anchorOffset:a,focusNode:l,focusOffset:o,text:u}),y&&this.showAllEditors("highlight",!0,!0)};if(y){this.switchToMode(St.HIGHLIGHT,b);return}b()}#st(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=this.#$(t).closest(".textLayer"),a=this.getSelectionBoxes(i);a&&(this.#R||=new Hv(this),this.#R.show(i,a,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#i&&!this.#i.has(t.id)&&this.#i.setValue(t.id,t)}a11yAlert(t,e=null){const i=this.#W;i&&(i.setAttribute("data-l10n-id",t),e?i.setAttribute("data-l10n-args",JSON.stringify(e)):i.removeAttribute("data-l10n-args"))}#nt(){const t=document.getSelection();if(!t||t.isCollapsed){this.#P&&(this.#R?.hide(),this.#P=null,this.#O({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#P)return;const a=this.#$(t).closest(".textLayer");if(!a){this.#P&&(this.#R?.hide(),this.#P=null,this.#O({hasSelectedText:!1}));return}if(this.#R?.hide(),this.#P=e,this.#O({hasSelectedText:!0}),!(this.#w!==St.HIGHLIGHT&&this.#w!==St.NONE)&&(this.#w===St.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#T=this.isShiftKeyDown,!this.isShiftKeyDown)){const l=this.#w===St.HIGHLIGHT?this.#Q(a):null;l?.toggleDrawing();const o=new AbortController,u=this.combinedSignal(o),h=d=>{d.type==="pointerup"&&d.button!==0||(o.abort(),l?.toggleDrawing(!0),d.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("blur",h,{signal:u})}}#K(t=""){this.#w===St.HIGHLIGHT?this.highlightSelection(t):this.#c&&this.#st()}#it(){document.addEventListener("selectionchange",this.#nt.bind(this),{signal:this._signal})}#at(){if(this.#A)return;this.#A=new AbortController;const t=this.combinedSignal(this.#A);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#rt(){this.#A?.abort(),this.#A=null}blur(){if(this.isShiftKeyDown=!1,this.#T&&(this.#T=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#b)if(e.div.contains(t)){this.#D=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#D)return;const[t,e]=this.#D;this.#D=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#Z(){if(this.#C)return;this.#C=new AbortController;const t=this.combinedSignal(this.#C);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#lt(){this.#C?.abort(),this.#C=null}#q(){if(this.#h)return;this.#h=new AbortController;const t=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#J(){this.#h?.abort(),this.#h=null}#ot(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#Z(),this.#q()}removeEditListeners(){this.#lt(),this.#J()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of this.#g)if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of this.#g)if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of this.#b){const a=i.serialize(!0);a&&e.push(a)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const l of e.items)for(const o of this.#g)if(o.isHandlingMimeForPasting(l.type)){o.paste(l,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(l){xt(`paste: "${l.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const a=this.currentLayer;try{const l=[];for(const h of i){const d=await a.deserialize(h);if(!d)return;l.push(d)}const o=()=>{for(const h of l)this.#tt(h);this.#et(l)},u=()=>{for(const h of l)h.remove()};this.addCommands({cmd:o,undo:u,mustExec:!0})}catch(l){xt(`paste: "${l.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#w!==St.NONE&&!this.isEditorHandlingKeyboard&&bn._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#T&&(this.#T=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#O(t){Object.entries(t).some(([i,a])=>this.#Y[i]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#Y,t)}),this.#w===St.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#z([[Dt.HIGHLIGHT_FREE,!0]]))}#z(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#at(),this.#q(),this.#O({isEditing:this.#w!==St.NONE,isEmpty:this.#X(),hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:this.#r.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#rt(),this.#J(),this.#O({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#g){this.#g=t;for(const e of this.#g)this.#z(e.defaultPropertiesToUpdate)}}getId(){return this.#M.id}get currentLayer(){return this.#n.get(this.#d)}getLayer(t){return this.#n.get(t)}get currentPageIndex(){return this.#d}addLayer(t){this.#n.set(t.pageIndex,t),this.#E?t.enable():t.disable()}removeLayer(t){this.#n.delete(t.pageIndex)}async updateMode(t,e=null,i=!1,a=!1){if(this.#w!==t&&!(this.#j&&(await this.#j.promise,!this.#j))){if(this.#j=Promise.withResolvers(),this.#o?.commitOrRemove(),this.#w=t,t===St.NONE){this.setEditingState(!1),this.#ut(),this._editorUndoBar?.hide(),this.#j.resolve();return}t===St.SIGNATURE&&await this.#B?.loadSignatures(),this.setEditingState(!0),await this.#ct(),this.unselectAll();for(const l of this.#n.values())l.updateMode(t);if(!e){i&&this.addNewEditorFromKeyboard(),this.#j.resolve();return}for(const l of this.#s.values())l.annotationElementId===e||l.id===e?(this.setSelected(l),a&&l.enterInEditMode()):l.unselect();this.#j.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#w&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#g){switch(t){case Dt.CREATE:this.currentLayer.addNewEditor(e);return;case Dt.HIGHLIGHT_DEFAULT_COLOR:this.#L?.updateColor(e);break;case Dt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#V||=new Map).set(t,e),this.showAllEditors("highlight",e);break}for(const i of this.#b)i.updateParams(t,e);for(const i of this.#g)i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){for(const l of this.#s.values())l.editorType===t&&l.show(e);(this.#V?.get(Dt.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#z([[Dt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#N!==t){this.#N=t;for(const e of this.#n.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ct(){if(!this.#E){this.#E=!0;const t=[];for(const e of this.#n.values())t.push(e.enable());await Promise.all(t);for(const e of this.#s.values())e.enable()}}#ut(){if(this.unselectAll(),this.#E){this.#E=!1;for(const t of this.#n.values())t.disable();for(const t of this.#s.values())t.disable()}}getEditors(t){const e=[];for(const i of this.#s.values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return this.#s.get(t)}addEditor(t){this.#s.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#x&&clearTimeout(this.#x),this.#x=setTimeout(()=>{this.focusMainContainer(),this.#x=null},0)),this.#s.delete(t.id),t.annotationElementId&&this.#I?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#u.has(t.annotationElementId))&&this.#i?.remove(t.id)}addDeletedAnnotationElement(t){this.#u.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#u.has(t)}removeDeletedAnnotationElement(t){this.#u.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#tt(t){const e=this.#n.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#z(t.propertiesToUpdate))}get#ht(){let t=null;for(t of this.#b);return t}updateUI(t){this.#ht===t&&this.#z(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#z(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#b.has(t)){this.#b.delete(t),t.unselect(),this.#O({hasSelectedEditor:this.hasSelection});return}this.#b.add(t),t.select(),this.#z(t.propertiesToUpdate),this.#O({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#o?.commitOrRemove();for(const e of this.#b)e!==t&&e.unselect();this.#b.clear(),this.#b.add(t),t.select(),this.#z(t.propertiesToUpdate),this.#O({hasSelectedEditor:!0})}isSelected(t){return this.#b.has(t)}get firstSelectedEditor(){return this.#b.values().next().value}unselect(t){t.unselect(),this.#b.delete(t),this.#O({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#b.size!==0}get isEnterHandled(){return this.#b.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#r.undo(),this.#O({hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#X()}),this._editorUndoBar?.hide()}redo(){this.#r.redo(),this.#O({hasSomethingToUndo:!0,hasSomethingToRedo:this.#r.hasSomethingToRedo(),isEmpty:this.#X()})}addCommands(t){this.#r.add(t),this.#O({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#X()})}cleanUndoStack(t){this.#r.cleanType(t)}#X(){if(this.#s.size===0)return!0;if(this.#s.size===1)for(const t of this.#s.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#b],i=()=>{this._editorUndoBar?.show(a,e.length===1?e[0].editorType:e.length);for(const l of e)l.remove()},a=()=>{for(const l of e)this.#tt(l)};this.addCommands({cmd:i,undo:a,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#et(t){for(const e of this.#b)e.unselect();this.#b.clear();for(const e of t)e.isEmpty()||(this.#b.add(e),e.select());this.#O({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#b)t.commit();this.#et(this.#s.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#w!==St.NONE))&&!this.#o?.commitOrRemove()&&this.hasSelection){for(const t of this.#b)t.unselect();this.#b.clear(),this.#O({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#U[0]+=t,this.#U[1]+=e;const[a,l]=this.#U,o=[...this.#b],u=1e3;this.#k&&clearTimeout(this.#k),this.#k=setTimeout(()=>{this.#k=null,this.#U[0]=this.#U[1]=0,this.addCommands({cmd:()=>{for(const h of o)this.#s.has(h.id)&&(h.translateInPage(a,l),h.translationDone())},undo:()=>{for(const h of o)this.#s.has(h.id)&&(h.translateInPage(-a,-l),h.translationDone())},mustExec:!1})},u);for(const h of o)h.translateInPage(t,e),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#f=new Map;for(const t of this.#b)this.#f.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#f)return!1;this.disableUserSelect(!1);const t=this.#f;this.#f=null;let e=!1;for(const[{x:a,y:l,pageIndex:o},u]of t)u.newX=a,u.newY=l,u.newPageIndex=o,e||=a!==u.savedX||l!==u.savedY||o!==u.savedPageIndex;if(!e)return!1;const i=(a,l,o,u)=>{if(this.#s.has(a.id)){const h=this.#n.get(u);h?a._setParentAndPosition(h,l,o):(a.pageIndex=u,a.x=l,a.y=o)}};return this.addCommands({cmd:()=>{for(const[a,{newX:l,newY:o,newPageIndex:u}]of t)i(a,l,o,u)},undo:()=>{for(const[a,{savedX:l,savedY:o,savedPageIndex:u}]of t)i(a,l,o,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#f)for(const i of this.#f.keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#b.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#w}get imageManager(){return Ot(this,"imageManager",new Nu)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let d=0,f=e.rangeCount;d<f;d++)if(!t.contains(e.getRangeAt(d).commonAncestorContainer))return null;const{x:i,y:a,width:l,height:o}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(d,f,m,y)=>({x:(f-a)/o,y:1-(d+m-i)/l,width:y/o,height:m/l});break;case"180":u=(d,f,m,y)=>({x:1-(d+m-i)/l,y:1-(f+y-a)/o,width:m/l,height:y/o});break;case"270":u=(d,f,m,y)=>({x:1-(f+y-a)/o,y:(d-i)/l,width:y/o,height:m/l});break;default:u=(d,f,m,y)=>({x:(d-i)/l,y:(f-a)/o,width:m/l,height:y/o});break}const h=[];for(let d=0,f=e.rangeCount;d<f;d++){const m=e.getRangeAt(d);if(!m.collapsed)for(const{x:y,y:b,width:A,height:x}of m.getClientRects())A===0||x===0||h.push(u(y,b,A,x))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#l||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#l?.delete(t)}renderAnnotationElement(t){const e=this.#l?.get(t.data.id);if(!e)return;const i=this.#i.getRawValue(e);i&&(this.#w===St.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}setMissingCanvas(t,e,i){const a=this.#I?.get(t);a&&(a.setCanvas(e,i),this.#I.delete(t))}addMissingCanvas(t,e){(this.#I||=new Map).set(t,e)}}class Ts{#t=null;#e=!1;#s=null;#n=null;#a=null;#i=null;#l=!1;#r=null;#h=null;#o=null;#d=null;#u=!1;static#f=null;static _l10n=null;constructor(t){this.#h=t,this.#u=t._uiManager.useNewAltTextFlow,Ts.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Ts._l10n??=t}async render(){const t=this.#s=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#n=document.createElement("span");t.append(e),this.#u?(t.classList.add("new"),t.setAttribute("data-l10n-id",Ts.#f.missing),e.setAttribute("data-l10n-id",Ts.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=this.#h._uiManager._signal;t.addEventListener("contextmenu",gs,{signal:i}),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:i});const a=l=>{l.preventDefault(),this.#h._uiManager.editAltText(this.#h),this.#u&&this.#h._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return t.addEventListener("click",a,{capture:!0,signal:i}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(this.#l=!0,a(l))},{signal:i}),await this.#p(),t}get#g(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#s&&(this.#s.focus({focusVisible:this.#l}),this.#l=!1)}isEmpty(){return this.#u?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#u?this.#t!==null||!!this.#o:this.isEmpty()}get guessedText(){return this.#o}async setGuessedText(t){this.#t===null&&(this.#o=t,this.#d=await Ts._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#p())}toggleAltTextBadge(t=!1){if(!this.#u||this.#t){this.#r?.remove(),this.#r=null;return}if(!this.#r){const e=this.#r=document.createElement("div");e.className="noAltTextBadge",this.#h.div.append(e)}this.#r.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#o===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#o,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:a,cancel:l=!1}){i&&(this.#o=i,this.#d=a),!(this.#t===t&&this.#e===e)&&(l||(this.#t=t,this.#e=e),this.#p())}toggle(t=!1){this.#s&&(!t&&this.#i&&(clearTimeout(this.#i),this.#i=null),this.#s.disabled=!t)}shown(){this.#h._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#s?.remove(),this.#s=null,this.#n=null,this.#a=null,this.#r?.remove(),this.#r=null}async#p(){const t=this.#s;if(!t)return;if(this.#u){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Ts.#f[this.#g]),this.#n?.setAttribute("data-l10n-id",Ts.#f[`${this.#g}-label`]),!this.#t){this.#a?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#a?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#a;if(!e){this.#a=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#h.id}`;const a=100,l=this.#h._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(this.#i),this.#i=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#i=setTimeout(()=>{this.#i=null,this.#a.classList.add("show"),this.#h._reportTelemetry({action:"alt_text_tooltip"})},a)},{signal:l}),t.addEventListener("mouseleave",()=>{this.#i&&(clearTimeout(this.#i),this.#i=null),this.#a?.classList.remove("show")},{signal:l})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#h.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class jl{#t;#e=!1;#s=null;#n;#a;#i;#l;#r=null;#h;#o=null;#d;#u=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:a=null,onPinching:l=null,onPinchEnd:o=null,signal:u}){this.#t=t,this.#s=i,this.#n=e,this.#a=a,this.#i=l,this.#l=o,this.#d=new AbortController,this.#h=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#h})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Cs.pixelRatio}#f(t){if(this.#n?.())return;if(t.touches.length===1){if(this.#r)return;const a=this.#r=new AbortController,l=AbortSignal.any([this.#h,a.signal]),o=this.#t,u={capture:!0,signal:l,passive:!1},h=d=>{d.pointerType==="touch"&&(this.#r?.abort(),this.#r=null)};o.addEventListener("pointerdown",d=>{d.pointerType==="touch"&&(re(d),h(d))},u),o.addEventListener("pointerup",h,u),o.addEventListener("pointercancel",h,u);return}if(!this.#u){this.#u=new AbortController;const a=AbortSignal.any([this.#h,this.#u.signal]),l=this.#t,o={signal:a,capture:!1,passive:!1};l.addEventListener("touchmove",this.#g.bind(this),o);const u=this.#p.bind(this);l.addEventListener("touchend",u,o),l.addEventListener("touchcancel",u,o),o.capture=!0,l.addEventListener("pointerdown",re,o),l.addEventListener("pointermove",re,o),l.addEventListener("pointercancel",re,o),l.addEventListener("pointerup",re,o),this.#a?.()}if(re(t),t.touches.length!==2||this.#s?.()){this.#o=null;return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),this.#o={touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY}}#g(t){if(!this.#o||t.touches.length!==2)return;re(t);let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:a,screenY:l}=e,{screenX:o,screenY:u}=i,h=this.#o,{touch0X:d,touch0Y:f,touch1X:m,touch1Y:y}=h,b=m-d,A=y-f,x=o-a,w=u-l,T=Math.hypot(x,w)||1,O=Math.hypot(b,A)||1;if(!this.#e&&Math.abs(O-T)<=jl.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=a,h.touch0Y=l,h.touch1X=o,h.touch1Y=u,!this.#e){this.#e=!0;return}const R=[(a+o)/2,(l+u)/2];this.#i?.(R,O,T)}#p(t){t.touches.length>=2||(this.#u&&(this.#u.abort(),this.#u=null,this.#l?.()),this.#o&&(re(t),this.#o=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#r?.abort(),this.#r=null}}class pt{#t=null;#e=null;#s=null;#n=!1;#a=null;#i="";#l=!1;#r=null;#h=null;#o=null;#d=null;#u="";#f=!1;#g=null;#p=!1;#c=!1;#m=!1;#v=null;#y=0;#x=0;#A=null;#S=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#T=!1;#R=pt._zIndex++;static _borderLineWidth=-1;static _colorManager=new Mu;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=pt.prototype._resizeWithKeyboard,e=bn.TRANSLATE_SMALL,i=bn.TRANSLATE_BIG;return Ot(this,"_resizerKeyboardManager",new tr([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],pt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:a,pageX:l,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,a],this.pageTranslation=[l,o];const[u,h]=this.parentDimensions;this.x=t.x/u,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Ot(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new Yv({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(pt._l10n??=t,pt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),pt._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);pt._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Ut("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#T}set _isDraggable(t){this.#T=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#R}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#H(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#f?this.#f=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,a){const[l,o]=this.parentDimensions;[i,a]=this.screenToPageTranslation(i,a),this.x=(t+i)/l,this.y=(e+a)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[i,a]=this.parentDimensions;this.setAt(t*i,e*a,this.width*i,this.height*a),this._onTranslated()}#M([t,e],i,a){[i,a]=this.screenToPageTranslation(i,a),this.x+=i/t,this.y+=a/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#M(this.parentDimensions,t,e)}translateInPage(t,e){this.#g||=[this.x,this.y,this.width,this.height],this.#M(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#g||=[this.x,this.y,this.width,this.height];const{div:i,parentDimensions:[a,l]}=this;if(this.x+=t/a,this.y+=e/l,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:m,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,m,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:u}=this;const[h,d]=this.getBaseTranslation();o+=h,u+=d;const{style:f}=i;f.left=`${(100*o).toFixed(2)}%`,f.top=`${(100*u).toFixed(2)}%`,this._onTranslating(o,u),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#g&&(this.#g[0]!==this.x||this.#g[1]!==this.y)}get _hasBeenResized(){return!!this.#g&&(this.#g[2]!==this.width||this.#g[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=pt,a=i/t,l=i/e;switch(this.rotation){case 90:return[-a,l];case 180:return[a,l];case 270:return[a,-l];default:return[-a,-l]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,a]}=this;let{x:l,y:o,width:u,height:h}=this;if(u*=i,h*=a,l*=i,o*=a,this._mustFixPosition)switch(t){case 0:l=Oe(l,0,i-u),o=Oe(o,0,a-h);break;case 90:l=Oe(l,0,i-h),o=Oe(o,u,a);break;case 180:l=Oe(l,u,i),o=Oe(o,h,a);break;case 270:l=Oe(l,h,i),o=Oe(o,0,a-u);break}this.x=l/=i,this.y=o/=a;const[d,f]=this.getBaseTranslation();l+=d,o+=f,e.left=`${(100*l).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}static#E(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return pt.#E(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return pt.#E(t,e,360-this.parentRotation)}#N(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(t,e){const[i,a]=this.parentDimensions,{style:l}=this.div;l.width=`${(100*t/i).toFixed(2)}%`,this.#l||(l.height=`${(100*e/a).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:i}=t,a=i.endsWith("%"),l=!this.#l&&e.endsWith("%");if(a&&l)return;const[o,u]=this.parentDimensions;a||(t.width=`${(100*parseFloat(i)/o).toFixed(2)}%`),!this.#l&&!l&&(t.height=`${(100*parseFloat(e)/u).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#C(){if(this.#r)return;this.#r=document.createElement("div"),this.#r.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const a=document.createElement("div");this.#r.append(a),a.classList.add("resizer",i),a.setAttribute("data-resizer-name",i),a.addEventListener("pointerdown",this.#D.bind(this,i),{signal:e}),a.addEventListener("contextmenu",gs,{signal:e}),a.tabIndex=-1}this.div.prepend(this.#r)}#D(t,e){e.preventDefault();const{isMac:i}=Ae.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#s?.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,this.#h=[e.screenX,e.screenY];const l=new AbortController,o=this._uiManager.combinedSignal(l);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#F.bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",re,{passive:!1,signal:o}),window.addEventListener("contextmenu",gs,{signal:o}),this.#o={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const d=()=>{l.abort(),this.parent.togglePointerEvents(!0),this.#s?.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=u,this.div.style.cursor=h,this.#I()};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}#L(t,e,i,a){this.width=i,this.height=a,this.x=t,this.y=e;const[l,o]=this.parentDimensions;this.setDims(l*i,o*a),this.fixAndSetPosition(),this._onResized()}_onResized(){}#I(){if(!this.#o)return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:a}=this.#o;this.#o=null;const l=this.x,o=this.y,u=this.width,h=this.height;l===t&&o===e&&u===i&&h===a||this.addCommands({cmd:this.#L.bind(this,l,o,u,h),undo:this.#L.bind(this,t,e,i,a),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#F(t,e){const[i,a]=this.parentDimensions,l=this.x,o=this.y,u=this.width,h=this.height,d=pt.MIN_SIZE/i,f=pt.MIN_SIZE/a,m=this.#N(this.rotation),y=(D,j)=>[m[0]*D+m[2]*j,m[1]*D+m[3]*j],b=this.#N(360-this.rotation),A=(D,j)=>[b[0]*D+b[2]*j,b[1]*D+b[3]*j];let x,w,T=!1,O=!1;switch(t){case"topLeft":T=!0,x=(D,j)=>[0,0],w=(D,j)=>[D,j];break;case"topMiddle":x=(D,j)=>[D/2,0],w=(D,j)=>[D/2,j];break;case"topRight":T=!0,x=(D,j)=>[D,0],w=(D,j)=>[0,j];break;case"middleRight":O=!0,x=(D,j)=>[D,j/2],w=(D,j)=>[0,j/2];break;case"bottomRight":T=!0,x=(D,j)=>[D,j],w=(D,j)=>[0,0];break;case"bottomMiddle":x=(D,j)=>[D/2,j],w=(D,j)=>[D/2,0];break;case"bottomLeft":T=!0,x=(D,j)=>[0,j],w=(D,j)=>[D,0];break;case"middleLeft":O=!0,x=(D,j)=>[0,j/2],w=(D,j)=>[D,j/2];break}const R=x(u,h),M=w(u,h);let C=y(...M);const L=pt._round(l+C[0]),_=pt._round(o+C[1]);let z=1,G=1,Q,J;if(e.fromKeyboard)({deltaX:Q,deltaY:J}=e);else{const{screenX:D,screenY:j}=e,[st,gt]=this.#h;[Q,J]=this.screenToPageTranslation(D-st,j-gt),this.#h[0]=D,this.#h[1]=j}if([Q,J]=A(Q/i,J/a),T){const D=Math.hypot(u,h);z=G=Math.max(Math.min(Math.hypot(M[0]-R[0]-Q,M[1]-R[1]-J)/D,1/u,1/h),d/u,f/h)}else O?z=Oe(Math.abs(M[0]-R[0]-Q),d,1)/u:G=Oe(Math.abs(M[1]-R[1]-J),f,1)/h;const at=pt._round(u*z),Y=pt._round(h*G);C=y(...w(at,Y));const it=L-C[0],lt=_-C[1];this.#g||=[this.x,this.y,this.width,this.height],this.width=at,this.height=Y,this.x=it,this.y=lt,this.setDims(i*at,a*Y),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#s?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#c)return this._editToolbar;this._editToolbar=new Ka(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,i]of t)await this._editToolbar.addButton(e,i);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#s?.destroy())}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#s||(Ts.initialize(pt._l10n),this.#s=new Ts(this),this.#t&&(this.#s.data=this.#t,this.#t=null)),this.#s}get altTextData(){return this.#s?.data}set altTextData(t){this.#s&&(this.#s.data=t)}get guessedAltText(){return this.#s?.guessedText}async setGuessedAltText(t){await this.#s?.setGuessedText(t)}serializeAltText(t){return this.#s?.serialize(t)}hasAltText(){return!!this.#s&&!this.#s.isEmpty()}hasAltTextData(){return this.#s?.hasData()??!1}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#n?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#V();const[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*i/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/i).toFixed(2)}%`);const[a,l]=this.getInitialTranslation();return this.translate(a,l),bp(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#S||=new jl({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#w.bind(this),onPinching:this.#b.bind(this),onPinchEnd:this.#P.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),t}#w(){this.#o={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#s?.toggle(!1),this.parent.togglePointerEvents(!1)}#b(t,e,i){let l=.7*(i/e)+1-.7;if(l===1)return;const o=this.#N(this.rotation),u=(L,_)=>[o[0]*L+o[2]*_,o[1]*L+o[3]*_],[h,d]=this.parentDimensions,f=this.x,m=this.y,y=this.width,b=this.height,A=pt.MIN_SIZE/h,x=pt.MIN_SIZE/d;l=Math.max(Math.min(l,1/y,1/b),A/y,x/b);const w=pt._round(y*l),T=pt._round(b*l);if(w===y&&T===b)return;this.#g||=[f,m,y,b];const O=u(y/2,b/2),R=pt._round(f+O[0]),M=pt._round(m+O[1]),C=u(w/2,T/2);this.x=R-C[0],this.y=M-C[1],this.width=w,this.height=T,this.setDims(h*w,d*T),this.fixAndSetPosition(),this._onResizing()}#P(){this.#s?.toggle(!0),this.parent.togglePointerEvents(!0),this.#I()}pointerdown(t){const{isMac:e}=Ae.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#f=!0,this._isDraggable){this.#G(t);return}this.#B(t)}#B(t){const{isMac:e}=Ae.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#G(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const a=new AbortController,l=this._uiManager.combinedSignal(a),o={capture:!0,passive:!1,signal:l},u=d=>{a.abort(),this.#a=null,this.#f=!1,this._uiManager.endDragSession()||this.#B(d),i&&this._onStopDragging()};e&&(this.#y=t.clientX,this.#x=t.clientY,this.#a=t.pointerId,this.#i=t.pointerType,window.addEventListener("pointermove",d=>{i||(i=!0,this._onStartDragging());const{clientX:f,clientY:m,pointerId:y}=d;if(y!==this.#a){re(d);return}const[b,A]=this.screenToPageTranslation(f-this.#y,m-this.#x);this.#y=f,this.#x=m,this._uiManager.dragSelectedEditors(b,A)},o),window.addEventListener("touchmove",re,o),window.addEventListener("pointerdown",d=>{d.pointerType===this.#i&&(this.#S||d.isPrimary)&&u(d),re(d)},o));const h=d=>{if(!this.#a||this.#a===d.pointerId){u(d);return}re(d)};window.addEventListener("pointerup",h,{signal:l}),window.addEventListener("blur",h,{signal:l})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const a=this.parentScale,[l,o]=this.pageDimensions,[u,h]=this.pageTranslation,d=t/a,f=e/a,m=this.x*l,y=this.y*o,b=this.width*l,A=this.height*o;switch(i){case 0:return[m+d+u,o-y-f-A+h,m+d+b+u,o-y-f+h];case 90:return[m+f+u,o-y+d+h,m+f+A+u,o-y+d+b+h];case 180:return[m-d-b+u,o-y+f+h,m-d+u,o-y+f+A+h];case 270:return[m-f-A+u,o-y-d-b+h,m-f+u,o-y-d+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,a,l,o]=t,u=l-i,h=o-a;switch(this.rotation){case 0:return[i,e-o,u,h];case 90:return[i,e-a,h,u];case 180:return[l,e-a,u,h];case 270:return[l,e-o,h,u];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#c=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#c=!1,!0):!1}isInEditMode(){return this.#c}shouldGetKeyboardEvents(){return this.#m}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:a}=this.getClientDimensions(),{innerHeight:l,innerWidth:o}=window;return e<o&&a>0&&t<l&&i>0}#V(){if(this.#d||!this.div)return;this.#d=new AbortController;const t=this._uiManager.combinedSignal(this.#d);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#V()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){Ut("An editor must be serializable")}static async deserialize(t,e,i){const a=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i,annotationElementId:t.annotationElementId});a.rotation=t.rotation,a.#t=t.accessibilityData,a._isCopy=t.isCopy||!1;const[l,o]=a.pageDimensions,[u,h,d,f]=a.getRectInCurrentCoords(t.rect,o);return a.x=u/l,a.y=h/o,a.width=d/l,a.height=f/o,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#d?.abort(),this.#d=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#H(),this.removeEditToolbar(),this.#A){for(const t of this.#A.values())clearTimeout(t);this.#A=null}this.parent=null,this.#S?.destroy(),this.#S=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#C(),this.#r.classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#o={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#r.children;if(!this.#e){this.#e=Array.from(e);const o=this.#Y.bind(this),u=this.#U.bind(this),h=this._uiManager._signal;for(const d of this.#e){const f=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",o,{signal:h}),d.addEventListener("blur",u,{signal:h}),d.addEventListener("focus",this.#k.bind(this,f),{signal:h}),d.setAttribute("data-l10n-id",pt._l10nResizer[f])}}const i=this.#e[0];let a=0;for(const o of e){if(o===i)break;a++}const l=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(l!==a){if(l<a)for(let u=0;u<a-l;u++)this.#r.append(this.#r.firstChild);else if(l>a)for(let u=0;u<l-a;u++)this.#r.firstChild.before(this.#r.lastChild);let o=0;for(const u of e){const d=this.#e[o++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",pt._l10nResizer[d])}}this.#_(0),this.#m=!0,this.#r.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#Y(t){pt._resizerKeyboardManager.exec(this,t)}#U(t){this.#m&&t.relatedTarget?.parentNode!==this.#r&&this.#H()}#k(t){this.#u=this.#m?t:""}#_(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#m&&this.#F(this.#u,{deltaX:t,deltaY:e,fromKeyboard:!0})}#H(){this.#m=!1,this.#_(-1),this.#I()}_stopResizingWithKeyboard(){this.#H(),this.div.focus()}select(){if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#s?.toggleAltTextBadge(!1)}}unselect(){this.isSelected&&(this.isSelected=!1,this.#r?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#s?.toggleAltTextBadge(!0))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#l=!0;const i=t/e,{style:a}=this.div;a.aspectRatio=i,a.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#A||=new Map;const{action:i}=t;let a=this.#A.get(i);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),this.#A.delete(i),this.#A.size===0&&(this.#A=null)},pt._telemetryTimeout),this.#A.set(i,a);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#n=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#n=!0}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class Yv extends pt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Kg=3285377520,ls=4294901760,Es=65535;class xp{constructor(t){this.h1=t?t&4294967295:Kg,this.h2=t?t&4294967295:Kg}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let x=0,w=t.length;x<w;x++){const T=t.charCodeAt(x);T<=255?e[i++]=T:(e[i++]=T>>>8,e[i++]=T&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=i>>2,l=i-a*4,o=new Uint32Array(e.buffer,0,a);let u=0,h=0,d=this.h1,f=this.h2;const m=3432918353,y=461845907,b=m&Es,A=y&Es;for(let x=0;x<a;x++)x&1?(u=o[x],u=u*m&ls|u*b&Es,u=u<<15|u>>>17,u=u*y&ls|u*A&Es,d^=u,d=d<<13|d>>>19,d=d*5+3864292196):(h=o[x],h=h*m&ls|h*b&Es,h=h<<15|h>>>17,h=h*y&ls|h*A&Es,f^=h,f=f<<13|f>>>19,f=f*5+3864292196);switch(u=0,l){case 3:u^=e[a*4+2]<<16;case 2:u^=e[a*4+1]<<8;case 1:u^=e[a*4],u=u*m&ls|u*b&Es,u=u<<15|u>>>17,u=u*y&ls|u*A&Es,a&1?d^=u:f^=u}this.h1=d,this.h2=f}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&ls|t*36045&Es,e=e*4283543511&ls|((e<<16|t>>>16)*2950163797&ls)>>>16,t^=e>>>1,t=t*444984403&ls|t*60499&Es,e=e*3301882366&ls|((e<<16|t>>>16)*3120437893&ls)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const mu=Object.freeze({map:null,hash:"",transfer:void 0});class Ou{#t=!1;#e=null;#s=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=this.#s.get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return this.#s.get(t)}remove(t){if(this.#s.delete(t),this.#s.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of this.#s.values())if(e instanceof pt)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=this.#s.get(t);let a=!1;if(i!==void 0)for(const[l,o]of Object.entries(e))i[l]!==o&&(a=!0,i[l]=o);else a=!0,this.#s.set(t,e);a&&this.#n(),e instanceof pt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#s.has(t)}get size(){return this.#s.size}#n(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Ap(this)}get serializable(){if(this.#s.size===0)return mu;const t=new Map,e=new xp,i=[],a=Object.create(null);let l=!1;for(const[o,u]of this.#s){const h=u instanceof pt?u.serialize(!1,a):u;h&&(t.set(o,h),e.update(`${o}:${JSON.stringify(h)}`),l||=!!h.bitmap)}if(l)for(const o of t.values())o.bitmap&&i.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:mu}get editorStats(){let t=null;const e=new Map;for(const i of this.#s.values()){if(!(i instanceof pt))continue;const a=i.telemetryFinalData;if(!a)continue;const{type:l}=a;e.has(l)||e.set(l,Object.getPrototypeOf(i).constructor),t||=Object.create(null);const o=t[l]||=new Map;for(const[u,h]of Object.entries(a)){if(u==="type")continue;let d=o.get(u);d||(d=new Map,o.set(u,d));const f=d.get(h)??0;d.set(h,f+1)}}for(const[i,a]of e)t[i]=a.computeTelemetryFinalData(t[i]);return t}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;const t=[];for(const e of this.#s.values())!(e instanceof pt)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#s.entries()}}class Ap extends Ou{#t;constructor(t){super();const{map:e,hash:i,transfer:a}=t.serializable,l=structuredClone(e,a?{transfer:a}:null);this.#t={map:l,hash:i,transfer:a}}get print(){Ut("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return Ot(this,"modifiedIds",{ids:new Set,hash:""})}}class Xv{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:i}){if(!(!t||this.#t.has(t.loadedName))){if(le(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:l,style:o}=t,u=new FontFace(a,l,o);this.addNativeFontFace(u);try{await u.load(),this.#t.add(a),i?.(t)}catch{xt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Ut("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(a){throw xt(`Failed to load font '${i.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const a=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return Ot(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Ot(this,"isSyncFontLoadingSupported",Me||Ae.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(le(!a.done,"completeRequest() cannot be called twice."),a.done=!0;i.length>0&&i[0].done;){const l=i.shift();setTimeout(l.callback,0)}}const{loadingRequests:i}=this,a={done:!1,complete:e,callback:t};return i.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ot(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(M,C){return M.charCodeAt(C)<<24|M.charCodeAt(C+1)<<16|M.charCodeAt(C+2)<<8|M.charCodeAt(C+3)&255}function a(M,C,L,_){const z=M.substring(0,C),G=M.substring(C+L);return z+_+G}let l,o;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let d=0;function f(M,C){if(++d>30){xt("Load test font never loaded."),C();return}if(h.font="30px "+M,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){C();return}setTimeout(f.bind(null,M,C))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=a(y,976,m.length,m);const A=16,x=1482184792;let w=i(y,A);for(l=0,o=m.length-3;l<o;l+=4)w=w-x+i(m,l)|0;l<m.length&&(w=w-x+i(m+"XXX",l)|0),y=a(y,A,4,Ov(w));const T=`url(data:font/opentype;base64,${btoa(y)});`,O=`@font-face {font-family:"${m}";src:${T}}`;this.insertRule(O);const R=this._document.createElement("div");R.style.visibility="hidden",R.style.width=R.style.height="10px",R.style.position="absolute",R.style.top=R.style.left="0px";for(const M of[t.loadedName,m]){const C=this._document.createElement("span");C.textContent="Hi",C.style.fontFamily=M,R.append(C)}this._document.body.append(R),f(m,()=>{R.remove(),e.complete()})}}class $v{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const i in t)this[i]=t[i];this._inspectFont=e}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${vp(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let a;try{a=t.get(i)}catch(o){xt(`getPathGenerator - ignoring character: "${o}".`)}const l=new Path2D(a||"");return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=l}}function Kv(p){if(p instanceof URL)return p.href;if(typeof p=="string"){if(Me)return p;const t=URL.parse(p,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Wv(p){if(Me&&typeof Buffer<"u"&&p instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(p instanceof Uint8Array&&p.byteLength===p.buffer.byteLength)return p;if(typeof p=="string")return Za(p);if(p instanceof ArrayBuffer||ArrayBuffer.isView(p)||typeof p=="object"&&!isNaN(p?.length))return new Uint8Array(p);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function bl(p){if(typeof p!="string")return null;if(p.endsWith("/"))return p;throw new Error(`Invalid factory url: "${p}" must include trailing slash.`)}const vu=p=>typeof p=="object"&&Number.isInteger(p?.num)&&p.num>=0&&Number.isInteger(p?.gen)&&p.gen>=0,Qv=p=>typeof p=="object"&&typeof p?.name=="string",Zv=_v.bind(null,vu,Qv);class qv{#t=new Map;#e=Promise.resolve();postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[a]of this.#t)a.call(this,i)})}addEventListener(t,e,i=null){let a=null;if(i?.signal instanceof AbortSignal){const{signal:l}=i;if(l.aborted){xt("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);a=()=>l.removeEventListener("abort",o),l.addEventListener("abort",o)}this.#t.set(e,a)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const xl={DATA:1,ERROR:2},ie={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Wg(){}function Be(p){if(p instanceof yn||p instanceof gu||p instanceof Yg||p instanceof Ml||p instanceof au)return p;switch(p instanceof Error||typeof p=="object"&&p!==null||Ut('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),p.name){case"AbortException":return new yn(p.message);case"InvalidPDFException":return new gu(p.message);case"PasswordException":return new Yg(p.message,p.code);case"ResponseException":return new Ml(p.message,p.status,p.missing);case"UnknownErrorException":return new au(p.message,p.details)}return new au(p.message,p.toString())}class Xa{#t=new AbortController;constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){const i=t.callbackId,a=this.callbackCapabilities[i];if(!a)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===xl.DATA)a.resolve(t.data);else if(t.callback===xl.ERROR)a.reject(Be(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,a=t.sourceName,l=this.comObj;Promise.try(e,t.data).then(function(o){l.postMessage({sourceName:i,targetName:a,callback:xl.DATA,callbackId:t.callbackId,data:o})},function(o){l.postMessage({sourceName:i,targetName:a,callback:xl.ERROR,callbackId:t.callbackId,reason:Be(o)})});return}if(t.streamId){this.#s(t);return}e(t.data)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const a=this.callbackId++,l=Promise.withResolvers();this.callbackCapabilities[a]=l;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},i)}catch(o){l.reject(o)}return l.promise}sendWithStream(t,e,i,a){const l=this.streamId++,o=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:d=>{const f=Promise.withResolvers();return this.streamControllers[l]={controller:d,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:o,targetName:u,action:t,streamId:l,data:e,desiredSize:d.desiredSize},a),f.promise},pull:d=>{const f=Promise.withResolvers();return this.streamControllers[l].pullCall=f,h.postMessage({sourceName:o,targetName:u,stream:ie.PULL,streamId:l,desiredSize:d.desiredSize}),f.promise},cancel:d=>{le(d instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[l].cancelCall=f,this.streamControllers[l].isClosed=!0,h.postMessage({sourceName:o,targetName:u,stream:ie.CANCEL,streamId:l,reason:Be(d)}),f.promise}},i)}#s(t){const e=t.streamId,i=this.sourceName,a=t.sourceName,l=this.comObj,o=this,u=this.actionHandler[t.action],h={enqueue(d,f=1,m){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=f,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),l.postMessage({sourceName:i,targetName:a,stream:ie.ENQUEUE,streamId:e,chunk:d},m)},close(){this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:i,targetName:a,stream:ie.CLOSE,streamId:e}),delete o.streamSinks[e])},error(d){le(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,l.postMessage({sourceName:i,targetName:a,stream:ie.ERROR,streamId:e,reason:Be(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[e]=h,Promise.try(u,t.data,h).then(function(){l.postMessage({sourceName:i,targetName:a,stream:ie.START_COMPLETE,streamId:e,success:!0})},function(d){l.postMessage({sourceName:i,targetName:a,stream:ie.START_COMPLETE,streamId:e,reason:Be(d)})})}#n(t){const e=t.streamId,i=this.sourceName,a=t.sourceName,l=this.comObj,o=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case ie.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(Be(t.reason));break;case ie.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(Be(t.reason));break;case ie.PULL:if(!u){l.postMessage({sourceName:i,targetName:a,stream:ie.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||Wg).then(function(){l.postMessage({sourceName:i,targetName:a,stream:ie.PULL_COMPLETE,streamId:e,success:!0})},function(d){l.postMessage({sourceName:i,targetName:a,stream:ie.PULL_COMPLETE,streamId:e,reason:Be(d)})});break;case ie.ENQUEUE:if(le(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case ie.CLOSE:if(le(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this.#a(o,e);break;case ie.ERROR:le(o,"error should have stream controller"),o.controller.error(Be(t.reason)),this.#a(o,e);break;case ie.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(Be(t.reason)),this.#a(o,e);break;case ie.CANCEL:if(!u)break;const h=Be(t.reason);Promise.try(u.onCancel||Wg,h).then(function(){l.postMessage({sourceName:i,targetName:a,stream:ie.CANCEL_COMPLETE,streamId:e,success:!0})},function(d){l.postMessage({sourceName:i,targetName:a,stream:ie.CANCEL_COMPLETE,streamId:e,reason:Be(d)})}),u.sinkCapability.reject(h),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#a(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class Sp{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Ut("Abstract method `_createCanvas` called.")}}class Jv extends Sp{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class Ep{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Ut("Abstract method `_fetch` called.")}}class Qg extends Ep{async _fetch(t){const e=await qa(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Za(e)}}It(2489);class wp{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,a,l){return"none"}destroy(t=!1){}}class ty extends wp{#t;#e;#s;#n;#a;#i;#l=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#n=t,this.#a=e}get#r(){return this.#e||=new Map}get#h(){return this.#i||=new Map}get#o(){if(!this.#s){const t=this.#a.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const i=this.#a.createElementNS(Hs,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#s=this.#a.createElementNS(Hs,"defs"),t.append(i),i.append(this.#s),this.#a.body.append(t)}return this.#s}#d(t){if(t.length===1){const h=t[0],d=new Array(256);for(let m=0;m<256;m++)d[m]=h[m]/255;const f=d.join(",");return[f,f,f]}const[e,i,a]=t,l=new Array(256),o=new Array(256),u=new Array(256);for(let h=0;h<256;h++)l[h]=e[h]/255,o[h]=i[h]/255,u[h]=a[h]/255;return[l.join(","),o.join(","),u.join(",")]}#u(t){if(this.#t===void 0){this.#t="";const e=this.#a.URL;e!==this.#a.baseURI&&(_l(e)?xt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=gp(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#r.get(t);if(e)return e;const[i,a,l]=this.#d(t),o=t.length===1?i:`${i}${a}${l}`;if(e=this.#r.get(o),e)return this.#r.set(t,e),e;const u=`g_${this.#n}_transfer_map_${this.#l++}`,h=this.#u(u);this.#r.set(t,h),this.#r.set(o,h);const d=this.#p(u);return this.#m(i,a,l,d),h}addHCMFilter(t,e){const i=`${t}-${e}`,a="base";let l=this.#h.get(a);if(l?.key===i||(l?(l.filter?.remove(),l.key=i,l.url="none",l.filter=null):(l={key:i,url:"none",filter:null},this.#h.set(a,l)),!t||!e))return l.url;const o=this.#y(t);t=ft.makeHexColor(...o);const u=this.#y(e);if(e=ft.makeHexColor(...u),this.#o.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return l.url;const h=new Array(256);for(let b=0;b<=255;b++){const A=b/255;h[b]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const d=h.join(","),f=`g_${this.#n}_hcm_filter`,m=l.filter=this.#p(f);this.#m(d,d,d,m),this.#g(m);const y=(b,A)=>{const x=o[b]/255,w=u[b]/255,T=new Array(A+1);for(let O=0;O<=A;O++)T[O]=x+O/A*(w-x);return T.join(",")};return this.#m(y(0,5),y(1,5),y(2,5),m),l.url=this.#u(f),l.url}addAlphaFilter(t){let e=this.#r.get(t);if(e)return e;const[i]=this.#d([t]),a=`alpha_${i}`;if(e=this.#r.get(a),e)return this.#r.set(t,e),e;const l=`g_${this.#n}_alpha_map_${this.#l++}`,o=this.#u(l);this.#r.set(t,o),this.#r.set(a,o);const u=this.#p(l);return this.#v(i,u),o}addLuminosityFilter(t){let e=this.#r.get(t||"luminosity");if(e)return e;let i,a;if(t?([i]=this.#d([t]),a=`luminosity_${i}`):a="luminosity",e=this.#r.get(a),e)return this.#r.set(t,e),e;const l=`g_${this.#n}_luminosity_map_${this.#l++}`,o=this.#u(l);this.#r.set(t,o),this.#r.set(a,o);const u=this.#p(l);return this.#f(u),t&&this.#v(i,u),o}addHighlightHCMFilter(t,e,i,a,l){const o=`${e}-${i}-${a}-${l}`;let u=this.#h.get(t);if(u?.key===o||(u?(u.filter?.remove(),u.key=o,u.url="none",u.filter=null):(u={key:o,url:"none",filter:null},this.#h.set(t,u)),!e||!i))return u.url;const[h,d]=[e,i].map(this.#y.bind(this));let f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),m=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[y,b]=[a,l].map(this.#y.bind(this));m<f&&([f,m,y,b]=[m,f,b,y]),this.#o.style.color="";const A=(T,O,R)=>{const M=new Array(256),C=(m-f)/R,L=T/255,_=(O-T)/(255*R);let z=0;for(let G=0;G<=R;G++){const Q=Math.round(f+G*C),J=L+G*_;for(let at=z;at<=Q;at++)M[at]=J;z=Q+1}for(let G=z;G<256;G++)M[G]=M[z-1];return M.join(",")},x=`g_${this.#n}_hcm_${t}_filter`,w=u.filter=this.#p(x);return this.#g(w),this.#m(A(y[0],b[0],5),A(y[1],b[1],5),A(y[2],b[2],5),w),u.url=this.#u(x),u.url}destroy(t=!1){t&&this.#i?.size||(this.#s?.parentNode.parentNode.remove(),this.#s=null,this.#e?.clear(),this.#e=null,this.#i?.clear(),this.#i=null,this.#l=0)}#f(t){const e=this.#a.createElementNS(Hs,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#g(t){const e=this.#a.createElementNS(Hs,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#p(t){const e=this.#a.createElementNS(Hs,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#o.append(e),e}#c(t,e,i){const a=this.#a.createElementNS(Hs,e);a.setAttribute("type","discrete"),a.setAttribute("tableValues",i),t.append(a)}#m(t,e,i,a){const l=this.#a.createElementNS(Hs,"feComponentTransfer");a.append(l),this.#c(l,"feFuncR",t),this.#c(l,"feFuncG",e),this.#c(l,"feFuncB",i)}#v(t,e){const i=this.#a.createElementNS(Hs,"feComponentTransfer");e.append(i),this.#c(i,"feFuncA",t)}#y(t){return this.#o.style.color=t,Ru(getComputedStyle(this.#o).getPropertyValue("color"))}}class Tp{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Ut("Abstract method `_fetch` called.")}}class Zg extends Tp{async _fetch(t){const e=await qa(t,"arraybuffer");return new Uint8Array(e)}}class Cp{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Ut("Abstract method `_fetch` called.")}}class qg extends Cp{async _fetch(t){const e=await qa(t,"arraybuffer");return new Uint8Array(e)}}if(Me){let p;try{const t=process.getBuiltinModule("module").createRequire(import.meta.url);try{p=t("@napi-rs/canvas")}catch(e){xt(`Cannot load "@napi-rs/canvas" package: "${e}".`)}}catch(t){xt(`Cannot access the \`require\` function: "${t}".`)}globalThis.DOMMatrix||(p?.DOMMatrix?globalThis.DOMMatrix=p.DOMMatrix:xt("Cannot polyfill `DOMMatrix`, rendering may be broken.")),globalThis.ImageData||(p?.ImageData?globalThis.ImageData=p.ImageData:xt("Cannot polyfill `ImageData`, rendering may be broken.")),globalThis.Path2D||(p?.Path2D?globalThis.Path2D=p.Path2D:xt("Cannot polyfill `Path2D`, rendering may be broken.")),globalThis.navigator?.language||(globalThis.navigator={language:"en-US",platform:"",userAgent:""})}async function Du(p){const e=await process.getBuiltinModule("fs").promises.readFile(p);return new Uint8Array(e)}class ey extends wp{}class sy extends Sp{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class ny extends Ep{async _fetch(t){return Du(t)}}class iy extends Tp{async _fetch(t){return Du(t)}}class ay extends Cp{async _fetch(t){return Du(t)}}const xe={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function yu(p,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],e,i),p.clip(a)}class Lu{isModifyingCurrentTransform(){return!1}getPattern(){Ut("Abstract method `getPattern` called.")}}class ry extends Lu{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,a){let l;if(a===xe.STROKE||a===xe.FILL){const o=e.current.getClippedPathBoundingBox(a,Kt(t))||[0,0,0,0],u=Math.ceil(o[2]-o[0])||1,h=Math.ceil(o[3]-o[1])||1,d=e.cachedCanvases.getCanvas("pattern",u,h),f=d.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-o[0],-o[1]),i=ft.transform(i,[1,0,0,1,o[0],o[1]]),f.transform(...e.baseTransform),this.matrix&&f.transform(...this.matrix),yu(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),l=t.createPattern(d.canvas,"no-repeat");const m=new DOMMatrix(i);l.setTransform(m)}else yu(t,this._bbox),l=this._createGradient(t);return l}}function ou(p,t,e,i,a,l,o,u){const h=t.coords,d=t.colors,f=p.data,m=p.width*4;let y;h[e+1]>h[i+1]&&(y=e,e=i,i=y,y=l,l=o,o=y),h[i+1]>h[a+1]&&(y=i,i=a,a=y,y=o,o=u,u=y),h[e+1]>h[i+1]&&(y=e,e=i,i=y,y=l,l=o,o=y);const b=(h[e]+t.offsetX)*t.scaleX,A=(h[e+1]+t.offsetY)*t.scaleY,x=(h[i]+t.offsetX)*t.scaleX,w=(h[i+1]+t.offsetY)*t.scaleY,T=(h[a]+t.offsetX)*t.scaleX,O=(h[a+1]+t.offsetY)*t.scaleY;if(A>=O)return;const R=d[l],M=d[l+1],C=d[l+2],L=d[o],_=d[o+1],z=d[o+2],G=d[u],Q=d[u+1],J=d[u+2],at=Math.round(A),Y=Math.round(O);let it,lt,D,j,st,gt,k,K;for(let nt=at;nt<=Y;nt++){if(nt<w){const $=nt<A?0:(A-nt)/(A-w);it=b-(b-x)*$,lt=R-(R-L)*$,D=M-(M-_)*$,j=C-(C-z)*$}else{let $;nt>O?$=1:w===O?$=0:$=(w-nt)/(w-O),it=x-(x-T)*$,lt=L-(L-G)*$,D=_-(_-Q)*$,j=z-(z-J)*$}let et;nt<A?et=0:nt>O?et=1:et=(A-nt)/(A-O),st=b-(b-T)*et,gt=R-(R-G)*et,k=M-(M-Q)*et,K=C-(C-J)*et;const ot=Math.round(Math.min(it,st)),rt=Math.round(Math.max(it,st));let X=m*nt+ot*4;for(let $=ot;$<=rt;$++)et=(it-$)/(it-st),et<0?et=0:et>1&&(et=1),f[X++]=lt-(lt-gt)*et|0,f[X++]=D-(D-k)*et|0,f[X++]=j-(j-K)*et|0,f[X++]=255}}function ly(p,t,e){const i=t.coords,a=t.colors;let l,o;switch(t.type){case"lattice":const u=t.verticesPerRow,h=Math.floor(i.length/u)-1,d=u-1;for(l=0;l<h;l++){let f=l*u;for(let m=0;m<d;m++,f++)ou(p,e,i[f],i[f+1],i[f+u],a[f],a[f+1],a[f+u]),ou(p,e,i[f+u+1],i[f+1],i[f+u],a[f+u+1],a[f+1],a[f+u])}break;case"triangles":for(l=0,o=i.length;l<o;l+=3)ou(p,e,i[l],i[l+1],i[l+2],a[l],a[l+1],a[l+2]);break;default:throw new Error("illegal figure")}}class oy extends Lu{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,i){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-u,f=Math.ceil(this._bounds[3])-h,m=Math.min(Math.ceil(Math.abs(d*t[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(f*t[1]*1.1)),3e3),b=d/m,A=f/y,x={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/b,scaleY:1/A},w=m+2*2,T=y+2*2,O=i.getCanvas("mesh",w,T),R=O.context,M=R.createImageData(m,y);if(e){const L=M.data;for(let _=0,z=L.length;_<z;_+=4)L[_]=e[0],L[_+1]=e[1],L[_+2]=e[2],L[_+3]=255}for(const L of this._figures)ly(M,L,x);return R.putImageData(M,2,2),{canvas:O.canvas,offsetX:u-2*b,offsetY:h-2*A,scaleX:b,scaleY:A}}isModifyingCurrentTransform(){return!0}getPattern(t,e,i,a){yu(t,this._bbox);const l=new Float32Array(2);if(a===xe.SHADING)ft.singularValueDecompose2dScale(Kt(t),l);else if(this.matrix){ft.singularValueDecompose2dScale(this.matrix,l);const[u,h]=l;ft.singularValueDecompose2dScale(e.baseTransform,l),l[0]*=u,l[1]*=h}else ft.singularValueDecompose2dScale(e.baseTransform,l);const o=this._createMeshCanvas(l,a===xe.SHADING?null:this._background,e.cachedCanvases);return a!==xe.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class cy extends Lu{getPattern(){return"hotpink"}}function uy(p){switch(p[0]){case"RadialAxial":return new ry(p);case"Mesh":return new oy(p);case"Dummy":return new cy}throw new Error(`Unknown IR type: ${p[0]}`)}const Jg={COLORED:1,UNCOLORED:2};class Iu{static MAX_PATTERN_SIZE=3e3;constructor(t,e,i,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=i,this.baseTransform=a}createPatternCanvas(t){const{bbox:e,operatorList:i,paintType:a,tilingType:l,color:o,canvasGraphicsFactory:u}=this;let{xstep:h,ystep:d}=this;h=Math.abs(h),d=Math.abs(d),kl("TilingType: "+l);const f=e[0],m=e[1],y=e[2],b=e[3],A=y-f,x=b-m,w=new Float32Array(2);ft.singularValueDecompose2dScale(this.matrix,w);const[T,O]=w;ft.singularValueDecompose2dScale(this.baseTransform,w);const R=T*w[0],M=O*w[1];let C=A,L=x,_=!1,z=!1;const G=Math.ceil(h*R),Q=Math.ceil(d*M),J=Math.ceil(A*R),at=Math.ceil(x*M);G>=J?C=h:_=!0,Q>=at?L=d:z=!0;const Y=this.getSizeAndScale(C,this.ctx.canvas.width,R),it=this.getSizeAndScale(L,this.ctx.canvas.height,M),lt=t.cachedCanvases.getCanvas("pattern",Y.size,it.size),D=lt.context,j=u.createCanvasGraphics(D);if(j.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(j,a,o),D.translate(-Y.scale*f,-it.scale*m),j.transform(Y.scale,0,0,it.scale,0,0),D.save(),this.clipBbox(j,f,m,y,b),j.baseTransform=Kt(j.ctx),j.executeOperatorList(i),j.endDrawing(),D.restore(),_||z){const st=lt.canvas;_&&(C=h),z&&(L=d);const gt=this.getSizeAndScale(C,this.ctx.canvas.width,R),k=this.getSizeAndScale(L,this.ctx.canvas.height,M),K=gt.size,nt=k.size,et=t.cachedCanvases.getCanvas("pattern-workaround",K,nt),ot=et.context,rt=_?Math.floor(A/h):0,X=z?Math.floor(x/d):0;for(let $=0;$<=rt;$++)for(let tt=0;tt<=X;tt++)ot.drawImage(st,K*$,nt*tt,K,nt,0,0,K,nt);return{canvas:et.canvas,scaleX:gt.scale,scaleY:k.scale,offsetX:f,offsetY:m}}return{canvas:lt.canvas,scaleX:Y.scale,scaleY:it.scale,offsetX:f,offsetY:m}}getSizeAndScale(t,e,i){const a=Math.max(Iu.MAX_PATTERN_SIZE,e);let l=Math.ceil(t*i);return l>=a?l=a:i=l/t,{scale:i,size:l}}clipBbox(t,e,i,a,l){const o=a-e,u=l-i;t.ctx.rect(e,i,o,u),ft.axialAlignedBoundingBox([e,i,a,l],Kt(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const a=t.ctx,l=t.current;switch(e){case Jg.COLORED:const{fillStyle:o,strokeStyle:u}=this.ctx;a.fillStyle=l.fillColor=o,a.strokeStyle=l.strokeColor=u;break;case Jg.UNCOLORED:a.fillStyle=a.strokeStyle=i,l.fillColor=l.strokeColor=i;break;default:throw new Mv(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,i,a){let l=i;a!==xe.SHADING&&(l=ft.transform(l,e.baseTransform),this.matrix&&(l=ft.transform(l,this.matrix)));const o=this.createPatternCanvas(e);let u=new DOMMatrix(l);u=u.translate(o.offsetX,o.offsetY),u=u.scale(1/o.scaleX,1/o.scaleY);const h=t.createPattern(o.canvas,"repeat");return h.setTransform(u),h}}function hy({src:p,srcPos:t=0,dest:e,width:i,height:a,nonBlackColor:l=4294967295,inverseDecode:o=!1}){const u=Ae.isLittleEndian?4278190080:255,[h,d]=o?[l,u]:[u,l],f=i>>3,m=i&7,y=p.length;e=new Uint32Array(e.buffer);let b=0;for(let A=0;A<a;A++){for(const w=t+f;t<w;t++){const T=t<y?p[t]:255;e[b++]=T&128?d:h,e[b++]=T&64?d:h,e[b++]=T&32?d:h,e[b++]=T&16?d:h,e[b++]=T&8?d:h,e[b++]=T&4?d:h,e[b++]=T&2?d:h,e[b++]=T&1?d:h}if(m===0)continue;const x=t<y?p[t++]:255;for(let w=0;w<m;w++)e[b++]=x&1<<7-w?d:h}return{srcPos:t,destPos:b}}const tp=16,ep=100,dy=15,sp=10,ze=16,cu=new DOMMatrix,Ze=new Float32Array(2),ji=new Float32Array([1/0,1/0,-1/0,-1/0]);function fy(p,t){if(p._removeMirroring)throw new Error("Context is already forwarding operations.");p.__originalSave=p.save,p.__originalRestore=p.restore,p.__originalRotate=p.rotate,p.__originalScale=p.scale,p.__originalTranslate=p.translate,p.__originalTransform=p.transform,p.__originalSetTransform=p.setTransform,p.__originalResetTransform=p.resetTransform,p.__originalClip=p.clip,p.__originalMoveTo=p.moveTo,p.__originalLineTo=p.lineTo,p.__originalBezierCurveTo=p.bezierCurveTo,p.__originalRect=p.rect,p.__originalClosePath=p.closePath,p.__originalBeginPath=p.beginPath,p._removeMirroring=()=>{p.save=p.__originalSave,p.restore=p.__originalRestore,p.rotate=p.__originalRotate,p.scale=p.__originalScale,p.translate=p.__originalTranslate,p.transform=p.__originalTransform,p.setTransform=p.__originalSetTransform,p.resetTransform=p.__originalResetTransform,p.clip=p.__originalClip,p.moveTo=p.__originalMoveTo,p.lineTo=p.__originalLineTo,p.bezierCurveTo=p.__originalBezierCurveTo,p.rect=p.__originalRect,p.closePath=p.__originalClosePath,p.beginPath=p.__originalBeginPath,delete p._removeMirroring},p.save=function(){t.save(),this.__originalSave()},p.restore=function(){t.restore(),this.__originalRestore()},p.translate=function(e,i){t.translate(e,i),this.__originalTranslate(e,i)},p.scale=function(e,i){t.scale(e,i),this.__originalScale(e,i)},p.transform=function(e,i,a,l,o,u){t.transform(e,i,a,l,o,u),this.__originalTransform(e,i,a,l,o,u)},p.setTransform=function(e,i,a,l,o,u){t.setTransform(e,i,a,l,o,u),this.__originalSetTransform(e,i,a,l,o,u)},p.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},p.rotate=function(e){t.rotate(e),this.__originalRotate(e)},p.clip=function(e){t.clip(e),this.__originalClip(e)},p.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},p.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},p.bezierCurveTo=function(e,i,a,l,o,u){t.bezierCurveTo(e,i,a,l,o,u),this.__originalBezierCurveTo(e,i,a,l,o,u)},p.rect=function(e,i,a,l){t.rect(e,i,a,l),this.__originalRect(e,i,a,l)},p.closePath=function(){t.closePath(),this.__originalClosePath()},p.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class gy{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,e,i)):(a=this.canvasFactory.create(e,i),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Al(p,t,e,i,a,l,o,u,h,d){const[f,m,y,b,A,x]=Kt(p);if(m===0&&y===0){const O=o*f+A,R=Math.round(O),M=u*b+x,C=Math.round(M),L=(o+h)*f+A,_=Math.abs(Math.round(L)-R)||1,z=(u+d)*b+x,G=Math.abs(Math.round(z)-C)||1;return p.setTransform(Math.sign(f),0,0,Math.sign(b),R,C),p.drawImage(t,e,i,a,l,0,0,_,G),p.setTransform(f,m,y,b,A,x),[_,G]}if(f===0&&b===0){const O=u*y+A,R=Math.round(O),M=o*m+x,C=Math.round(M),L=(u+d)*y+A,_=Math.abs(Math.round(L)-R)||1,z=(o+h)*m+x,G=Math.abs(Math.round(z)-C)||1;return p.setTransform(0,Math.sign(m),Math.sign(y),0,R,C),p.drawImage(t,e,i,a,l,0,0,G,_),p.setTransform(f,m,y,b,A,x),[G,_]}p.drawImage(t,e,i,a,l,o,u,h,d);const w=Math.hypot(f,m),T=Math.hypot(y,b);return[w*h,T*d]}class np{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=fu;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Ce.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e){this.clipBox=new Float32Array([0,0,t,e]),this.minMax=ji.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=xe.FILL,e=null){const i=this.minMax.slice();if(t===xe.STROKE){e||Ut("Stroke bounding box must include transform."),ft.singularValueDecompose2dScale(e,Ze);const a=Ze[0]*this.lineWidth/2,l=Ze[1]*this.lineWidth/2;i[0]-=a,i[1]-=l,i[2]+=a,i[3]+=l}return i}updateClipFromPath(){const t=ft.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(ji,0)}getClippedPathBoundingBox(t=xe.FILL,e=null){return ft.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function ip(p,t){if(t instanceof ImageData){p.putImageData(t,0,0);return}const e=t.height,i=t.width,a=e%ze,l=(e-a)/ze,o=a===0?l:l+1,u=p.createImageData(i,ze);let h=0,d;const f=t.data,m=u.data;let y,b,A,x;if(t.kind===Tl.GRAYSCALE_1BPP){const w=f.byteLength,T=new Uint32Array(m.buffer,0,m.byteLength>>2),O=T.length,R=i+7>>3,M=4294967295,C=Ae.isLittleEndian?4278190080:255;for(y=0;y<o;y++){for(A=y<l?ze:a,d=0,b=0;b<A;b++){const L=w-h;let _=0;const z=L>R?i:L*8-7,G=z&-8;let Q=0,J=0;for(;_<G;_+=8)J=f[h++],T[d++]=J&128?M:C,T[d++]=J&64?M:C,T[d++]=J&32?M:C,T[d++]=J&16?M:C,T[d++]=J&8?M:C,T[d++]=J&4?M:C,T[d++]=J&2?M:C,T[d++]=J&1?M:C;for(;_<z;_++)Q===0&&(J=f[h++],Q=128),T[d++]=J&Q?M:C,Q>>=1}for(;d<O;)T[d++]=0;p.putImageData(u,0,y*ze)}}else if(t.kind===Tl.RGBA_32BPP){for(b=0,x=i*ze*4,y=0;y<l;y++)m.set(f.subarray(h,h+x)),h+=x,p.putImageData(u,0,b),b+=ze;y<o&&(x=i*a*4,m.set(f.subarray(h,h+x)),p.putImageData(u,0,b))}else if(t.kind===Tl.RGB_24BPP)for(A=ze,x=i*A,y=0;y<o;y++){for(y>=l&&(A=a,x=i*A),d=0,b=x;b--;)m[d++]=f[h++],m[d++]=f[h++],m[d++]=f[h++],m[d++]=255;p.putImageData(u,0,y*ze)}else throw new Error(`bad image kind: ${t.kind}`)}function ap(p,t){if(t.bitmap){p.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,a=e%ze,l=(e-a)/ze,o=a===0?l:l+1,u=p.createImageData(i,ze);let h=0;const d=t.data,f=u.data;for(let m=0;m<o;m++){const y=m<l?ze:a;({srcPos:h}=hy({src:d,srcPos:h,dest:f,width:i,height:y,nonBlackColor:0})),p.putImageData(u,0,m*ze)}}function Ua(p,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)p[i]!==void 0&&(t[i]=p[i]);p.setLineDash!==void 0&&(t.setLineDash(p.getLineDash()),t.lineDashOffset=p.lineDashOffset)}function Sl(p){p.strokeStyle=p.fillStyle="#000000",p.fillRule="nonzero",p.globalAlpha=1,p.lineWidth=1,p.lineCap="butt",p.lineJoin="miter",p.miterLimit=10,p.globalCompositeOperation="source-over",p.font="10px sans-serif",p.setLineDash!==void 0&&(p.setLineDash([]),p.lineDashOffset=0);const{filter:t}=p;t!=="none"&&t!==""&&(p.filter="none")}function rp(p,t){if(t)return!0;ft.singularValueDecompose2dScale(p,Ze);const e=Math.fround(Cs.pixelRatio*Ui.PDF_TO_CSS_UNITS);return Ze[0]<=e&&Ze[1]<=e}const py=["butt","round","square"],my=["miter","round","bevel"],vy={},lp={};class Bi{constructor(t,e,i,a,l,{optionalContentConfig:o,markedContentStack:u=null},h,d){this.ctx=t,this.current=new np(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=a,this.filterFactory=l,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=o,this.cachedCanvases=new gy(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:a=null}){const l=this.ctx.canvas.width,o=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,l,o),this.ctx.fillStyle=u,i){const h=this.cachedCanvases.getCanvas("transparent",l,o);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...Kt(this.compositeCtx))}this.ctx.save(),Sl(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Kt(this.ctx)}executeOperatorList(t,e,i,a){const l=t.argsArray,o=t.fnArray;let u=e||0;const h=l.length;if(h===u)return u;const d=h-u>sp&&typeof i=="function",f=d?Date.now()+dy:0;let m=0;const y=this.commonObjs,b=this.objs;let A;for(;;){if(a!==void 0&&u===a.nextBreakPoint)return a.breakIt(u,i),u;if(A=o[u],A!==Nl.dependency)this[A].apply(this,l[u]);else for(const x of l[u]){const w=x.startsWith("g_")?y:b;if(!w.has(x))return w.get(x,i),u}if(u++,u===h)return u;if(d&&++m>sp){if(Date.now()>f)return i(),u;m=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const i=t.width??t.displayWidth,a=t.height??t.displayHeight;let l=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),u=i,h=a,d="prescale1",f,m;for(;l>2&&u>1||o>2&&h>1;){let y=u,b=h;l>2&&u>1&&(y=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),l/=u/y),o>2&&h>1&&(b=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,o/=h/b),f=this.cachedCanvases.getCanvas(d,y,b),m=f.context,m.clearRect(0,0,y,b),m.drawImage(t,0,0,u,h,0,0,y,b),t=f.canvas,u=y,h=b,d=d==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:h}}_createMaskCanvas(t){const e=this.ctx,{width:i,height:a}=t,l=this.current.fillColor,o=this.current.patternFill,u=Kt(e);let h,d,f,m;if((t.bitmap||t.data)&&t.count>1){const G=t.bitmap||t.data.buffer;d=JSON.stringify(o?u:[u.slice(0,4),l]),h=this._cachedBitmapsMap.get(G),h||(h=new Map,this._cachedBitmapsMap.set(G,h));const Q=h.get(d);if(Q&&!o){const J=Math.round(Math.min(u[0],u[2])+u[4]),at=Math.round(Math.min(u[1],u[3])+u[5]);return{canvas:Q,offsetX:J,offsetY:at}}f=Q}f||(m=this.cachedCanvases.getCanvas("maskCanvas",i,a),ap(m.context,t));let y=ft.transform(u,[1/i,0,0,-1/a,0,0]);y=ft.transform(y,[1,0,0,1,0,-a]);const b=ji.slice();ft.axialAlignedBoundingBox([0,0,i,a],y,b);const[A,x,w,T]=b,O=Math.round(w-A)||1,R=Math.round(T-x)||1,M=this.cachedCanvases.getCanvas("fillCanvas",O,R),C=M.context,L=A,_=x;C.translate(-L,-_),C.transform(...y),f||(f=this._scaleImage(m.canvas,Ss(C)),f=f.img,h&&o&&h.set(d,f)),C.imageSmoothingEnabled=rp(Kt(C),t.interpolate),Al(C,f,0,0,f.width,f.height,0,0,i,a),C.globalCompositeOperation="source-in";const z=ft.transform(Ss(C),[1,0,0,1,-L,-_]);return C.fillStyle=o?l.getPattern(e,this,z,xe.FILL):l,C.fillRect(0,0,i,a),h&&!o&&(this.cachedCanvases.delete("fillCanvas"),h.set(d,M.canvas)),{canvas:M.canvas,offsetX:Math.round(L),offsetY:Math.round(_)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=py[t]}setLineJoin(t){this.ctx.lineJoin=my[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(i,t,e);this.suspendedCtx=this.ctx;const l=this.ctx=a.context;l.setTransform(this.suspendedCtx.getTransform()),Ua(this.suspendedCtx,l),fy(l,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Ua(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,a){const l=a[0],o=a[1],u=a[2]-l,h=a[3]-o;u===0||h===0||(this.genericComposeSMask(e.context,i,u,h,e.subtype,e.backdrop,e.transferMap,l,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,a,l,o,u,h,d,f,m){let y=t.canvas,b=h-f,A=d-m;if(o)if(b<0||A<0||b+i>y.width||A+a>y.height){const w=this.cachedCanvases.getCanvas("maskExtension",i,a),T=w.context;T.drawImage(y,-b,-A),T.globalCompositeOperation="destination-atop",T.fillStyle=o,T.fillRect(0,0,i,a),T.globalCompositeOperation="source-over",y=w.canvas,b=A=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const w=new Path2D;w.rect(b,A,i,a),t.clip(w),t.globalCompositeOperation="destination-atop",t.fillStyle=o,t.fillRect(b,A,i,a),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),l==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):l==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const x=new Path2D;x.rect(h,d,i,a),e.clip(x),e.globalCompositeOperation="destination-in",e.drawImage(y,b,A,i,a,h,d,i,a),e.restore()}save(){this.inSMaskMode&&Ua(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Ua(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,i,a,l,o){this.ctx.transform(t,e,i,a,l,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){let[a]=e;if(!i){a||=e[0]=new Path2D,this[t](a);return}if(!(a instanceof Path2D)){const l=e[0]=new Path2D;for(let o=0,u=a.length;o<u;)switch(a[o++]){case yl.moveTo:l.moveTo(a[o++],a[o++]);break;case yl.lineTo:l.lineTo(a[o++],a[o++]);break;case yl.curveTo:l.bezierCurveTo(a[o++],a[o++],a[o++],a[o++],a[o++],a[o++]);break;case yl.closePath:l.closePath();break;default:xt(`Unrecognized drawing path operator: ${a[o-1]}`);break}a=l}ft.axialAlignedBoundingBox(i,Kt(this.ctx),this.current.minMax),this[t](a)}closePath(){this.ctx.closePath()}stroke(t,e=!0){const i=this.ctx,a=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&a?.getPattern){const l=a.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=a.getPattern(i,this,Ss(i),xe.STROKE),l){const o=new Path2D;o.addPath(t,i.getTransform().invertSelf().multiplySelf(l)),t=o}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(xe.STROKE,Kt(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,e=!0){const i=this.ctx,a=this.current.fillColor,l=this.current.patternFill;let o=!1;if(l){const h=a.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.fillStyle=a.getPattern(i,this,Ss(i),xe.FILL),h){const d=new Path2D;d.addPath(t,i.getTransform().invertSelf().multiplySelf(h)),t=d}o=!0}const u=this.current.getClippedPathBoundingBox();this.contentVisible&&u!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),o&&i.restore(),e&&this.consumePath(t,u)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=vy}eoClip(){this.pendingClip=lp}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0)return;const i=new Path2D,a=e.getTransform().invertSelf();for(const{transform:l,x:o,y:u,fontSize:h,path:d}of t)i.addPath(d,new DOMMatrix(l).preMultiplySelf(a).translate(o,u).scale(h,-h));e.clip(i),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){const i=this.commonObjs.get(t),a=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(a.fontMatrix=i.fontMatrix||fu,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&xt("Invalid font matrix for font "+t),e<0?(e=-e,a.fontDirection=-1):a.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const l=i.loadedName||"sans-serif",o=i.systemFontInfo?.css||`"${l}", ${i.fallbackName}`;let u="normal";i.black?u="900":i.bold&&(u="bold");const h=i.italic?"italic":"normal";let d=e;e<tp?d=tp:e>ep&&(d=ep),this.current.fontSizeScale=e/d,this.ctx.font=`${h} ${u} ${d}px ${o}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t){const{current:e}=this;e.textMatrix=t,e.textMatrixScale=Math.hypot(t[0],t[1]),e.x=e.lineX=0,e.y=e.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#s(t,e,i){const a=new Path2D;return a.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),a}paintChar(t,e,i,a,l){const o=this.ctx,u=this.current,h=u.font,d=u.textRenderingMode,f=u.fontSize/u.fontSizeScale,m=d&Ce.FILL_STROKE_MASK,y=!!(d&Ce.ADD_TO_PATH_FLAG),b=u.patternFill&&!h.missingFile,A=u.patternStroke&&!h.missingFile;let x;if((h.disableFontFace||y||b||A)&&(x=h.getPathGenerator(this.commonObjs,t)),h.disableFontFace||b||A){o.save(),o.translate(e,i),o.scale(f,-f);let w;if((m===Ce.FILL||m===Ce.FILL_STROKE)&&(a?(w=o.getTransform(),o.setTransform(...a),o.fill(this.#s(x,w,a))):o.fill(x)),m===Ce.STROKE||m===Ce.FILL_STROKE)if(l){w||=o.getTransform(),o.setTransform(...l);const{a:T,b:O,c:R,d:M}=w,C=ft.inverseTransform(l),L=ft.transform([T,O,R,M,0,0],C);ft.singularValueDecompose2dScale(L,Ze),o.lineWidth*=Math.max(Ze[0],Ze[1])/f,o.stroke(this.#s(x,w,l))}else o.lineWidth/=f,o.stroke(x);o.restore()}else(m===Ce.FILL||m===Ce.FILL_STROKE)&&o.fillText(t,e,i),(m===Ce.STROKE||m===Ce.FILL_STROKE)&&o.strokeText(t,e,i);y&&(this.pendingTextPaths||=[]).push({transform:Kt(o),x:e,y:i,fontSize:f,path:x})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){i=!0;break}return Ot(this,"isFontSubpixelAAEnabled",i)}showText(t){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);const a=e.fontSize;if(a===0)return;const l=this.ctx,o=e.fontSizeScale,u=e.charSpacing,h=e.wordSpacing,d=e.fontDirection,f=e.textHScale*d,m=t.length,y=i.vertical,b=y?1:-1,A=i.defaultVMetrics,x=a*e.fontMatrix[0],w=e.textRenderingMode===Ce.FILL&&!i.disableFontFace&&!e.patternFill;l.save(),e.textMatrix&&l.transform(...e.textMatrix),l.translate(e.x,e.y+e.textRise),d>0?l.scale(f,-1):l.scale(f,1);let T,O;if(e.patternFill){l.save();const _=e.fillColor.getPattern(l,this,Ss(l),xe.FILL);T=Kt(l),l.restore(),l.fillStyle=_}if(e.patternStroke){l.save();const _=e.strokeColor.getPattern(l,this,Ss(l),xe.STROKE);O=Kt(l),l.restore(),l.strokeStyle=_}let R=e.lineWidth;const M=e.textMatrixScale;if(M===0||R===0){const _=e.textRenderingMode&Ce.FILL_STROKE_MASK;(_===Ce.STROKE||_===Ce.FILL_STROKE)&&(R=this.getSinglePixelWidth())}else R/=M;if(o!==1&&(l.scale(o,o),R/=o),l.lineWidth=R,i.isInvalidPDFjsFont){const _=[];let z=0;for(const G of t)_.push(G.unicode),z+=G.width;l.fillText(_.join(""),0,0),e.x+=z*x*f,l.restore(),this.compose();return}let C=0,L;for(L=0;L<m;++L){const _=t[L];if(typeof _=="number"){C+=b*_*a/1e3;continue}let z=!1;const G=(_.isSpace?h:0)+u,Q=_.fontChar,J=_.accent;let at,Y,it=_.width;if(y){const D=_.vmetric||A,j=-(_.vmetric?D[1]:it*.5)*x,st=D[2]*x;it=D?-D[0]:it,at=j/o,Y=(C+st)/o}else at=C/o,Y=0;if(i.remeasure&&it>0){const D=l.measureText(Q).width*1e3/a*o;if(it<D&&this.isFontSubpixelAAEnabled){const j=it/D;z=!0,l.save(),l.scale(j,1),at/=j}else it!==D&&(at+=(it-D)/2e3*a/o)}if(this.contentVisible&&(_.isInFont||i.missingFile)){if(w&&!J)l.fillText(Q,at,Y);else if(this.paintChar(Q,at,Y,T,O),J){const D=at+a*J.offset.x/o,j=Y-a*J.offset.y/o;this.paintChar(J.fontChar,D,j,T,O)}}const lt=y?it*x-G*d:it*x+G*d;C+=lt,z&&l.restore()}y?e.y-=C:e.x+=C*f,l.restore(),this.compose()}showType3Text(t){const e=this.ctx,i=this.current,a=i.font,l=i.fontSize,o=i.fontDirection,u=a.vertical?1:-1,h=i.charSpacing,d=i.wordSpacing,f=i.textHScale*o,m=i.fontMatrix||fu,y=t.length,b=i.textRenderingMode===Ce.INVISIBLE;let A,x,w,T;if(!(b||l===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),i.textMatrix&&e.transform(...i.textMatrix),e.translate(i.x,i.y+i.textRise),e.scale(f,o),A=0;A<y;++A){if(x=t[A],typeof x=="number"){T=u*x*l/1e3,this.ctx.translate(T,0),i.x+=T*f;continue}const O=(x.isSpace?d:0)+h,R=a.charProcOperatorList[x.operatorListId];R?this.contentVisible&&(this.save(),e.scale(l,l),e.transform(...m),this.executeOperatorList(R),this.restore()):xt(`Type3 character "${x.operatorListId}" is not available.`);const M=[x.width,0];ft.applyTransform(M,m),w=M[0]*l+O,e.translate(w,0),i.x+=w*f}e.restore()}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,a,l,o){const u=new Path2D;u.rect(i,a,l-i,o-a),this.ctx.clip(u),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const i=this.baseTransform||Kt(this.ctx),a={createCanvasGraphics:l=>new Bi(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new Iu(t,this.ctx,a,i)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t){this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t){this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=uy(this.getObject(t)),this.cachedPatterns.set(t,i)),e&&(i.matrix=e),i}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,Ss(e),xe.SHADING);const a=Ss(e);if(a){const{width:l,height:o}=e.canvas,u=ji.slice();ft.axialAlignedBoundingBox([0,0,l,o],a,u);const[h,d,f,m]=u;this.ctx.fillRect(h,d,f-h,m-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Ut("Should not call beginInlineImage")}beginImageData(){Ut("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Kt(this.ctx),e)){ft.axialAlignedBoundingBox(e,this.baseTransform,this.current.minMax);const[i,a,l,o]=e,u=new Path2D;u.rect(i,a,l-i,o-a),this.ctx.clip(u),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||kl("TODO: Support non-isolated groups."),t.knockout&&xt("Knockout groups not supported.");const i=Kt(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let a=ji.slice();ft.axialAlignedBoundingBox(t.bbox,Kt(e),a);const l=[0,0,e.canvas.width,e.canvas.height];a=ft.intersect(a,l)||[0,0,0,0];const o=Math.floor(a[0]),u=Math.floor(a[1]),h=Math.max(Math.ceil(a[2])-o,1),d=Math.max(Math.ceil(a[3])-u,1);this.current.startNewPathAndClipBox([0,0,h,d]);let f="groupAt"+this.groupLevel;t.smask&&(f+="_smask_"+this.smaskCounter++%2);const m=this.cachedCanvases.getCanvas(f,h,d),y=m.context;y.translate(-o,-u),y.transform(...i);let b=new Path2D;const[A,x,w,T]=t.bbox;if(b.rect(A,x,w-A,T-x),t.matrix){const O=new Path2D;O.addPath(b,new DOMMatrix(t.matrix)),b=O}y.clip(b),t.smask?this.smaskStack.push({canvas:m.canvas,context:y,offsetX:o,offsetY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,u),e.save()),Ua(e,y),this.ctx=y,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const a=Kt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...a);const l=ji.slice();ft.axialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],a,l),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,e,i,a,l){if(this.#t(),Sl(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const o=e[2]-e[0],u=e[3]-e[1];if(l&&this.annotationCanvasMap){i=i.slice(),i[4]-=e[0],i[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=o,e[3]=u,ft.singularValueDecompose2dScale(Kt(this.ctx),Ze);const{viewportScale:h}=this,d=Math.ceil(o*this.outputScaleX*h),f=Math.ceil(u*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(d,f);const{canvas:m,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(t,m),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.save(),this.ctx.setTransform(Ze[0],0,0,-Ze[1],0,u*Ze[1]),Sl(this.ctx)}else{Sl(this.ctx),this.endPath();const h=new Path2D;h.rect(e[0],e[1],o,u),this.ctx.clip(h)}}this.current=new np(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...a)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const i=this.ctx,a=this._createMaskCanvas(t),l=a.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(l,a.offsetX,a.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i=0,a=0,l,o){if(!this.contentVisible)return;t=this.getObject(t.data,t);const u=this.ctx;u.save();const h=Kt(u);u.transform(e,i,a,l,0,0);const d=this._createMaskCanvas(t);u.setTransform(1,0,0,1,d.offsetX-h[4],d.offsetY-h[5]);for(let f=0,m=o.length;f<m;f+=2){const y=ft.transform(h,[e,i,a,l,o[f],o[f+1]]);u.drawImage(d.canvas,y[4],y[5])}u.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,a=this.current.patternFill;for(const l of t){const{data:o,width:u,height:h,transform:d}=l,f=this.cachedCanvases.getCanvas("maskCanvas",u,h),m=f.context;m.save();const y=this.getObject(o,l);ap(m,y),m.globalCompositeOperation="source-in",m.fillStyle=a?i.getPattern(m,this,Ss(e),xe.FILL):i,m.fillRect(0,0,u,h),m.restore(),e.save(),e.transform(...d),e.scale(1,-1),Al(e,f.canvas,0,0,u,h,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){xt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,i,a){if(!this.contentVisible)return;const l=this.getObject(t);if(!l){xt("Dependent image isn't ready yet");return}const o=l.width,u=l.height,h=[];for(let d=0,f=a.length;d<f;d+=2)h.push({transform:[e,0,0,i,a[d],a[d+1]],x:0,y:0,w:o,h:u});this.paintInlineImageXObjectGroup(l,h)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:a}=t,l=this.cachedCanvases.getCanvas("inlineImage",i,a),o=l.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",l.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,i=t.height,a=this.ctx;this.save();const{filter:l}=a;l!=="none"&&l!==""&&(a.filter="none"),a.scale(1/e,-1/i);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const d=this.cachedCanvases.getCanvas("inlineImage",e,i).context;ip(d,t),o=this.applyTransferMapsToCanvas(d)}const u=this._scaleImage(o,Ss(a));a.imageSmoothingEnabled=rp(Kt(a),t.interpolate),Al(a,u.img,0,0,u.paintWidth,u.paintHeight,0,-i,e,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx;let a;if(t.bitmap)a=t.bitmap;else{const l=t.width,o=t.height,h=this.cachedCanvases.getCanvas("inlineImage",l,o).context;ip(h,t),a=this.applyTransferMapsToCanvas(h)}for(const l of e)i.save(),i.transform(...l.transform),i.scale(1,-1),Al(i,a,l.x,l.y,l.w,l.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const a=this.ctx;this.pendingClip&&(i||(this.pendingClip===lp?a.clip(t,"evenodd"):a.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Kt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:a,d:l}=this.ctx.getTransform();let o,u;if(i===0&&a===0){const h=Math.abs(e),d=Math.abs(l);if(h===d)if(t===0)o=u=1/h;else{const f=h*t;o=u=f<1?1/f:1}else if(t===0)o=1/h,u=1/d;else{const f=h*t,m=d*t;o=f<1?1/f:1,u=m<1?1/m:1}}else{const h=Math.abs(e*l-i*a),d=Math.hypot(e,i),f=Math.hypot(a,l);if(t===0)o=f/h,u=d/h;else{const m=t*h;o=f>m?f/m:1,u=d>m?d/m:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:i,current:{lineWidth:a}}=this,[l,o]=this.getScaleForStroking();if(l===o){i.lineWidth=(a||1)*l,i.stroke(t);return}const u=i.getLineDash();e&&i.save(),i.scale(l,o),cu.a=1/l,cu.d=1/o;const h=new Path2D;if(h.addPath(t,cu),u.length>0){const d=Math.max(l,o);i.setLineDash(u.map(f=>f/d)),i.lineDashOffset/=d}i.lineWidth=a||1,i.stroke(h),e&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const p in Nl)Bi.prototype[p]!==void 0&&(Bi.prototype[Nl[p]]=Bi.prototype[p]);class zi{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class yy{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const ki=Symbol("INTERNAL");class by{#t=!1;#e=!1;#s=!1;#n=!0;constructor(t,{name:e,intent:i,usage:a,rbGroups:l}){this.#t=!!(t&Qe.DISPLAY),this.#e=!!(t&Qe.PRINT),this.name=e,this.intent=i,this.usage=a,this.rbGroups=l}get visible(){if(this.#s)return this.#n;if(!this.#n)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,i=!1){t!==ki&&Ut("Internal method `_setVisible` called."),this.#s=i,this.#n=e}}class xy{#t=null;#e=new Map;#s=null;#n=null;constructor(t,e=Qe.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const i of t.groups)this.#e.set(i.id,new by(e,i));if(t.baseState==="OFF")for(const i of this.#e.values())i._setVisible(ki,!1);for(const i of t.on)this.#e.get(i)._setVisible(ki,!0);for(const i of t.off)this.#e.get(i)._setVisible(ki,!1);this.#s=this.getHash()}}#a(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let a=1;a<e;a++){const l=t[a];let o;if(Array.isArray(l))o=this.#a(l);else if(this.#e.has(l))o=this.#e.get(l).visible;else return xt(`Optional content group not found: ${l}`),!0;switch(i){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return i==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return kl("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(xt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#a(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return xt(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return xt(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return xt(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return xt(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return xt(`Unknown optional content policy ${t.policy}.`),!0}return xt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){const a=this.#e.get(t);if(!a){xt(`Optional content group not found: ${t}`);return}if(i&&e&&a.rbGroups.length)for(const l of a.rbGroups)for(const o of l)o!==t&&this.#e.get(o)?._setVisible(ki,!1,!0);a._setVisible(ki,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let i;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":i=a;continue}const l=this.#e.get(a);if(l)switch(i){case"ON":this.setVisibility(a,!0,e);break;case"OFF":this.setVisibility(a,!1,e);break;case"Toggle":this.setVisibility(a,!l.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#s===null||this.getHash()===this.#s}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new xp;for(const[e,i]of this.#e)t.update(`${e}:${i.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class Ay{constructor(t,{disableRange:e=!1,disableStream:i=!1}){le(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:l,progressiveDone:o,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=u,l?.length>0){const h=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((h,d)=>{this._onReceiveData({begin:h,chunk:d})}),t.addProgressListener((h,d)=>{this._onProgress({loaded:h,total:d})}),t.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const a=this._rangeReaders.some(function(l){return l._begin!==t?!1:(l._enqueue(i),!0)});le(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){le(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Sy(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Ey(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class Sy{constructor(t,e,i=!1,a=null){this._stream=t,this._done=i||!1,this._filename=Cu(a)?a:null,this._queuedChunks=e||[],this._loaded=0;for(const l of this._queuedChunks)this._loaded+=l.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Ey{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function wy(p){let t=!0,e=i("filename\\*","i").exec(p);if(e){e=e[1];let f=u(e);return f=unescape(f),f=h(f),f=d(f),l(f)}if(e=o(p),e){const f=d(e);return l(f)}if(e=i("filename","i").exec(p),e){e=e[1];let f=u(e);return f=d(f),l(f)}function i(f,m){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function a(f,m){if(f){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const y=new TextDecoder(f,{fatal:!0}),b=Za(m);m=y.decode(b),t=!1}catch{}}return m}function l(f){return t&&/[\x80-\xff]/.test(f)&&(f=a("utf-8",f),t&&(f=a("iso-8859-1",f))),f}function o(f){const m=[];let y;const b=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=b.exec(f))!==null;){let[,x,w,T]=y;if(x=parseInt(x,10),x in m){if(x===0)break;continue}m[x]=[w,T]}const A=[];for(let x=0;x<m.length&&x in m;++x){let[w,T]=m[x];T=u(T),w&&(T=unescape(T),x===0&&(T=h(T))),A.push(T)}return A.join("")}function u(f){if(f.startsWith('"')){const m=f.slice(1).split('\\"');for(let y=0;y<m.length;++y){const b=m[y].indexOf('"');b!==-1&&(m[y]=m[y].slice(0,b),m.length=y+1),m[y]=m[y].replaceAll(/\\(.)/g,"$1")}f=m.join('"')}return f}function h(f){const m=f.indexOf("'");if(m===-1)return f;const y=f.slice(0,m),A=f.slice(m+1).replace(/^[^']*'/,"");return a(y,A)}function d(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,y,b,A){if(b==="q"||b==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,w){return String.fromCharCode(parseInt(w,16))}),a(y,A);try{A=atob(A)}catch{}return a(y,A)})}return""}function Rp(p,t){const e=new Headers;if(!p||!t||typeof t!="object")return e;for(const i in t){const a=t[i];a!==void 0&&e.append(i,a)}return e}function Pl(p){return URL.parse(p)?.origin??null}function Np({responseHeaders:p,isHttp:t,rangeChunkSize:e,disableRange:i}){const a={allowRangeRequests:!1,suggestedLength:void 0},l=parseInt(p.get("Content-Length"),10);return!Number.isInteger(l)||(a.suggestedLength=l,l<=2*e)||i||!t||p.get("Accept-Ranges")!=="bytes"||(p.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function Mp(p){const t=p.get("Content-Disposition");if(t){let e=wy(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Cu(e))return e}return null}function er(p,t){return new Ml(`Unexpected server response (${p}) while retrieving PDF "${t}".`,p,p===404||p===0&&t.startsWith("file:"))}function Op(p){return p===200||p===206}function Dp(p,t,e){return{method:"GET",headers:p,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Lp(p){return p instanceof Uint8Array?p.buffer:p instanceof ArrayBuffer?p:(xt(`getArrayBuffer - unexpected data format: ${p}`),new Uint8Array(p).buffer)}class Ty{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Rp(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return le(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Cy(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Ry(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Cy{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),a=e.url;fetch(a,Dp(i,this._withCredentials,this._abortController)).then(l=>{if(t._responseOrigin=Pl(l.url),!Op(l.status))throw er(l.status,a);this._reader=l.body.getReader(),this._headersCapability.resolve();const o=l.headers,{allowRangeRequests:u,suggestedLength:h}=Np({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=h||this._contentLength,this._filename=Mp(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new yn("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Lp(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class Ry{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const l=new Headers(t.headers);l.append("Range",`bytes=${e}-${i-1}`);const o=a.url;fetch(o,Dp(l,this._withCredentials,this._abortController)).then(u=>{const h=Pl(u.url);if(h!==t._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${t._responseOrigin}".`);if(!Op(u.status))throw er(u.status,o);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Lp(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const uu=200,hu=206;function Ny(p){const t=p.response;return typeof t!="string"?t:Za(t).buffer}class My{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:i}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Rp(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,a=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[l,o]of this.headers)e.setRequestHeader(l,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=hu):a.expectedStatus=uu,e.responseType="arraybuffer",le(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){const i=this.pendingRequests[t];i&&i.onProgress?.(e)}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const a=i.xhr;if(a.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){i.onError(a.status);return}const l=a.status||uu;if(!(l===uu&&i.expectedStatus===hu)&&l!==i.expectedStatus){i.onError(a.status);return}const u=Ny(a);if(l===hu){const h=a.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);d?i.onDone({begin:parseInt(d[1],10),chunk:u}):(xt('Missing or invalid "Content-Range" header.'),i.onError(0))}else u?i.onDone({begin:0,chunk:u}):i.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class Oy{constructor(t){this._source=t,this._manager=new My(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return le(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Dy(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new Ly(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Dy{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Pl(e.responseURL);const i=e.getAllResponseHeaders(),a=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[h,...d]=u.split(": ");return[h,d.join(": ")]}):[]),{allowRangeRequests:l,suggestedLength:o}=Np({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});l&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=Mp(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=er(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Ly{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=Pl(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=er(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Iy=/^[a-z][a-z0-9\-+.]+:/i;function ky(p){if(Iy.test(p))return new URL(p);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(p))}class _y{constructor(t){this.source=t,this.url=ky(t.url),le(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return le(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new jy(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Py(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class jy{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=er(0,this._url.href)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new yn("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Py{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const l=process.getBuiltinModule("fs");this._setReadableStream(l.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Ha=Symbol("INITIAL_DATA");class Ip{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Ha}}get(t,e=null){if(e){const a=this.#e(t);return a.promise.then(()=>e(a.data)),null}const i=this.#t[t];if(!i||i.data===Ha)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=this.#t[t];return!!e&&e.data!==Ha}delete(t){const e=this.#t[t];return!e||e.data===Ha?!1:(delete this.#t[t],!0)}resolve(t,e=null){const i=this.#e(t);i.data=e,i.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==Ha&&(yield[t,e])}}}const By=1e5,op=30;class Ne{#t=Promise.withResolvers();#e=null;#s=!1;#n=!!globalThis.FontInspector?.enabled;#a=null;#i=null;#l=0;#r=0;#h=null;#o=null;#d=0;#u=0;#f=Object.create(null);#g=[];#p=null;#c=[];#m=new WeakMap;#v=null;static#y=new Map;static#x=new Map;static#A=new WeakMap;static#S=null;static#T=new Set;constructor({textContentSource:t,container:e,viewport:i}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(h){h.enqueue(t),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#o=e,this.#u=i.scale*Cs.pixelRatio,this.#d=i.rotation,this.#i={div:null,properties:null,ctx:null};const{pageWidth:a,pageHeight:l,pageX:o,pageY:u}=i.rawDims;this.#v=[1,0,0,-1,-o,u+l],this.#r=a,this.#l=l,Ne.#D(),Gn(e,i),this.#t.promise.finally(()=>{Ne.#T.delete(this),this.#i=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Ae.platform;return Ot(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#h.read().then(({value:e,done:i})=>{if(i){this.#t.resolve();return}this.#a??=e.lang,Object.assign(this.#f,e.styles),this.#R(e.items),t()},this.#t.reject)};return this.#h=this.#p.getReader(),Ne.#T.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const i=t.scale*Cs.pixelRatio,a=t.rotation;if(a!==this.#d&&(e?.(),this.#d=a,Gn(this.#o,{rotation:a})),i!==this.#u){e?.(),this.#u=i;const l={div:null,properties:null,ctx:Ne.#N(this.#a)};for(const o of this.#c)l.properties=this.#m.get(o),l.div=o,this.#E(l)}}cancel(){const t=new yn("TextLayer task cancelled.");this.#h?.cancel(t).catch(()=>{}),this.#h=null,this.#t.reject(t)}get textDivs(){return this.#c}get textContentItemsStr(){return this.#g}#R(t){if(this.#s)return;this.#i.ctx??=Ne.#N(this.#a);const e=this.#c,i=this.#g;for(const a of t){if(e.length>By){xt("Ignoring additional textDivs for performance reasons."),this.#s=!0;return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const l=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),a.id!==null&&this.#e.setAttribute("id",`${a.id}`),l.append(this.#e)}else a.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}i.push(a.str),this.#M(a)}}#M(t){const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#c.push(e);const a=ft.transform(this.#v,t.transform);let l=Math.atan2(a[1],a[0]);const o=this.#f[t.fontName];o.vertical&&(l+=Math.PI/2);let u=this.#n&&o.fontSubstitution||o.fontFamily;u=Ne.fontFamilyMap.get(u)||u;const h=Math.hypot(a[2],a[3]),d=h*Ne.#L(u,o,this.#a);let f,m;l===0?(f=a[4],m=a[5]-d):(f=a[4]+d*Math.sin(l),m=a[5]-d*Math.cos(l));const y="calc(var(--total-scale-factor) *",b=e.style;this.#e===this.#o?(b.left=`${(100*f/this.#r).toFixed(2)}%`,b.top=`${(100*m/this.#l).toFixed(2)}%`):(b.left=`${y}${f.toFixed(2)}px)`,b.top=`${y}${m.toFixed(2)}px)`),b.fontSize=`${y}${(Ne.#S*h).toFixed(2)}px)`,b.fontFamily=u,i.fontSize=h,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#n&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),l!==0&&(i.angle=l*(180/Math.PI));let A=!1;if(t.str.length>1)A=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const x=Math.abs(t.transform[0]),w=Math.abs(t.transform[3]);x!==w&&Math.max(x,w)/Math.min(x,w)>1.5&&(A=!0)}if(A&&(i.canvasWidth=o.vertical?t.height:t.width),this.#m.set(e,i),this.#i.div=e,this.#i.properties=i,this.#E(this.#i),i.hasText&&this.#e.append(e),i.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),this.#e.append(x)}}#E(t){const{div:e,properties:i,ctx:a}=t,{style:l}=e;let o="";if(Ne.#S>1&&(o=`scale(${1/Ne.#S})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:u}=l,{canvasWidth:h,fontSize:d}=i;Ne.#C(a,d*this.#u,u);const{width:f}=a.measureText(e.textContent);f>0&&(o=`scaleX(${h*this.#u/f}) ${o}`)}i.angle!==0&&(o=`rotate(${i.angle}deg) ${o}`),o.length>0&&(l.transform=o)}static cleanup(){if(!(this.#T.size>0)){this.#y.clear();for(const{canvas:t}of this.#x.values())t.remove();this.#x.clear()}}static#N(t=null){let e=this.#x.get(t||="");if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#x.set(t,e),this.#A.set(e,{size:0,family:""})}return e}static#C(t,e,i){const a=this.#A.get(t);e===a.size&&i===a.family||(t.font=`${e}px ${i}`,a.size=e,a.family=i)}static#D(){if(this.#S!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#S=t.getBoundingClientRect().height,t.remove()}static#L(t,e,i){const a=this.#y.get(t);if(a)return a;const l=this.#N(i);l.canvas.width=l.canvas.height=op,this.#C(l,op,t);const o=l.measureText(""),u=o.fontBoundingBoxAscent,h=Math.abs(o.fontBoundingBoxDescent);l.canvas.width=l.canvas.height=0;let d=.8;return u?d=u/(u+h):(Ae.platform.isFirefox&&xt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?d=e.ascent:e.descent&&(d=1+e.descent)),this.#y.set(t,d),d}}class Wa{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function a(l){if(!l)return;let o=null;const u=l.name;if(u==="#text")o=l.value;else if(Wa.shouldBuildText(u))l?.attributes?.textContent?o=l.attributes.textContent:l.value&&(o=l.value);else return;if(o!==null&&e.push({str:o}),!!l.children)for(const h of l.children)a(h)}return a(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const zy=100;function kp(p={}){typeof p=="string"||p instanceof URL?p={url:p}:(p instanceof ArrayBuffer||ArrayBuffer.isView(p))&&(p={data:p});const t=new ku,{docId:e}=t,i=p.url?Kv(p.url):null,a=p.data?Wv(p.data):null,l=p.httpHeaders||null,o=p.withCredentials===!0,u=p.password??null,h=p.range instanceof _p?p.range:null,d=Number.isInteger(p.rangeChunkSize)&&p.rangeChunkSize>0?p.rangeChunkSize:2**16;let f=p.worker instanceof Qa?p.worker:null;const m=p.verbosity,y=typeof p.docBaseUrl=="string"&&!_l(p.docBaseUrl)?p.docBaseUrl:null,b=bl(p.cMapUrl),A=p.cMapPacked!==!1,x=p.CMapReaderFactory||(Me?ny:Qg),w=bl(p.iccUrl),T=bl(p.standardFontDataUrl),O=p.StandardFontDataFactory||(Me?iy:Zg),R=bl(p.wasmUrl),M=p.WasmFactory||(Me?ay:qg),C=p.stopAtErrors!==!0,L=Number.isInteger(p.maxImageSize)&&p.maxImageSize>-1?p.maxImageSize:-1,_=p.isEvalSupported!==!1,z=typeof p.isOffscreenCanvasSupported=="boolean"?p.isOffscreenCanvasSupported:!Me,G=typeof p.isImageDecoderSupported=="boolean"?p.isImageDecoderSupported:!Me&&(Ae.platform.isFirefox||!globalThis.chrome),Q=Number.isInteger(p.canvasMaxAreaInBytes)?p.canvasMaxAreaInBytes:-1,J=typeof p.disableFontFace=="boolean"?p.disableFontFace:Me,at=p.fontExtraProperties===!0,Y=p.enableXfa===!0,it=p.ownerDocument||globalThis.document,lt=p.disableRange===!0,D=p.disableStream===!0,j=p.disableAutoFetch===!0,st=p.pdfBug===!0,gt=p.CanvasFactory||(Me?sy:Jv),k=p.FilterFactory||(Me?ey:ty),K=p.enableHWA===!0,nt=p.useWasm!==!1,et=h?h.length:p.length??NaN,ot=typeof p.useSystemFonts=="boolean"?p.useSystemFonts:!Me&&!J,rt=typeof p.useWorkerFetch=="boolean"?p.useWorkerFetch:!!(x===Qg&&O===Zg&&M===qg&&b&&T&&R&&Ya(b,document.baseURI)&&Ya(T,document.baseURI)&&Ya(R,document.baseURI)),X=null;Cv(m);const $={canvasFactory:new gt({ownerDocument:it,enableHWA:K}),filterFactory:new k({docId:e,ownerDocument:it}),cMapReaderFactory:rt?null:new x({baseUrl:b,isCompressed:A}),standardFontDataFactory:rt?null:new O({baseUrl:T}),wasmFactory:rt?null:new M({baseUrl:R})};f||(f=Qa.create({verbosity:m,port:zi.workerPort}),t._worker=f);const tt={docId:e,apiVersion:"5.3.93",data:a,password:u,disableAutoFetch:j,rangeChunkSize:d,length:et,docBaseUrl:y,enableXfa:Y,evaluatorOptions:{maxImageSize:L,disableFontFace:J,ignoreErrors:C,isEvalSupported:_,isOffscreenCanvasSupported:z,isImageDecoderSupported:G,canvasMaxAreaInBytes:Q,fontExtraProperties:at,useSystemFonts:ot,useWasm:nt,useWorkerFetch:rt,cMapUrl:b,iccUrl:w,standardFontDataUrl:T,wasmUrl:R}},ht={ownerDocument:it,pdfBug:st,styleElement:X,loadingParams:{disableAutoFetch:j,enableXfa:Y}};return f.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const At=f.messageHandler.sendWithPromise("GetDocRequest",tt,a?[a.buffer]:null);let Rt;if(h)Rt=new Ay(h,{disableRange:lt,disableStream:D});else if(!a){if(!i)throw new Error("getDocument - no `url` parameter provided.");const Zt=Ya(i)?Ty:Me?_y:Oy;Rt=new Zt({url:i,length:et,httpHeaders:l,withCredentials:o,rangeChunkSize:d,disableRange:lt,disableStream:D})}return At.then(Zt=>{if(t.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const pe=new Xa(e,Zt,f.port),cs=new Hy(pe,t,Rt,ht,$);t._transport=cs,pe.send("Ready",null)})}).catch(t._capability.reject),t}class ku{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${ku.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class _p{#t=Promise.withResolvers();#e=[];#s=[];#n=[];#a=[];constructor(t,e,i=!1,a=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=a}addRangeListener(t){this.#a.push(t)}addProgressListener(t){this.#n.push(t)}addProgressiveReadListener(t){this.#s.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const i of this.#a)i(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const i of this.#n)i(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#s)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){Ut("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Fy{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ot(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class Uy{#t=!1;constructor(t,e,i,a=!1){this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=a?new $g:null,this._pdfBug=a,this.commonObjs=i.commonObjs,this.objs=new Ip,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:a=0,dontFlip:l=!1}={}){return new Ja({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:a,dontFlip:l})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ot(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:e,intent:i="display",annotationMode:a=mn.ENABLE,transform:l=null,background:o=null,optionalContentConfigPromise:u=null,annotationCanvasMap:h=null,pageColors:d=null,printAnnotationStorage:f=null,isEditing:m=!1}){this._stats?.time("Overall");const y=this._transport.getRenderingIntent(i,a,f,m),{renderingIntent:b,cacheKey:A}=y;this.#t=!1,u||=this._transport.getOptionalContentConfig(b);let x=this._intentStates.get(A);x||(x=Object.create(null),this._intentStates.set(A,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const w=!!(b&Qe.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(y));const T=M=>{x.renderTasks.delete(O),w&&(this.#t=!0),this.#e(),M?(O.capability.reject(M),this._abortOperatorList({intentState:x,reason:M instanceof Error?M:new Error(M)})):O.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},O=new Pi({callback:T,params:{canvasContext:t,viewport:e,transform:l,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!w,pdfBug:this._pdfBug,pageColors:d});(x.renderTasks||=new Set).add(O);const R=O.task;return Promise.all([x.displayReadyCapability.promise,u]).then(([M,C])=>{if(this.destroyed){T();return}if(this._stats?.time("Rendering"),!(C.renderingIntent&b))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");O.initializeGraphics({transparency:M,optionalContentConfig:C}),O.operatorListChanged()}).catch(T),R}getOperatorList({intent:t="display",annotationMode:e=mn.ENABLE,printAnnotationStorage:i=null,isEditing:a=!1}={}){function l(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const o=this._transport.getRenderingIntent(t,e,i,a,!0);let u=this._intentStates.get(o.cacheKey);u||(u=Object.create(null),this._intentStates.set(o.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=l,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Wa.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,a){function l(){o.read().then(function({value:h,done:d}){if(d){i(u);return}u.lang??=h.lang,Object.assign(u.styles,h.styles),u.items.push(...h.items),l()},a)}const o=e.getReader(),u={items:[],styles:Object.create(null),lang:null};l()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new $g),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const i=this._intentStates.get(e);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let i=0,a=t.length;i<a;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:a}){const{map:l,transfer:o}=i,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:l,modifiedIds:a},o).getReader(),d=this._intentStates.get(e);d.streamReader=h;const f=()=>{h.read().then(({value:m,done:y})=>{if(y){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,d),f())},m=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const y of d.renderTasks)y.operatorListChanged();this.#e()}if(d.displayReadyCapability)d.displayReadyCapability.reject(m);else if(d.opListReadCapability)d.opListReadCapability.reject(m);else throw m}})};f()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof Tu){let a=zy;e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},a);return}}if(t.streamReader.cancel(new yn(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,l]of this._intentStates)if(l===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}var vn,fs,Vs,Fn,Dl,Un,Hn,De,Cl,jp,Pp,$a,Fi,Rl;const Xt=class Xt{constructor({name:t=null,port:e=null,verbosity:i=Rv()}={}){xs(this,De);xs(this,vn,Promise.withResolvers());xs(this,fs,null);xs(this,Vs,null);xs(this,Fn,null);if(this.name=t,this.destroyed=!1,this.verbosity=i,e){if(Yt(Xt,Hn).has(e))throw new Error("Cannot use more than one PDFWorker per port.");Yt(Xt,Hn).set(e,this),As(this,De,jp).call(this,e)}else As(this,De,Pp).call(this)}get promise(){return Yt(this,vn).promise}get port(){return Yt(this,Vs)}get messageHandler(){return Yt(this,fs)}destroy(){this.destroyed=!0,Yt(this,Fn)?.terminate(),Pe(this,Fn,null),Yt(Xt,Hn).delete(Yt(this,Vs)),Pe(this,Vs,null),Yt(this,fs)?.destroy(),Pe(this,fs,null)}static create(t){const e=Yt(this,Hn).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Xt(t)}static get workerSrc(){if(zi.workerSrc)return zi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ot(this,"_setupFakeWorkerGlobal",(async()=>Yt(this,Fi,Rl)?Yt(this,Fi,Rl):(await import(this.workerSrc)).WorkerMessageHandler)())}};vn=new WeakMap,fs=new WeakMap,Vs=new WeakMap,Fn=new WeakMap,Dl=new WeakMap,Un=new WeakMap,Hn=new WeakMap,De=new WeakSet,Cl=function(){Yt(this,vn).resolve(),Yt(this,fs).send("configure",{verbosity:this.verbosity})},jp=function(t){Pe(this,Vs,t),Pe(this,fs,new Xa("main","worker",t)),Yt(this,fs).on("ready",()=>{}),As(this,De,Cl).call(this)},Pp=function(){if(Yt(Xt,Un)||Yt(Xt,Fi,Rl)){As(this,De,$a).call(this);return}let{workerSrc:t}=Xt;try{Xt._isSameOrigin(window.location,t)||(t=Xt._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new Xa("main","worker",e),a=()=>{l.abort(),i.destroy(),e.terminate(),this.destroyed?Yt(this,vn).reject(new Error("Worker was destroyed")):As(this,De,$a).call(this)},l=new AbortController;e.addEventListener("error",()=>{Yt(this,Fn)||a()},{signal:l.signal}),i.on("test",u=>{if(l.abort(),this.destroyed||!u){a();return}Pe(this,fs,i),Pe(this,Vs,e),Pe(this,Fn,e),As(this,De,Cl).call(this)}),i.on("ready",u=>{if(l.abort(),this.destroyed){a();return}try{o()}catch{As(this,De,$a).call(this)}});const o=()=>{const u=new Uint8Array;i.send("test",u,[u.buffer])};o();return}catch{kl("The worker has been disabled.")}As(this,De,$a).call(this)},$a=function(){Yt(Xt,Un)||(xt("Setting up fake worker."),Pe(Xt,Un,!0)),Xt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){Yt(this,vn).reject(new Error("Worker was destroyed"));return}const e=new qv;Pe(this,Vs,e);const i=`fake${Ig(Xt,Dl)._++}`,a=new Xa(i+"_worker",i,e);t.setup(a,e),Pe(this,fs,new Xa(i,i+"_worker",e)),As(this,De,Cl).call(this)}).catch(t=>{Yt(this,vn).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Fi=new WeakSet,Rl=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},xs(Xt,Fi),xs(Xt,Dl,0),xs(Xt,Un,!1),xs(Xt,Hn,new WeakMap),Me&&(Pe(Xt,Un,!0),zi.workerSrc||="./pdf.worker.mjs"),Xt._isSameOrigin=(t,e)=>{const i=URL.parse(t);if(!i?.origin||i.origin==="null")return!1;const a=new URL(e,i);return i.origin===a.origin},Xt._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Xt.fromPort=t=>{if(zv("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Xt.create(t)};let Qa=Xt;class Hy{#t=new Map;#e=new Map;#s=new Map;#n=new Map;#a=null;constructor(t,e,i,a,l){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Ip,this.fontLoader=new Xv({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=l.canvasFactory,this.filterFactory=l.filterFactory,this.cMapReaderFactory=l.cMapReaderFactory,this.standardFontDataFactory=l.standardFontDataFactory,this.wasmFactory=l.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#i(t,e=null){const i=this.#t.get(t);if(i)return i;const a=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,a),a}get annotationStorage(){return Ot(this,"annotationStorage",new Ou)}getRenderingIntent(t,e=mn.ENABLE,i=null,a=!1,l=!1){let o=Qe.DISPLAY,u=mu;switch(t){case"any":o=Qe.ANY;break;case"display":break;case"print":o=Qe.PRINT;break;default:xt(`getRenderingIntent - invalid intent: ${t}`)}const h=o&Qe.PRINT&&i instanceof Ap?i:this.annotationStorage;switch(e){case mn.DISABLE:o+=Qe.ANNOTATIONS_DISABLE;break;case mn.ENABLE:break;case mn.ENABLE_FORMS:o+=Qe.ANNOTATIONS_FORMS;break;case mn.ENABLE_STORAGE:o+=Qe.ANNOTATIONS_STORAGE,u=h.serializable;break;default:xt(`getRenderingIntent - invalid annotationMode: ${e}`)}a&&(o+=Qe.IS_EDITING),l&&(o+=Qe.OPLIST);const{ids:d,hash:f}=h.modifiedIds,m=[o,u.hash,f];return{renderingIntent:o,cacheKey:m.join("_"),annotationStorageSerializable:u,modifiedIds:d}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of this.#e.values())t.push(i._destroy());this.#e.clear(),this.#s.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Ne.cleanup(),this._networkStream?.cancelAllRequests(new yn("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,a)=>{le(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=l=>{this._lastProgress={loaded:l.loaded,total:l.total}},a.onPull=()=>{this._fullReader.read().then(function({value:l,done:o}){if(o){a.close();return}le(l instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{a.error(l)})},a.onCancel=l=>{this._fullReader.cancel(l),a.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async i=>{await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:l,contentLength:o}=this._fullReader;return(!a||!l)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{e.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:a,isRangeSupported:l,contentLength:o}}),t.on("GetRangeReader",(i,a)=>{le(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const l=this._networkStream.getRangeReader(i.begin,i.end);if(!l){a.close();return}a.onPull=()=>{l.read().then(function({value:o,done:u}){if(u){a.close();return}le(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{l.cancel(o),a.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new Fy(i,this))}),t.on("DocException",i=>{e._capability.reject(Be(i))}),t.on("PasswordRequest",i=>{this.#a=Promise.withResolvers();try{if(!e.onPassword)throw Be(i);const a=l=>{l instanceof Error?this.#a.reject(l):this.#a.resolve({password:l})};e.onPassword(a,i.code)}catch(a){this.#a.reject(a)}return this.#a.promise}),t.on("DataLoaded",i=>{e.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;this.#e.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,a,l])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(a){case"Font":if("error"in l){const d=l.error;xt(`Error during font loading: ${d}`),this.commonObjs.resolve(i,d);break}const o=this._params.pdfBug&&globalThis.FontInspector?.enabled?(d,f)=>globalThis.FontInspector.fontAdded(d,f):null,u=new $v(l,o);this.fontLoader.bind(u).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!u.fontExtraProperties&&u.data&&(u.data=null),this.commonObjs.resolve(i,u)});break;case"CopyLocalImage":const{imageRef:h}=l;le(h,"The imageRef must be defined.");for(const d of this.#e.values())for(const[,f]of d.objs)if(f?.ref===h)return f.dataLen?(this.commonObjs.resolve(i,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,l);break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([i,a,l,o])=>{if(this.destroyed)return;const u=this.#e.get(a);if(!u.objs.has(i)){if(u._intentStates.size===0){o?.bitmap?.close();return}switch(l){case"Image":case"Pattern":u.objs.resolve(i,o);break;default:throw new Error(`Got unknown object type ${l}`)}}}),t.on("DocProgress",i=>{this.destroyed||e.onProgress?.({loaded:i.loaded,total:i.total})}),t.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[i.type];if(!a)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&xt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=this.#s.get(e);if(i)return i;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&this.#n.set(l.refStr,t);const o=new Uy(e,l,this,this._params.pdfBug);return this.#e.set(e,o),o});return this.#s.set(e,a),a}getPageIndex(t){return vu(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#i("GetFieldObjects")}hasJSActions(){return this.#i("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#i("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#i("GetOptionalContentConfig").then(e=>new xy(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(a=>({info:a[0],metadata:a[1]?new yy(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Ne.cleanup()}}cachedPageNumber(t){if(!vu(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#n.get(e)??null}}class Gy{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class Pi{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:a,annotationCanvasMap:l,operatorList:o,pageIndex:u,canvasFactory:h,filterFactory:d,useRequestAnimationFrame:f=!1,pdfBug:m=!1,pageColors:y=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=a,this.annotationCanvasMap=l,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=d,this._pdfBug=m,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Gy(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(Pi.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Pi.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:a,transform:l,background:o}=this.params;this.gfx=new Bi(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:l,viewport:a,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),Pi.#e.delete(this._canvas),t||=new Tu(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Pi.#e.delete(this._canvas),this.callback())))}}const Vy="5.3.93",Yy="cbeef3233";It(531);function cp(p){return Math.floor(Math.max(0,Math.min(1,p))*255).toString(16).padStart(2,"0")}function Ga(p){return Math.max(0,Math.min(255,255*p))}class up{static CMYK_G([t,e,i,a]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Ga(t),[t,t,t]}static G_HTML([t]){const e=cp(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(Ga)}static RGB_HTML(t){return`#${t.map(cp).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,i+a),1-Math.min(1,e+a)]}static CMYK_rgb([t,e,i,a]){return[Ga(1-Math.min(1,t+a)),Ga(1-Math.min(1,i+a)),Ga(1-Math.min(1,e+a))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const a=1-t,l=1-e,o=1-i,u=Math.min(a,l,o);return["CMYK",a,l,o,u]}}class Xy{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),i||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${e}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Ut("Abstract method `_createSVG` called.")}}class Ol extends Xy{_createSVG(t){return document.createElementNS(Hs,t)}}class Bp{static setupStorage(t,e,i,a,l){const o=a.getValue(e,{value:null});switch(i.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),l==="print")break;t.addEventListener("input",u=>{a.setValue(e,{value:u.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(o.value===i.attributes.xfaOn?t.setAttribute("checked",!0):o.value===i.attributes.xfaOff&&t.removeAttribute("checked"),l==="print")break;t.addEventListener("change",u=>{a.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),l==="print")break;t.addEventListener("input",u=>{a.setValue(e,{value:u.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const u of i.children)u.attributes.value===o.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const h=u.target.options,d=h.selectedIndex===-1?"":h[h.selectedIndex].value;a.setValue(e,{value:d})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:a,linkService:l}){const{attributes:o}=e,u=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${a}`);for(const[h,d]of Object.entries(o))if(d!=null)switch(h){case"class":d.length&&t.setAttribute(h,d.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",d);break;case"style":Object.assign(t.style,d);break;case"textContent":t.textContent=d;break;default:(!u||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,d)}u&&l.addLinkAttributes(t,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(t,o.dataId,e,i)}static render(t){const e=t.annotationStorage,i=t.linkService,a=t.xfaHtml,l=t.intent||"display",o=document.createElement(a.name);a.attributes&&this.setAttributes({html:o,element:a,intent:l,linkService:i});const u=l!=="richText",h=t.div;if(h.append(o),t.viewport){const m=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=m}u&&h.setAttribute("class","xfaLayer xfaFont");const d=[];if(a.children.length===0){if(a.value){const m=document.createTextNode(a.value);o.append(m),u&&Wa.shouldBuildText(a.name)&&d.push(m)}return{textDivs:d}}const f=[[a,-1,o]];for(;f.length>0;){const[m,y,b]=f.at(-1);if(y+1===m.children.length){f.pop();continue}const A=m.children[++f.at(-1)[1]];if(A===null)continue;const{name:x}=A;if(x==="#text"){const T=document.createTextNode(A.value);d.push(T),b.append(T);continue}const w=A?.attributes?.xmlns?document.createElementNS(A.attributes.xmlns,x):document.createElement(x);if(b.append(w),A.attributes&&this.setAttributes({html:w,element:A,storage:e,intent:l,linkService:i}),A.children?.length>0)f.push([A,-1,w]);else if(A.value){const T=document.createTextNode(A.value);u&&Wa.shouldBuildText(x)&&d.push(T),w.append(T)}}for(const m of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:d}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const $y=9,Vn=new WeakSet;class hp{static create(t){switch(t.data.annotationType){case ae.LINK:return new zp(t);case ae.TEXT:return new Ky(t);case ae.WIDGET:switch(t.data.fieldType){case"Tx":return new Wy(t);case"Btn":return t.data.radioButton?new Fp(t):t.data.checkBox?new Zy(t):new qy(t);case"Ch":return new Jy(t);case"Sig":return new Qy(t)}return new Xn(t);case ae.POPUP:return new bu(t);case ae.FREETEXT:return new Up(t);case ae.LINE:return new eb(t);case ae.SQUARE:return new sb(t);case ae.CIRCLE:return new nb(t);case ae.POLYLINE:return new Hp(t);case ae.CARET:return new ab(t);case ae.INK:return new _u(t);case ae.POLYGON:return new ib(t);case ae.HIGHLIGHT:return new Gp(t);case ae.UNDERLINE:return new rb(t);case ae.SQUIGGLY:return new lb(t);case ae.STRIKEOUT:return new ob(t);case ae.STAMP:return new Vp(t);case ae.FILEATTACHMENT:return new cb(t);default:return new ee(t)}}}class ee{#t=null;#e=!1;#s=null;constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:a=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),a&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return ee._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;this.#t||={rect:this.data.rect.slice(0)};const{rect:e}=t;e&&this.#n(e),this.#s?.popup.updateEdited(t)}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#s?.popup.resetEdited(),this.#t=null)}#n(t){const{container:{style:e},data:{rect:i,rotation:a},parent:{viewport:{rawDims:{pageWidth:l,pageHeight:o,pageX:u,pageY:h}}}}=this;i?.splice(0,4,...t),e.left=`${100*(t[0]-u)/l}%`,e.top=`${100*(o-t[3]+h)/o}%`,a===0?(e.width=`${100*(t[2]-t[0])/l}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(a)}_createContainer(t){const{data:e,parent:{page:i,viewport:a}}=this,l=document.createElement("section");l.setAttribute("data-annotation-id",e.id),this instanceof Xn||(l.tabIndex=0);const{style:o}=l;if(o.zIndex=this.parent.zIndex++,e.alternativeText&&(l.title=e.alternativeText),e.noRotate&&l.classList.add("norotate"),!e.rect||this instanceof bu){const{rotation:x}=e;return!e.hasOwnCanvas&&x!==0&&this.setRotation(x,l),l}const{width:u,height:h}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const x=e.borderStyle.horizontalCornerRadius,w=e.borderStyle.verticalCornerRadius;if(x>0||w>0){const O=`calc(${x}px * var(--total-scale-factor)) / calc(${w}px * var(--total-scale-factor))`;o.borderRadius=O}else if(this instanceof Fp){const O=`calc(${u}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;o.borderRadius=O}switch(e.borderStyle.style){case Ii.SOLID:o.borderStyle="solid";break;case Ii.DASHED:o.borderStyle="dashed";break;case Ii.BEVELED:xt("Unimplemented border style: beveled");break;case Ii.INSET:xt("Unimplemented border style: inset");break;case Ii.UNDERLINE:o.borderBottomStyle="solid";break}const T=e.borderColor||null;T?(this.#e=!0,o.borderColor=ft.makeHexColor(T[0]|0,T[1]|0,T[2]|0)):o.borderWidth=0}const d=ft.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:f,pageHeight:m,pageX:y,pageY:b}=a.rawDims;o.left=`${100*(d[0]-y)/f}%`,o.top=`${100*(d[1]-b)/m}%`;const{rotation:A}=e;return e.hasOwnCanvas||A===0?(o.width=`${100*u/f}%`,o.height=`${100*h/m}%`):this.setRotation(A,l),l}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:a}=this.parent.viewport.rawDims;let{width:l,height:o}=this;t%180!==0&&([l,o]=[o,l]),e.style.width=`${100*l/i}%`,e.style.height=`${100*o/a}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,a)=>{const l=a.detail[e],o=l[0],u=l.slice(1);a.target.style[i]=up[`${o}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[i]:up[`${o}_rgb`](u)})};return Ot(this,"_commonActions",{display:e=>{const{display:i}=e.detail,a=i%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const a of Object.keys(e.detail))(t[a]||i[a])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[a,l]of Object.entries(e)){const o=i[a];if(o){const u={detail:{[a]:l},target:t};o(u),delete e[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,a,l]=this.data.rect.map(x=>Math.fround(x));if(t.length===8){const[x,w,T,O]=t.subarray(2,6);if(a===x&&l===w&&e===T&&i===O)return}const{style:o}=this.container;let u;if(this.#e){const{borderColor:x,borderWidth:w}=o;o.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${x}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}const h=a-e,d=l-i,{svgFactory:f}=this,m=f.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0),m.role="none";const y=f.createElement("defs");m.append(y);const b=f.createElement("clipPath"),A=`clippath_${this.data.id}`;b.setAttribute("id",A),b.setAttribute("clipPathUnits","objectBoundingBox"),y.append(b);for(let x=2,w=t.length;x<w;x+=8){const T=t[x],O=t[x+1],R=t[x+2],M=t[x+3],C=f.createElement("rect"),L=(R-e)/h,_=(l-O)/d,z=(T-R)/h,G=(O-M)/d;C.setAttribute("x",L),C.setAttribute("y",_),C.setAttribute("width",z),C.setAttribute("height",G),b.append(C),u?.push(`<rect vector-effect="non-scaling-stroke" x="${L}" y="${_}" width="${z}" height="${G}"/>`)}this.#e&&(u.push("</g></svg>')"),o.backgroundImage=u.join("")),this.container.append(m),this.container.style.clipPath=`url(#${A})`}_createPopup(){const{data:t}=this,e=this.#s=new bu({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},parent:this.parent,elements:[this]});this.parent.div.append(e.render())}render(){Ut("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:l,id:o,exportValues:u}of a){if(l===-1||o===e)continue;const h=typeof u=="string"?u:null,d=document.querySelector(`[data-element-id="${o}"]`);if(d&&!Vn.has(d)){xt(`_getElementsByName - element not allowed: ${o}`);continue}i.push({id:o,exportValue:h,domElement:d})}return i}for(const a of document.getElementsByName(t)){const{exportValue:l}=a,o=a.getAttribute("data-element-id");o!==e&&Vn.has(a)&&i.push({id:o,exportValue:l,domElement:a})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class zp extends ee{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let a=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(i,t.action),a=!0):t.attachment?(this.#e(i,t.attachment,t.attachmentDest),a=!0):t.setOCGState?(this.#s(i,t.setOCGState),a=!0):t.dest?(this._bindLink(i,t.dest),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),a=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(i,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(i),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t()}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),this.#t()}#e(t,e,i=null){t.href=this.linkService.getAnchorUrl(""),e.description&&(t.title=e.description),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,i),!1),this.#t()}#s(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(e.actions)){const l=i.get(a);l&&(t[l]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:a}}),!1))}t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){xt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{i?.();const{fields:a,refs:l,include:o}=e,u=[];if(a.length!==0||l.length!==0){const f=new Set(l);for(const m of a){const y=this._fieldObjects[m]||[];for(const{id:b}of y)f.add(b)}for(const m of Object.values(this._fieldObjects))for(const y of m)f.has(y.id)===o&&u.push(y)}else for(const f of Object.values(this._fieldObjects))u.push(...f);const h=this.annotationStorage,d=[];for(const f of u){const{id:m}=f;switch(d.push(m),f.type){case"text":{const b=f.defaultValue||"";h.setValue(m,{value:b});break}case"checkbox":case"radiobutton":{const b=f.defaultValue===f.exportValues;h.setValue(m,{value:b});break}case"combobox":case"listbox":{const b=f.defaultValue||"";h.setValue(m,{value:b});break}default:continue}const y=document.querySelector(`[data-element-id="${m}"]`);if(y){if(!Vn.has(y)){xt(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}}),!1}}}class Ky extends ee{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Xn extends ee{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Ae.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,a,l){i.includes("mouse")?t.addEventListener(i,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:l(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(i,o=>{if(i==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}l&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:l(o)}})})}_setEventListeners(t,e,i,a){for(const[l,o]of i)(o==="Action"||this.data.actions?.[o])&&((o==="Focus"||o==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,l,o,a),o==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):o==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":ft.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||$y,l=t.style;let o;const u=2,h=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-u),f=Math.round(d/(iu*a))||1,m=d/f;o=Math.min(a,h(m/iu))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-u);o=Math.min(a,h(d/iu))}l.fontSize=`calc(${o}px * var(--total-scale-factor))`,l.color=ft.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(l.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class Wy extends Xn{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,a){const l=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=i),l.setValue(o.id,{[a]:i})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let l=a.value||"";const o=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;o&&l.length>o&&(l=l.slice(0,o));let u=a.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:l,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??l,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",u??l),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Vn.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const d=this.data.dateFormat||this.data.timeFormat;d&&(i.title=d),this._setRequired(i,this.data.required),o&&(i.maxLength=o),i.addEventListener("input",m=>{t.setValue(e,{value:m.target.value}),this.setPropertyOnSiblings(i,"value",m.target.value,"value"),h.formattedValue=null}),i.addEventListener("resetform",m=>{const y=this.data.defaultFieldValue??"";i.value=h.userValue=y,h.formattedValue=null});let f=m=>{const{formattedValue:y}=h;y!=null&&(m.target.value=y),m.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",y=>{if(h.focused)return;const{target:b}=y;h.userValue&&(b.value=h.userValue),h.lastCommittedValue=b.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),i.addEventListener("updatefromsandbox",y=>{this.showElementAndHideCanvas(y.target);const b={value(A){h.userValue=A.detail.value??"",t.setValue(e,{value:h.userValue.toString()}),A.target.value=h.userValue},formattedValue(A){const{formattedValue:x}=A.detail;h.formattedValue=x,x!=null&&A.target!==document.activeElement&&(A.target.value=x),t.setValue(e,{formattedValue:x})},selRange(A){A.target.setSelectionRange(...A.detail.selRange)},charLimit:A=>{const{charLimit:x}=A.detail,{target:w}=A;if(x===0){w.removeAttribute("maxLength");return}w.setAttribute("maxLength",x);let T=h.userValue;!T||T.length<=x||(T=T.slice(0,x),w.value=h.userValue=T,t.setValue(e,{value:T}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,willCommit:!0,commitKey:1,selStart:w.selectionStart,selEnd:w.selectionEnd}}))}};this._dispatchEventFromSandbox(b,y)}),i.addEventListener("keydown",y=>{h.commitKey=1;let b=-1;if(y.key==="Escape"?b=0:y.key==="Enter"&&!this.data.multiLine?b=2:y.key==="Tab"&&(h.commitKey=3),b===-1)return;const{value:A}=y.target;h.lastCommittedValue!==A&&(h.lastCommittedValue=A,h.userValue=A,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:A,willCommit:!0,commitKey:b,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}}))});const m=f;f=null,i.addEventListener("blur",y=>{if(!h.focused||!y.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{value:b}=y.target;h.userValue=b,h.lastCommittedValue!==b&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:b,willCommit:!0,commitKey:h.commitKey,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}}),m(y)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",y=>{h.lastCommittedValue=null;const{data:b,target:A}=y,{value:x,selectionStart:w,selectionEnd:T}=A;let O=w,R=T;switch(y.inputType){case"deleteWordBackward":{const M=x.substring(0,w).match(/\w*[^\w]*$/);M&&(O-=M[0].length);break}case"deleteWordForward":{const M=x.substring(w).match(/^[^\w]*\w*/);M&&(R+=M[0].length);break}case"deleteContentBackward":w===T&&(O-=1);break;case"deleteContentForward":w===T&&(R+=1);break}y.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,change:b||"",willCommit:!1,selStart:O,selEnd:R}})}),this._setEventListeners(i,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],y=>y.target.value)}if(f&&i.addEventListener("blur",f),this.data.comb){const y=(this.data.rect[2]-this.data.rect[0])/o;i.classList.add("comb"),i.style.letterSpacing=`calc(${y}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Qy extends Xn{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class Zy extends Xn{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let a=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(i,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const l=document.createElement("input");return Vn.add(l),l.setAttribute("data-element-id",i),l.disabled=e.readOnly,this._setRequired(l,this.data.required),l.type="checkbox",l.name=e.fieldName,a&&l.setAttribute("checked",!0),l.setAttribute("exportValue",e.exportValue),l.tabIndex=0,l.addEventListener("change",o=>{const{name:u,checked:h}=o.target;for(const d of this._getElementsByName(u,i)){const f=h&&d.exportValue===e.exportValue;d.domElement&&(d.domElement.checked=f),t.setValue(d.id,{value:f})}t.setValue(i,{value:h})}),l.addEventListener("resetform",o=>{const u=e.defaultFieldValue||"Off";o.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(l.addEventListener("updatefromsandbox",o=>{const u={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(i,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,o)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class Fp extends Xn{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let a=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof a=="string"&&(a=a!==e.buttonValue,t.setValue(i,{value:a})),a)for(const o of this._getElementsByName(e.fieldName,i))t.setValue(o.id,{value:!1});const l=document.createElement("input");if(Vn.add(l),l.setAttribute("data-element-id",i),l.disabled=e.readOnly,this._setRequired(l,this.data.required),l.type="radio",l.name=e.fieldName,a&&l.setAttribute("checked",!0),l.tabIndex=0,l.addEventListener("change",o=>{const{name:u,checked:h}=o.target;for(const d of this._getElementsByName(u,i))t.setValue(d.id,{value:!1});t.setValue(i,{value:h})}),l.addEventListener("resetform",o=>{const u=e.defaultFieldValue;o.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;l.addEventListener("updatefromsandbox",u=>{const h={value:d=>{const f=o===d.detail.value;for(const m of this._getElementsByName(d.target.name)){const y=f&&m.id===i;m.domElement&&(m.domElement.checked=y),t.setValue(m.id,{value:y})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class qy extends zp{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class Jy extends Xn{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");Vn.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=0;let l=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",f=>{const m=this.data.defaultFieldValue;for(const y of a.options)y.selected=y.value===m});for(const f of this.data.options){const m=document.createElement("option");m.textContent=f.displayValue,m.value=f.exportValue,i.value.includes(f.exportValue)&&(m.setAttribute("selected",!0),l=!1),a.append(m)}let o=null;if(l){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),a.prepend(f),o=()=>{f.remove(),a.removeEventListener("input",o),o=null},a.addEventListener("input",o)}const u=f=>{const m=f?"value":"textContent",{options:y,multiple:b}=a;return b?Array.prototype.filter.call(y,A=>A.selected).map(A=>A[m]):y.selectedIndex===-1?null:y[y.selectedIndex][m]};let h=u(!1);const d=f=>{const m=f.target.options;return Array.prototype.map.call(m,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",f=>{const m={value(y){o?.();const b=y.detail.value,A=new Set(Array.isArray(b)?b:[b]);for(const x of a.options)x.selected=A.has(x.value);t.setValue(e,{value:u(!0)}),h=u(!1)},multipleSelection(y){a.multiple=!0},remove(y){const b=a.options,A=y.detail.remove;b[A].selected=!1,a.remove(A),b.length>0&&Array.prototype.findIndex.call(b,w=>w.selected)===-1&&(b[0].selected=!0),t.setValue(e,{value:u(!0),items:d(y)}),h=u(!1)},clear(y){for(;a.length!==0;)a.remove(0);t.setValue(e,{value:null,items:[]}),h=u(!1)},insert(y){const{index:b,displayValue:A,exportValue:x}=y.detail.insert,w=a.children[b],T=document.createElement("option");T.textContent=A,T.value=x,w?w.before(T):a.append(T),t.setValue(e,{value:u(!0),items:d(y)}),h=u(!1)},items(y){const{items:b}=y.detail;for(;a.length!==0;)a.remove(0);for(const A of b){const{displayValue:x,exportValue:w}=A,T=document.createElement("option");T.textContent=x,T.value=w,a.append(T)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(e,{value:u(!0),items:d(y)}),h=u(!1)},indices(y){const b=new Set(y.detail.indices);for(const A of y.target.options)A.selected=b.has(A.index);t.setValue(e,{value:u(!0)}),h=u(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(m,f)}),a.addEventListener("input",f=>{const m=u(!0),y=u(!1);t.setValue(e,{value:m}),f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,change:y,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):a.addEventListener("input",function(f){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class bu extends ee{constructor(t){const{data:e,elements:i}=t;super(t,{isRenderable:ee._hasPopupData(e)}),this.elements=i,this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=new tb({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),i=[];for(const a of this.elements)a.popup=e,a.container.ariaHasPopup="dialog",i.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(a=>`${wu}${a}`).join(",")),this.container}}class tb{#t=this.#R.bind(this);#e=this.#C.bind(this);#s=this.#N.bind(this);#n=this.#E.bind(this);#a=null;#i=null;#l=null;#r=null;#h=null;#o=null;#d=null;#u=!1;#f=null;#g=null;#p=null;#c=null;#m=null;#v=null;#y=!1;constructor({container:t,color:e,elements:i,titleObj:a,modificationDate:l,contentsObj:o,richText:u,parent:h,rect:d,parentRect:f,open:m}){this.#i=t,this.#m=a,this.#l=o,this.#c=u,this.#o=h,this.#a=e,this.#p=d,this.#d=f,this.#h=i,this.#r=yp.toDateObject(l),this.trigger=i.flatMap(y=>y.getElementsToTriggerPopup());for(const y of this.trigger)y.addEventListener("click",this.#n),y.addEventListener("mouseenter",this.#s),y.addEventListener("mouseleave",this.#e),y.classList.add("popupTriggerArea");for(const y of i)y.container?.addEventListener("keydown",this.#t);this.#i.hidden=!0,m&&this.#E()}render(){if(this.#f)return;const t=this.#f=document.createElement("div");if(t.className="popup",this.#a){const l=t.style.outlineColor=ft.makeHexColor(...this.#a);t.style.backgroundColor=`color-mix(in srgb, ${l} 30%, white)`}const e=document.createElement("span");e.className="header";const i=document.createElement("h1");if(e.append(i),{dir:i.dir,str:i.textContent}=this.#m,t.append(e),this.#r){const l=document.createElement("time");l.classList.add("popupDate"),l.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),l.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#r.valueOf()})),l.dateTime=this.#r.toISOString(),e.append(l)}const a=this.#x;if(a)Bp.render({xfaHtml:a,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const l=this._formatContents(this.#l);t.append(l)}this.#i.append(t)}get#x(){const t=this.#c,e=this.#l;return t?.str&&(!e?.str||e.str===t.str)&&this.#c.html||null}get#A(){return this.#x?.attributes?.style?.fontSize||0}get#S(){return this.#x?.attributes?.style?.color||null}#T(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:this.#S,fontSize:this.#A?`calc(${this.#A}px * var(--total-scale-factor))`:""}};for(const l of t.split(`
`))e.push({name:"span",value:l,attributes:a});return i}_formatContents({str:t,dir:e}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=e;const a=t.split(/(?:\r\n?|\n)/);for(let l=0,o=a.length;l<o;++l){const u=a[l];i.append(document.createTextNode(u)),l<o-1&&i.append(document.createElement("br"))}return i}#R(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#u)&&this.#E()}updateEdited({rect:t,popupContent:e}){this.#v||={contentsObj:this.#l,richText:this.#c},t&&(this.#g=null),e&&(this.#c=this.#T(e),this.#l=null),this.#f?.remove(),this.#f=null}resetEdited(){this.#v&&({contentsObj:this.#l,richText:this.#c}=this.#v,this.#v=null,this.#f?.remove(),this.#f=null,this.#g=null)}#M(){if(this.#g!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:a,pageY:l}}}=this.#o;let o=!!this.#d,u=o?this.#d:this.#p;for(const A of this.#h)if(!u||ft.intersect(A.data.rect,u)!==null){u=A.data.rect,o=!0;break}const h=ft.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),f=o?u[2]-u[0]+5:0,m=h[0]+f,y=h[1];this.#g=[100*(m-a)/e,100*(y-l)/i];const{style:b}=this.#i;b.left=`${this.#g[0]}%`,b.top=`${this.#g[1]}%`}#E(){this.#u=!this.#u,this.#u?(this.#N(),this.#i.addEventListener("click",this.#n),this.#i.addEventListener("keydown",this.#t)):(this.#C(),this.#i.removeEventListener("click",this.#n),this.#i.removeEventListener("keydown",this.#t))}#N(){this.#f||this.render(),this.isVisible?this.#u&&this.#i.classList.add("focused"):(this.#M(),this.#i.hidden=!1,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)+1e3)}#C(){this.#i.classList.remove("focused"),!(this.#u||!this.isVisible)&&(this.#i.hidden=!0,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)-1e3)}forceHide(){this.#y=this.isVisible,this.#y&&(this.#i.hidden=!0)}maybeShow(){this.#y&&(this.#f||this.#N(),this.#y=!1,this.#i.hidden=!1)}get isVisible(){return this.#i.hidden===!1}}class Up extends ee{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=St.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class eb extends ee{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),l=this.#t=this.svgFactory.createElement("svg:line");return l.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),l.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),l.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),l.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),l.setAttribute("stroke-width",t.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class sb extends ee{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),l=t.borderStyle.width,o=this.#t=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",l/2),o.setAttribute("y",l/2),o.setAttribute("width",e-l),o.setAttribute("height",i-l),o.setAttribute("stroke-width",l||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class nb extends ee{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),l=t.borderStyle.width,o=this.#t=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",e/2),o.setAttribute("cy",i/2),o.setAttribute("rx",e/2-l/2),o.setAttribute("ry",i/2-l/2),o.setAttribute("stroke-width",l||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Hp extends ee{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:i,popupRef:a},width:l,height:o}=this;if(!e)return this.container;const u=this.svgFactory.create(l,o,!0);let h=[];for(let f=0,m=e.length;f<m;f+=2){const y=e[f]-t[0],b=t[3]-e[f+1];h.push(`${y},${b}`)}h=h.join(" ");const d=this.#t=this.svgFactory.createElement(this.svgElementName);return d.setAttribute("points",h),d.setAttribute("stroke-width",i.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),u.append(d),this.container.append(u),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class ib extends Hp{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ab extends ee{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class _u extends ee{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?St.HIGHLIGHT:St.INK}#s(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:i,borderStyle:a,popupRef:l}}=this,{transform:o,width:u,height:h}=this.#s(e,t),d=this.svgFactory.create(u,h,!0),f=this.#t=this.svgFactory.createElement("svg:g");d.append(f),f.setAttribute("stroke-width",a.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",o);for(let m=0,y=i.length;m<y;m++){const b=this.svgFactory.createElement(this.svgElementName);this.#e.push(b),b.setAttribute("points",i[m].join(",")),f.append(b)}return!l&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:i,rect:a}=t,l=this.#t;if(e>=0&&l.setAttribute("stroke-width",e||1),i)for(let o=0,u=this.#e.length;o<u;o++)this.#e[o].setAttribute("points",i[o].join(","));if(a){const{transform:o,width:u,height:h}=this.#s(this.data.rotation,a);l.parentElement.setAttribute("viewBox",`0 0 ${u} ${h}`),l.setAttribute("transform",o)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Gp extends ee{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=St.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class rb extends ee{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class lb extends ee{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class ob extends ee{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class Vp extends ee{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=St.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class cb extends ee{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let i;e.hasAppearance||e.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#e.bind(this)),this.#t=i;const{isMac:a}=Ae.platform;return t.addEventListener("keydown",l=>{l.key==="Enter"&&(a?l.metaKey:l.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class ju{#t=null;#e=null;#s=new Map;#n=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:a,page:l,viewport:o,structTreeLayer:u}){this.div=t,this.#t=e,this.#e=i,this.#n=u||null,this.page=l,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=a}hasEditableAnnotations(){return this.#s.size>0}async#a(t,e,i){const a=t.firstChild||t,l=a.id=`${wu}${e}`,o=await this.#n?.getAriaAttributes(l);if(o)for(const[u,h]of o)a.setAttribute(u,h);i?i.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,a,!1))}async render(t){const{annotations:e}=t,i=this.div;Gn(i,this.viewport);const a=new Map,l={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Ol,annotationStorage:t.annotationStorage||new Ou,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const o of e){if(o.noHTML)continue;const u=o.annotationType===ae.POPUP;if(u){const f=a.get(o.id);if(!f)continue;l.elements=f}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;l.data=o;const h=hp.create(l);if(!h.isRenderable)continue;if(!u&&o.popupRef){const f=a.get(o.popupRef);f?f.push(h):a.set(o.popupRef,[h])}const d=h.render();o.hidden&&(d.style.visibility="hidden"),await this.#a(d,o.id,l.elements),h._isEditable&&(this.#s.set(h.data.id,h),this._annotationEditorUIManager?.renderAnnotationElement(h))}this.#i()}async addLinkAnnotations(t,e){const i={data:null,layer:this.div,linkService:e,svgFactory:new Ol,parent:this};for(const a of t){a.borderStyle||=ju._defaultBorderStyle,i.data=a;const l=hp.create(i);if(!l.isRenderable)continue;const o=l.render();await this.#a(o,a.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,Gn(e,{rotation:t.rotation}),this.#i(),e.hidden=!1}#i(){if(!this.#e)return;const t=this.div;for(const[e,i]of this.#e){const a=t.querySelector(`[data-annotation-id="${e}"]`);if(!a)continue;i.className="annotationContent";const{firstChild:l}=a;l?l.nodeName==="CANVAS"?l.replaceWith(i):l.classList.contains("annotationContent")?l.after(i):l.before(i):a.append(i);const o=this.#s.get(e);o&&(o._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,a.id,i),o._hasNoCanvas=!1):o.canvas=i)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#s.values())}getEditableAnnotation(t){return this.#s.get(t)}static get _defaultBorderStyle(){return Ot(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Ii.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const El=/\r\n?|\n/g;class ue extends pt{#t;#e="";#s=`${this.id}-editor`;#n=null;#a;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=ue.prototype,e=l=>l.isEmpty(),i=bn.TRANSLATE_SMALL,a=bn.TRANSLATE_BIG;return Ot(this,"_keyboardManager",new tr([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:e}]]))}static _type="freetext";static _editorType=St.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#t=t.color||ue._defaultColor||pt._defaultLineColor,this.#a=t.fontSize||ue._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){pt.initialize(t,e);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Dt.FREETEXT_SIZE:ue._defaultFontSize=e;break;case Dt.FREETEXT_COLOR:ue._defaultColor=e;break}}updateParams(t,e){switch(t){case Dt.FREETEXT_SIZE:this.#i(e);break;case Dt.FREETEXT_COLOR:this.#l(e);break}}static get defaultPropertiesToUpdate(){return[[Dt.FREETEXT_SIZE,ue._defaultFontSize],[Dt.FREETEXT_COLOR,ue._defaultColor||pt._defaultLineColor]]}get propertiesToUpdate(){return[[Dt.FREETEXT_SIZE,this.#a],[Dt.FREETEXT_COLOR,this.#t]]}#i(t){const e=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-this.#a)*this.parentScale),this.#a=a,this.#h()},i=this.#a;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Dt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#l(t){const e=a=>{this.#t=this.editorDiv.style.color=a},i=this.#t;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Dt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-ue._internalPadding*t,-(ue._internalPadding+this.#a)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;const t=this._uiManager.combinedSignal(this.#n);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#s),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#r(){const t=[];this.editorDiv.normalize();let e=null;for(const i of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(ue.#o(i)),e=i);return t.join(`
`)}#h(){const[t,e]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:a,div:l}=this,o=l.style.display,u=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",a.div.append(this.div),i=l.getBoundingClientRect(),l.remove(),l.style.display=o,l.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#e,e=this.#e=this.#r().trimEnd();if(t===e)return;const i=a=>{if(this.#e=a,!a){this.remove();return}this.#d(),this._uiManager.rebuild(this),this.#h()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#h()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){ue._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#s),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#a}px * var(--total-scale-factor))`,i.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,l]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[u,h]=this.getInitialTranslation();[u,h]=this.pageTranslationToScreen(u,h);const[d,f]=this.pageDimensions,[m,y]=this.pageTranslation;let b,A;switch(this.rotation){case 0:b=t+(o[0]-m)/d,A=e+this.height-(o[1]-y)/f;break;case 90:b=t+(o[0]-m)/d,A=e-(o[1]-y)/f,[u,h]=[h,-u];break;case 180:b=t-this.width+(o[0]-m)/d,A=e-(o[1]-y)/f,[u,h]=[-u,-h];break;case 270:b=t+(o[0]-m-this.height*f)/d,A=e+(o[1]-y-this.width*d)/f,[u,h]=[-h,u];break}this.setAt(b*a,A*l,u,h)}else this._moveAfterPaste(t,e);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#o(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(El,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:i}=e;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const a=ue.#f(e.getData("text")||"").replaceAll(El,`
`);if(!a)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const o=l.getRangeAt(0);if(!a.includes(`
`)){o.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:u,startOffset:h}=o,d=[],f=[];if(u.nodeType===Node.TEXT_NODE){const b=u.parentElement;if(f.push(u.nodeValue.slice(h).replaceAll(El,"")),b!==this.editorDiv){let A=d;for(const x of this.editorDiv.childNodes){if(x===b){A=f;continue}A.push(ue.#o(x))}}d.push(u.nodeValue.slice(0,h).replaceAll(El,""))}else if(u===this.editorDiv){let b=d,A=0;for(const x of this.editorDiv.childNodes)A++===h&&(b=f),b.push(ue.#o(x))}this.#e=`${d.join(`
`)}${a}${f.join(`
`)}`,this.#d();const m=new Range;let y=Math.sumPrecise(d.map(b=>b.length));for(const{firstChild:b}of this.editorDiv.childNodes)if(b.nodeType===Node.TEXT_NODE){const A=b.nodeValue.length;if(y<=A){m.setStart(b,y),m.setEnd(b,y);break}y-=A}l.removeAllRanges(),l.addRange(m)}#d(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const t of this.#e.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#u(){return this.#e.replaceAll(" "," ")}static#f(t){return t.replaceAll(" "," ")}get contentDiv(){return this.editorDiv}static async deserialize(t,e,i){let a=null;if(t instanceof Up){const{data:{defaultAppearanceData:{fontSize:o,fontColor:u},rect:h,rotation:d,id:f,popupRef:m},textContent:y,textPosition:b,parent:{page:{pageNumber:A}}}=t;if(!y||y.length===0)return null;a=t={annotationType:St.FREETEXT,color:Array.from(u),fontSize:o,value:y.join(`
`),position:b,pageIndex:A-1,rect:h.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:m}}const l=await super.deserialize(t,e,i);return l.#a=t.fontSize,l.#t=ft.makeHexColor(...t.color),l.#e=ue.#f(t.value),l._initialData=a,l}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=ue._internalPadding*this.parentScale,i=this.getRect(e,e),a=pt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),l={annotationType:St.FREETEXT,color:a,fontSize:this.#a,value:this.#u(),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(l.isCopy=!0,l):this.annotationElementId&&!this.#g(l)?null:(l.id=this.annotationElementId,l)}#g(t){const{value:e,fontSize:i,color:a,pageIndex:l}=this._initialData;return this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some((o,u)=>o!==a[u])||t.pageIndex!==l}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(this.deleted)return e;const{style:i}=e;i.fontSize=`calc(${this.#a}px * var(--total-scale-factor))`,i.color=this.#t,e.replaceChildren();for(const l of this.#e.split(`
`)){const o=document.createElement("div");o.append(l?document.createTextNode(l):document.createElement("br")),e.append(o)}const a=ue._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(a,a),popupContent:this.#e}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class ct{static PRECISION=1e-4;toSVGPath(){Ut("Abstract method `toSVGPath` must be implemented.")}get box(){Ut("Abstract getter `box` must be implemented.")}serialize(t,e){Ut("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,a,l,o){o||=new Float32Array(t.length);for(let u=0,h=t.length;u<h;u+=2)o[u]=e+t[u]*a,o[u+1]=i+t[u+1]*l;return o}static _rescaleAndSwap(t,e,i,a,l,o){o||=new Float32Array(t.length);for(let u=0,h=t.length;u<h;u+=2)o[u]=e+t[u+1]*a,o[u+1]=i+t[u]*l;return o}static _translate(t,e,i,a){a||=new Float32Array(t.length);for(let l=0,o=t.length;l<o;l+=2)a[l]=e+t[l],a[l+1]=i+t[l+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,a,l){switch(l){case 90:return[1-e/i,t/a];case 180:return[1-t/i,1-e/a];case 270:return[e/i,1-t/a];default:return[t/i,e/a]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,a,l,o){return[(t+5*i)/6,(e+5*a)/6,(5*i+l)/6,(5*a+o)/6,(i+l)/2,(a+o)/2]}}class zn{#t;#e=[];#s;#n;#a=[];#i=new Float32Array(18);#l;#r;#h;#o;#d;#u;#f=[];static#g=8;static#p=2;static#c=zn.#g+zn.#p;constructor({x:t,y:e},i,a,l,o,u=0){this.#t=i,this.#u=l*a,this.#n=o,this.#i.set([NaN,NaN,NaN,NaN,t,e],6),this.#s=u,this.#o=zn.#g*a,this.#h=zn.#c*a,this.#d=a,this.#f.push(t,e)}isEmpty(){return isNaN(this.#i[8])}#m(){const t=this.#i.subarray(4,6),e=this.#i.subarray(16,18),[i,a,l,o]=this.#t;return[(this.#l+(t[0]-e[0])/2-i)/l,(this.#r+(t[1]-e[1])/2-a)/o,(this.#l+(e[0]-t[0])/2-i)/l,(this.#r+(e[1]-t[1])/2-a)/o]}add({x:t,y:e}){this.#l=t,this.#r=e;const[i,a,l,o]=this.#t;let[u,h,d,f]=this.#i.subarray(8,12);const m=t-d,y=e-f,b=Math.hypot(m,y);if(b<this.#h)return!1;const A=b-this.#o,x=A/b,w=x*m,T=x*y;let O=u,R=h;u=d,h=f,d+=w,f+=T,this.#f?.push(t,e);const M=-T/A,C=w/A,L=M*this.#u,_=C*this.#u;return this.#i.set(this.#i.subarray(2,8),0),this.#i.set([d+L,f+_],4),this.#i.set(this.#i.subarray(14,18),12),this.#i.set([d-L,f-_],16),isNaN(this.#i[6])?(this.#a.length===0&&(this.#i.set([u+L,h+_],2),this.#a.push(NaN,NaN,NaN,NaN,(u+L-i)/l,(h+_-a)/o),this.#i.set([u-L,h-_],14),this.#e.push(NaN,NaN,NaN,NaN,(u-L-i)/l,(h-_-a)/o)),this.#i.set([O,R,u,h,d,f],6),!this.isEmpty()):(this.#i.set([O,R,u,h,d,f],6),Math.abs(Math.atan2(R-h,O-u)-Math.atan2(T,w))<Math.PI/2?([u,h,d,f]=this.#i.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((u+d)/2-i)/l,((h+f)/2-a)/o),[u,h,O,R]=this.#i.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((O+u)/2-i)/l,((R+h)/2-a)/o),!0):([O,R,u,h,d,f]=this.#i.subarray(0,6),this.#a.push(((O+5*u)/6-i)/l,((R+5*h)/6-a)/o,((5*u+d)/6-i)/l,((5*h+f)/6-a)/o,((u+d)/2-i)/l,((h+f)/2-a)/o),[d,f,u,h,O,R]=this.#i.subarray(12,18),this.#e.push(((O+5*u)/6-i)/l,((R+5*h)/6-a)/o,((5*u+d)/6-i)/l,((5*h+f)/6-a)/o,((u+d)/2-i)/l,((h+f)/2-a)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#a,e=this.#e;if(isNaN(this.#i[6])&&!this.isEmpty())return this.#v();const i=[];i.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?i.push(`L${t[a+4]} ${t[a+5]}`):i.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);this.#x(i);for(let a=e.length-6;a>=6;a-=6)isNaN(e[a])?i.push(`L${e[a+4]} ${e[a+5]}`):i.push(`C${e[a]} ${e[a+1]} ${e[a+2]} ${e[a+3]} ${e[a+4]} ${e[a+5]}`);return this.#y(i),i.join(" ")}#v(){const[t,e,i,a]=this.#t,[l,o,u,h]=this.#m();return`M${(this.#i[2]-t)/i} ${(this.#i[3]-e)/a} L${(this.#i[4]-t)/i} ${(this.#i[5]-e)/a} L${l} ${o} L${u} ${h} L${(this.#i[16]-t)/i} ${(this.#i[17]-e)/a} L${(this.#i[14]-t)/i} ${(this.#i[15]-e)/a} Z`}#y(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#x(t){const[e,i,a,l]=this.#t,o=this.#i.subarray(4,6),u=this.#i.subarray(16,18),[h,d,f,m]=this.#m();t.push(`L${(o[0]-e)/a} ${(o[1]-i)/l} L${h} ${d} L${f} ${m} L${(u[0]-e)/a} ${(u[1]-i)/l}`)}newFreeDrawOutline(t,e,i,a,l,o){return new Yp(t,e,i,a,l,o)}getOutlines(){const t=this.#a,e=this.#e,i=this.#i,[a,l,o,u]=this.#t,h=new Float32Array((this.#f?.length??0)+2);for(let m=0,y=h.length-2;m<y;m+=2)h[m]=(this.#f[m]-a)/o,h[m+1]=(this.#f[m+1]-l)/u;if(h[h.length-2]=(this.#l-a)/o,h[h.length-1]=(this.#r-l)/u,isNaN(i[6])&&!this.isEmpty())return this.#A(h);const d=new Float32Array(this.#a.length+24+this.#e.length);let f=t.length;for(let m=0;m<f;m+=2){if(isNaN(t[m])){d[m]=d[m+1]=NaN;continue}d[m]=t[m],d[m+1]=t[m+1]}f=this.#T(d,f);for(let m=e.length-6;m>=6;m-=6)for(let y=0;y<6;y+=2){if(isNaN(e[m+y])){d[f]=d[f+1]=NaN,f+=2;continue}d[f]=e[m+y],d[f+1]=e[m+y+1],f+=2}return this.#S(d,f),this.newFreeDrawOutline(d,h,this.#t,this.#d,this.#s,this.#n)}#A(t){const e=this.#i,[i,a,l,o]=this.#t,[u,h,d,f]=this.#m(),m=new Float32Array(36);return m.set([NaN,NaN,NaN,NaN,(e[2]-i)/l,(e[3]-a)/o,NaN,NaN,NaN,NaN,(e[4]-i)/l,(e[5]-a)/o,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(e[16]-i)/l,(e[17]-a)/o,NaN,NaN,NaN,NaN,(e[14]-i)/l,(e[15]-a)/o],0),this.newFreeDrawOutline(m,t,this.#t,this.#d,this.#s,this.#n)}#S(t,e){const i=this.#e;return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6}#T(t,e){const i=this.#i.subarray(4,6),a=this.#i.subarray(16,18),[l,o,u,h]=this.#t,[d,f,m,y]=this.#m();return t.set([NaN,NaN,NaN,NaN,(i[0]-l)/u,(i[1]-o)/h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,m,y,NaN,NaN,NaN,NaN,(a[0]-l)/u,(a[1]-o)/h],e),e+=24}}class Yp extends ct{#t;#e=new Float32Array(4);#s;#n;#a;#i;#l;constructor(t,e,i,a,l,o){super(),this.#l=t,this.#a=e,this.#t=i,this.#i=a,this.#s=l,this.#n=o,this.lastPoint=[NaN,NaN],this.#r(o);const[u,h,d,f]=this.#e;for(let m=0,y=t.length;m<y;m+=2)t[m]=(t[m]-u)/d,t[m+1]=(t[m+1]-h)/f;for(let m=0,y=e.length;m<y;m+=2)e[m]=(e[m]-u)/d,e[m+1]=(e[m+1]-h)/f}toSVGPath(){const t=[`M${this.#l[4]} ${this.#l[5]}`];for(let e=6,i=this.#l.length;e<i;e+=6){if(isNaN(this.#l[e])){t.push(`L${this.#l[e+4]} ${this.#l[e+5]}`);continue}t.push(`C${this.#l[e]} ${this.#l[e+1]} ${this.#l[e+2]} ${this.#l[e+3]} ${this.#l[e+4]} ${this.#l[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,i,a],l){const o=i-t,u=a-e;let h,d;switch(l){case 0:h=ct._rescale(this.#l,t,a,o,-u),d=ct._rescale(this.#a,t,a,o,-u);break;case 90:h=ct._rescaleAndSwap(this.#l,t,e,o,u),d=ct._rescaleAndSwap(this.#a,t,e,o,u);break;case 180:h=ct._rescale(this.#l,i,e,-o,u),d=ct._rescale(this.#a,i,e,-o,u);break;case 270:h=ct._rescaleAndSwap(this.#l,i,a,-o,-u),d=ct._rescaleAndSwap(this.#a,i,a,-o,-u);break}return{outline:Array.from(h),points:[Array.from(d)]}}#r(t){const e=this.#l;let i=e[4],a=e[5];const l=[i,a,i,a];let o=i,u=a;const h=t?Math.max:Math.min;for(let f=6,m=e.length;f<m;f+=6){const y=e[f+4],b=e[f+5];if(isNaN(e[f]))ft.pointBoundingBox(y,b,l),u<b?(o=y,u=b):u===b&&(o=h(o,y));else{const A=[1/0,1/0,-1/0,-1/0];ft.bezierBoundingBox(i,a,...e.slice(f,f+6),A),ft.rectBoundingBox(...A,l),u<A[3]?(o=A[2],u=A[3]):u===A[3]&&(o=h(o,A[2]))}i=y,a=b}const d=this.#e;d[0]=l[0]-this.#s,d[1]=l[1]-this.#s,d[2]=l[2]-l[0]+2*this.#s,d[3]=l[3]-l[1]+2*this.#s,this.lastPoint=[o,u]}get box(){return this.#e}newOutliner(t,e,i,a,l,o=0){return new zn(t,e,i,a,l,o)}getNewOutline(t,e){const[i,a,l,o]=this.#e,[u,h,d,f]=this.#t,m=l*d,y=o*f,b=i*d+u,A=a*f+h,x=this.newOutliner({x:this.#a[0]*m+b,y:this.#a[1]*y+A},this.#t,this.#i,t,this.#n,e??this.#s);for(let w=2;w<this.#a.length;w+=2)x.add({x:this.#a[w]*m+b,y:this.#a[w+1]*y+A});return x.getOutlines()}}class xu{#t;#e;#s=[];#n=[];constructor(t,e=0,i=0,a=!0){const l=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:b,y:A,width:x,height:w}of t){const T=Math.floor((b-e)/o)*o,O=Math.ceil((b+x+e)/o)*o,R=Math.floor((A-e)/o)*o,M=Math.ceil((A+w+e)/o)*o,C=[T,R,M,!0],L=[O,R,M,!1];this.#s.push(C,L),ft.rectBoundingBox(T,R,O,M,l)}const u=l[2]-l[0]+2*i,h=l[3]-l[1]+2*i,d=l[0]-i,f=l[1]-i,m=this.#s.at(a?-1:-2),y=[m[0],m[2]];for(const b of this.#s){const[A,x,w]=b;b[0]=(A-d)/u,b[1]=(x-f)/h,b[2]=(w-f)/h}this.#t=new Float32Array([d,f,u,h]),this.#e=y}getOutlines(){this.#s.sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of this.#s)e[3]?(t.push(...this.#h(e)),this.#l(e)):(this.#r(e),t.push(...this.#h(e)));return this.#a(t)}#a(t){const e=[],i=new Set;for(const o of t){const[u,h,d]=o;e.push([u,h,o],[u,d,o])}e.sort((o,u)=>o[1]-u[1]||o[0]-u[0]);for(let o=0,u=e.length;o<u;o+=2){const h=e[o][2],d=e[o+1][2];h.push(d),d.push(h),i.add(h),i.add(d)}const a=[];let l;for(;i.size>0;){const o=i.values().next().value;let[u,h,d,f,m]=o;i.delete(o);let y=u,b=h;for(l=[u,d],a.push(l);;){let A;if(i.has(f))A=f;else if(i.has(m))A=m;else break;i.delete(A),[u,h,d,f,m]=A,y!==u&&(l.push(y,b,u,b===h?h:d),y=u),b=b===h?d:h}l.push(y,b)}return new ub(a,this.#t,this.#e)}#i(t){const e=this.#n;let i=0,a=e.length-1;for(;i<=a;){const l=i+a>>1,o=e[l][0];if(o===t)return l;o<t?i=l+1:a=l-1}return a+1}#l([,t,e]){const i=this.#i(t);this.#n.splice(i,0,[t,e])}#r([,t,e]){const i=this.#i(t);for(let a=i;a<this.#n.length;a++){const[l,o]=this.#n[a];if(l!==t)break;if(l===t&&o===e){this.#n.splice(a,1);return}}for(let a=i-1;a>=0;a--){const[l,o]=this.#n[a];if(l!==t)break;if(l===t&&o===e){this.#n.splice(a,1);return}}}#h(t){const[e,i,a]=t,l=[[e,i,a]],o=this.#i(a);for(let u=0;u<o;u++){const[h,d]=this.#n[u];for(let f=0,m=l.length;f<m;f++){const[,y,b]=l[f];if(!(d<=y||b<=h)){if(y>=h){if(b>d)l[f][1]=d;else{if(m===1)return[];l.splice(f,1),f--,m--}continue}l[f][2]=h,b>d&&l.push([e,d,b])}}}return l}}class ub extends ct{#t;#e;constructor(t,e,i){super(),this.#e=t,this.#t=e,this.lastPoint=i}toSVGPath(){const t=[];for(const e of this.#e){let[i,a]=e;t.push(`M${i} ${a}`);for(let l=2;l<e.length;l+=2){const o=e[l],u=e[l+1];o===i?(t.push(`V${u}`),a=u):u===a&&(t.push(`H${o}`),i=o)}t.push("Z")}return t.join(" ")}serialize([t,e,i,a],l){const o=[],u=i-t,h=a-e;for(const d of this.#e){const f=new Array(d.length);for(let m=0;m<d.length;m+=2)f[m]=t+d[m]*u,f[m+1]=a-d[m+1]*h;o.push(f)}return o}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Au extends zn{newFreeDrawOutline(t,e,i,a,l,o){return new hb(t,e,i,a,l,o)}}class hb extends Yp{newOutliner(t,e,i,a,l,o=0){return new Au(t,e,i,a,l,o)}}class os{#t=null;#e=null;#s;#n=null;#a=!1;#i=!1;#l=null;#r;#h=null;#o=null;#d;static#u=null;static get _keyboardManager(){return Ot(this,"_keyboardManager",new tr([[["Escape","mac+Escape"],os.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],os.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],os.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],os.prototype._moveToPrevious],[["Home","mac+Home"],os.prototype._moveToBeginning],[["End","mac+End"],os.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#i=!1,this.#d=Dt.HIGHLIGHT_COLOR,this.#l=t):(this.#i=!0,this.#d=Dt.HIGHLIGHT_DEFAULT_COLOR),this.#o=t?._uiManager||e,this.#r=this.#o._eventBus,this.#s=t?.color?.toUpperCase()||this.#o?.highlightColors.values().next().value||"#FFFF98",os.#u||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#l&&(t.ariaControls=`${this.#l.id}_colorpicker_dropdown`);const e=this.#o._signal;t.addEventListener("click",this.#c.bind(this),{signal:e}),t.addEventListener("keydown",this.#p.bind(this),{signal:e});const i=this.#e=document.createElement("span");return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=this.#s,t.append(i),t}renderMainDropdown(){const t=this.#n=this.#f();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#f(){const t=document.createElement("div"),e=this.#o._signal;t.addEventListener("contextmenu",gs,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#l&&(t.id=`${this.#l.id}_colorpicker_dropdown`);for(const[i,a]of this.#o.highlightColors){const l=document.createElement("button");l.tabIndex="0",l.role="option",l.setAttribute("data-color",a),l.title=i,l.setAttribute("data-l10n-id",os.#u[i]);const o=document.createElement("span");l.append(o),o.className="swatch",o.style.backgroundColor=a,l.ariaSelected=a===this.#s,l.addEventListener("click",this.#g.bind(this,a),{signal:e}),t.append(l)}return t.addEventListener("keydown",this.#p.bind(this),{signal:e}),t}#g(t,e){e.stopPropagation(),this.#r.dispatch("switchannotationeditorparams",{source:this,type:this.#d,value:t})}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#c(t);return}const e=t.target.getAttribute("data-color");e&&this.#g(e,t)}_moveToNext(t){if(!this.#v){this.#c(t);return}if(t.target===this.#t){this.#n.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstChild||t.target===this.#t){this.#v&&this._hideDropdownFromKeyboard();return}this.#v||this.#c(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#v){this.#c(t);return}this.#n.firstChild?.focus()}_moveToEnd(t){if(!this.#v){this.#c(t);return}this.#n.lastChild?.focus()}#p(t){os._keyboardManager.exec(this,t)}#c(t){if(this.#v){this.hideDropdown();return}if(this.#a=t.detail===0,this.#h||(this.#h=new AbortController,window.addEventListener("pointerdown",this.#m.bind(this),{signal:this.#o.combinedSignal(this.#h)})),this.#t.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const e=this.#n=this.#f();this.#t.append(e)}#m(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#h?.abort(),this.#h=null}get#v(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#i){if(!this.#v){this.#l?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;const e=this.#o.highlightColors.values();for(const i of this.#n.children)i.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}}class te extends pt{#t=null;#e=0;#s;#n=null;#a=null;#i=null;#l=null;#r=0;#h=null;#o=null;#d=null;#u=!1;#f=null;#g;#p=null;#c="";#m;#v="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=St.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=te.prototype;return Ot(this,"_keyboardManager",new tr([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||te._defaultColor,this.#m=t.thickness||te._defaultThickness,this.#g=t.opacity||te._defaultOpacity,this.#s=t.boxes||null,this.#v=t.methodOfCreation||"",this.#c=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#u=!0,this.#x(t),this.#M()):this.#s&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#l=t.focusNode,this.#r=t.focusOffset,this.#y(),this.#M(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#u?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#m,methodOfCreation:this.#v}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#y(){const t=new xu(this.#s,.001);this.#o=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#o.box;const e=new xu(this.#s,.0025,.001,this._uiManager.direction==="ltr");this.#i=e.getOutlines();const{lastPoint:i}=this.#i;this.#f=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#x({highlightOutlines:t,highlightId:e,clipPathId:i}){this.#o=t;const a=1.5;if(this.#i=t.getNewOutline(this.#m/2+a,.0025),e>=0)this.#d=e,this.#n=i,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},!0);else if(this.parent){const f=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:te.#E(this.#o.box,(f-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:te.#E(this.#i.box,f),path:{d:this.#i.toSVGPath()}})}const[l,o,u,h]=t.box;switch(this.rotation){case 0:this.x=l,this.y=o,this.width=u,this.height=h;break;case 90:{const[f,m]=this.parentDimensions;this.x=o,this.y=1-l,this.width=u*m/f,this.height=h*f/m;break}case 180:this.x=1-l,this.y=1-o,this.width=u,this.height=h;break;case 270:{const[f,m]=this.parentDimensions;this.x=1-o,this.y=l,this.width=u*m/f,this.height=h*f/m;break}}const{lastPoint:d}=this.#i;this.#f=[(d[0]-l)/u,(d[1]-o)/h]}static initialize(t,e){pt.initialize(t,e),te._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Dt.HIGHLIGHT_DEFAULT_COLOR:te._defaultColor=e;break;case Dt.HIGHLIGHT_THICKNESS:te._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#f}updateParams(t,e){switch(t){case Dt.HIGHLIGHT_COLOR:this.#A(e);break;case Dt.HIGHLIGHT_THICKNESS:this.#S(e);break}}static get defaultPropertiesToUpdate(){return[[Dt.HIGHLIGHT_DEFAULT_COLOR,te._defaultColor],[Dt.HIGHLIGHT_THICKNESS,te._defaultThickness]]}get propertiesToUpdate(){return[[Dt.HIGHLIGHT_COLOR,this.color||te._defaultColor],[Dt.HIGHLIGHT_THICKNESS,this.#m||te._defaultThickness],[Dt.HIGHLIGHT_FREE,this.#u]]}#A(t){const e=(l,o)=>{this.color=l,this.#g=o,this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:l,"fill-opacity":o}}),this.#a?.updateColor(l)},i=this.color,a=this.#g;this.addCommands({cmd:e.bind(this,t,te._defaultOpacity),undo:e.bind(this,i,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Dt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}#S(t){const e=this.#m,i=a=>{this.#m=a,this.#T(a)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Dt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#a=new os({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#D())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#D())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#R(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#M(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#R():t&&(this.#M(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#T(t){if(!this.#u)return;this.#x({highlightOutlines:this.#o.getNewOutline(t/2)}),this.fixAndSetPosition();const[e,i]=this.parentDimensions;this.setDims(this.width*e,this.height*i)}#R(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#M(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#o.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#g},rootClass:{highlight:!0,free:this.#u},path:{d:this.#o.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#u},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},this.#u),this.#h&&(this.#h.style.clipPath=this.#n))}static#E([t,e,i,a],l){switch(l){case 90:return[1-e-a,t,a,i];case 180:return[1-t-i,1-e-a,i,a];case 270:return[e,1-t-i,a,i]}return[t,e,i,a]}rotate(t){const{drawLayer:e}=this.parent;let i;this.#u?(t=(t-this.rotation+360)%360,i=te.#E(this.#o.box,t)):i=te.#E([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:i,root:{"data-main-rotation":t}}),e.updateProperties(this.#p,{bbox:te.#E(this.#i.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#c&&(t.setAttribute("aria-label",this.#c),t.setAttribute("role","mark")),this.#u?t.classList.add("free"):this.div.addEventListener("keydown",this.#N.bind(this),{signal:this._uiManager._signal});const e=this.#h=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#n;const[i,a]=this.parentDimensions;return this.setDims(this.width*i,this.height*a),bp(this,this.#h,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#N(t){te._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#C(!0);break;case 1:case 3:this.#C(!1);break}}#C(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#l,this.#r)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#u||this.#C(!1))}get _mustFixPosition(){return!this.#u}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#D(){return this.#u?this.rotation:0}#L(){if(this.#u)return null;const[t,e]=this.pageDimensions,[i,a]=this.pageTranslation,l=this.#s,o=new Float32Array(l.length*8);let u=0;for(const{x:h,y:d,width:f,height:m}of l){const y=h*t+i,b=(1-d)*e+a;o[u]=o[u+4]=y,o[u+1]=o[u+3]=b,o[u+2]=o[u+6]=y+f*t,o[u+5]=o[u+7]=b-m*e,u+=8}return o}#I(t){return this.#o.serialize(t,this.#D())}static startHighlighting(t,e,{target:i,x:a,y:l}){const{x:o,y:u,width:h,height:d}=i.getBoundingClientRect(),f=new AbortController,m=t.combinedSignal(f),y=b=>{f.abort(),this.#w(t,b)};window.addEventListener("blur",y,{signal:m}),window.addEventListener("pointerup",y,{signal:m}),window.addEventListener("pointerdown",re,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",gs,{signal:m}),i.addEventListener("pointermove",this.#F.bind(this,t),{signal:m}),this._freeHighlight=new Au({x:a,y:l},[o,u,h,d],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#F(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#w(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,i){let a=null;if(t instanceof Gp){const{data:{quadPoints:A,rect:x,rotation:w,id:T,color:O,opacity:R,popupRef:M},parent:{page:{pageNumber:C}}}=t;a=t={annotationType:St.HIGHLIGHT,color:Array.from(O),opacity:R,quadPoints:A,boxes:null,pageIndex:C-1,rect:x.slice(0),rotation:w,annotationElementId:T,id:T,deleted:!1,popupRef:M}}else if(t instanceof _u){const{data:{inkLists:A,rect:x,rotation:w,id:T,color:O,borderStyle:{rawWidth:R},popupRef:M},parent:{page:{pageNumber:C}}}=t;a=t={annotationType:St.HIGHLIGHT,color:Array.from(O),thickness:R,inkLists:A,boxes:null,pageIndex:C-1,rect:x.slice(0),rotation:w,annotationElementId:T,id:T,deleted:!1,popupRef:M}}const{color:l,quadPoints:o,inkLists:u,opacity:h}=t,d=await super.deserialize(t,e,i);d.color=ft.makeHexColor(...l),d.#g=h||1,u&&(d.#m=t.thickness),d._initialData=a;const[f,m]=d.pageDimensions,[y,b]=d.pageTranslation;if(o){const A=d.#s=[];for(let x=0;x<o.length;x+=8)A.push({x:(o[x]-y)/f,y:1-(o[x+1]-b)/m,width:(o[x+2]-o[x])/f,height:(o[x+1]-o[x+5])/m});d.#y(),d.#M(),d.rotate(d.rotation)}else if(u){d.#u=!0;const A=u[0],x={x:A[0]-y,y:m-(A[1]-b)},w=new Au(x,[0,0,f,m],1,d.#m/2,!0,.001);for(let R=0,M=A.length;R<M;R+=2)x.x=A[R]-y,x.y=m-(A[R+1]-b),w.add(x);const{id:T,clipPathId:O}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:w.toSVGPath()}},!0,!0);d.#x({highlightOutlines:w.getOutlines(),highlightId:T,clipPathId:O}),d.#M(),d.rotate(d.parentRotation)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=this.getRect(0,0),i=pt._colorManager.convert(this.color),a={annotationType:St.HIGHLIGHT,color:i,opacity:this.#g,thickness:this.#m,quadPoints:this.#L(),outlines:this.#I(e),pageIndex:this.pageIndex,rect:e,rotation:this.#D(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#b(a)?null:(a.id=this.annotationElementId,a)}#b(t){const{color:e}=this._initialData;return t.color.some((i,a)=>i!==e[a])}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class Xp{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,i)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Ut("Not implemented")}}class yt extends pt{#t=null;#e;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#s=null;static#n=null;static#a=null;static#i=NaN;static#l=null;static#r=null;static#h=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(this.#o(t),this.#f())}#o({drawOutlines:t,drawId:e,drawingOptions:i}){this.#t=t,this._drawingOptions||=i,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#c(t.box)}#d(t,e){const{id:i}=e.drawLayer.draw(yt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(t,e){const i=new Set(Object.keys(t));for(const[a,l]of Object.entries(e))i.has(a)?Object.assign(t[a],l):t[a]=l;return t}static getDefaultDrawingOptions(t){Ut("Not implemented")}static get typesMap(){Ut("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,e),this._currentParent&&(yt.#s.updateProperty(i,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[i,a]of this.typesMap)t.push([i,e[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[i,a]of this.constructor.typesMap)t.push([i,e[a]]);return t}_updateProperty(t,e,i){const a=this._drawingOptions,l=a[e],o=u=>{a.updateProperty(e,u);const h=this.#t.updateProperty(e,u);h&&this.#c(h),this.parent?.drawLayer.updateProperties(this._drawId,a.toSVGProperties())};this.addCommands({cmd:o.bind(this,i),undo:o.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,yt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#p()),{bbox:this.#m()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,yt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#p()),{bbox:this.#m()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#m()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,yt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#m()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#u(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#c(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#u()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#u(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#g([t,e,i,a]){const{parentDimensions:[l,o],rotation:u}=this;switch(u){case 90:return[e,1-t,i*(o/l),a*(l/o)];case 180:return[1-t,1-e,i,a];case 270:return[1-e,t,i*(o/l),a*(l/o)];default:return[t,e,i,a]}}#p(){const{x:t,y:e,width:i,height:a,parentDimensions:[l,o],rotation:u}=this;switch(u){case 90:return[1-e,t,i*(l/o),a*(o/l)];case 180:return[1-t,1-e,i,a];case 270:return[e,1-t,i*(l/o),a*(o/l)];default:return[t,e,i,a]}}#c(t){if([this.x,this.y,this.width,this.height]=this.#g(t),this.div){this.fixAndSetPosition();const[e,i]=this.parentDimensions;this.setDims(this.width*e,this.height*i)}this._onResized()}#m(){const{x:t,y:e,width:i,height:a,rotation:l,parentRotation:o,parentDimensions:[u,h]}=this;switch((l*4+o)/90){case 1:return[1-e-a,t,a,i];case 2:return[1-t-i,1-e-a,i,a];case 3:return[e,1-t-i,a,i];case 4:return[t,e-i*(u/h),a*(h/u),i*(u/h)];case 5:return[1-e,t,i*(u/h),a*(h/u)];case 6:return[1-t-a*(h/u),1-e,a*(h/u),i*(u/h)];case 7:return[e-i*(u/h),1-t-a*(h/u),i*(u/h),a*(h/u)];case 8:return[t-i,e-a,i,a];case 9:return[1-e,t-i,a,i];case 10:return[1-t,1-e,i,a];case 11:return[e-a,1-t,a,i];case 12:return[t-a*(h/u),e,a*(h/u),i*(u/h)];case 13:return[1-e-i*(u/h),t-a*(h/u),i*(u/h),a*(h/u)];case 14:return[1-t,1-e-i*(u/h),a*(h/u),i*(u/h)];case 15:return[e,1-t,i*(u/h),a*(h/u)];default:return[t,e,i,a]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,yt._mergeSVGProperties({bbox:this.#m()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#c(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const i=super.render();i.classList.add("draw");const a=document.createElement("div");i.append(a),a.setAttribute("aria-hidden","true"),a.className="internal";const[l,o]=this.parentDimensions;return this.setDims(this.width*l,this.height*o),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),i}static createDrawerInstance(t,e,i,a,l){Ut("Not implemented")}static startDrawing(t,e,i,a){const{target:l,offsetX:o,offsetY:u,pointerId:h,pointerType:d}=a;if(yt.#l&&yt.#l!==d)return;const{viewport:{rotation:f}}=t,{width:m,height:y}=l.getBoundingClientRect(),b=yt.#n=new AbortController,A=t.combinedSignal(b);if(yt.#i||=h,yt.#l??=d,window.addEventListener("pointerup",x=>{yt.#i===x.pointerId?this._endDraw(x):yt.#r?.delete(x.pointerId)},{signal:A}),window.addEventListener("pointercancel",x=>{yt.#i===x.pointerId?this._currentParent.endDrawingSession():yt.#r?.delete(x.pointerId)},{signal:A}),window.addEventListener("pointerdown",x=>{yt.#l===x.pointerType&&((yt.#r||=new Set).add(x.pointerId),yt.#s.isCancellable()&&(yt.#s.removeLastElement(),yt.#s.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:A}),window.addEventListener("contextmenu",gs,{signal:A}),l.addEventListener("pointermove",this._drawMove.bind(this),{signal:A}),l.addEventListener("touchmove",x=>{x.timeStamp===yt.#h&&re(x)},{signal:A}),t.toggleDrawing(),e._editorUndoBar?.hide(),yt.#s){t.drawLayer.updateProperties(this._currentDrawId,yt.#s.startNew(o,u,m,y,f));return}e.updateUIForDefaultProperties(this),yt.#s=this.createDrawerInstance(o,u,m,y,f),yt.#a=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(yt.#a.toSVGProperties(),yt.#s.defaultSVGProperties),!0,!1)}static _drawMove(t){if(yt.#h=-1,!yt.#s)return;const{offsetX:e,offsetY:i,pointerId:a}=t;if(yt.#i===a){if(yt.#r?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,yt.#s.add(e,i)),yt.#h=t.timeStamp,re(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,yt.#s=null,yt.#a=null,yt.#l=null,yt.#h=NaN),yt.#n&&(yt.#n.abort(),yt.#n=null,yt.#i=NaN,yt.#r=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,yt.#s.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=yt.#s,a=this._currentDrawId,l=i.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(a,i.setLastElement(l))},undo:()=>{e.drawLayer.updateProperties(a,i.removeLastElement())},mustExec:!1,type:Dt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Dt.DRAW_STEP),!yt.#s.isEmpty()){const{pageDimensions:[i,a],scale:l}=e,o=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:yt.#s.getOutlines(i*l,a*l,l,this._INNER_MARGIN),drawingOptions:yt.#a,mustBeCommitted:!t});return this._cleanup(!0),o}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,i,a,l,o){Ut("Not implemented")}static async deserialize(t,e,i){const{rawDims:{pageWidth:a,pageHeight:l,pageX:o,pageY:u}}=e.viewport,h=this.deserializeDraw(o,u,a,l,this._INNER_MARGIN,t),d=await super.deserialize(t,e,i);return d.createDrawingOptions(t),d.#o({drawOutlines:h}),d.#f(),d.onScaleChanging(),d.rotate(),d}serializeDraw(t){const[e,i]=this.pageTranslation,[a,l]=this.pageDimensions;return this.#t.serialize([e,i,a,l],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class db{#t=new Float64Array(6);#e;#s;#n;#a;#i;#l="";#r=0;#h=new sr;#o;#d;constructor(t,e,i,a,l,o){this.#o=i,this.#d=a,this.#n=l,this.#a=o,[t,e]=this.#u(t,e);const u=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#i=[t,e],this.#s=[{line:u,points:this.#i}],this.#t.set(u,0)}updateProperty(t,e){t==="stroke-width"&&(this.#a=e)}#u(t,e){return ct._normalizePoint(t,e,this.#o,this.#d,this.#n)}isEmpty(){return!this.#s||this.#s.length===0}isCancellable(){return this.#i.length<=10}add(t,e){[t,e]=this.#u(t,e);const[i,a,l,o]=this.#t.subarray(2,6),u=t-l,h=e-o;return Math.hypot(this.#o*u,this.#d*h)<=2?null:(this.#i.push(t,e),isNaN(i)?(this.#t.set([l,o,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([i,a,l,o,t,e],0),this.#e.push(...ct.createBezierPoints(i,a,l,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(this.#i.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,a,l){this.#o=i,this.#d=a,this.#n=l,[t,e]=this.#u(t,e);const o=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#i=[t,e];const u=this.#s.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#s.push({line:o,points:this.#i}),this.#t.set(o,0),this.#r=0,this.toSVGPath(),null}getLastElement(){return this.#s.at(-1)}setLastElement(t){return this.#s?(this.#s.push(t),this.#e=t.line,this.#i=t.points,this.#r=0,{path:{d:this.toSVGPath()}}):this.#h.setLastElement(t)}removeLastElement(){if(!this.#s)return this.#h.removeLastElement();this.#s.pop(),this.#l="";for(let t=0,e=this.#s.length;t<e;t++){const{line:i,points:a}=this.#s[t];this.#e=i,this.#i=a,this.#r=0,this.toSVGPath()}return{path:{d:this.#l}}}toSVGPath(){const t=ct.svgRound(this.#e[4]),e=ct.svgRound(this.#e[5]);if(this.#i.length===2)return this.#l=`${this.#l} M ${t} ${e} Z`,this.#l;if(this.#i.length<=6){const a=this.#l.lastIndexOf("M");this.#l=`${this.#l.slice(0,a)} M ${t} ${e}`,this.#r=6}if(this.#i.length===4){const a=ct.svgRound(this.#e[10]),l=ct.svgRound(this.#e[11]);return this.#l=`${this.#l} L ${a} ${l}`,this.#r=12,this.#l}const i=[];this.#r===0&&(i.push(`M ${t} ${e}`),this.#r=6);for(let a=this.#r,l=this.#e.length;a<l;a+=6){const[o,u,h,d,f,m]=this.#e.slice(a,a+6).map(ct.svgRound);i.push(`C${o} ${u} ${h} ${d} ${f} ${m}`)}return this.#l+=i.join(" "),this.#r=this.#e.length,this.#l}getOutlines(t,e,i,a){const l=this.#s.at(-1);return l.line=new Float32Array(l.line),l.points=new Float32Array(l.points),this.#h.build(this.#s,t,e,i,this.#n,this.#a,a),this.#t=null,this.#e=null,this.#s=null,this.#l=null,this.#h}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class sr extends ct{#t;#e=0;#s;#n;#a;#i;#l;#r;#h;build(t,e,i,a,l,o,u){this.#a=e,this.#i=i,this.#l=a,this.#r=l,this.#h=o,this.#s=u??0,this.#n=t,this.#u()}get thickness(){return this.#h}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#n){if(t.push(`M${ct.svgRound(e[4])} ${ct.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${ct.svgRound(e[10])} ${ct.svgRound(e[11])}`);continue}for(let i=6,a=e.length;i<a;i+=6){const[l,o,u,h,d,f]=e.subarray(i,i+6).map(ct.svgRound);t.push(`C${l} ${o} ${u} ${h} ${d} ${f}`)}}return t.join("")}serialize([t,e,i,a],l){const o=[],u=[],[h,d,f,m]=this.#d();let y,b,A,x,w,T,O,R,M;switch(this.#r){case 0:M=ct._rescale,y=t,b=e+a,A=i,x=-a,w=t+h*i,T=e+(1-d-m)*a,O=t+(h+f)*i,R=e+(1-d)*a;break;case 90:M=ct._rescaleAndSwap,y=t,b=e,A=i,x=a,w=t+d*i,T=e+h*a,O=t+(d+m)*i,R=e+(h+f)*a;break;case 180:M=ct._rescale,y=t+i,b=e,A=-i,x=a,w=t+(1-h-f)*i,T=e+d*a,O=t+(1-h)*i,R=e+(d+m)*a;break;case 270:M=ct._rescaleAndSwap,y=t+i,b=e+a,A=-i,x=-a,w=t+(1-d-m)*i,T=e+(1-h-f)*a,O=t+(1-d)*i,R=e+(1-h)*a;break}for(const{line:C,points:L}of this.#n)o.push(M(C,y,b,A,x,l?new Array(C.length):null)),u.push(M(L,y,b,A,x,l?new Array(L.length):null));return{lines:o,points:u,rect:[w,T,O,R]}}static deserialize(t,e,i,a,l,{paths:{lines:o,points:u},rotation:h,thickness:d}){const f=[];let m,y,b,A,x;switch(h){case 0:x=ct._rescale,m=-t/i,y=e/a+1,b=1/i,A=-1/a;break;case 90:x=ct._rescaleAndSwap,m=-e/a,y=-t/i,b=1/a,A=1/i;break;case 180:x=ct._rescale,m=t/i+1,y=-e/a,b=-1/i,A=1/a;break;case 270:x=ct._rescaleAndSwap,m=e/a+1,y=t/i+1,b=-1/a,A=-1/i;break}if(!o){o=[];for(const T of u){const O=T.length;if(O===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,T[0],T[1]]));continue}if(O===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,T[0],T[1],NaN,NaN,NaN,NaN,T[2],T[3]]));continue}const R=new Float32Array(3*(O-2));o.push(R);let[M,C,L,_]=T.subarray(0,4);R.set([NaN,NaN,NaN,NaN,M,C],0);for(let z=4;z<O;z+=2){const G=T[z],Q=T[z+1];R.set(ct.createBezierPoints(M,C,L,_,G,Q),(z-2)*3),[M,C,L,_]=[L,_,G,Q]}}}for(let T=0,O=o.length;T<O;T++)f.push({line:x(o[T].map(R=>R??NaN),m,y,b,A),points:x(u[T].map(R=>R??NaN),m,y,b,A)});const w=new this.prototype.constructor;return w.build(f,i,a,1,h,d,l),w}#o(t=this.#h){const e=this.#s+t/2*this.#l;return this.#r%180===0?[e/this.#a,e/this.#i]:[e/this.#i,e/this.#a]}#d(){const[t,e,i,a]=this.#t,[l,o]=this.#o(0);return[t+l,e+o,i-2*l,a-2*o]}#u(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:a}of this.#n){if(a.length<=12){for(let u=4,h=a.length;u<h;u+=6)ft.pointBoundingBox(a[u],a[u+1],t);continue}let l=a[4],o=a[5];for(let u=6,h=a.length;u<h;u+=6){const[d,f,m,y,b,A]=a.subarray(u,u+6);ft.bezierBoundingBox(l,o,d,f,m,y,b,A,t),l=b,o=A}}const[e,i]=this.#o();t[0]=Oe(t[0]-e,0,1),t[1]=Oe(t[1]-i,0,1),t[2]=Oe(t[2]+e,0,1),t[3]=Oe(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,i]=this.#o();this.#h=t;const[a,l]=this.#o(),[o,u]=[a-e,l-i],h=this.#t;return h[0]-=o,h[1]-=u,h[2]+=2*o,h[3]+=2*u,h}updateParentDimensions([t,e],i){const[a,l]=this.#o();this.#a=t,this.#i=e,this.#l=i;const[o,u]=this.#o(),h=o-a,d=u-l,f=this.#t;return f[0]-=h,f[1]-=d,f[2]+=2*h,f[3]+=2*d,f}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(ct.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ct.svgRound(t)} ${ct.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let i=0,a=0,l=0,o=0,u=0,h=0;switch(this.#e){case 90:a=e/t,l=-t/e,u=t;break;case 180:i=-1,o=-1,u=t,h=e;break;case 270:a=-e/t,l=t/e,h=e;break;default:return""}return`matrix(${i} ${a} ${l} ${o} ${ct.svgRound(u)} ${ct.svgRound(h)})`}getPathResizingSVGProperties([t,e,i,a]){const[l,o]=this.#o(),[u,h,d,f]=this.#t;if(Math.abs(d-l)<=ct.PRECISION||Math.abs(f-o)<=ct.PRECISION){const x=t+i/2-(u+d/2),w=e+a/2-(h+f/2);return{path:{"transform-origin":`${ct.svgRound(t)} ${ct.svgRound(e)}`,transform:`${this.rotationTransform} translate(${x} ${w})`}}}const m=(i-2*l)/(d-2*l),y=(a-2*o)/(f-2*o),b=d/i,A=f/a;return{path:{"transform-origin":`${ct.svgRound(u)} ${ct.svgRound(h)}`,transform:`${this.rotationTransform} scale(${b} ${A}) translate(${ct.svgRound(l)} ${ct.svgRound(o)}) scale(${m} ${y}) translate(${ct.svgRound(-l)} ${ct.svgRound(-o)})`}}}getPathResizedSVGProperties([t,e,i,a]){const[l,o]=this.#o(),u=this.#t,[h,d,f,m]=u;if(u[0]=t,u[1]=e,u[2]=i,u[3]=a,Math.abs(f-l)<=ct.PRECISION||Math.abs(m-o)<=ct.PRECISION){const w=t+i/2-(h+f/2),T=e+a/2-(d+m/2);for(const{line:O,points:R}of this.#n)ct._translate(O,w,T,O),ct._translate(R,w,T,R);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ct.svgRound(t)} ${ct.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(i-2*l)/(f-2*l),b=(a-2*o)/(m-2*o),A=-y*(h+l)+t+l,x=-b*(d+o)+e+o;if(y!==1||b!==1||A!==0||x!==0)for(const{line:w,points:T}of this.#n)ct._rescale(w,A,x,y,b,w),ct._rescale(T,A,x,y,b,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ct.svgRound(t)} ${ct.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],i){const[a,l]=i,o=this.#t,u=t-o[0],h=e-o[1];if(this.#a===a&&this.#i===l)for(const{line:d,points:f}of this.#n)ct._translate(d,u,h,d),ct._translate(f,u,h,f);else{const d=this.#a/a,f=this.#i/l;this.#a=a,this.#i=l;for(const{line:m,points:y}of this.#n)ct._rescale(m,u,h,d,f,m),ct._rescale(y,u,h,d,f,y);o[2]*=d,o[3]*=f}return o[0]=t,o[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ct.svgRound(t)} ${ct.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ct.svgRound(t[0])} ${ct.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Bl extends Xp{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:pt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new Bl(this._viewParameters);return t.updateAll(this),t}}class Pu extends yt{static _type="ink";static _editorType=St.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){pt.initialize(t,e),this._defaultDrawingOptions=new Bl(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return Ot(this,"typesMap",new Map([[Dt.INK_THICKNESS,"stroke-width"],[Dt.INK_COLOR,"stroke"],[Dt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,i,a,l){return new db(t,e,i,a,l,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,i,a,l,o){return sr.deserialize(t,e,i,a,l,o)}static async deserialize(t,e,i){let a=null;if(t instanceof _u){const{data:{inkLists:o,rect:u,rotation:h,id:d,color:f,opacity:m,borderStyle:{rawWidth:y},popupRef:b},parent:{page:{pageNumber:A}}}=t;a=t={annotationType:St.INK,color:Array.from(f),thickness:y,opacity:m,paths:{points:o},boxes:null,pageIndex:A-1,rect:u.slice(0),rotation:h,annotationElementId:d,id:d,deleted:!1,popupRef:b}}const l=await super.deserialize(t,e,i);return l._initialData=a,l}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:i}=this;e.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:i}){this._drawingOptions=Pu.getDefaultDrawingOptions({stroke:ft.makeHexColor(...t),"stroke-width":e,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:i,rect:a}=this.serializeDraw(t),{_drawingOptions:{stroke:l,"stroke-opacity":o,"stroke-width":u}}=this,h={annotationType:St.INK,color:pt._colorManager.convert(l),opacity:o,thickness:u,paths:{lines:e,points:i},pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(h.isCopy=!0,h):this.annotationElementId&&!this.#t(h)?null:(h.id=this.annotationElementId,h)}#t(t){const{color:e,thickness:i,opacity:a,pageIndex:l}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((o,u)=>o!==e[u])||t.thickness!==i||t.opacity!==a||t.pageIndex!==l}renderAnnotationElement(t){const{points:e,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:e}),null}}class Su extends sr{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const wl=8,Va=3;class _i{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,i,a){return i-=t,a-=e,i===0?a>0?0:4:i===1?a+6:2-a}static#s=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(t,e,i,a,l,o,u){const h=this.#e(i,a,l,o);for(let d=0;d<8;d++){const f=(-d+h-u+16)%8,m=this.#s[2*f],y=this.#s[2*f+1];if(t[(i+m)*e+(a+y)]!==0)return f}return-1}static#a(t,e,i,a,l,o,u){const h=this.#e(i,a,l,o);for(let d=0;d<8;d++){const f=(d+h+u+16)%8,m=this.#s[2*f],y=this.#s[2*f+1];if(t[(i+m)*e+(a+y)]!==0)return f}return-1}static#i(t,e,i,a){const l=t.length,o=new Int32Array(l);for(let f=0;f<l;f++)o[f]=t[f]<=a?1:0;for(let f=1;f<i-1;f++)o[f*e]=o[f*e+e-1]=0;for(let f=0;f<e;f++)o[f]=o[e*i-1-f]=0;let u=1,h;const d=[];for(let f=1;f<i-1;f++){h=1;for(let m=1;m<e-1;m++){const y=f*e+m,b=o[y];if(b===0)continue;let A=f,x=m;if(b===1&&o[y-1]===0)u+=1,x-=1;else if(b>=1&&o[y+1]===0)u+=1,x+=1,b>1&&(h=b);else{b!==1&&(h=Math.abs(b));continue}const w=[m,f],T=x===m+1,O={isHole:T,points:w,id:u,parent:0};d.push(O);let R;for(const J of d)if(J.id===h){R=J;break}R?R.isHole?O.parent=T?R.parent:h:O.parent=T?h:R.parent:O.parent=T?h:0;const M=this.#n(o,e,f,m,A,x,0);if(M===-1){o[y]=-u,o[y]!==1&&(h=Math.abs(o[y]));continue}let C=this.#s[2*M],L=this.#s[2*M+1];const _=f+C,z=m+L;A=_,x=z;let G=f,Q=m;for(;;){const J=this.#a(o,e,G,Q,A,x,1);C=this.#s[2*J],L=this.#s[2*J+1];const at=G+C,Y=Q+L;w.push(Y,at);const it=G*e+Q;if(o[it+1]===0?o[it]=-u:o[it]===1&&(o[it]=u),at===f&&Y===m&&G===_&&Q===z){o[y]!==1&&(h=Math.abs(o[y]));break}else A=G,x=Q,G=at,Q=Y}}}return d}static#l(t,e,i,a){if(i-e<=4){for(let _=e;_<i-2;_+=2)a.push(t[_],t[_+1]);return}const l=t[e],o=t[e+1],u=t[i-4]-l,h=t[i-3]-o,d=Math.hypot(u,h),f=u/d,m=h/d,y=f*o-m*l,b=h/u,A=1/d,x=Math.atan(b),w=Math.cos(x),T=Math.sin(x),O=A*(Math.abs(w)+Math.abs(T)),R=A*(1-O+O**2),M=Math.max(Math.atan(Math.abs(T+w)*R),Math.atan(Math.abs(T-w)*R));let C=0,L=e;for(let _=e+2;_<i-2;_+=2){const z=Math.abs(y-f*t[_+1]+m*t[_]);z>C&&(L=_,C=z)}C>(d*M)**2?(this.#l(t,e,L+2,a),this.#l(t,L,i,a)):a.push(l,o)}static#r(t){const e=[],i=t.length;return this.#l(t,0,i,e),e.push(t[i-2],t[i-1]),e.length<=4?null:e}static#h(t,e,i,a,l,o){const u=new Float32Array(o**2),h=-2*a**2,d=o>>1;for(let x=0;x<o;x++){const w=(x-d)**2;for(let T=0;T<o;T++)u[x*o+T]=Math.exp((w+(T-d)**2)/h)}const f=new Float32Array(256),m=-2*l**2;for(let x=0;x<256;x++)f[x]=Math.exp(x**2/m);const y=t.length,b=new Uint8Array(y),A=new Uint32Array(256);for(let x=0;x<i;x++)for(let w=0;w<e;w++){const T=x*e+w,O=t[T];let R=0,M=0;for(let L=0;L<o;L++){const _=x+L-d;if(!(_<0||_>=i))for(let z=0;z<o;z++){const G=w+z-d;if(G<0||G>=e)continue;const Q=t[_*e+G],J=u[L*o+z]*f[Math.abs(Q-O)];R+=Q*J,M+=J}}const C=b[T]=Math.round(R/M);A[C]++}return[b,A]}static#o(t){const e=new Uint32Array(256);for(const i of t)e[i]++;return e}static#d(t){const e=t.length,i=new Uint8ClampedArray(e>>2);let a=-1/0,l=1/0;for(let u=0,h=i.length;u<h;u++){if(t[(u<<2)+3]===0){a=i[u]=255;continue}const f=i[u]=t[u<<2];f>a&&(a=f),f<l&&(l=f)}const o=255/(a-l);for(let u=0;u<e;u++)i[u]=(i[u]-l)*o;return i}static#u(t){let e,i=-1/0,a=-1/0;const l=t.findIndex(h=>h!==0);let o=l,u=l;for(e=l;e<256;e++){const h=t[e];h>i&&(e-o>a&&(a=e-o,u=e-1),i=h,o=e)}for(e=u-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:i,height:a}=t,{maxDim:l}=this.#t;let o=i,u=a;if(i>l||a>l){let y=i,b=a,A=Math.log2(Math.max(i,a)/l);const x=Math.floor(A);A=A===x?x-1:x;for(let T=0;T<A;T++){o=Math.ceil(y/2),u=Math.ceil(b/2);const O=new OffscreenCanvas(o,u);O.getContext("2d").drawImage(t,0,0,y,b,0,0,o,u),y=o,b=u,t!==e&&t.close(),t=O.transferToImageBitmap()}const w=Math.min(l/o,l/u);o=Math.round(o*w),u=Math.round(u*w)}const d=new OffscreenCanvas(o,u).getContext("2d",{willReadFrequently:!0});d.filter="grayscale(1)",d.drawImage(t,0,0,t.width,t.height,0,0,o,u);const f=d.getImageData(0,0,o,u).data;return[this.#d(f),o,u]}static extractContoursFromText(t,{fontFamily:e,fontStyle:i,fontWeight:a},l,o,u,h){let d=new OffscreenCanvas(1,1),f=d.getContext("2d",{alpha:!1});const m=200,y=f.font=`${i} ${a} ${m}px ${e}`,{actualBoundingBoxLeft:b,actualBoundingBoxRight:A,actualBoundingBoxAscent:x,actualBoundingBoxDescent:w,fontBoundingBoxAscent:T,fontBoundingBoxDescent:O,width:R}=f.measureText(t),M=1.5,C=Math.ceil(Math.max(Math.abs(b)+Math.abs(A)||0,R)*M),L=Math.ceil(Math.max(Math.abs(x)+Math.abs(w)||m,Math.abs(T)+Math.abs(O)||m)*M);d=new OffscreenCanvas(C,L),f=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=y,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,C,L),f.fillStyle="black",f.fillText(t,C*(M-1)/2,L*(3-M)/2);const _=this.#d(f.getImageData(0,0,C,L).data),z=this.#o(_),G=this.#u(z),Q=this.#i(_,C,L,G);return this.processDrawnLines({lines:{curves:Q,width:C,height:L},pageWidth:l,pageHeight:o,rotation:u,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(t,e,i,a,l){const[o,u,h]=this.#f(t),[d,f]=this.#h(o,u,h,Math.hypot(u,h)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),m=this.#u(f),y=this.#i(d,u,h,m);return this.processDrawnLines({lines:{curves:y,width:u,height:h},pageWidth:e,pageHeight:i,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:a,innerMargin:l,mustSmooth:o,areContours:u}){a%180!==0&&([e,i]=[i,e]);const{curves:h,width:d,height:f}=t,m=t.thickness??0,y=[],b=Math.min(e/d,i/f),A=b/e,x=b/i,w=[];for(const{points:O}of h){const R=o?this.#r(O):O;if(!R)continue;w.push(R);const M=R.length,C=new Float32Array(M),L=new Float32Array(3*(M===2?2:M-2));if(y.push({line:L,points:C}),M===2){C[0]=R[0]*A,C[1]=R[1]*x,L.set([NaN,NaN,NaN,NaN,C[0],C[1]],0);continue}let[_,z,G,Q]=R;_*=A,z*=x,G*=A,Q*=x,C.set([_,z,G,Q],0),L.set([NaN,NaN,NaN,NaN,_,z],0);for(let J=4;J<M;J+=2){const at=C[J]=R[J]*A,Y=C[J+1]=R[J+1]*x;L.set(ct.createBezierPoints(_,z,G,Q,at,Y),(J-2)*3),[_,z,G,Q]=[G,Q,at,Y]}}if(y.length===0)return null;const T=u?new Su:new sr;return T.build(y,e,i,1,a,u?0:m,l),{outline:T,newCurves:w,areContours:u,thickness:m,width:d,height:f}}static async compressSignature({outlines:t,areContours:e,thickness:i,width:a,height:l}){let o=1/0,u=-1/0,h=0;for(const R of t){h+=R.length;for(let M=2,C=R.length;M<C;M++){const L=R[M]-R[M-2];o=Math.min(o,L),u=Math.max(u,L)}}let d;o>=-128&&u<=127?d=Int8Array:o>=-32768&&u<=32767?d=Int16Array:d=Int32Array;const f=t.length,m=wl+Va*f,y=new Uint32Array(m);let b=0;y[b++]=m*Uint32Array.BYTES_PER_ELEMENT+(h-2*f)*d.BYTES_PER_ELEMENT,y[b++]=0,y[b++]=a,y[b++]=l,y[b++]=e?0:1,y[b++]=Math.max(0,Math.floor(i??0)),y[b++]=f,y[b++]=d.BYTES_PER_ELEMENT;for(const R of t)y[b++]=R.length-2,y[b++]=R[0],y[b++]=R[1];const A=new CompressionStream("deflate-raw"),x=A.writable.getWriter();await x.ready,x.write(y);const w=d.prototype.constructor;for(const R of t){const M=new w(R.length-2);for(let C=2,L=R.length;C<L;C++)M[C-2]=R[C]-R[C-2];x.write(M)}x.close();const T=await new Response(A.readable).arrayBuffer(),O=new Uint8Array(T);return vp(O)}static async decompressSignature(t){try{const e=jv(t),{readable:i,writable:a}=new DecompressionStream("deflate-raw"),l=a.getWriter();await l.ready,l.write(e).then(async()=>{await l.ready,await l.close()}).catch(()=>{});let o=null,u=0;for await(const R of i)o||=new Uint8Array(new Uint32Array(R.buffer,0,4)[0]),o.set(R,u),u+=R.length;const h=new Uint32Array(o.buffer,0,o.length>>2),d=h[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const f=h[2],m=h[3],y=h[4]===0,b=h[5],A=h[6],x=h[7],w=[],T=(wl+Va*A)*Uint32Array.BYTES_PER_ELEMENT;let O;switch(x){case Int8Array.BYTES_PER_ELEMENT:O=new Int8Array(o.buffer,T);break;case Int16Array.BYTES_PER_ELEMENT:O=new Int16Array(o.buffer,T);break;case Int32Array.BYTES_PER_ELEMENT:O=new Int32Array(o.buffer,T);break}u=0;for(let R=0;R<A;R++){const M=h[Va*R+wl],C=new Float32Array(M+2);w.push(C);for(let L=0;L<Va-1;L++)C[L]=h[Va*R+wl+L+1];for(let L=0;L<M;L++)C[L+2]=C[L]+O[u++]}return{areContours:y,thickness:b,outlines:w,width:f,height:m}}catch(e){return xt(`decompressSignature: ${e}`),null}}}class Bu extends Xp{constructor(){super(),super.updateProperties({fill:pt._defaultLineColor,"stroke-width":0})}clone(){const t=new Bu;return t.updateAll(this),t}}class zu extends Bl{constructor(t){super(t),super.updateProperties({stroke:pt._defaultLineColor,"stroke-width":1})}clone(){const t=new zu(this._viewParameters);return t.updateAll(this),t}}class ws extends yt{#t=!1;#e=null;#s=null;#n=null;static _type="signature";static _editorType=St.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#s=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){pt.initialize(t,e),this._defaultDrawingOptions=new Bu,this._defaultDrawnSignatureOptions=new zu(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return Ot(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#s){const{lines:a,mustSmooth:l,areContours:o,description:u,uuid:h,heightInPage:d}=this.#s,{rawDims:{pageWidth:f,pageHeight:m},rotation:y}=this.parent.viewport,b=_i.processDrawnLines({lines:a,pageWidth:f,pageHeight:m,rotation:y,innerMargin:ws._INNER_MARGIN,mustSmooth:l,areContours:o});this.addSignature(b,d,u,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return i&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#n=t,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#e}set description(t){this.#e=t,super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)})}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:i,width:a,height:l}=this.#s,o=Math.max(a,l),u=_i.processDrawnLines({lines:{curves:t.map(h=>({points:h})),thickness:i,width:a,height:l},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,i,a){const{x:l,y:o}=this,{outline:u}=this.#s=t;this.#t=u instanceof Su,this.description=i,this.div.setAttribute("data-l10n-args",JSON.stringify({description:i}));let h;this.#t?h=ws.getDefaultDrawingOptions():(h=ws._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:h});const[d,f]=this.parentDimensions,[,m]=this.pageDimensions;let y=e/m;y=y>=1?.5:y,this.width*=y/this.height,this.width>=1&&(y*=.9/this.width,this.width=.9),this.height=y,this.setDims(d*this.width,f*this.height),this.x=l,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:a}=this.parent.viewport;return _i.process(t,e,i,a,ws._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:i,pageHeight:a},rotation:l}=this.parent.viewport;return _i.extractContoursFromText(t,e,i,a,l,ws._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:a}=this.parent.viewport;return _i.processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:a,innerMargin:ws._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=ws.getDefaultDrawingOptions():(this._drawingOptions=ws._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:i,rect:a}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":l}}=this,o={annotationType:St.SIGNATURE,isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:l,pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(o.paths={lines:e,points:i},o.uuid=this.#n,o.isCopy=!0):o.lines=e,this.#e&&(o.accessibilityData={type:"Figure",alt:this.#e}),o}static deserializeDraw(t,e,i,a,l,o){return o.areContours?Su.deserialize(t,e,i,a,l,o):sr.deserialize(t,e,i,a,l,o)}static async deserialize(t,e,i){const a=await super.deserialize(t,e,i);return a.#t=t.areContours,a.#e=t.accessibilityData?.alt||"",a.#n=t.uuid,a}}class fb extends pt{#t=null;#e=null;#s=null;#n=null;#a=null;#i="";#l=null;#r=!1;#h=null;#o=!1;#d=!1;static _type="stamp";static _editorType=St.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#a=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){pt.initialize(t,e)}static isHandlingMimeForPasting(t){return pu.includes(t)}static paste(t,e){e.pasteEditor({mode:St.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#u(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#o=t.isSvg),t.file&&(this.#i=t.file.name),this.#p()}#f(){if(this.#s=null,this._uiManager.enableWaiting(!1),!!this.#l){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:l,height:o}=t||this.copyCanvas(null,null,!0).imageData,u=await i.guess({name:"altText",request:{data:a,width:l,height:o,channels:a.length/(l*o)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const h=u.output;return await this.setGuessedAltText(h),e&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#g(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(i=>this.#u(i,!0)).finally(()=>this.#f());return}if(this.#n){const i=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromUrl(i).then(a=>this.#u(a)).finally(()=>this.#f());return}if(this.#a){const i=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromFile(i).then(a=>this.#u(a)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=pu.join(",");const e=this._uiManager._signal;this.#s=new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#u(a)}i()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#l?.remove(),this.#l=null,this.#h&&(clearTimeout(this.#h),this.#h=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#g();return}super.rebuild(),this.div!==null&&(this.#e&&this.#l===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#s||this.#t||this.#n||this.#a||this.#e||this.#r)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#r||(this.#t?this.#p():this.#g()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:i,bitmap:a}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(this.#e=i,a&&(this.#t=a),this.#r=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#h!==null&&clearTimeout(this.#h);const t=200;this.#h=setTimeout(()=>{this.#h=null,this.#m()},t)}#p(){const{div:t}=this;let{width:e,height:i}=this.#t;const[a,l]=this.pageDimensions,o=.75;if(this.width)e=this.width*a,i=this.height*l;else if(e>o*a||i>o*l){const f=Math.min(o*a/e,o*l/i);e*=f,i*=f}const[u,h]=this.parentDimensions;this.setDims(e*u/a,i*h/l),this._uiManager.enableWaiting(!1);const d=this.#l=document.createElement("canvas");d.setAttribute("role","img"),this.addContainer(d),this.width=e/a,this.height=i/l,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#m(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#i&&this.div.setAttribute("aria-description",this.#i),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,i=!1){t||(t=224);const{width:a,height:l}=this.#t,o=new Cs;let u=this.#t,h=a,d=l,f=null;if(e){if(a>e||l>e){const L=Math.min(e/a,e/l);h=Math.floor(a*L),d=Math.floor(l*L)}f=document.createElement("canvas");const y=f.width=Math.ceil(h*o.sx),b=f.height=Math.ceil(d*o.sy);this.#o||(u=this.#c(y,b));const A=f.getContext("2d");A.filter=this._uiManager.hcmFilter;let x="white",w="#cfcfd8";this._uiManager.hcmFilter!=="none"?w="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(x="#8f8f9d",w="#42414d");const T=15,O=T*o.sx,R=T*o.sy,M=new OffscreenCanvas(O*2,R*2),C=M.getContext("2d");C.fillStyle=x,C.fillRect(0,0,O*2,R*2),C.fillStyle=w,C.fillRect(0,0,O,R),C.fillRect(O,R,O,R),A.fillStyle=A.createPattern(M,"repeat"),A.fillRect(0,0,y,b),A.drawImage(u,0,0,u.width,u.height,0,0,y,b)}let m=null;if(i){let y,b;if(o.symmetric&&u.width<t&&u.height<t)y=u.width,b=u.height;else if(u=this.#t,a>t||l>t){const w=Math.min(t/a,t/l);y=Math.floor(a*w),b=Math.floor(l*w),this.#o||(u=this.#c(y,b))}const x=new OffscreenCanvas(y,b).getContext("2d",{willReadFrequently:!0});x.drawImage(u,0,0,u.width,u.height,0,0,y,b),m={width:y,height:b,data:x.getImageData(0,0,y,b).data}}return{canvas:f,width:h,height:d,imageData:m}}#c(t,e){const{width:i,height:a}=this.#t;let l=i,o=a,u=this.#t;for(;l>2*t||o>2*e;){const h=l,d=o;l>2*t&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const f=new OffscreenCanvas(l,o);f.getContext("2d").drawImage(u,0,0,h,d,0,0,l,o),u=f.transferToImageBitmap()}return u}#m(){const[t,e]=this.parentDimensions,{width:i,height:a}=this,l=new Cs,o=Math.ceil(i*t*l.sx),u=Math.ceil(a*e*l.sy),h=this.#l;if(!h||h.width===o&&h.height===u)return;h.width=o,h.height=u;const d=this.#o?this.#t:this.#c(o,u),f=h.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(d,0,0,d.width,d.height,0,0,o,u)}#v(t){if(t){if(this.#o){const a=this._uiManager.imageManager.getSvgUrl(this.#e);if(a)return a}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#o){const[e,i]=this.pageDimensions,a=Math.round(this.width*e*Ui.PDF_TO_CSS_UNITS),l=Math.round(this.height*i*Ui.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(a,l);return o.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,a,l),o.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,i){let a=null,l=!1;if(t instanceof Vp){const{data:{rect:x,rotation:w,id:T,structParent:O,popupRef:R},container:M,parent:{page:{pageNumber:C}},canvas:L}=t;let _,z;L?(delete t.canvas,{id:_,bitmap:z}=i.imageManager.getFromCanvas(M.id,L),L.remove()):(l=!0,t._hasNoCanvas=!0);const G=(await e._structTree.getAriaAttributes(`${wu}${T}`))?.get("aria-label")||"";a=t={annotationType:St.STAMP,bitmapId:_,bitmap:z,pageIndex:C-1,rect:x.slice(0),rotation:w,annotationElementId:T,id:T,deleted:!1,accessibilityData:{decorative:!1,altText:G},isSvg:!1,structParent:O,popupRef:R}}const o=await super.deserialize(t,e,i),{rect:u,bitmap:h,bitmapUrl:d,bitmapId:f,isSvg:m,accessibilityData:y}=t;l?(i.addMissingCanvas(t.id,o),o.#r=!0):f&&i.imageManager.isValidId(f)?(o.#e=f,h&&(o.#t=h)):o.#n=d,o.#o=m;const[b,A]=o.pageDimensions;return o.width=(u[2]-u[0])/b,o.height=(u[3]-u[1])/A,y&&(o.altTextData=y),o._initialData=a,o.#d=!!a,o}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:St.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#o,structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=this.#v(!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:a,altText:l}=this.serializeAltText(!1);if(!a&&l&&(i.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const u=this.#y(i);if(u.isSame)return null;u.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,e===null)return i;e.stamps||=new Map;const o=this.#o?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:o,serialized:i}),i.bitmap=this.#v(!1);else if(this.#o){const u=e.stamps.get(this.#e);o>u.area&&(u.area=o,u.serialized.bitmap.close(),u.serialized.bitmap=this.#v(!1))}return i}#y(t){const{pageIndex:e,accessibilityData:{altText:i}}=this._initialData,a=t.pageIndex===e,l=(t.accessibilityData?.alt||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&a&&l,isSameAltText:l}}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}class Gs{#t;#e=!1;#s=null;#n=null;#a=null;#i=new Map;#l=!1;#r=!1;#h=!1;#o=null;#d=null;#u=null;#f=null;#g=null;#p=-1;#c;static _initialized=!1;static#m=new Map([ue,Pu,fb,te,ws].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:a,accessibilityManager:l,annotationLayer:o,drawLayer:u,textLayer:h,viewport:d,l10n:f}){const m=[...Gs.#m.values()];if(!Gs._initialized){Gs._initialized=!0;for(const y of m)y.initialize(f,t)}t.registerEditorTypes(m),this.#c=t,this.pageIndex=e,this.div=i,this.#t=l,this.#s=o,this.viewport=d,this.#u=h,this.drawLayer=u,this._structTree=a,this.#c.addLayer(this)}get isEmpty(){return this.#i.size===0}get isInvisible(){return this.isEmpty&&this.#c.getMode()===St.NONE}updateToolbar(t){this.#c.updateToolbar(t)}updateMode(t=this.#c.getMode()){switch(this.#S(),t){case St.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case St.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case St.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const i of Gs.#m.values())e.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#u?.div}setEditingState(t){this.#c.setEditingState(t)}addCommands(t){this.#c.addCommands(t)}cleanUndoStack(t){this.#c.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#s?.div.classList.toggle("disabled",!t)}async enable(){this.#h=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.#g?.abort(),this.#g=null;const t=new Set;for(const i of this.#i.values())i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#c.removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!this.#s){this.#h=!1;return}const e=this.#s.getEditableAnnotations();for(const i of e){if(i.hide(),this.#c.isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const a=await this.deserialize(i);a&&(this.addOrRebuild(a),a.enableEditing())}this.#h=!1}disable(){if(this.#r=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.#u&&!this.#g){this.#g=new AbortController;const a=this.#c.combinedSignal(this.#g);this.#u.div.addEventListener("pointerdown",l=>{const{clientX:u,clientY:h,timeStamp:d}=l,f=this.#p;if(d-f>500){this.#p=d;return}this.#p=-1;const{classList:m}=this.div;m.toggle("getElements",!0);const y=document.elementsFromPoint(u,h);if(m.toggle("getElements",!1),!this.div.contains(y[0]))return;let b;const A=new RegExp(`^${dp}[0-9]+$`);for(const w of y)if(A.test(w.id)){b=w.id;break}if(!b)return;const x=this.#i.get(b);x?.annotationElementId===null&&(l.stopPropagation(),l.preventDefault(),x.dblclick())},{signal:a,capture:!0})}const t=new Map,e=new Map;for(const a of this.#i.values())if(a.disableEditing(),!!a.annotationElementId){if(a.serialize()!==null){t.set(a.annotationElementId,a);continue}else e.set(a.annotationElementId,a);this.getEditableAnnotation(a.annotationElementId)?.show(),a.remove()}if(this.#s){const a=this.#s.getEditableAnnotations();for(const l of a){const{id:o}=l.data;if(this.#c.isDeletedAnnotationElement(o))continue;let u=e.get(o);if(u){u.resetAnnotationElement(l),u.show(!1),l.show();continue}u=t.get(o),u&&(this.#c.addChangedExistingAnnotation(u),u.renderAnnotationElement(l)&&u.show(!1)),l.show()}}this.#S(),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const a of Gs.#m.values())i.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#r=!1}getEditableAnnotation(t){return this.#s?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#c.getActive()!==t&&this.#c.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#u?.div&&!this.#f){this.#f=new AbortController;const t=this.#c.combinedSignal(this.#f);this.#u.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#u.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#u?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#u.div.classList.remove("highlighting"))}#v(t){this.#c.unselectAll();const{target:e}=t;if(e===this.#u.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#u.div.contains(e)){const{isMac:i}=Ae.platform;if(t.button!==0||t.ctrlKey&&i)return;this.#c.showAllEditors("highlight",!0,!0),this.#u.div.classList.add("free"),this.toggleDrawing(),te.startHighlighting(this,this.#c.direction==="ltr",{target:this.#u.div,x:t.x,y:t.y}),this.#u.div.addEventListener("pointerup",()=>{this.#u.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#c._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#c.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#i.set(t.id,t);const{annotationElementId:e}=t;e&&this.#c.isDeletedAnnotationElement(e)&&this.#c.removeDeletedAnnotationElement(t)}detach(t){this.#i.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#r&&t.annotationElementId&&this.#c.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#c.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#c.addDeletedAnnotationElement(t.annotationElementId),pt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#c.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#h),this.#c.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#a&&(t._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#c._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getNextId(){return this.#c.getId()}get#y(){return Gs.#m.get(this.#c.getMode())}combinedSignal(t){return this.#c.combinedSignal(t)}#x(t){const e=this.#y;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#c.updateMode(t.mode);const{offsetX:i,offsetY:a}=this.#A(),l=this.getNextId(),o=this.#x({parent:this,id:l,x:i,y:a,uiManager:this.#c,isCentered:!0,...e});o&&this.add(o)}async deserialize(t){return await Gs.#m.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#c)||null}createAndAddNewEditor(t,e,i={}){const a=this.getNextId(),l=this.#x({parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:this.#c,isCentered:e,...i});return l&&this.add(l),l}#A(){const{x:t,y:e,width:i,height:a}=this.div.getBoundingClientRect(),l=Math.max(0,t),o=Math.max(0,e),u=Math.min(window.innerWidth,t+i),h=Math.min(window.innerHeight,e+a),d=(l+u)/2-t,f=(o+h)/2-e,[m,y]=this.viewport.rotation%180===0?[d,f]:[f,d];return{offsetX:m,offsetY:y}}addNewEditor(t={}){this.createAndAddNewEditor(this.#A(),!0,t)}setSelected(t){this.#c.setSelected(t)}toggleSelected(t){this.#c.toggleSelected(t)}unselect(t){this.#c.unselect(t)}pointerup(t){const{isMac:e}=Ae.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#l||(this.#l=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const i=this.#c.getMode();if(i===St.STAMP||i===St.SIGNATURE){this.#c.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#c.getMode()===St.HIGHLIGHT&&this.enableTextSelection(),this.#l){this.#l=!1;return}const{isMac:e}=Ae.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#l=!0,this.#y?.isDrawer){this.startDrawingSession(t);return}const i=this.#c.getActive();this.#e=!i||i.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#o){this.#y.startDrawing(this,this.#c,!1,t);return}this.#c.setCurrentDrawingSession(this),this.#o=new AbortController;const e=this.#c.combinedSignal(this.#o);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#y.startDrawing(this,this.#c,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#o?(this.#c.setCurrentDrawingSession(null),this.#o.abort(),this.#o=null,this.#d=null,this.#y.endDrawing(t)):null}findNewParent(t,e,i){const a=this.#c.findParent(e,i);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return this.#o?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#o&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#c.getActive()?.parent===this&&(this.#c.commitOrRemove(),this.#c.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const t of this.#i.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#i.clear(),this.#c.removeLayer(this)}#S(){for(const t of this.#i.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Gn(this.div,t);for(const e of this.#c.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#c.commitOrRemove(),this.#S();const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,Gn(this.div,{rotation:i}),e!==i)for(const a of this.#i.values())a.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#c.viewParameters.realScale}}class be{#t=null;#e=new Map;#s=new Map;static#n=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return Ot(this,"_svgFactory",new Ol)}static#a(t,[e,i,a,l]){const{style:o}=t;o.top=`${100*i}%`,o.left=`${100*e}%`,o.width=`${100*a}%`,o.height=`${100*l}%`}#i(){const t=be._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#l(t,e){const i=be._svgFactory.createElement("clipPath");t.append(i);const a=`clip_${e}`;i.setAttribute("id",a),i.setAttribute("clipPathUnits","objectBoundingBox");const l=be._svgFactory.createElement("use");return i.append(l),l.setAttribute("href",`#${e}`),l.classList.add("clip"),a}#r(t,e){for(const[i,a]of Object.entries(e))a===null?t.removeAttribute(i):t.setAttribute(i,a)}draw(t,e=!1,i=!1){const a=be.#n++,l=this.#i(),o=be._svgFactory.createElement("defs");l.append(o);const u=be._svgFactory.createElement("path");o.append(u);const h=`path_p${this.pageIndex}_${a}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#s.set(a,u);const d=i?this.#l(o,h):null,f=be._svgFactory.createElement("use");return l.append(f),f.setAttribute("href",`#${h}`),this.updateProperties(l,t),this.#e.set(a,l),{id:a,clipPathId:`url(#${d})`}}drawOutline(t,e){const i=be.#n++,a=this.#i(),l=be._svgFactory.createElement("defs");a.append(l);const o=be._svgFactory.createElement("path");l.append(o);const u=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",u),o.setAttribute("vector-effect","non-scaling-stroke");let h;if(e){const m=be._svgFactory.createElement("mask");l.append(m),h=`mask_p${this.pageIndex}_${i}`,m.setAttribute("id",h),m.setAttribute("maskUnits","objectBoundingBox");const y=be._svgFactory.createElement("rect");m.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const b=be._svgFactory.createElement("use");m.append(b),b.setAttribute("href",`#${u}`),b.setAttribute("stroke","none"),b.setAttribute("fill","black"),b.setAttribute("fill-rule","nonzero"),b.classList.add("mask")}const d=be._svgFactory.createElement("use");a.append(d),d.setAttribute("href",`#${u}`),h&&d.setAttribute("mask",`url(#${h})`);const f=d.cloneNode();return a.append(f),d.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(a,t),this.#e.set(i,a),i}finalizeDraw(t,e){this.#s.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:i,bbox:a,rootClass:l,path:o}=e,u=typeof t=="number"?this.#e.get(t):t;if(u){if(i&&this.#r(u,i),a&&be.#a(u,a),l){const{classList:h}=u;for(const[d,f]of Object.entries(l))h.toggle(d,f)}if(o){const d=u.firstChild.firstChild;this.#r(d,o)}}}updateParent(t,e){if(e===this)return;const i=this.#e.get(t);i&&(e.#t.append(i),this.#e.delete(t),e.#e.set(t,i))}remove(t){this.#s.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#s.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:xu};globalThis.pdfjsLib={AbortException:yn,AnnotationEditorLayer:Gs,AnnotationEditorParamsType:Dt,AnnotationEditorType:St,AnnotationEditorUIManager:bn,AnnotationLayer:ju,AnnotationMode:mn,AnnotationType:ae,build:Yy,ColorPicker:os,createValidAbsoluteUrl:fp,DOMSVGFactory:Ol,DrawLayer:be,FeatureTest:Ae,fetchData:qa,getDocument:kp,getFilenameFromUrl:Pv,getPdfFilenameFromUrl:Bv,getUuid:mp,getXfaPageViewport:Fv,GlobalWorkerOptions:zi,ImageKind:Tl,InvalidPDFException:gu,isDataScheme:_l,isPdfFile:Cu,isValidExplicitDest:Zv,MathClamp:Oe,noContextMenu:gs,normalizeUnicode:kv,OPS:Nl,OutputScale:Cs,PasswordResponses:Tv,PDFDataRangeTransport:_p,PDFDateString:yp,PDFWorker:Qa,PermissionFlag:wv,PixelsPerInch:Ui,RenderingCancelledException:Tu,ResponseException:Ml,setLayerDimensions:Gn,shadow:Ot,SignatureExtractor:_i,stopEvent:re,SupportedImageMimeTypes:pu,TextLayer:Ne,TouchManager:jl,updateUrlHash:gp,Util:ft,VerbosityLevel:Ll,version:Vy,XfaLayer:Bp};function gb(p){const t=[];let i=p.replace(/\n/g," ").replace(/United\s+International\s+University.*?Credit\s+/g,"");i=i.replace(/CLASS\s+ROUTINE\s+252.*?monir@admin\.uiu,ac\.bd/g,"");const a=/(\d+)\s+(BSCSE|BSDS)\s+[A-Z]{2,4}\s+\d{4}/g,l=[];let o;for(;(o=a.exec(i))!==null;)l.push({sl:parseInt(o[1]),start:o.index,fullMatch:o[0]});const u=[];for(let h=0;h<l.length;h++){const d=l[h].start,f=h<l.length-1?l[h+1].start:i.length,m=i.substring(d,f);u.push(m.trim())}if(!u)return t;for(const h of u){const f=h.trim().split(/\s+/);let m=0;const y=parseInt(f[m++]);if(isNaN(y))continue;const b=f[m++]||"",A=f[m++]||"",x=f[m++]||"",w=`${A} ${x}`;let T="",O=-1;for(let D=m;D<f.length;D++){const j=f[D];if(/^[A-Z]{1,2}$/.test(j)||j.startsWith("A(If")||j.startsWith("B(If")||j.startsWith("C(If")||j.startsWith("D(If")||j.startsWith("E(If")||j.startsWith("F(If")||j.startsWith("G(If")||j.startsWith("H(If")||j.startsWith("I(If")||j.startsWith("J(If")||j.startsWith("K(If")||j.startsWith("L(If")||j.startsWith("M(If")||j.startsWith("N(If")||j.startsWith("O(If")||j.startsWith("P(If")||j.startsWith("Q(If")||j.startsWith("R(If")||j.startsWith("S(If")||j.startsWith("T(If")||j.startsWith("U(If")||j.startsWith("V(If")||j.startsWith("W(If")||j.startsWith("X(If")||j.startsWith("Y(If")||j.startsWith("Z(If")||/^[A-Z]{2}\(If$/.test(j)||/^[A-Z]{1,2}\(If$/.test(j)||/^[A-Z]{1,2}\(\s*If$/.test(j)||/^[A-Z]{1,2}\(\s*if$/.test(j)||/^[A-Z]{1,2}\s*\(Time$/.test(j)||/^[A-Z]{1,2}\($/.test(j)){if(D+1<f.length){const st=f[D+1];if(/^\d/.test(st)||["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].includes(st)||st==="(If"||st==="(if"||st==="Required)"||st==="required)"||st==="changed)"||st==="If"||st==="(Time"||st==="(time"||/^[A-Z]{1,2}\(If/.test(j)||/^[A-Z]{1,2}\(\s*If/.test(j)||/^[A-Z]{1,2}\(\s*if/.test(j)||/^[A-Z]{1,2}\s*\(Time/.test(j)||j.endsWith("(")&&(st==="If"||st==="if")){O=D;break}}else if(/^[A-Z]{1,2}$/.test(j)||/^[A-Z]{1,2}\(If/.test(j)||/^[A-Z]{1,2}\(\s*If/.test(j)||/^[A-Z]{1,2}\(\s*if/.test(j)||/^[A-Z]{1,2}\s*\(Time/.test(j)){O=D;break}}T+=(T?" ":"")+j}if(O===-1)continue;let R=f[O];if(m=O+1,R.endsWith("(If")&&m<f.length&&f[m]==="Required)"&&(R=R.replace("(If"," (If Required)"),m++),m<f.length&&(f[m]==="(if"||f[m]==="(If")&&m+1<f.length&&(f[m+1]==="required)"||f[m+1]==="Required)")&&(R=R+" (if required)",m+=2),/^[A-Z]{1,2}\(If/.test(R)){const D=R.match(/^([A-Z]{1,2})\(If(.*)$/);D&&(R=D[1]+" (If"+D[2],m<f.length&&(f[m]==="Required)"||f[m]==="required)")&&(R=R.replace("(If"," (If Required)"),m++))}if(/^[A-Z]{1,2}\(\s*If/.test(R)){const D=R.match(/^([A-Z]{1,2})\(\s*If(.*)$/);D&&(R=D[1]+" (If"+D[2],m<f.length&&(f[m]==="required)"||f[m]==="Required)")&&(R=R.replace("(If"," (If required)"),m++))}if(/^[A-Z]{1,2}\(\s*if/.test(R)){const D=R.match(/^([A-Z]{1,2})\(\s*if(.*)$/);D&&(R=D[1]+" (if"+D[2],m<f.length&&(f[m]==="required)"||f[m]==="Required)")&&(R=R.replace("(if"," (if required)"),m++))}if(/^[A-Z]{1,2}\s*\(Time/.test(R)){const D=R.match(/^([A-Z]{1,2})\s*\(Time(.*)$/);D&&(R=D[1]+" (Time"+D[2],m<f.length&&f[m]==="changed)"&&(R=R.replace("(Time"," (Time changed)"),m++))}R.endsWith("(")&&m<f.length&&f[m]==="If"&&(m+1<f.length&&(f[m+1]==="required)"||f[m+1]==="Required)")?(R=R.slice(0,-1)+" (If required)",m+=2):(R=R.slice(0,-1)+" (If)",m++)),/^[A-Z]{1,2}$/.test(R)&&m<f.length&&f[m]==="(Time"&&(m+1<f.length&&f[m+1]==="changed)"?(R=R+" (Time changed)",m+=2):(R=R+" (Time)",m++));let M="",C=-1;for(let D=f.length-1;D>=m;D--)if(/^\d+$/.test(f[D])&&parseInt(f[D])>=1&&parseInt(f[D])<=4){M=f[D],C=D;break}let L=M==="1"||T.includes("Laboratory")||T.includes("Lab");if(!L&&C>m){for(let D=m;D<Math.min(m+4,C);D++)if(f[D]&&(f[D].includes("Lab")||f[D].includes("Computer"))){L=!0;break}}let _="",z="",G="",Q="",J="",at="",Y="",it="";if(L){if(m<f.length&&!["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].includes(f[m]))for(_=f[m++];m<f.length&&!["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].includes(f[m]);)_+=" "+f[m++];m<f.length&&["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].includes(f[m])&&(G=f[m++]),m<f.length&&f[m].includes(":")&&(J=f[m++],m<f.length&&f[m]==="-"&&(J+=" "+f[m++],m<f.length&&f[m].includes(":")&&(J+=" "+f[m++]))),m<f.length&&f[m]==="-"&&m++,C>m&&(it=f[C-1],Y=f.slice(m,C-1).join(" "))}else m<f.length&&!["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].includes(f[m])&&(_=f[m++]),m<f.length&&!["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].includes(f[m])&&(z=f[m++]),m<f.length&&["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].includes(f[m])&&(G=f[m++]),m<f.length&&["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].includes(f[m])&&(Q=f[m++]),m<f.length&&f[m].includes(":")&&(J=f[m++],m<f.length&&f[m]==="-"&&(J+=" "+f[m++],m<f.length&&f[m].includes(":")&&(J+=" "+f[m++]))),m<f.length&&f[m].includes(":")&&(at=f[m++],m<f.length&&f[m]==="-"&&(at+=" "+f[m++],m<f.length&&f[m].includes(":")&&(at+=" "+f[m++]))),C>m&&(it=f[C-1],Y=f.slice(m,C-1).join(" "));const lt={sl:y,program:b,courseCode:w.trim(),title:T.trim(),section:R.trim(),room1:_.trim(),room2:z.trim(),day1:G.trim(),day2:Q.trim(),time1:J.trim(),time2:at.trim(),facultyName:Y.trim(),facultyInitial:it.trim(),credit:M.trim()};t.push(lt)}return t}function pb({coursesCount:p,onClose:t}){console.log("SuccessPopup rendered with coursesCount:",p);const e=()=>{console.log("SuccessPopup button clicked"),t()};return E.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[9999] animate-fade-in",children:E.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl p-8 max-w-md w-full mx-4 shadow-2xl border border-gray-200 dark:border-dark-700 animate-scale-in",children:[E.jsx("div",{className:"flex items-center justify-center mb-6",children:E.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-full p-4 shadow-lg",children:E.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),E.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-3",children:"🎉 PDF Processed Successfully!"}),E.jsx("p",{className:"text-center text-gray-600 dark:text-gray-300 mb-6",children:"Your course PDF has been analyzed and all course information has been extracted."}),E.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border border-green-200 dark:border-green-800 rounded-xl p-4 mb-6",children:E.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[E.jsx("svg",{className:"w-5 h-5 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),E.jsxs("span",{className:"text-green-800 dark:text-green-200 font-semibold",children:[p," courses found"]})]})}),E.jsxs("button",{onClick:e,className:"w-full btn-primary text-lg",children:["Continue to Course Selection",E.jsx("svg",{className:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})})}zi.workerSrc="/pdf.worker.min.js";function mb({onParsed:p}){const t=Et.useRef(),[e,i]=Et.useState(!1),[a,l]=Et.useState(""),[o,u]=Et.useState([]),[h,d]=Et.useState(!1),[f,m]=Et.useState(!1),y=async O=>{if(console.log("File change event triggered"),l(""),u([]),i(!0),console.log("Selected file:",O),!O){console.log("No file selected"),i(!1);return}if(O.type!=="application/pdf"){console.log("File type is not PDF:",O.type),l("Please select a PDF file"),i(!1);return}try{console.log("Starting PDF processing...");const R=await O.arrayBuffer();console.log("Got array buffer, length:",R.byteLength);const M=await kp({data:R}).promise;console.log("PDF loaded successfully! Pages:",M.numPages);let C="";for(let _=1;_<=M.numPages;_++){const Q=(await(await M.getPage(_)).getTextContent()).items.map(J=>J.str).join(" ");C+=Q+" "}console.log("Extracted text length:",C.length),console.log("First 500 chars:",C.substring(0,500));const L=gb(C);console.log("Parsed courses count:",L.length),u(L),i(!1),L.length>0?d(!0):l("No courses found in the PDF. Please ensure the PDF contains course information.")}catch(R){console.error("Error processing PDF:",R),l("Error processing PDF file. Please try again."),i(!1)}},b=O=>{const R=O.target.files[0];R&&y(R)},A=O=>{O.preventDefault(),m(!1);const R=O.dataTransfer.files[0];R&&y(R)},x=O=>{O.preventDefault(),m(!0)},w=O=>{O.preventDefault(),m(!1)},T=()=>{console.log("Success popup close called"),d(!1),p(o)};return E.jsxs("div",{className:"p-8 bg-white dark:bg-gray-900 min-h-screen",children:[E.jsxs("div",{className:"text-center mb-8",children:[E.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:"Upload Course PDF"}),E.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"Upload your university's course offering PDF to get started. Our AI will automatically extract all course information."})]}),E.jsxs("div",{className:"max-w-2xl mx-auto",children:[E.jsxs("div",{className:`relative border-2 border-dashed rounded-xl p-12 text-center transition-all duration-300 ${f?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-blue-400 dark:hover:border-blue-500"}`,onDrop:A,onDragOver:x,onDragLeave:w,children:[E.jsx("input",{ref:t,type:"file",accept:".pdf",onChange:b,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),E.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[E.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:E.jsx("svg",{className:"w-8 h-8 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),E.jsxs("div",{children:[E.jsx("p",{className:"text-xl font-medium text-gray-900 dark:text-white mb-2",children:"Drop your PDF here or click to browse"}),E.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Supports PDF files up to 10MB"})]}),E.jsx("button",{type:"button",onClick:()=>t.current?.click(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700 transition-colors font-medium",children:"Choose File"})]})]}),e&&E.jsx("div",{className:"mt-8 text-center",children:E.jsxs("div",{className:"inline-flex items-center space-x-3 px-6 py-3 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[E.jsx("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),E.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:"Processing PDF..."})]})}),a&&E.jsx("div",{className:"mt-8 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),E.jsx("span",{className:"text-red-700 dark:text-red-300 font-medium",children:a})]})}),o.length>0&&!e&&!h&&E.jsx("div",{className:"mt-8 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),E.jsxs("span",{className:"text-green-700 dark:text-green-300 font-medium",children:["Successfully parsed ",o.length," courses!"]})]})}),E.jsxs("div",{className:"mt-8 p-6 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[E.jsx("h3",{className:"text-lg font-medium text-blue-900 dark:text-blue-100 mb-3",children:"💡 Tips for best results:"}),E.jsxs("ul",{className:"space-y-2 text-blue-800 dark:text-blue-200",children:[E.jsxs("li",{className:"flex items-start space-x-2",children:[E.jsx("span",{children:"•"}),E.jsx("span",{children:"Make sure your PDF contains course schedules with times and faculty information"})]}),E.jsxs("li",{className:"flex items-start space-x-2",children:[E.jsx("span",{children:"•"}),E.jsx("span",{children:"Text-based PDFs work better than scanned image PDFs"})]}),E.jsxs("li",{className:"flex items-start space-x-2",children:[E.jsx("span",{children:"•"}),E.jsx("span",{children:"University course catalogs or timetables are ideal"})]})]})]})]}),h&&E.jsx(pb,{coursesCount:o.length,onClose:T})]})}function vb({courses:p,onContinue:t,onBack:e,selectedCourses:i}){const[a,l]=Et.useState(""),[o,u]=Et.useState(i||[]),[h,d]=Et.useState([]),f=p.reduce((x,w)=>(x[w.courseCode]||(x[w.courseCode]={...w,sections:[]}),x[w.courseCode].sections.push(w),x),{}),m=Object.values(f),y=x=>{if(!x.trim()){d(m);return}const w=x.toLowerCase(),T=m.filter(O=>{const R=O.courseCode.toLowerCase(),M=O.title.toLowerCase();if(R.includes(w)||M.includes(w))return!0;const C=M.split(" ");return!!(C.map(z=>z.charAt(0)).join("").toLowerCase().includes(w)||C.map(z=>z.charAt(0).toLowerCase()).join("").includes(w))});d(T)};Et.useEffect(()=>{y(a)},[a]),Et.useEffect(()=>{d(m)},[p]);const b=x=>{o.includes(x)?u(o.filter(w=>w!==x)):u([...o,x])},A=()=>{if(o.length===0){alert("Please select at least one course before continuing.");return}t(o)};return E.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[E.jsxs("div",{className:"mb-6",children:[E.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Select Your Courses"}),E.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Search and select the courses you want to include in your routine."})]}),E.jsxs("div",{className:"flex justify-between mb-8",children:[e&&E.jsxs("button",{onClick:e,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-medium flex items-center",children:[E.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),E.jsx("button",{onClick:A,disabled:o.length===0,className:`px-6 py-3 rounded-lg font-medium transition-colors ${o.length===0?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:"Continue to Faculty Selection"})]}),E.jsxs("div",{className:"mb-6",children:[E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:E.jsx("svg",{className:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:E.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),E.jsx("input",{type:"text",placeholder:"Search courses (e.g., 'CSE 101', 'Computer Networks', or 'cn')...",value:a,onChange:x=>l(x.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 dark:border-gray-600 rounded-lg text-sm placeholder-gray-500 dark:placeholder-gray-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a&&E.jsx("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-300",children:h.length===0?`No courses found for "${a}"`:`Found ${h.length} course${h.length!==1?"s":""} matching "${a}"`})]}),o.length>0&&E.jsxs("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[E.jsxs("h3",{className:"font-semibold text-blue-900 mb-2",children:["Selected Courses (",o.length,")"]}),E.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(x=>(f[x],E.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:[x,E.jsx("button",{onClick:()=>b(x),className:"ml-2 text-blue-600 hover:text-blue-800",children:"×"})]},x)))})]}),E.jsx("div",{className:"space-y-3 mb-6",children:h.map(x=>E.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-all hover:shadow-md ${o.includes(x.courseCode)?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 dark:border-blue-400":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-gray-300 dark:hover:border-gray-500"}`,onClick:()=>b(x.courseCode),children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("div",{className:"flex-1",children:E.jsxs("div",{className:"flex items-center space-x-3",children:[E.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center ${o.includes(x.courseCode)?"bg-blue-500 border-blue-500":"border-gray-300 dark:border-gray-500"}`,children:o.includes(x.courseCode)&&E.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),E.jsxs("div",{children:[E.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:x.courseCode}),E.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:x.title})]})]})}),E.jsxs("div",{className:"text-right",children:[E.jsxs("div",{className:"text-sm text-gray-500",children:[x.sections.length," section",x.sections.length!==1?"s":""]}),E.jsxs("div",{className:"text-sm font-medium text-gray-700",children:[x.credit," credit",x.credit!=="1"?"s":""]})]})]})},x.courseCode))}),h.length===0&&a&&E.jsxs("div",{className:"text-center py-12",children:[E.jsxs("div",{className:"text-gray-500 mb-4",children:['No courses found matching "',a,'"']}),E.jsx("button",{onClick:()=>l(""),className:"text-blue-600 hover:text-blue-800",children:"Clear search"})]})]})}function yb({selectedCourses:p,courses:t,onContinue:e,onBack:i,facultyPreferences:a}){const[l,o]=Et.useState(a||{}),[u,h]=Et.useState(""),[d,f]=Et.useState(""),[m,y]=Et.useState([]),b=t.reduce((M,C)=>(M[C.courseCode]||(M[C.courseCode]=[]),M[C.courseCode].push(C),M),{}),x=(()=>{const M=new Set;p.forEach(L=>{(b[L]||[]).forEach(z=>{z.facultyName&&z.facultyInitial&&M.add(JSON.stringify({name:z.facultyName,initial:z.facultyInitial,courses:[]}))})});const C=Array.from(M).map(L=>JSON.parse(L));return C.forEach(L=>{p.forEach(_=>{(b[_]||[]).some(Q=>Q.facultyInitial===L.initial)&&L.courses.push(_)})}),C})(),w=M=>{if(!M.trim()){y(x);return}const C=M.toLowerCase(),L=x.filter(_=>{const z=_.name.toLowerCase(),G=_.initial.toLowerCase();return!!(z.includes(C)||G.includes(C)||z.split(" ").map(at=>at.charAt(0)).join("").toLowerCase().includes(C))});y(L)};Et.useEffect(()=>{w(d)},[d]),Et.useEffect(()=>{y(x)},[p]);const T=M=>{if(!u){alert("Please select a course first to assign this faculty.");return}o(C=>({...C,[u]:M})),h(""),f("")},O=M=>{o(C=>{const L={...C};return delete L[M],L})},R=()=>{e(l)};return E.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[E.jsxs("div",{className:"mb-6",children:[E.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Select Preferred Faculty"}),E.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Choose your preferred faculty for each course (optional). This will help us prioritize routines."})]}),E.jsx("div",{className:"flex mb-8",children:i&&E.jsxs("button",{onClick:i,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-medium flex items-center",children:[E.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]})}),E.jsxs("div",{className:"mb-6",children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select a course to assign preferred faculty:"}),E.jsxs("select",{value:u,onChange:M=>h(M.target.value),className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[E.jsx("option",{value:"",children:"Choose a course..."}),p.filter(M=>!l[M]).map(M=>{const C=b[M][0];return E.jsxs("option",{value:M,children:[M," - ",C.title]},M)})]})]}),u&&E.jsxs("div",{className:"mb-6",children:[E.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Search for faculty to assign to ",u,":"]}),E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:E.jsx("svg",{className:"h-5 w-5 text-gray-400 dark:text-gray-300",viewBox:"0 0 20 20",fill:"currentColor",children:E.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),E.jsx("input",{type:"text",placeholder:"Search faculty by name or initials...",value:d,onChange:M=>f(M.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg text-sm placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),u&&E.jsxs("div",{className:"mb-6",children:[E.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:["Available Faculty for ",u]}),E.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:m.filter(M=>M.courses.includes(u)).map(M=>E.jsx("div",{className:"p-3 border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-600 hover:border-gray-300 dark:hover:border-gray-500 transition-colors",onClick:()=>T(M),children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{children:[E.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:M.name}),E.jsxs("div",{className:"text-sm text-gray-600",children:["(",M.initial,")"]})]}),E.jsxs("div",{className:"text-sm text-gray-500",children:["Teaches ",M.courses.length," of your selected courses"]})]})},M.initial))}),m.filter(M=>M.courses.includes(u)).length===0&&E.jsx("div",{className:"text-center py-8 text-gray-500",children:d?`No faculty found matching "${d}" for ${u}`:`No faculty available for ${u}`})]}),Object.keys(l).length>0&&E.jsxs("div",{className:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[E.jsx("h3",{className:"font-semibold text-green-900 dark:text-green-100 mb-3",children:"Your Faculty Preferences"}),E.jsx("div",{className:"space-y-2",children:Object.entries(l).map(([M,C])=>E.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-700 p-3 rounded-lg",children:[E.jsxs("div",{children:[E.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:M}),E.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Preferred: ",C.name," (",C.initial,")"]})]}),E.jsx("button",{onClick:()=>O(M),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:"Remove"})]},M))}),E.jsx("div",{className:"mt-6 flex justify-center",children:E.jsx("button",{onClick:R,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Continue to Time & Day Preferences"})})]}),Object.keys(l).length===0&&E.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg",children:[E.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-center mb-4",children:"No faculty preferences set. You can continue without selecting any preferred faculty, or select courses above to assign preferred faculty."}),E.jsx("div",{className:"flex justify-center",children:E.jsx("button",{onClick:R,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Continue to Time & Day Preferences"})})]})]})}function bb({onContinue:p,onBack:t,timePreferences:e}){const[i,a]=Et.useState(e?.preferredStartTime||"08:30 am"),[l,o]=Et.useState(e?.allowMonday!==void 0?e.allowMonday:!0),u=["08:30 am","09:51 am","11:11 am","12:31 pm","1:51 pm","3:11 pm"],h=()=>{p({preferredStartTime:i,allowMonday:l})};return E.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[E.jsxs("div",{className:"mb-6",children:[E.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Time & Day Preferences"}),E.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Set your preferred earliest class start time and day preferences."})]}),E.jsx("div",{className:"flex mb-8",children:t&&E.jsxs("button",{onClick:t,className:"px-6 py-3 bg-gray-600 dark:bg-gray-700 text-white rounded-lg hover:bg-gray-700 dark:hover:bg-gray-600 transition-colors font-medium flex items-center",children:[E.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]})}),E.jsxs("div",{className:"space-y-8",children:[E.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 border border-gray-200 dark:border-gray-700 rounded-lg",children:[E.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Preferred Earliest Class Start Time"}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"No classes should start before this time:"}),E.jsx("select",{value:i,onChange:d=>a(d.target.value),className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:u.map(d=>E.jsx("option",{value:d,children:d},d))})]}),E.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:E.jsxs("div",{className:"flex",children:[E.jsx("div",{className:"flex-shrink-0",children:E.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:E.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),E.jsx("div",{className:"ml-3",children:E.jsxs("p",{className:"text-sm text-blue-800",children:[E.jsx("strong",{children:"Important:"})," The system will strictly enforce this time preference. Any routines with classes starting before ",i," will not be shown."]})})]})})]})]}),E.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 border border-gray-200 dark:border-gray-700 rounded-lg",children:[E.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Monday Preference"}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{className:"flex items-center",children:[E.jsx("input",{id:"allow-monday",type:"checkbox",checked:l,onChange:d=>o(d.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded bg-gray-100 dark:bg-gray-700"}),E.jsx("label",{htmlFor:"allow-monday",className:"ml-2 block text-sm text-gray-900 dark:text-gray-300",children:"I'm willing to take classes on Monday"})]}),E.jsx("div",{className:`border rounded-lg p-4 ${l?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200"}`,children:E.jsxs("div",{className:"flex",children:[E.jsx("div",{className:"flex-shrink-0",children:E.jsx("svg",{className:`h-5 w-5 ${l?"text-green-400":"text-yellow-400"}`,viewBox:"0 0 20 20",fill:"currentColor",children:E.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),E.jsx("div",{className:"ml-3",children:E.jsx("p",{className:`text-sm ${l?"text-green-800":"text-yellow-800"}`,children:l?"Monday classes will be included in your routine suggestions.":"Monday classes will be excluded from your routine suggestions. This may limit your options."})})]})})]})]}),E.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-6 border border-gray-200 dark:border-gray-700 rounded-lg",children:[E.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Your Preferences Summary"}),E.jsxs("div",{className:"space-y-2 text-sm mb-6",children:[E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Earliest class start time:"}),E.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i})]}),E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Monday classes:"}),E.jsx("span",{className:`font-medium ${l?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:l?"Allowed":"Not allowed"})]})]}),E.jsx("div",{className:"flex justify-center",children:E.jsx("button",{onClick:h,className:"px-6 py-3 bg-blue-600 dark:bg-blue-700 text-white rounded-lg hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors font-medium",children:"Generate My Routines"})})]})]})]})}function xb({selectedCourses:p,facultyPreferences:t,timePreferences:e,courses:i,routineResults:a,onRoutineGenerated:l,onBack:o}){const[u,h]=Et.useState([]),[d,f]=Et.useState([]),[m,y]=Et.useState(!1),[b,A]=Et.useState(!1),[x,w]=Et.useState(null),[T,O]=Et.useState(20),[R,M]=Et.useState(5);console.log("🔄 EnhancedRoutineGenerator mounted/remounted"),Et.useEffect(()=>{a&&(h(a.preferred||[]),f(a.alternative||[]),w(a.rejectionReasons||null),y(!1))},[]),i.reduce((Y,it)=>(Y[it.courseCode]||(Y[it.courseCode]=[]),Y[it.courseCode].push(it),Y),{});const C=Y=>{if(!Y)return 0;const it=Y.trim().toLowerCase();if(it.includes("am")||it.includes("pm")){let gt,k;if(it.includes(":pm")||it.includes(":am")){const rt=it.lastIndexOf(":");gt=it.substring(0,rt),k=it.substring(rt+1)}else{const rt=it.split(" ");gt=rt[0],k=rt[1]}const K=gt.split(":"),nt=parseInt(K[0],10),et=parseInt(K[1],10);let ot=nt;return k==="pm"&&nt!==12?ot+=12:k==="am"&&nt===12&&(ot=0),ot*60+et}const D=it.split(" ")[0].split(":"),j=parseInt(D[0],10),st=parseInt(D[1],10);return j*60+st},L=Y=>{if(!Y)return!1;let it=Y;Y.includes(" - ")&&(it=Y.split(" - ")[0].trim());const lt=C(e.preferredStartTime);return C(it)<lt},_=Y=>e.allowMonday?!0:Y.day1!=="Mon"&&Y.day2!=="Mon",z=(Y,it)=>{if(!Y||!it)return!1;const lt=st=>{const gt=st.split(" - ");return gt.length!==2?null:{start:C(gt[0]),end:C(gt[1])}},D=lt(Y),j=lt(it);return!D||!j?!1:!(D.end<=j.start||j.end<=D.start)},G=Y=>{for(let it=0;it<Y.length;it++)for(let lt=it+1;lt<Y.length;lt++){const D=Y[it],j=Y[lt];if(D.day1===j.day1&&z(D.time1,j.time1)||D.day1===j.day2&&z(D.time1,j.time2)||D.day2===j.day1&&z(D.time2,j.time1)||D.day2===j.day2&&z(D.time2,j.time2))return!0}return!1},Q=async()=>{console.log("🔄 Starting routine generation..."),h([]),f([]),w(null),y(!0);try{if(!p||p.length===0){console.warn("⚠️ No courses selected"),y(!1);return}if(!i||i.length===0){console.warn("⚠️ No courses data available"),y(!1);return}if(!e||!e.preferredStartTime){console.warn("⚠️ No time preferences set"),y(!1);return}await new Promise(rt=>setTimeout(rt,100));const Y=p.map(rt=>i.filter($=>$.courseCode===rt));if(console.log("📊 Course sections array:",Y),Y.filter(rt=>rt.length===0).length>0){console.error("❌ Some courses have no sections available"),h([]),f([]),y(!1);return}const lt=(rt,X=0,$=[])=>{if(X===rt.length)return[$];const tt=[],ht=rt[X];for(const At of ht){const Rt=[...$,At];tt.push(...lt(rt,X+1,Rt))}return tt};console.log("⚙️ Generating combinations...");const D=lt(Y);console.log("📈 Total combinations:",D.length),await new Promise(rt=>setTimeout(rt,50));const j=[],st={timeConflicts:0,beforePreferredTime:0,mondayRestriction:0,total:D.length},gt=10,k=20;let K=0,nt=0;for(let rt=0;rt<D.length;rt++){const X=D[rt];if(G(X)){st.timeConflicts++;continue}let $=!0;for(const At of X)if(L(At.time1)||L(At.time2)){$=!1;break}if(!$){st.beforePreferredTime++;continue}let tt=!0;for(const At of X)if(!_(At)){tt=!1;break}if(!tt){st.mondayRestriction++;continue}let ht=!0;for(const At of X){const Rt=t[At.courseCode];if(Rt?.name&&!(At.facultyName&&At.facultyName.toLowerCase().trim()===Rt.name.toLowerCase().trim())){ht=!1;break}}if(j.push(X),ht?K++:nt++,K>=gt||K>=5&&nt>=k){console.log(`🚀 Early termination: Found ${K} preferred and ${nt} alternative routines after checking ${rt+1}/${D.length} combinations`);break}rt>0&&rt%1e3===0&&console.log(`🔍 Processed ${rt}/${D.length} combinations (${K} preferred, ${nt} alternatives)`)}console.log("📊 Rejection Analysis:",st),console.log("✅ Valid routines after filtering:",j.length),await new Promise(rt=>setTimeout(rt,50));const et=[],ot=[];j.forEach(rt=>{let X=!0;const $=[];rt.forEach(ht=>{const At=t[ht.courseCode];let Rt=null,Zt=null;At&&(typeof At=="string"?Zt=At:At.name&&(Rt=At.name,Zt=At.initial));let pe=!1;if(Rt?pe=ht.facultyName&&ht.facultyName.toLowerCase().trim()===Rt.toLowerCase().trim():Zt&&(Zt.toLowerCase().trim()==="tba"?pe=!1:pe=ht.facultyInitial&&ht.facultyInitial.toLowerCase().trim()!=="tba"&&ht.facultyInitial.trim()===Zt.trim()),(Rt||Zt)&&!pe){X=!1;const cs=Rt||Zt;$.push(`${ht.courseCode}: You preferred ${cs} but got ${ht.facultyName}`)}});const tt={sections:rt,warnings:$,id:Math.random().toString(36).substr(2,9)};X?et.push(tt):ot.push(tt)}),console.log("🎯 Preferred routines:",et.length),console.log("⚠️ Alternative routines:",ot.length),ot.sort((rt,X)=>rt.warnings.length!==X.warnings.length?rt.warnings.length-X.warnings.length:0),console.log("🔄 Sorted alternatives by number of warnings:",ot.map(rt=>rt.warnings.length)),h(et),f(ot),y(!1),w(st),l&&l({preferred:et,alternative:ot,rejectionReasons:st}),console.log("🎉 Routine generation complete!")}catch(Y){console.error("❌ Error during routine generation:",Y),h([]),f([]),y(!1)}};Et.useEffect(()=>{h([]),f([]),w(null),O(20),M(5),p&&p.length>0&&t&&e&&i&&i.length>0&&Q()},[p,t,e]);const J=Y=>Y?Y.replace(" - "," - "):"",at=({routine:Y,isAlternative:it=!1})=>E.jsxs("div",{className:`border rounded-lg p-4 ${it?"border-yellow-200 bg-yellow-50 dark:bg-yellow-900/20 dark:border-yellow-800":"border-green-200 bg-green-50 dark:bg-green-900/20 dark:border-green-800"}`,children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx("div",{className:`w-3 h-3 rounded-full ${it?"bg-yellow-500":"bg-green-500"}`}),E.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:it?"Alternative Routine":"Preferred Routine"})]}),Y.warnings.length>0&&E.jsxs("span",{className:"text-sm text-yellow-600 dark:text-yellow-400 font-medium",children:[Y.warnings.length," warning",Y.warnings.length!==1?"s":""]})]}),Y.warnings.length>0&&E.jsx("div",{className:"mb-4 p-3 bg-yellow-100 dark:bg-yellow-900/30 border border-yellow-300 dark:border-yellow-700 rounded-lg",children:E.jsxs("div",{className:"flex items-start",children:[E.jsx("svg",{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400 mt-0.5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:E.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),E.jsxs("div",{children:[E.jsx("div",{className:"font-medium text-yellow-800 dark:text-yellow-200 mb-1",children:"Warnings:"}),E.jsx("ul",{className:"text-sm text-yellow-700 dark:text-yellow-300 space-y-1",children:Y.warnings.map((lt,D)=>E.jsxs("li",{children:["• ",lt]},D))})]})]})}),E.jsx("div",{className:"overflow-x-auto",children:E.jsxs("table",{className:"min-w-full",children:[E.jsx("thead",{children:E.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[E.jsx("th",{className:"text-center py-2 px-3 text-sm font-bold text-gray-700 dark:text-gray-300",children:"Course"}),E.jsx("th",{className:"text-center py-2 px-3 text-sm font-bold text-gray-700 dark:text-gray-300",children:"Section"}),E.jsx("th",{className:"text-center py-2 px-3 text-sm font-bold text-gray-700 dark:text-gray-300",children:"Faculty"}),E.jsx("th",{className:"text-center py-2 px-3 text-sm font-bold text-gray-700 dark:text-gray-300",children:"Schedule"}),E.jsx("th",{className:"text-center py-2 px-3 text-sm font-bold text-gray-700 dark:text-gray-300",children:"Room"})]})}),E.jsx("tbody",{children:Y.sections.map((lt,D)=>E.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700",children:[E.jsxs("td",{className:"py-2 px-3",children:[E.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:lt.courseCode}),E.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:lt.title})]}),E.jsx("td",{className:"py-2 px-3 text-sm text-gray-900 dark:text-white",children:lt.section}),E.jsxs("td",{className:"py-2 px-3",children:[E.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:lt.facultyName}),E.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",lt.facultyInitial,")"]})]}),E.jsxs("td",{className:"py-2 px-3 text-sm text-gray-900 dark:text-white",children:[E.jsxs("div",{children:[lt.day1," ",J(lt.time1)]}),lt.day2&&lt.time2&&E.jsxs("div",{children:[lt.day2," ",J(lt.time2)]})]}),E.jsxs("td",{className:"py-2 px-3 text-sm text-gray-900 dark:text-white",children:[E.jsx("div",{children:lt.room1}),lt.room2&&E.jsx("div",{children:lt.room2})]})]},D))})]})})]});return m?E.jsxs("div",{className:"flex items-center justify-center py-12",children:[E.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),E.jsx("span",{className:"ml-3 text-gray-600",children:"Generating your routines..."})]}):E.jsxs("div",{className:"max-w-6xl mx-auto p-6 bg-white dark:bg-gray-900 min-h-screen",children:[E.jsx("div",{className:"mb-6",children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{children:[E.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Your Routine Suggestions"}),E.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Here are your personalized routine suggestions based on your preferences."})]}),E.jsxs("button",{onClick:()=>{Q()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center",children:[E.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]})}),E.jsxs("div",{className:"mb-8",children:[E.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[E.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),"Best Match Routines (",u.length>R?`${R} of ${u.length}`:u.length,")"]}),u.length===0?E.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6 text-center",children:E.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"No routines found that match all your preferred faculty choices."})}):E.jsxs("div",{className:"space-y-4",children:[u.slice(0,R).map((Y,it)=>E.jsxs("div",{children:[E.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:["Best Match #",it+1]}),E.jsx(at,{routine:Y})]},Y.id)),u.length>R&&E.jsx("div",{className:"flex justify-center pt-4",children:E.jsxs("button",{onClick:()=>M(Y=>Math.min(Y+5,u.length)),className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium flex items-center",children:[E.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Load More (",Math.min(5,u.length-R)," more)"]})})]})]}),d.length>0&&E.jsxs("div",{children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center",children:[E.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full mr-2"}),"Alternative Routines (",d.length>T?`${T} of ${d.length}`:d.length,")"]}),E.jsx("button",{onClick:()=>A(!b),className:"text-blue-600 hover:text-blue-800 font-medium",children:b?"Hide Alternatives":"Show Alternatives"})]}),b&&E.jsxs("div",{className:"space-y-4",children:[E.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:E.jsxs("div",{className:"flex items-start",children:[E.jsx("svg",{className:"h-5 w-5 text-yellow-600 mt-0.5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:E.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),E.jsxs("div",{children:[E.jsx("div",{className:"font-medium text-yellow-800 mb-1",children:"Alternative Routines Notice:"}),E.jsxs("p",{className:"text-sm text-yellow-700",children:["These routines don't match all your preferred faculty choices, but are sorted from best to worst based on the number of faculty mismatches. Each routine will show specific warnings about faculty mismatches.",d.length>T&&E.jsxs("span",{className:"block mt-1 font-medium",children:["Showing ",T," out of ",d.length," alternatives."]})]})]})]})}),d.slice(0,T).map((Y,it)=>E.jsxs("div",{children:[E.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:["Alternative #",it+1,E.jsxs("span",{className:"text-yellow-600 font-medium ml-2",children:["(",Y.warnings.length," mismatch",Y.warnings.length!==1?"es":"",")"]})]}),E.jsx(at,{routine:Y,isAlternative:!0})]},Y.id)),d.length>T&&E.jsx("div",{className:"flex justify-center pt-4",children:E.jsxs("button",{onClick:()=>O(Y=>Math.min(Y+10,d.length)),className:"px-6 py-3 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors font-medium flex items-center",children:[E.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Load More (",Math.min(10,d.length-T)," more)"]})})]})]}),u.length===0&&d.length===0&&E.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[E.jsx("div",{className:"text-red-800 font-medium mb-4 text-center",children:"No Valid Routines Found"}),x&&E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{className:"bg-white p-4 rounded-lg border border-red-200",children:[E.jsx("h4",{className:"font-medium text-red-800 mb-3",children:"Detailed Analysis:"}),E.jsxs("div",{className:"space-y-2 text-sm",children:[E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{className:"text-gray-700",children:"Total possible combinations:"}),E.jsx("span",{className:"font-medium text-gray-900",children:x.total})]}),x.timeConflicts>0&&E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{className:"text-gray-700",children:"❌ Rejected due to time conflicts:"}),E.jsx("span",{className:"font-medium text-red-600",children:x.timeConflicts})]}),x.beforePreferredTime>0&&E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{className:"text-gray-700",children:"❌ Rejected due to early start times:"}),E.jsx("span",{className:"font-medium text-red-600",children:x.beforePreferredTime})]}),x.mondayRestriction>0&&E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{className:"text-gray-700",children:"❌ Rejected due to Monday restriction:"}),E.jsx("span",{className:"font-medium text-red-600",children:x.mondayRestriction})]})]})]}),E.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[E.jsx("h4",{className:"font-medium text-blue-800 mb-3",children:"💡 Suggestions to get routines:"}),E.jsxs("ul",{className:"space-y-2 text-sm text-blue-700",children:[x.beforePreferredTime>0&&E.jsxs("li",{children:["• Try selecting an earlier preferred start time (currently: ",e.preferredStartTime,")"]}),x.mondayRestriction>0&&!e.allowMonday&&E.jsx("li",{children:"• Consider allowing Monday classes to get more options"}),x.timeConflicts>0&&E.jsx("li",{children:"• Some selected courses may have unavoidable time conflicts"}),x.total<10&&E.jsx("li",{children:"• Very few combinations possible - try selecting courses with more sections"})]})]})]}),!x&&E.jsxs("div",{className:"text-center",children:[E.jsx("p",{className:"text-red-600 mb-4",children:"No routines could be generated with your current preferences. Common reasons:"}),E.jsxs("ul",{className:"text-sm text-red-600 space-y-1 max-w-md mx-auto text-left",children:[E.jsx("li",{children:"• Selected courses have unavoidable time conflicts"}),E.jsx("li",{children:"• Your preferred start time is too restrictive"}),E.jsx("li",{children:"• Monday restriction limits available options"}),E.jsx("li",{children:"• Not enough sections available for selected courses"})]})]})]}),o&&E.jsx("div",{className:"mt-8 flex justify-center",children:E.jsxs("button",{onClick:o,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-medium flex items-center",children:[E.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Change Preferences"]})})]})}const Ab=({darkMode:p,toggleDarkMode:t})=>E.jsx("button",{onClick:t,className:"fixed top-6 right-6 z-50 p-3 rounded-full bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 border border-gray-200 dark:border-gray-700","aria-label":"Toggle dark mode",children:E.jsxs("div",{className:"relative w-6 h-6",children:[E.jsx("svg",{className:`absolute inset-0 w-6 h-6 text-yellow-500 transition-all duration-300 ${p?"scale-0 rotate-90 opacity-0":"scale-100 rotate-0 opacity-100"}`,fill:"currentColor",viewBox:"0 0 20 20",children:E.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}),E.jsx("svg",{className:`absolute inset-0 w-6 h-6 text-gray-700 dark:text-gray-300 transition-all duration-300 ${p?"scale-100 rotate-0 opacity-100":"scale-0 -rotate-90 opacity-0"}`,fill:"currentColor",viewBox:"0 0 20 20",children:E.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})]})});function Sb({darkMode:p,toggleDarkMode:t}){const[e,i]=Et.useState(1),[a,l]=Et.useState([]),[o,u]=Et.useState([]),[h,d]=Et.useState({}),[f,m]=Et.useState({}),[y,b]=Et.useState(null);Et.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[e]);const A=()=>{window.scrollTo({top:0,behavior:"smooth"}),window.location.reload()},x=C=>{console.log("handlePdfParsed called with courses:",C.length),l(C),i(2),console.log("Current step set to 2")},w=C=>{u(C),b(null),i(3)},T=C=>{JSON.stringify(C)!==JSON.stringify(h)&&b(null),d(C),i(4)},O=C=>{JSON.stringify(C)!==JSON.stringify(f)&&b(null),m(C),i(5)},R=C=>{b(C)},M=C=>{i(C)};return E.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 transition-colors duration-300",children:[E.jsx(Ab,{darkMode:p,toggleDarkMode:t}),E.jsx("div",{className:"fixed top-4 left-4 z-50",children:E.jsxs("button",{onClick:A,className:"flex items-center px-3 py-2 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 border border-gray-200 dark:border-gray-700",children:[E.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),E.jsx("span",{className:"text-sm",children:"Home"})]})}),E.jsx("div",{className:"glass border-0 border-b border-gray-200 dark:border-gray-700",children:E.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:E.jsxs("div",{className:"text-center animate-fade-in",children:[E.jsx("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-primary-600 to-primary-800 dark:from-primary-400 dark:to-primary-600 bg-clip-text text-transparent mb-3",children:"Course Routine Planner"}),E.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"Create your perfect semester schedule with smart routine suggestions powered by AI"})]})})}),E.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[E.jsx("div",{className:"mb-8 animate-slide-up",children:E.jsx("div",{className:"flex items-center justify-center space-x-3 md:space-x-4",children:[{step:1,label:"Upload PDF",icon:"📄"},{step:2,label:"Select Courses",icon:"📚"},{step:3,label:"Choose Faculty",icon:"👨‍🏫"},{step:4,label:"Set Preferences",icon:"⚙️"},{step:5,label:"Generate Routines",icon:"🎯"}].map(({step:C,label:L,icon:_})=>E.jsxs("div",{className:"flex items-center",children:[E.jsx("div",{className:`relative w-8 h-8 md:w-10 md:h-10 rounded-full flex items-center justify-center text-xs font-semibold transition-all duration-300 ${e>=C?"bg-gradient-to-r from-primary-500 to-primary-600 text-white shadow-lg scale-105":"bg-white dark:bg-dark-800 text-gray-500 dark:text-gray-400 shadow-sm"}`,children:e>=C?E.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):E.jsx("span",{className:"text-sm md:text-base",children:_})}),E.jsx("div",{className:"ml-2 hidden md:block",children:E.jsx("div",{className:`text-xs font-medium transition-colors duration-300 ${e>=C?"text-primary-600 dark:text-primary-400":"text-gray-500 dark:text-gray-400"}`,children:L})}),C<5&&E.jsx("div",{className:`w-6 md:w-8 h-0.5 ml-2 md:ml-3 transition-all duration-300 ${e>C?"bg-gradient-to-r from-primary-500 to-primary-600":"bg-gray-200 dark:bg-gray-700"}`})]},C))})}),E.jsxs("div",{className:"card-elevated animate-scale-in",children:[e===1&&E.jsx(mb,{onParsed:x}),e===2&&E.jsx(vb,{courses:a,selectedCourses:o,onContinue:w,onBack:()=>M(1)}),e===3&&E.jsx(yb,{selectedCourses:o,courses:a,facultyPreferences:h,onContinue:T,onBack:()=>M(2)}),e===4&&E.jsx(bb,{timePreferences:f,onContinue:O,onBack:()=>M(3)}),e===5&&E.jsx(xb,{selectedCourses:o,facultyPreferences:h,timePreferences:f,courses:a,routineResults:y,onRoutineGenerated:R,onBack:()=>M(4)},`${JSON.stringify(o)}-${JSON.stringify(h)}-${JSON.stringify(f)}`)]}),e===5&&E.jsx("div",{className:"mt-8 flex justify-center space-x-4 animate-fade-in",children:E.jsxs("button",{onClick:()=>M(1),className:"btn-primary",children:[E.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Start Over"]})})]})]})}const Eb=()=>{const p=localStorage.getItem("theme");return p?p==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches},du=p=>{p?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")};function wb(){const[p,t]=Et.useState(()=>{const o=Eb();return du(o),o}),[e,i]=Et.useState(!0);Et.useEffect(()=>{du(p),localStorage.setItem("theme",p?"dark":"light")},[p]),Et.useEffect(()=>{du(p)},[]),Et.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[e]);const a=()=>{t(!p)},l=()=>{i(!1),window.scrollTo({top:0,behavior:"smooth"})};return e?E.jsx(Sv,{onGetStarted:l,darkMode:p,toggleDarkMode:a}):E.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 transition-colors duration-300",children:E.jsx(Sb,{darkMode:p,toggleDarkMode:a})})}Av.createRoot(document.getElementById("root")).render(E.jsx(Et.StrictMode,{children:E.jsx(wb,{})}));
